(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5953505a"],{1:function(e,t){},"206f":function(e,t,a){"use strict";a("f678")},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-wrapper"},[a("el-pagination",{attrs:{background:e.background,"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:e.layout},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],r=(a("a9e3"),{name:"Pagination",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[5,10,15,20,50,1e3]}},total:{type:Number,default:0,required:!0},layout:{type:String,default:"total, prev, pager, next, sizes, jumper"}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("changePageSize",{page:this.currentPage,limit:e}),this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}}),l=r,s=(a("206f"),a("2877")),o=Object(s["a"])(l,i,n,!1,null,null,null);t["a"]=o.exports},"53c0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-classic-wrapper"},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"control-btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.batchPassed}},[e._v("批量通过")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-delete"},on:{click:e.batchDele}},[e._v("批量删除")])],1),a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:e.search,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"主播Id",prop:"anchorId"}},[a("el-input",{attrs:{placeholder:"主播Id"},model:{value:e.search.anchorId,callback:function(t){e.$set(e.search,"anchorId",t)},expression:"search.anchorId"}})],1),a("el-form-item",{attrs:{label:"区域"}},[a("el-select",{attrs:{disabled:0!==e.authAreaId,placeholder:"请选择"},model:{value:e.search.areaId,callback:function(t){e.$set(e.search,"areaId",t)},expression:"search.areaId"}},e._l(e.areaData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.reviewStatus,callback:function(t){e.$set(e.search,"reviewStatus",t)},expression:"search.reviewStatus"}},e._l(e.reviewStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"ownerId",label:"主播Id",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"areaName",label:"区域",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"thumb",label:"视频",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.thumb,contain:""},on:{click:function(a){return e.play(t.row)}}})]}}])}),a("el-table-column",{attrs:{prop:"status",label:"审核状态",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"ownerId",label:"已有视频",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.toDialog("videoList",t.row)}}},[e._v("查看")])]}}])}),a("el-table-column",{attrs:{prop:"createdAt",label:"录制时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.passed(t.row)}}},[e._v("通过")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.delVideo(t.row)}}},[e._v("删除")])]}}])})],1),a("Pagination",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{"update:page":function(t){return e.$set(e.search.page,"currentPage",t)},"update:limit":function(t){return e.$set(e.search.page,"pageSize",t)},pagination:e.fetchData,changePageSize:function(t){return e.changePageSize(t)}}}),a("el-dialog",{attrs:{title:"播放视频",visible:e.playVisible,"before-close":e.closeVideo,"append-to-body":!0},on:{"update:visible":function(t){e.playVisible=t}}},[a("div",{staticClass:"content-item"},[a("VueVideoPlayer",{ref:"myVideoPlayer"})],1)]),a("videoList",{ref:"videoList",on:{fetchData:e.fetchData}})],1)],1)},n=[],r=(a("ac1f"),a("841c"),a("159b"),a("333d")),l=a("7139"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"查看视频",visible:e.dialogVisible,"append-to-body":"",width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"table-classic-wrapper dialog-list"},[a("div",{staticClass:"control-btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.batchPassed}},[e._v("批量通过")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-delete"},on:{click:e.batchDele}},[e._v("批量删除")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"ownerId",label:"所有者ID",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"thumb",label:"视频",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.thumb,contain:""},on:{click:function(a){return e.play(t.row)}}})]}}])}),a("el-table-column",{attrs:{prop:"areaStr",label:"区域",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"status",label:"审核状态",align:"center",width:"120"}}),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.passed(t.row)}}},[e._v("通过")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.delVideo(t.row)}}},[e._v("删除")])]}}])})],1),a("Pagination",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{"update:page":function(t){return e.$set(e.search.page,"currentPage",t)},"update:limit":function(t){return e.$set(e.search.page,"pageSize",t)},pagination:e.fetchData}})],1),a("el-dialog",{attrs:{title:"播放视频",visible:e.playVisible,"before-close":e.closeVideo,"append-to-body":!0},on:{"update:visible":function(t){e.playVisible=t}}},[a("div",{staticClass:"content-item"},[a("VueVideoPlayer",{ref:"myVideoPlayer"})],1)])],1)},o=[],c=a("be3f"),u=a("c466"),d={name:"Table",components:{Pagination:r["a"],VueVideoPlayer:c["a"]},data:function(){return{listLoading:!0,search:{anchorId:void 0,status:5,page:{currentPage:1,pageSize:10}},videoList:[],imgList:[],total:0,multipleSelection:[],playVisible:!1,dialogVisible:!1,appList:Object(l["c"])(),areaList:Object(l["f"])(!0),fileTypeList:Object(l["p"])()}},created:function(){this.fetchData()},methods:{init:function(e){this.search.anchorId=e.ownerId,this.fetchData()},fetchData:function(){var e=this;this.listLoading=!0,this.$service.audit.getLiveList(this.search,(function(t){var a=t.getRecordsList(),i=[];a.forEach((function(t,a){var n={id:t.getId(),app:Object(l["e"])(e.appList,t.getAppId()),areaStr:Object(l["g"])(e.areaList,t.getAreaId()),type:Object(l["g"])(e.fileTypeList,t.getType()),ownerId:t.getOwnerId(),thumb:t.getThumb(),uri:t.getUri(),status:Object(l["D"])(t.getStatus())};i.push(n)})),e.total=t.getTotalCount(),e.tableData=i,e.listLoading=!1}))},play:function(e){var t=this;this.playVisible=!0;var a=e.uri;this.$nextTick((function(){t.$refs.myVideoPlayer.initSrc(a)}))},handleSelectionChange:function(e){this.multipleSelection=e},closeVideo:function(){var e=this;this.playVisible=!1,this.$nextTick((function(){e.$refs.myVideoPlayer.emptySrc()}))},closeDialog:function(){this.dialogVisible=!1,this.resetForm(),this.$emit("fetchData")},passed:function(e){var t=this,a={id:e.id,status:5};this.$service.audit.processLive(a,(function(e){e?t.$message.success("审核通过 !"):t.$message.error("审核失败 !"),t.fetchData()}))},delVideo:function(e){var t=this,a={id:e.id,status:4};this.$service.audit.processLive(a,(function(e){e?t.$message.success("已删除 !"):t.$message.error("删除失败 !"),t.fetchData()}))},batchPassed:function(){var e=this;this.multipleSelection.forEach((function(t){e.passed(t)}))},batchDele:function(){var e=this;this.multipleSelection.forEach((function(t){e.delVideo(t)}))}}},p=d,h=(a("d428"),a("2877")),f=Object(h["a"])(p,s,o,!1,null,null,null),g=f.exports,b={name:"Table",components:{Pagination:r["a"],videoList:g,VueVideoPlayer:c["a"]},data:function(){return{listLoading:!0,search:{areaId:void 0,reviewStatus:2,page:{currentPage:1,pageSize:10}},total:0,authAreaId:Object(l["n"])(),tableData:[],multipleSelection:[],playVisible:!1,areaData:Object(l["f"])(!1),reviewStatus:Object(l["D"])(),appListAll:Object(l["c"])(!1)}},created:function(){this.search.areaId=0===this.authAreaId?this.areaData[0].value:this.authAreaId,this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,this.$service.audit.getLiveList(this.search,(function(t){var a=t.getRecordsList(),i=[];a.forEach((function(t,a){var n={id:t.getId(),appId:t.getAppId(),app:Object(l["e"])(e.appListAll,t.getAppId()),areaId:t.getAreaId(),areaName:Object(l["g"])(e.areaData,t.getAreaId()),ownerId:t.getOwnerId(),ownerType:t.getOwnerType(),thumb:t.getThumb(),likes:t.getLikes(),uri:t.getUri(),status:Object(l["D"])(t.getStatus()),createdAt:Object(u["f"])(t.getCreatedAt())};i.push(n)})),e.total=t.getTotalCount(),e.tableData=i,e.listLoading=!1}))},onSubmit:function(){this.search.currentPage=1,this.fetchData()},handleSelectionChange:function(e){this.multipleSelection=e},toDialog:function(e,t){var a=this;this.$refs[e].dialogVisible=!0,this.$nextTick((function(){a.$refs[e].init(t)}))},changePageSize:function(e){this.search.page.pageSize=e.limit},play:function(e){var t=this;this.playVisible=!0;var a=e.uri;console.log("播放视频"),console.log(e),console.log(e.uri),this.$nextTick((function(){t.$refs.myVideoPlayer.initSrc(a)}))},closeVideo:function(){var e=this;this.playVisible=!1,this.$nextTick((function(){e.$refs.myVideoPlayer.emptySrc()}))},passed:function(e){var t=this,a={id:e.id,status:5};this.$service.audit.processLive(a,(function(e){e?t.$message.success("审核通过 !"):t.$message.error("审核失败 !"),t.fetchData()}))},delVideo:function(e){var t=this,a={id:e.id,status:4};this.$service.audit.processLive(a,(function(e){e?t.$message.success("已删除 !"):t.$message.error("拒绝删除 !"),t.fetchData()}))},batchPassed:function(){var e=this;this.multipleSelection.forEach((function(t){e.passed(t)}))},batchDele:function(){var e=this;this.multipleSelection.forEach((function(t){e.delVideo(t)}))}}},m=b,y=(a("cee6"),Object(h["a"])(m,i,n,!1,null,null,null));t["default"]=y.exports},"6bc6":function(e,t,a){},be3f:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("videoPlayer",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}})},n=[],r=a("d6d3"),l=(a("fda2"),{name:"VueVideoPlayer",components:{videoPlayer:r["videoPlayer"]},data:function(){return{playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}},methods:{initSrc:function(e){this.playerOptions.sources[0].src=e},emptySrc:function(){this.playerOptions.sources[0].src=""}}}),s=l,o=a("2877"),c=Object(o["a"])(s,i,n,!1,null,null,null);t["a"]=c.exports},c466:function(e,t,a){"use strict";function i(e){return 0===e?"":new Date(1e3*e).format("yyyy-MM-dd")}function n(e){return 0===e?"":new Date(1e3*e).format("yyyy-MM-dd hh:mm:ss")}function r(e){return"undefined"==typeof e&&(e=new Date),e.format("yyyy-MM-dd")}function l(e){var t=new Date((new Date).format("yyyy-MM-dd"));return e?t.setDate(t.getDate()+e):t}function s(e){return new Date(e.toLocaleDateString()).getTime()/1e3}function o(e){return s(e)+86400-1}a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return o}))},cee6:function(e,t,a){"use strict";a("e4ff")},d428:function(e,t,a){"use strict";a("6bc6")},e4ff:function(e,t,a){},f678:function(e,t,a){}}]);
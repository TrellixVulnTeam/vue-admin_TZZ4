(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b3e88ee"],{6793:function(t,a,e){"use strict";e("b69b")},b69b:function(t,a,e){},d37e:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"home-wrapper"},[e("el-row",{staticClass:"date-box",attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"always","body-style":{padding:"10px",paddingTop:"20px"}}},[e("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:t.search,"label-width":"90px"}},[e("el-form-item",{attrs:{label:"区域"}},[e("el-select",{attrs:{disabled:0!==t.authAreaId,placeholder:"请选择"},model:{value:t.search.areaId,callback:function(a){t.$set(t.search,"areaId",a)},expression:"search.areaId"}},t._l(t.areaList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:t.onSearch}},[t._v("刷 新")])],1)],1)],1)],1)],1),e("el-row",{staticClass:"date-box",attrs:{gutter:30}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"always","body-style":{padding:"10px",paddingTop:"20px"}}},[e("ChartsCountLine",{key:t.userKey,staticClass:"data-chart",attrs:{data:t.userData}})],1)],1)],1),e("el-row",{staticClass:"date-box",attrs:{gutter:30}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"always","body-style":{padding:"10px",paddingTop:"20px"}}},[e("ChartsCountLine",{key:t.callingKey,staticClass:"data-chart",attrs:{data:t.callingData}})],1)],1)],1),e("el-row",{staticClass:"date-box",attrs:{gutter:30}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"always","body-style":{padding:"10px",paddingTop:"20px"}}},[e("ChartsCountLine",{key:t.callKey,staticClass:"data-chart",attrs:{data:t.callData}})],1)],1)],1)],1)},n=[],r=(e("ac1f"),e("841c"),e("159b"),e("d3b7"),e("ddb0"),e("ec1b")),i=e.n(r),l=e("cc56"),o=e("6f2c"),h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"dom",staticClass:"charts-line"})},c=[],d=e("313e"),u=e.n(d),p={name:"ChartsLine",props:{data:{type:Object,default:function(){}}},data:function(){return{dom:null}},mounted:function(){this.drawing()},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{init:function(t){this.data=t,this.drawing()},resize:function(){this.dom.resize()},drawing:function(){var t=this,a=this.data.title,e=this.data.legend,s=this.data.keys,n=[];e.forEach((function(a,e){var s={name:a,type:"line",data:t.data.values[e]};n.push(s)}));var r={title:{text:a,top:15},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{top:5,data:e},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:s,axisLabel:{interval:10}}],yAxis:[{type:"value"}],series:n};this.dom=u.a.init(this.$refs.dom),this.dom.setOption(r),window.addEventListener("resize",this.resize)}}},g=p,f=e("2877"),y=Object(f["a"])(g,h,c,!1,null,null,null),m=y.exports,w=e("7139"),b={name:"Home",components:{CountTo:i.a,ChartsBar:o["a"],ChartsBarLine:l["a"],ChartsCountLine:m},data:function(){return{userKey:20,callingKey:40,callKey:60,search:{areaId:Object(w["n"])()},authAreaId:Object(w["n"])(),areaList:Object(w["f"])(!1),userData:{title:"实时用户",legend:["在线用户","新用户","付费用户","空闲主播","通话主播"],keys:[],values:[]},callingData:{title:"实时通话",legend:["AIB发起","用户发起","主播发起"],keys:[],values:[]},callData:{title:"实时呼叫",legend:["整体呼叫","AIB呼叫","用户呼叫","主播呼叫"],keys:[],values:[]}}},created:function(){this.search.areaId=0===this.authAreaId?this.areaList[0].value:this.authAreaId,this.initData()},methods:{onSearch:function(){this.initData()},initData:function(){var t=this,a=this.search;a.startAt=this.startUnix(new Date),a.endAt=this.endUnix(new Date),this.$service.home.getAreaStat(this.search,(function(a){var e=a.getStatsList();t.handleUserData(e),t.handleCallingData(e),t.handleCallData(e)}))},handleUserData:function(t){var a=[],e=[],s=[],n=[],r=[],i=[],l=[];t.length;t.forEach((function(t,e){var o=t.getStartAt();a.push(new Date(1e3*o).format("hh:mm")),s.push(t.getOnlineUser()),n.push(t.getNewUser()),r.push(t.getPayUser()),i.push(t.getIdleAnchor()),l.push(t.getBusyAnchor())})),e.push(s),e.push(n),e.push(r),e.push(i),e.push(l),this.userData.keys=a,this.userData.values=e,++this.userKey},handleCallingData:function(t){var a=[],e=[],s=[],n=[],r=[];t.forEach((function(t,e){var i=t.getStartAt();a.push(new Date(1e3*i).format("hh:mm")),s.push(t.getAiCalling()),n.push(t.getUserCalling()),r.push(t.getAnchorCalling())})),e.push(s),e.push(n),e.push(r),this.callingData.keys=a,this.callingData.values=e,++this.callingKey},handleCallData:function(t){var a=[],e=[],s=[],n=[],r=[];t.forEach((function(t,e){var i=t.getStartAt();a.push(new Date(1e3*i).format("hh:mm")),s.push(t.getAiCall()),n.push(t.getUserCall()),r.push(t.getAnchorCall())})),e.push(s),e.push(n),e.push(r),this.callData.keys=a,this.callData.values=e,++this.callKey},startUnix:function(t){return new Date(t.format("yyyy-MM-dd")).getTime()/1e3},endUnix:function(t){return this.startUnix(t)+86400-1}}},v=b,C=(e("6793"),Object(f["a"])(v,s,n,!1,null,null,null));a["default"]=C.exports}}]);
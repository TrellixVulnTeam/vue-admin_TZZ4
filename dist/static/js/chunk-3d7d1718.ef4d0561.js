(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d7d1718"],{2:function(t,e){},3:function(t,e){},4:function(t,e){},"74d7":function(t,e,a){},a48a:function(t,e,a){"use strict";a("74d7")},bb1d:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-classic-wrapper"},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"control-btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.exportVisible=!0}}},[t._v("导出数据")])],1),a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:t.search,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"日期",prop:"settleAt"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.search.settleAtTime,callback:function(e){t.$set(t.search,"settleAtTime",e)},expression:"search.settleAtTime"}})],1),a("el-form-item",{attrs:{label:"区域",prop:"areaId"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:t.search.areaId,callback:function(e){t.$set(t.search,"areaId",e)},expression:"search.areaId"}},t._l(t.areaList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"工会",prop:"guildId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.guildId,callback:function(e){t.$set(t.search,"guildId",e)},expression:"search.guildId"}},t._l(t.guildList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{staticStyle:{"padding-left":"20px"}},[a("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:t.onSearch}},[t._v("查  询")])],1),a("el-collapse",{attrs:{accordion:""},on:{change:function(e){t.isCollapse=!t.isCollapse}}},[a("el-collapse-item",[a("template",{slot:"title"},[t._v("\n                        "+t._s(t.isCollapse?"展开":"收起")+"\n                    ")]),a("div",[a("el-form-item",{attrs:{label:"主播ID",prop:"anchorId"}},[a("el-input",{attrs:{placeholder:"主播ID"},model:{value:t.search.anchorId,callback:function(e){t.$set(t.search,"anchorId",e)},expression:"search.anchorId"}})],1),a("el-form-item",{attrs:{label:"结算状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},t._l(t.statusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],2)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",size:"medium"}},[a("el-table-column",{attrs:{prop:"areaStr",label:"区域",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"guildStr",label:"工会",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"anchorId",label:"主播",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"settleAt",label:"结算时间",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"statusStr",label:"结算状态",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"callIncome",label:"通话收入",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"giftIncome",label:"礼物收入",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"commissionIncome",label:"用户充值分成",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"adjustIncome",label:"奖惩收入",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"adjustment",label:"手动调整数额",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"settled",label:"结算收入",align:"center",width:"120"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.eliminate(e.row,2)}}},[t._v("本次剔除")])],1):2===e.row.status&&"预结算"===e.row.statusStr?a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.eliminate(e.row,1)}}},[t._v("恢复")])],1):t._e()]}}])})],1),a("Pagination",{attrs:{total:t.total,page:t.search.page.currentPage,limit:t.search.page.pageSize},on:{"update:page":function(e){return t.$set(t.search.page,"currentPage",e)},"update:limit":function(e){return t.$set(t.search.page,"pageSize",e)},pagination:t.fetchData}}),a("el-dialog",{attrs:{title:"导出数据",visible:t.exportVisible,width:"30%"},on:{"update:visible":function(e){t.exportVisible=e}}},[a("div",{staticClass:"export-data"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("xlsx")}}},[t._v("EXCEL格式")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("csv")}}},[t._v("CSV格式")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("txt")}}},[t._v("TXT格式")])],1),a("div",{staticClass:"hints"},[t._v("TIP：请选择要导出数据的格式。")])])],1)],1)},r=[],i=(a("ac1f"),a("841c"),a("159b"),a("333d")),n=a("7139"),s=a("cd77"),o=a("c466"),c={components:{Pagination:i["a"]},data:function(){return{listLoading:!0,search:{areaId:Object(n["n"])(),guildId:void 0,anchorId:void 0,settleAtTime:(new Date).format("yyyy-MM-dd"),status:void 0,page:{currentPage:1,pageSize:10}},total:0,filesFormat:".txt, .csv, .xls, .xlsx",exportVisible:!1,isCollapse:!0,submitLoading:!1,areaList:Object(n["e"])(),appList:Object(n["c"])(),guildList:Object(n["q"])(),statusList:Object(n["C"])()}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0;var e=this.search;"undefined"!==typeof this.search.settleAtTime&&(e.settleAt=new Date(this.search.settleAtTime).getTime()/1e3),this.$service.settle.getSettleList(e,(function(e){var a=e.getRecordsList();t.records=a;var l=[];a.forEach((function(e,a){var r={id:e.getId(),areaId:e.getAreaId(),areaStr:Object(n["g"])(t.areaList,e.getAreaId()),guildId:e.getGuildId(),guildStr:Object(n["g"])(t.guildList,e.getGuildId()),anchorId:e.getAnchorId(),settleAt:Object(o["b"])(e.getSettleAt()),status:e.getStatus(),statusStr:Object(n["C"])(e.getStatus()),callIncome:e.getCallIncome(),giftIncome:e.getGiftIncome(),commissionIncome:e.getCommissionIncome(),adjustIncome:e.getAdjustIncome(),adjustment:e.getAdjustment(),settled:e.getSettled()};l.push(r)})),t.total=a.length,t.tableData=l,t.listLoading=!1}))},onSearch:function(){this.search.page.currentPage=1,this.fetchData()},resetForm:function(){this.$refs.searchForm.resetFields()},exportTable:function(t){if(this.tableData.length){var e={header:["ID","区域","工会","主播Id","结算时间","通话收入","礼物收入","用户充值分成","奖惩收入","手动调整数额","结算收入"],key:["id","areaStr","guildStr","anchorId","settleAt","callIncome","giftIncome","commissionIncome","adjustIncome","adjustment","settled"],data:this.tableData,autoWidth:!0,fileName:"结算历史记录-"+this.search.settleAtTime,bookType:t};s["a"].exportDataToExcel(e),this.exportVisible=!1}}}},u=c,d=(a("a48a"),a("2877")),p=Object(d["a"])(u,l,r,!1,null,null,null);e["default"]=p.exports},cd77:function(t,e,a){"use strict";a("d81d"),a("d3b7"),a("25f0"),a("c19f"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("99af");var l=a("1146"),r=a.n(l),i=a("21a6");function n(t,e){for(var a=e.map((function(t){return t.map((function(t){return null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length}:{wch:t.toString().length}}))})),l=a[0],r=1;r<a.length;r++)for(var i=0;i<a[r].length;i++)l[i].wch<a[r][i].wch&&(l[i].wch=a[r][i].wch);t["!cols"]=l}function s(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))}function o(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),l=0;l!==t.length;++l)a[l]=255&t.charCodeAt(l);return e}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.header,a=t.key,l=t.data,c=t.fileName,u=t.autoWidth,d=void 0===u||u,p=t.bookType,h=void 0===p?"xlsx":p,m=r.a.utils.book_new(),b=s(a,l);c=c||"excel-list",b.unshift(e);var f=r.a.utils.aoa_to_sheet(b);d&&n(f,b),r.a.utils.book_append_sheet(m,f,c);var g=r.a.write(m,{bookType:h,bookSST:!1,type:"binary"});Object(i["saveAs"])(new Blob([o(g)],{type:"application/octet-stream"}),"".concat(c,".").concat(h))}function u(t){var e,a=[],l=r.a.utils.decode_range(t["!ref"]),i=l.s.r;for(e=l.s.c;e<=l.e.c;++e){var n=t[r.a.utils.encode_cell({c:e,r:i})],s="UNKNOWN "+e;n&&n.t&&(s=r.a.utils.format_cell(n)),a.push(s)}return a}function d(t,e){var a=r.a.read(t,{type:e}),l=a.SheetNames[0],i=a.Sheets[l],n=u(i),s=r.a.utils.sheet_to_json(i);return{header:n,results:s}}e["a"]={exportDataToExcel:c,readDataFromExcel:d}}}]);
{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-11a35d1e\"],{\"129f\":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},\"206f\":function(t,e,i){\"use strict\";i(\"f678\")},\"2f9b\":function(t,e,i){},\"333d\":function(t,e,i){\"use strict\";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"pagination-wrapper\"},[i(\"el-pagination\",{attrs:{background:t.background,\"current-page\":t.currentPage,\"page-sizes\":t.pageSizes,\"page-size\":t.pageSize,total:t.total,layout:t.layout},on:{\"update:currentPage\":function(e){t.currentPage=e},\"update:current-page\":function(e){t.currentPage=e},\"update:pageSize\":function(e){t.pageSize=e},\"update:page-size\":function(e){t.pageSize=e},\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1)},n=[],r=(i(\"a9e3\"),{name:\"Pagination\",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[5,10,15,20,50,1e3]}},total:{type:Number,default:0,required:!0},layout:{type:String,default:\"total, prev, pager, next, sizes, jumper\"}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit(\"update:page\",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.emit(\"update:limit\",t)}}},methods:{handleSizeChange:function(t){this.$emit(\"changePageSize\",{page:this.currentPage,limit:t}),this.$emit(\"pagination\",{page:this.currentPage,limit:t})},handleCurrentChange:function(t){this.$emit(\"pagination\",{page:t,limit:this.pageSize})}}}),o=r,s=(i(\"206f\"),i(\"2877\")),l=Object(s[\"a\"])(o,a,n,!1,null,null,null);e[\"a\"]=l.exports},\"3c2a\":function(t,e,i){\"use strict\";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"table-classic-wrapper\"},[i(\"Hints\",[i(\"template\",{slot:\"hintName\"},[t._v(\" 编辑 < \"+t._s(t.search.nickname)+\" > 动态\")])],2),i(\"el-card\",{attrs:{shadow:\"always\"}},[i(\"div\",{staticClass:\"control-btns\"},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.toDialog(\"addRobotDynamic\",t.search.entityId)}}},[t._v(\"+ 新增动态\")]),i(\"el-button\",{attrs:{type:\"danger\"},on:{click:t.batchDelete}},[t._v(\"批量删除\")])],1),i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:t.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[i(\"el-table-column\",{attrs:{type:\"selection\",width:\"60\"}}),i(\"el-table-column\",{attrs:{prop:\"nickname\",label:\"昵称\",align:\"center\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"avatar\",label:\"头像\",align:\"center\",width:\"100\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[i(\"el-image\",{staticStyle:{width:\"50px\",height:\"50px\"},attrs:{fit:t.contain,src:e.row.avatar,\"preview-src-list\":[e.row.avatar]}})]}}])}),i(\"el-table-column\",{attrs:{prop:\"appStr\",label:\"app\",align:\"center\",width:\"80\"}}),i(\"el-table-column\",{attrs:{prop:\"areaStr\",label:\"区域\",align:\"center\",width:\"80\"}}),i(\"el-table-column\",{attrs:{prop:\"status\",label:\"审核状态\",align:\"center\",width:\"150\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[i(\"el-tag\",{attrs:{size:\"medium\"}},[t._v(t._s(e.row.status))])]}}])}),i(\"el-table-column\",{attrs:{prop:\"content\",label:\"内容\",align:\"center\",width:\"350\"}}),i(\"el-table-column\",{attrs:{prop:\"thumb\",label:\"图片/视频\",align:\"center\",width:\"150\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[\"\"!=e.row.thumb?i(\"el-image\",{staticStyle:{width:\"50px\",height:\"50px\"},attrs:{src:e.row.thumb,contain:\"\"}}):t._e()]}}])}),i(\"el-table-column\",{attrs:{prop:\"likes\",label:\"点赞次数\",align:\"center\",width:\"150\"}}),i(\"el-table-column\",{attrs:{prop:\"publishAt\",label:\"发布时间\",align:\"center\"}})],1),i(\"addRobotDynamic\",{ref:\"addRobotDynamic\",on:{fetchData:t.fetchData}})],1)],1)},n=[],r=(i(\"ac1f\"),i(\"841c\"),i(\"159b\"),i(\"333d\")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{attrs:{title:\"新增动态\",visible:t.dialogVisible,\"append-to-body\":\"\",width:\"50%\",\"before-close\":t.closeDialog},on:{\"update:visible\":function(e){t.dialogVisible=e}}},[i(\"div\",{staticClass:\"form-list-wrapper\"},[i(\"el-form\",{ref:\"ruleForm\",staticClass:\"form-list\",attrs:{model:t.form,\"label-width\":\"150px\"}},[i(\"el-form-item\",{attrs:{label:\"机器人Id\",prop:\"entityId\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:t.form.entityId,callback:function(e){t.$set(t.form,\"entityId\",e)},expression:\"form.entityId\"}})],1),i(\"el-form-item\",{attrs:{label:\"应用\",prop:\"appId\"}},[i(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:t.form.appId,callback:function(e){t.$set(t.form,\"appId\",e)},expression:\"form.appId\"}},t._l(t.appList,(function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i(\"el-form-item\",{attrs:{label:\"区域\",prop:\"areaId\"}},[i(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:t.form.areaId,callback:function(e){t.$set(t.form,\"areaId\",e)},expression:\"form.areaId\"}},t._l(t.areaList,(function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i(\"el-form-item\",{attrs:{label:\"内容\",prop:\"text\"}},[i(\"el-input\",{attrs:{type:\"textarea\",autosize:{minRows:3,maxRows:5},placeholder:\"请输入内容\",maxlength:\"50\",\"show-word-limit\":\"\"},model:{value:t.form.content,callback:function(e){t.$set(t.form,\"content\",e)},expression:\"form.content\"}})],1),i(\"el-form-item\",{attrs:{label:\"图片\",prop:\"photoIds\"}},[i(\"div\",{staticClass:\"img\"},[i(\"el-upload\",{attrs:{action:\"\",limit:10,\"on-preview\":t.previewPhoto,\"on-change\":t.successPhoto,\"on-remove\":t.removePhoto,\"list-type\":\"picture-card\",\"file-list\":t.form.photoUris,\"auto-upload\":!1}},[i(\"i\",{staticClass:\"el-icon-plus\"})]),i(\"el-dialog\",{attrs:{visible:t.imgDialogVisible,\"modal-append-to-body\":!0,\"append-to-body\":\"\"},on:{\"update:visible\":function(e){t.imgDialogVisible=e}}},[i(\"img\",{attrs:{width:\"100%\",src:t.form.images,alt:\"\"}})])],1)]),i(\"el-form-item\",{attrs:{label:\"视频\",prop:\"videoIds\"}},[i(\"div\",{staticClass:\"img\"},[i(\"el-upload\",{attrs:{action:\"\",limit:10,\"on-preview\":t.previewVideo,\"on-change\":t.successVideo,\"on-remove\":t.removeVideo,\"list-type\":\"picture-card\",\"file-list\":t.form.videoUris,\"auto-upload\":!1}},[i(\"i\",{staticClass:\"el-icon-plus\"})]),i(\"el-dialog\",{attrs:{visible:t.imgDialogVisible,\"modal-append-to-body\":!0,\"append-to-body\":\"\"},on:{\"update:visible\":function(e){t.imgDialogVisible=e}}},[i(\"img\",{attrs:{width:\"100%\",src:t.form.video,alt:\"\"}})])],1)]),i(\"el-form-item\",{attrs:{label:\"点赞次数\",prop:\"likes\"}},[i(\"el-input-number\",{attrs:{min:1},model:{value:t.form.likes,callback:function(e){t.$set(t.form,\"likes\",e)},expression:\"form.likes\"}})],1),i(\"el-form-item\",{attrs:{label:\"发布时间\",prop:\"likes\"}},[i(\"el-date-picker\",{attrs:{type:\"datetime\",placeholder:\"选择日期时间\",\"default-time\":\"12:00:00\"},model:{value:t.form.publishAtTime,callback:function(e){t.$set(t.form,\"publishAtTime\",e)},expression:\"form.publishAtTime\"}})],1),i(\"el-form-item\",{staticClass:\"submit-box\"},[i(\"el-button\",{staticStyle:{\"margin-right\":\"50px\"},attrs:{type:\"primary\"},on:{click:t.submitForm}},[t._v(\"确   定\")]),i(\"el-button\",{on:{click:t.resetForm}},[t._v(\"重   置\")])],1)],1)],1)])},s=[],l=(i(\"b0c0\"),i(\"a434\"),i(\"7139\")),c=i(\"f3e4\"),u=i(\"cebe\"),d=i.n(u),p={data:function(){return{form:{entityId:\"\",entityType:2,status:5,appId:\"\",areaId:\"\",content:\"\",images:\"\",video:\"\",likes:10,publishAtTime:void 0},dialogVisible:!1,imgDialogVisible:!1,messageTypes:Object(l[\"u\"])(),areaList:Object(l[\"f\"])(!0),appList:Object(l[\"c\"])()}},methods:{init:function(t){this.form.entityId=t},submitForm:function(){var t=this,e=this;this.$refs.ruleForm.validate((function(i){if(i){var a=t.form;a.publishAt=a.publishAtTime.getTime()/1e3,t.$service.robot.saveMoment(a,(function(t){t?(e.$message.success(\"保存成功!\"),e.closeDialog()):e.$message.error(\"保存失败!\")}))}}))},resetForm:function(t){this.$refs.ruleForm.resetFields()},closeDialog:function(){this.dialogVisible=!1,this.resetForm(),this.$emit(\"fetchData\")},previewAvatar:function(t){this.imgDialogVisible=!0},previewPhoto:function(t){this.imgDialogVisible=!0},previewVideo:function(t){this.imgDialogVisible=!0},successAvatar:function(t){var e=this;this.imgUpload(t.raw,1,(function(t){e.form.avatar=t.uri}))},successPhoto:function(t){var e=this;this.imgUpload(t.raw,1,(function(t){e.form.photoIds.push(t.id)}))},successVideo:function(t){var e=this;this.imgUpload(t.raw,2,(function(t){e.form.videoIds.push(t.id),e.form.video=t.id}))},removePhoto:function(t,e){for(var i=this.form.photoIds,a=t.name,n=0;n<i.length;n++)if(i[n]===a){i.splice(n,1);break}},removeVideo:function(t,e){for(var i=this.form.videoIds,a=t.name,n=0;n<i.length;n++)if(i[n]===a){i.splice(n,1);break}},imgUpload:function(t,e,i){var a={\"Content-Type\":\"multipart/form-data\",token:Object(c[\"a\"])(),\"area-id\":1,\"file-type\":e},n=new FormData;n.append(\"file\",t),d()({url:\"http://101.33.118.232:8101/file/upload\",method:\"post\",data:n,headers:a}).then((function(t){var e=t.data;i(e)}))}}},f=p,m=(i(\"bc7a\"),i(\"2877\")),h=Object(m[\"a\"])(f,o,s,!1,null,null,null),g=h.exports,b=i(\"b522\"),v=i(\"c466\"),y={name:\"Table\",components:{Pagination:r[\"a\"],Hints:b[\"a\"],addRobotDynamic:g},data:function(){return{listLoading:!0,search:{entityType:2,entityId:\"\",page:{currentPage:1,pageSize:10}},total:0,tableData:[],multipleSelection:[],formVisible:!1,areaList:Object(l[\"f\"])(!0),appList:[]}},created:function(){},watch:{$route:{handler:function(t,e){this.search.entityId=this.$route.query.robotId,this.search.nickname=this.$route.query.nickname,this.fetchData()},deep:!0}},methods:{fetchData:function(){var t=this;this.listLoading=!0,this.$service.robot.getMomentList(this.search,(function(e){var i=e.getMomentsList(),a=[];i.forEach((function(e,i){var n={id:e.getId(),appId:e.getAppId(),appStr:Object(l[\"e\"])(Object(l[\"d\"])(t.search.areaId,!1),e.getAppId()),areaId:e.getAreaId(),areaStr:Object(l[\"g\"])(t.areaList,e.getAreaId()),entityType:e.getEntityType(),entityId:e.getEntityId(),status:Object(l[\"D\"])(e.getStatus()),content:e.getContent(),images:e.getImagesList(),video:e.getVideo(),thumb:e.getThumb(),likes:e.getLikes(),publishAt:Object(v[\"f\"])(e.getPublishAt()),nickname:e.getNickname(),avatar:e.getAvatar()};a.push(n)})),t.tableData=a,t.listLoading=!1}))},onSubmit:function(){this.search.page.currentPage=1,this.fetchData()},toDialog:function(t,e){var i=this;this.$refs[t].dialogVisible=!0,this.$nextTick((function(){i.$refs[t].init(i.search.entityId)}))},handleDelete:function(t,e){var i=this;console.log(t,e),this.$confirm(\"此操作将删除选中数据, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){i.$message({type:\"success\",message:\"删除成功!\"})})).catch((function(){i.$message({type:\"info\",message:\"已取消删除\"})}))},batchDelete:function(){this.multipleSelection.length<1?this.$message({message:\"请先选择要删除的数据！\",type:\"warning\"}):this.handleDelete()}}},w=y,I=(i(\"82bb\"),Object(m[\"a\"])(w,a,n,!1,null,null,null));e[\"default\"]=I.exports},\"404b\":function(t,e,i){\"use strict\";i(\"de17\")},\"82bb\":function(t,e,i){\"use strict\";i(\"2f9b\")},\"841c\":function(t,e,i){\"use strict\";var a=i(\"d784\"),n=i(\"825a\"),r=i(\"1d80\"),o=i(\"129f\"),s=i(\"577e\"),l=i(\"14c3\");a(\"search\",(function(t,e,i){return[function(e){var i=r(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,i):new RegExp(e)[t](s(i))},function(t){var a=n(this),r=s(t),c=i(e,a,r);if(c.done)return c.value;var u=a.lastIndex;o(u,0)||(a.lastIndex=0);var d=l(a,r);return o(a.lastIndex,u)||(a.lastIndex=u),null===d?-1:d.index}]}))},\"8b72\":function(t,e,i){},a9e3:function(t,e,i){\"use strict\";var a=i(\"83ab\"),n=i(\"da84\"),r=i(\"94ca\"),o=i(\"6eeb\"),s=i(\"5135\"),l=i(\"c6b6\"),c=i(\"7156\"),u=i(\"d9b5\"),d=i(\"c04e\"),p=i(\"d039\"),f=i(\"7c73\"),m=i(\"241c\").f,h=i(\"06cf\").f,g=i(\"9bf2\").f,b=i(\"58a8\").trim,v=\"Number\",y=n[v],w=y.prototype,I=l(f(w))==v,k=function(t){if(u(t))throw TypeError(\"Cannot convert a Symbol value to a number\");var e,i,a,n,r,o,s,l,c=d(t,\"number\");if(\"string\"==typeof c&&c.length>2)if(c=b(c),e=c.charCodeAt(0),43===e||45===e){if(i=c.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+c}for(r=c.slice(2),o=r.length,s=0;s<o;s++)if(l=r.charCodeAt(s),l<48||l>n)return NaN;return parseInt(r,a)}return+c};if(r(v,!y(\" 0o1\")||!y(\"0b1\")||y(\"+0x1\"))){for(var D,S=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof S&&(I?p((function(){w.valueOf.call(i)})):l(i)!=v)?c(new y(k(e)),i,S):k(e)},x=a?m(y):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range\".split(\",\"),_=0;x.length>_;_++)s(y,D=x[_])&&!s(S,D)&&g(S,D,h(y,D));S.prototype=w,w.constructor=S,o(n,v,S)}},b522:function(t,e,i){\"use strict\";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"hints-wrapper\"},[i(\"div\",{staticClass:\"hint-title\"},[i(\"i\",{staticClass:\"vue-dsn-icon-tishi\"}),i(\"span\",[t._t(\"hintName\")],2)]),i(\"div\",{staticClass:\"hint-info\"},[t._t(\"hintInfo\")],2)])},n=[],r={name:\"Hints\"},o=r,s=(i(\"404b\"),i(\"2877\")),l=Object(s[\"a\"])(o,a,n,!1,null,null,null);e[\"a\"]=l.exports},bc7a:function(t,e,i){\"use strict\";i(\"8b72\")},c466:function(t,e,i){\"use strict\";function a(t){return 0===t?\"\":new Date(1e3*t).format(\"yyyy-MM-dd\")}function n(t){return 0===t?\"\":new Date(1e3*t).format(\"yyyy-MM-dd hh:mm:ss\")}function r(t){return\"undefined\"==typeof t&&(t=new Date),t.format(\"yyyy-MM-dd\")}function o(t){var e=new Date((new Date).format(\"yyyy-MM-dd\"));return t?e.setDate(e.getDate()+t):e}function s(t){return new Date(t.toLocaleDateString()).getTime()/1e3}function l(t){return s(t)+86400-1}i.d(e,\"e\",(function(){return a})),i.d(e,\"f\",(function(){return n})),i.d(e,\"c\",(function(){return r})),i.d(e,\"b\",(function(){return o})),i.d(e,\"d\",(function(){return s})),i.d(e,\"a\",(function(){return l}))},de17:function(t,e,i){},f678:function(t,e,i){}}]);","extractedComments":[]}
{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-99a8908a\"],{\"10b3\":function(e,t,a){\"use strict\";a(\"c498\")},\"1c82\":function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"home-wrapper\"},[a(\"el-row\",{staticClass:\"date-box\",attrs:{gutter:20}},[a(\"el-col\",{attrs:{span:24}},[a(\"el-card\",{attrs:{shadow:\"always\",\"body-style\":{padding:\"10px\",paddingTop:\"20px\"}}},[a(\"el-form\",{ref:\"searchForm\",staticClass:\"search-form\",attrs:{inline:!0,model:e.search,\"label-width\":\"90px\"}},[[a(\"el-form-item\",{attrs:{label:\"区域\"}},[a(\"el-select\",{attrs:{disabled:0!==e.authAreaId,placeholder:\"请选择\"},model:{value:e.searchCount.areaId,callback:function(t){e.$set(e.searchCount,\"areaId\",t)},expression:\"searchCount.areaId\"}},e._l(e.areaList,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"时间\",prop:\"date\"}},[a(\"el-date-picker\",{attrs:{type:\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:e.searchCount.date,callback:function(t){e.$set(e.searchCount,\"date\",t)},expression:\"searchCount.date\"}})],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.onSearch}},[e._v(\"查  询\")])],1)]],2),a(\"el-menu\",{staticClass:\"el-menu-demo\",attrs:{\"default-active\":e.activeIndex,mode:\"horizontal\"},on:{select:e.selItem}},[a(\"el-menu-item\",{attrs:{index:\"1\"}},[e._v(\"AIB接通率\")]),a(\"el-menu-item\",{attrs:{index:\"2\"}},[e._v(\"接通率\")])],1),a(\"ChartsLine\",{ref:\"chartsLine\",staticClass:\"data-chart\",attrs:{data:e.aibData}})],1)],1)],1),a(\"el-card\",{staticStyle:{\"padding-top\":\"30px\",\"padding-bottom\":\"50px\"},attrs:{shadow:\"always\"}},[a(\"el-form\",{ref:\"searchForm\",staticClass:\"search-form\",attrs:{inline:!0,model:e.search,\"label-width\":\"90px\"}},[[a(\"el-form-item\",{attrs:{label:\"主播Id\"}},[a(\"el-input\",{attrs:{type:\"number\",placeholder:\"主播Id\"},model:{value:e.search.anchorId,callback:function(t){e.$set(e.search,\"anchorId\",t)},expression:\"search.anchorId\"}})],1),a(\"el-form-item\",{attrs:{label:\"主播等级\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.search.level,callback:function(t){e.$set(e.search,\"level\",t)},expression:\"search.level\"}},e._l(e.levelList,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"区域\"}},[a(\"el-select\",{attrs:{disabled:0!==e.authAreaId,placeholder:\"请选择\"},model:{value:e.search.areaId,callback:function(t){e.$set(e.search,\"areaId\",t)},expression:\"search.areaId\"}},e._l(e.areaList,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"日期\",prop:\"settleAt\"}},[a(\"el-date-picker\",{attrs:{\"value-format\":\"yyyy-MM-dd\",type:\"date\",placeholder:\"选择日期\"},model:{value:e.search.settleAtTime,callback:function(t){e.$set(e.search,\"settleAtTime\",t)},expression:\"search.settleAtTime\"}})],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.onSearch}},[e._v(\"查  询\")])],1)]],2),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[a(\"el-table-column\",{attrs:{prop:\"anchorId\",label:\"主播ID\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"areaStr\",label:\"区域\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"startAt\",label:\"统计时间\",align:\"center\",width:\"170\"}}),a(\"el-table-column\",{attrs:{prop:\"onlineDuration\",label:\"在线时长\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"inCall\",label:\"来电数\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"inCallRatio\",label:\"来电接通率\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"outCall\",label:\"呼出数\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"answer\",label:\"接听数\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"answer10\",label:\"\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"answer30\",label:\"通话30s\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"answer50\",label:\"通话50s\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"duration\",label:\"通话时长\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"callIncome\",label:\"通话收入\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"giftIncome\",label:\"礼物收入\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"commissionIncome\",label:\"用户充值分成\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"adjustIncome\",label:\"奖惩收入\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"expense\",label:\"消耗贡献\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{prop:\"userIncome\",label:\"引导用户充值贡献\",align:\"center\",width:\"100\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"1\",fixed:\"right\"}})],1),a(\"Pagination\",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{\"update:page\":function(t){return e.$set(e.search.page,\"currentPage\",t)},\"update:limit\":function(t){return e.$set(e.search.page,\"pageSize\",t)},pagination:e.fetchData}})],1)],1)},r=[],i=(a(\"ac1f\"),a(\"841c\"),a(\"159b\"),a(\"d3b7\"),a(\"ddb0\"),a(\"99af\"),a(\"ec1b\")),l=a.n(i),o=a(\"d909\"),s=a(\"333d\"),c=a(\"7139\"),u=a(\"ca00\"),d={name:\"Home\",components:{CountTo:l.a,ChartsLine:o[\"a\"],Pagination:s[\"a\"]},data:function(){return{listLoading:!0,search:{areaId:void 0,level:void 0,anchorId:void 0,settleAtTime:Object(u[\"c\"])(),page:{currentPage:1,pageSize:10}},searchCount:{areaId:void 0,date:[Object(u[\"c\"])(-6),Object(u[\"c\"])()],page:{currentPage:1,pageSize:10}},total:0,activeIndex:\"1\",fmt:\"hh:mm\",currentDate:{},authAreaId:Object(c[\"n\"])(),areaList:Object(c[\"f\"])(!1),levelList:Object(c[\"b\"])(),aibData:{title:\"AIB接通率\",legend:[\"AIB接通率\"],values:[]},anchorData:{title:\"接通率\",legend:[\"接通率\"],values:[]}}},mounted:function(){this.init()},methods:{init:function(){this.search.areaId=0===this.authAreaId?this.areaList[0].value:this.authAreaId,this.changeArea(this.search.areaId),this.fetchData(),this.initCount()},fetchData:function(){var e=this;this.listLoading=!0;var t=this.search;t.statAt=Object(u[\"f\"])(new Date(this.search.settleAtTime)),\"undefined\"!=typeof this.search.anchorId&&(t.anchorId=parseInt(this.search.anchorId)),this.$service.home.getAnchorStat(t,(function(t){var a=t.getStatsList(),n=[];a.forEach((function(t,a){var r={id:t.getId(),startAt:Object(u[\"g\"])(t.getStartAt()),areaId:t.getAreaId(),areaStr:Object(c[\"g\"])(e.areaList,t.getAreaId()),anchorId:t.getAnchorId(),onlineDuration:e.formatSeconds(t.getOnlineDuration()),inCall:t.getInCall(),inCallRatio:e.toRatio(t.getAnswer(),t.getInCall())+\"%\",outCall:t.getOutCall(),answer:t.getAnswer(),answer30:t.getAnswer30(),answer50:t.getAnswer50(),duration:e.formatSeconds(t.getDuration()),callIncome:t.getCallIncome(),giftIncome:t.getGiftIncome(),commissionIncome:t.getCommissionIncome(),adjustIncome:t.getAdjustIncome(),expense:t.getExpense(),userIncome:t.getUserIncome()};n.push(r)})),e.total=t.getTotalCount(),e.tableData=n,e.listLoading=!1}))},initCount:function(){var e=this,t=this.search,a=new Date(this.search.settleAtTime);t.startAt=Object(u[\"f\"])(a),t.endAt=Object(u[\"b\"])(a),this.$service.home.getAreaStat(t,(function(t){var a=t.getStatsList(),n=[],r=[],i=[];a.forEach((function(t,a){var l=t.getStartAt();n.push(new Date(1e3*l).format(\"hh:mm\"));var o=e.toRatio(t.getAiCalling(),t.getAiCall());r.push(o);var s=t.getAiCall()+t.getAnchorCall()+t.getAnchorCall(),c=t.getUserAnswer()+t.getAnchorAnswer(),u=e.toRatio(c,s);i.push(u)})),e.aibData.keys=n,e.aibData.values=[],e.aibData.unit=\"%\",e.aibData.values.push(r),e.anchorData.keys=n,e.anchorData.values=[],e.anchorData.unit=\"%\",e.anchorData.values.push(i),e.selItem(e.activeIndex)}))},onSearch:function(){this.search.page.currentPage=1,this.fetchData(),this.initCount()},toDialog:function(e,t){var a=this;this.$refs[e].dialogVisible=!0,this.$nextTick((function(){a.$refs[e].init(t)}))},resetForm:function(){this.search=this.initQuery()},selItem:function(e){switch(this.currentDate={},e){case\"1\":this.currentDate=this.aibData;break;case\"2\":this.currentDate=this.anchorData;break}this.activeIndex=e,this.$refs.chartsLine.init(this.currentDate)},formatSeconds:function(e){var t=parseInt(e),a=Math.floor(t/3600)<10?\"0\"+Math.floor(t/3600):Math.floor(t/3600),n=Math.floor(t/60%60)<10?\"0\"+Math.floor(t/60%60):Math.floor(t/60%60),r=(Math.floor(t%60)<10?Math.floor(t%60):Math.floor(t%60),\"\");return\"00\"!==n&&(r+=\"\".concat(a,\":\").concat(n)),r},toRatio:function(e,t){return e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t)||t<=0?0:Math.round(e/t*1e4)/100},toAve:function(e,t){return 0===t?e:Math.round(e/t)},changeArea:function(e){this.appList=Object(c[\"d\"])(e,!0,!0)}}},h=d,p=(a(\"d04b\"),a(\"10b3\"),a(\"2877\")),f=Object(p[\"a\"])(h,n,r,!1,null,null,null);t[\"default\"]=f.exports},\"206f\":function(e,t,a){\"use strict\";a(\"f678\")},\"333d\":function(e,t,a){\"use strict\";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"pagination-wrapper\"},[a(\"el-pagination\",{attrs:{background:e.background,\"current-page\":e.currentPage,\"page-sizes\":e.pageSizes,\"page-size\":e.pageSize,total:e.total,layout:e.layout},on:{\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t},\"update:pageSize\":function(t){e.pageSize=t},\"update:page-size\":function(t){e.pageSize=t},\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)},r=[],i=(a(\"a9e3\"),{name:\"Pagination\",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[5,10,15,20,50,1e3]}},total:{type:Number,default:0,required:!0},layout:{type:String,default:\"total, prev, pager, next, sizes, jumper\"}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit(\"update:page\",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.emit(\"update:limit\",e)}}},methods:{handleSizeChange:function(e){this.$emit(\"changePageSize\",{page:this.currentPage,limit:e}),this.$emit(\"pagination\",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit(\"pagination\",{page:e,limit:this.pageSize})}}}),l=i,o=(a(\"206f\"),a(\"2877\")),s=Object(o[\"a\"])(l,n,r,!1,null,null,null);t[\"a\"]=s.exports},\"766a\":function(e,t,a){},a9e3:function(e,t,a){\"use strict\";var n=a(\"83ab\"),r=a(\"da84\"),i=a(\"94ca\"),l=a(\"6eeb\"),o=a(\"5135\"),s=a(\"c6b6\"),c=a(\"7156\"),u=a(\"d9b5\"),d=a(\"c04e\"),h=a(\"d039\"),p=a(\"7c73\"),f=a(\"241c\").f,g=a(\"06cf\").f,m=a(\"9bf2\").f,b=a(\"58a8\").trim,v=\"Number\",I=r[v],w=I.prototype,y=s(p(w))==v,A=function(e){if(u(e))throw TypeError(\"Cannot convert a Symbol value to a number\");var t,a,n,r,i,l,o,s,c=d(e,\"number\");if(\"string\"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=c.slice(2),l=i.length,o=0;o<l;o++)if(s=i.charCodeAt(o),s<48||s>r)return NaN;return parseInt(i,n)}return+c};if(i(v,!I(\" 0o1\")||!I(\"0b1\")||I(\"+0x1\"))){for(var C,D=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof D&&(y?h((function(){w.valueOf.call(a)})):s(a)!=v)?c(new I(A(t)),a,D):A(t)},S=n?f(I):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range\".split(\",\"),x=0;S.length>x;x++)o(I,C=S[x])&&!o(D,C)&&m(D,C,g(I,C));D.prototype=w,w.constructor=D,l(r,v,D)}},c498:function(e,t,a){},ca00:function(e,t,a){\"use strict\";a.d(t,\"h\",(function(){return n})),a.d(t,\"g\",(function(){return r})),a.d(t,\"i\",(function(){return i})),a.d(t,\"d\",(function(){return l})),a.d(t,\"c\",(function(){return o})),a.d(t,\"e\",(function(){return s})),a.d(t,\"a\",(function(){return c})),a.d(t,\"f\",(function(){return u})),a.d(t,\"b\",(function(){return d}));a(\"b0c0\");function n(e){return e/100}function r(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd\")}function i(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd hh:mm:ss\")}function l(e){return\"undefined\"==typeof e&&(e=new Date),e.format(\"yyyy-MM-dd\")}function o(e){var t=new Date((new Date).toLocaleDateString());return e?new Date(t.setDate(t.getDate()+e)):t}function s(){return new Date((new Date).toLocaleDateString())}function c(){return new Date(1e3*d(new Date))}function u(e){return new Date(e.toLocaleDateString()).getTime()/1e3}function d(e){return u(e)+86400-1}},d04b:function(e,t,a){\"use strict\";a(\"766a\")},d909:function(e,t,a){\"use strict\";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{ref:\"dom\",staticClass:\"charts-line\"})},r=[],i=(a(\"d3b7\"),a(\"ddb0\"),a(\"159b\"),a(\"313e\")),l=a.n(i),o=a(\"4ec3\"),s={name:\"ChartsLine\",props:{data:{type:Object,default:function(){}}},data:function(){return{dom:null}},mounted:function(){this.drawing()},beforeDestroy:function(){window.removeEventListener(\"resize\",this.resize)},methods:{init:function(e){this.data=e,this.drawing()},resize:function(){this.dom.resize()},drawing:function(){var e=this,t=this.data.title,a=this.data.unit;a=Object(o[\"a\"])(a)?\" \":a;var n=this.data.legend,r=this.data.keys,i=[];n.forEach((function(t,a){var n={name:t,type:\"line\",showSymbol:!1,data:e.data.values[a]};i.push(n)}));var s={title:{text:t,top:15},tooltip:{trigger:\"axis\",axisPointer:{type:\"cross\",crossStyle:{color:\"#999\"}},formatter:\"{b} <br/>{a} : {c} \"+a},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:[\"line\",\"bar\"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{top:5,data:n},grid:{left:\"3%\",right:\"4%\",bottom:\"3%\",containLabel:!0},xAxis:[{type:\"category\",data:r}],yAxis:[{type:\"value\"}],series:i};this.dom=l.a.init(this.$refs.dom),this.dom.setOption(s),window.addEventListener(\"resize\",this.resize)}}},c=s,u=a(\"2877\"),d=Object(u[\"a\"])(c,n,r,!1,null,null,null);t[\"a\"]=d.exports},f678:function(e,t,a){}}]);","extractedComments":[]}
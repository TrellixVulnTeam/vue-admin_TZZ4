{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-8d8b8a24\"],{1:function(e,t){},\"53c0\":function(e,t,a){\"use strict\";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"table-classic-wrapper\"},[a(\"el-card\",{attrs:{shadow:\"always\"}},[a(\"el-form\",{ref:\"searchForm\",staticClass:\"search-form\",attrs:{inline:!0,model:e.search,\"label-width\":\"90px\"}},[a(\"el-form-item\",{attrs:{label:\"主播1Id\",prop:\"anchorId\"}},[a(\"el-input\",{attrs:{placeholder:\"主播Id\"},model:{value:e.search.anchorId,callback:function(t){e.$set(e.search,\"anchorId\",t)},expression:\"search.anchorId\"}})],1),a(\"el-form-item\",{attrs:{label:\"区域\"}},[a(\"el-select\",{attrs:{disabled:0!==e.authAreaId,placeholder:\"请选择\"},model:{value:e.search.areaId,callback:function(t){e.$set(e.search,\"areaId\",t)},expression:\"search.areaId\"}},e._l(e.areaData,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.onSubmit}},[e._v(\"查询\")])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"},on:{\"selection-change\":e.handleSelectionChange}},[a(\"el-table-column\",{attrs:{type:\"selection\",width:\"60\"}}),a(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"ownerId\",label:\"主播Id\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"app\",label:\"App\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[e._v(\"\\n                        \"+e._s(t.row.app.label)+\"\\n                        \"),1===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\"})]):2===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\"})]):e._e()])]}}])}),a(\"el-table-column\",{attrs:{prop:\"areaName\",label:\"区域\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"thumb\",label:\"视频\",align:\"center\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-image\",{staticStyle:{width:\"50px\",height:\"50px\"},attrs:{src:t.row.thumb,contain:\"\"},on:{click:function(a){return e.play(t.row)}}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"likes\",label:\"点赞次数\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"ownerId\",label:\"已有视频\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(a){return e.toDialog(\"videoList\",t.row)}}},[e._v(\"查看\")])]}}])}),a(\"el-table-column\",{attrs:{prop:\"createdAt\",label:\"录制时间\",align:\"center\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"250\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(a){return e.passed(t.row)}}},[e._v(\"通过\")]),a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(a){return e.delVideo(t.row)}}},[e._v(\"删除\")])]}}])})],1),a(\"Pagination\",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{\"update:page\":function(t){return e.$set(e.search.page,\"currentPage\",t)},\"update:limit\":function(t){return e.$set(e.search.page,\"pageSize\",t)},pagination:e.fetchData,changePageSize:function(t){return e.changePageSize(t)}}}),a(\"el-dialog\",{attrs:{title:\"播放视频\",visible:e.playVisible,\"before-close\":e.closeVideo,\"append-to-body\":!0},on:{\"update:visible\":function(t){e.playVisible=t}}},[a(\"div\",{staticClass:\"content-item\"},[a(\"VueVideoPlayer\",{ref:\"myVideoPlayer\"})],1)]),a(\"videoList\",{ref:\"videoList\",on:{fetchData:e.fetchData}})],1)],1)},n=[],l=(a(\"ac1f\"),a(\"841c\"),a(\"159b\"),a(\"333d\")),r=a(\"7139\"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{title:\"查看视频\",visible:e.dialogVisible,\"append-to-body\":\"\",width:\"40%\",\"before-close\":e.handleClose},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"div\",{staticClass:\"table-classic-wrapper dialog-list\"},[a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"ownerId\",label:\"所有者ID\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"thumb\",label:\"视频\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-image\",{staticStyle:{width:\"50px\",height:\"50px\"},attrs:{src:t.row.thumb,contain:\"\"},on:{click:function(a){return e.play(t.row)}}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"thumb\",label:\"应用App\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[e._v(\"\\n                        \"+e._s(t.row.app.label)+\"\\n                        \"),1===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\"})]):a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\"})])])]}}])}),a(\"el-table-column\",{attrs:{prop:\"areaStr\",label:\"区域\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"type\",label:\"文件类型\",align:\"center\",width:\"120\"}})],1),a(\"Pagination\",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{\"update:page\":function(t){return e.$set(e.search.page,\"currentPage\",t)},\"update:limit\":function(t){return e.$set(e.search.page,\"pageSize\",t)},pagination:e.fetchData}})],1),a(\"el-dialog\",{attrs:{title:\"播放视频\",visible:e.playVisible,\"before-close\":e.closeVideo,\"append-to-body\":!0},on:{\"update:visible\":function(t){e.playVisible=t}}},[a(\"div\",{staticClass:\"content-item\"},[a(\"VueVideoPlayer\",{ref:\"myVideoPlayer\"})],1)])],1)},s=[],c=a(\"be3f\"),u=a(\"c466\"),d={name:\"Table\",components:{Pagination:l[\"a\"],VueVideoPlayer:c[\"a\"]},data:function(){return{listLoading:!0,search:{anchorId:void 0,status:5,page:{currentPage:1,pageSize:10}},videoList:[],imgList:[],total:0,playVisible:!1,dialogVisible:!1,appList:Object(r[\"c\"])(),areaList:Object(r[\"f\"])(!0),fileTypeList:Object(r[\"p\"])()}},created:function(){this.fetchData()},methods:{init:function(e){this.search.anchorId=e.ownerId,this.fetchData()},fetchData:function(){var e=this;this.listLoading=!0,this.$service.audit.getLiveList(this.search,(function(t){var a=t.getRecordsList(),i=[];a.forEach((function(t,a){var n={id:t.getId(),app:Object(r[\"e\"])(e.appList,t.getAppId()),areaStr:Object(r[\"g\"])(e.areaList,t.getAreaId()),type:Object(r[\"g\"])(e.fileTypeList,t.getType()),ownerId:t.getOwnerId(),thumb:t.getThumb(),uri:t.getUri()};i.push(n)})),e.total=t.getTotalCount(),e.tableData=i,e.listLoading=!1}))},play:function(e){var t=this;this.playVisible=!0;var a=e.uri;this.$nextTick((function(){t.$refs.myVideoPlayer.initSrc(a)}))},closeVideo:function(){var e=this;this.playVisible=!1,this.$nextTick((function(){e.$refs.myVideoPlayer.emptySrc()}))},closeDialog:function(){this.dialogVisible=!1,this.resetForm(),this.$emit(\"fetchData\")}}},p=d,f=(a(\"d428\"),a(\"2877\")),h=Object(f[\"a\"])(p,o,s,!1,null,null,null),g=h.exports,b={name:\"Table\",components:{Pagination:l[\"a\"],videoList:g,VueVideoPlayer:c[\"a\"]},data:function(){return{listLoading:!0,search:{areaId:Object(r[\"n\"])(),reviewStatus:2,page:{currentPage:1,pageSize:10}},total:0,authAreaId:Object(r[\"n\"])(),tableData:[],multipleSelection:[],playVisible:!1,areaData:Object(r[\"f\"])(!0),reviewStatus:Object(r[\"D\"])(),appListAll:Object(r[\"c\"])(!1)}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,this.$service.audit.getLiveList(this.search,(function(t){var a=t.getRecordsList(),i=[];a.forEach((function(t,a){var n={id:t.getId(),appId:t.getAppId(),app:Object(r[\"e\"])(e.appListAll,t.getAppId()),areaId:t.getAreaId(),areaName:Object(r[\"g\"])(e.areaData,t.getAreaId()),ownerId:t.getOwnerId(),ownerType:t.getOwnerType(),thumb:t.getThumb(),likes:t.getLikes(),uri:t.getUri(),createdAt:Object(u[\"c\"])(t.getCreatedAt())};i.push(n)})),e.total=t.getTotalCount(),e.tableData=i,e.listLoading=!1}))},onSubmit:function(){this.search.currentPage=1,this.fetchData()},handleSelectionChange:function(e){this.multipleSelection=e},toDialog:function(e,t){var a=this;this.$refs[e].dialogVisible=!0,this.$nextTick((function(){a.$refs[e].init(t)}))},changePageSize:function(e){this.search.page.pageSize=e.limit},play:function(e){var t=this;this.playVisible=!0;var a=e.uri;console.log(\"播放视频\"),console.log(e),console.log(e.uri),this.$nextTick((function(){t.$refs.myVideoPlayer.initSrc(a)}))},closeVideo:function(){var e=this;this.playVisible=!1,this.$nextTick((function(){e.$refs.myVideoPlayer.emptySrc()}))},passed:function(e){var t=this,a={id:e.id,status:5};this.$service.audit.processLive(a,(function(e){e?t.$message.success(\"审核通过 !\"):t.$message.error(\"审核失败 !\"),t.fetchData()}))},delVideo:function(e){var t=this,a=this;this.$confirm(\"是否删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){var i={id:e.id,status:4};t.$service.audit.processLive(i,(function(e){e?a.$message.success(\"已拒绝 !\"):a.$message.error(\"拒绝失败 !\"),a.fetchData()}))}))},selectChange:function(e){}}},m=b,y=(a(\"cee6\"),Object(f[\"a\"])(m,i,n,!1,null,null,null));t[\"default\"]=y.exports},\"6bc6\":function(e,t,a){},c466:function(e,t,a){\"use strict\";function i(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd\")}function n(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd hh:mm:ss\")}function l(e){return\"undefined\"==typeof e&&(e=new Date),e.format(\"yyyy-MM-dd\")}a.d(t,\"b\",(function(){return i})),a.d(t,\"c\",(function(){return n})),a.d(t,\"a\",(function(){return l}))},cee6:function(e,t,a){\"use strict\";a(\"e4ff\")},d428:function(e,t,a){\"use strict\";a(\"6bc6\")},e4ff:function(e,t,a){}}]);","extractedComments":[]}
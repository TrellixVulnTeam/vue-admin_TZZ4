{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-41796d5a\"],{\"129f\":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},\"2d5b\":function(e,t,a){\"use strict\";a(\"5168\")},\"44b6\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"table-classic-wrapper\"},[a(\"el-card\",{attrs:{shadow:\"always\"}},[a(\"div\",{staticClass:\"control-btns\"},[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.toDialog(\"addSysAccount\",\"\")}}},[e._v(\"+ 新增管理帐号\")])],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"编号\",align:\"center\",width:\"50\"}}),a(\"el-table-column\",{attrs:{prop:\"email\",label:\"邮箱\",align:\"center\",width:\"300\"}}),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"真实姓名\",align:\"center\",width:\"200\"}}),a(\"el-table-column\",{attrs:{prop:\"areaStr\",label:\"绑定的区域\",align:\"center\",width:\"250\"}}),a(\"el-table-column\",{attrs:{prop:\"enable\",label:\"状态\",align:\"center\",width:\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-switch\",{attrs:{disabled:\"\"},model:{value:t.row.enable,callback:function(a){e.$set(t.row,\"enable\",a)},expression:\"scope.row.enable\"}})]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(a){return e.toDialog(\"addSysAccount\",t.row)}}},[e._v(\"编辑\")])]}}])})],1),a(\"Pagination\",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{\"update:page\":function(t){return e.$set(e.search.page,\"currentPage\",t)},\"update:limit\":function(t){return e.$set(e.search.page,\"pageSize\",t)},pagination:e.fetchData,changePageSize:function(t){return e.changePageSize(t)}}}),a(\"addSysAccount\",{ref:\"addSysAccount\",on:{fetchData:e.fetchData}})],1)],1)},i=[],n=(a(\"ac1f\"),a(\"841c\"),a(\"159b\"),a(\"333d\")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{title:\"新增管理帐号\",visible:e.dialogVisible,\"append-to-body\":\"\",width:\"50%\",\"before-close\":e.closeDialog},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"div\",{staticClass:\"form-list-wrapper\"},[a(\"el-form\",{ref:\"ruleForm\",staticClass:\"form-list\",attrs:{model:e.form,rules:e.rules,\"label-width\":\"150px\"}},[a(\"el-form-item\",{attrs:{label:\"账户名\",prop:\"email\"}},[a(\"el-input\",{attrs:{maxlength:\"15\",\"show-word-limit\":\"\",placeholder:\"请输入\"},model:{value:e.form.email,callback:function(t){e.$set(e.form,\"email\",t)},expression:\"form.email\"}})],1),a(\"el-form-item\",{attrs:{label:\"密码\",prop:\"passwordNew\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入\",maxlength:\"16\",\"show-password\":\"\"},model:{value:e.form.passwordNew,callback:function(t){e.$set(e.form,\"passwordNew\",t)},expression:\"form.passwordNew\"}})],1),a(\"el-form-item\",{attrs:{label:\"真实姓名\",prop:\"name\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入\",\"show-word-limit\":\"\"},model:{value:e.form.name,callback:function(t){e.$set(e.form,\"name\",t)},expression:\"form.name\"}})],1),a(\"el-form-item\",{attrs:{label:\"运营区域\",prop:\"areaId\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.form.areaId,callback:function(t){e.$set(e.form,\"areaId\",t)},expression:\"form.areaId\"}},e._l(e.areaList,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"权限设置\",prop:\"modules\"}},[a(\"el-tree\",{ref:\"routers\",attrs:{data:e.data,\"show-checkbox\":\"\",\"node-key\":\"key\",\"default-checked-keys\":e.checkeds,props:e.defaultProps}})],1),a(\"el-form-item\",{staticClass:\"submit-box\"},[a(\"el-button\",{staticStyle:{\"margin-right\":\"50px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm(\"ruleForm\")}}},[e._v(\"确   定\")]),a(\"el-button\",{on:{click:function(t){return e.resetForm(\"form\")}}},[e._v(\"重   置\")])],1)],1)],1)])},o=[],l=(a(\"4e82\"),a(\"b0c0\"),a(\"7139\")),c=a(\"4ec3\"),u=a(\"d046\"),d={data:function(){return{form:{passwordNew:\"\",routers:void 0},value1:[1,5],value2:[1,5],dialogVisible:!1,areaList:Object(l[\"f\"])(!0),data2:[],checkeds:[],data:this.handleTree(),defaultProps:{children:\"children\",label:\"title\"},rules:{areaId:[{required:!0,message:\"请选择\",trigger:\"blur\"}],email:[{required:!0,message:\"内容不能为空\",trigger:\"blur\"}],passwordNew:[{min:6,max:16,message:\"密码长度在 6 到 16 个字符\",trigger:[\"blur\",\"change\"]},{pattern:/^[a-zA-Z0-9_-]{6,16}$/,message:\"密码只支持字母、数字和下划线\",trigger:[\"blur\",\"change\"]}],name:[{required:!0,message:\"内容不能为空\",trigger:\"blur\"}]}}},methods:{init:function(e){if(this.data=this.handleTree(),\"undefined\"!=typeof e.id&&(this.form=e,!Object(c[\"b\"])(this.form.modules))){var t=JSON.parse(this.form.modules);this.checkeds=t.checkKeys}this.form.passwordNew=\"\"},submitForm:function(e){var t=this,a=this;this.$refs[e].validate((function(e){if(e){var r=t.form,i=Object(c[\"b\"])(r.passwordNew)?r.password:r.passwordNew;r.password=i;var n=t.$refs.routers.getCheckedKeys(),s=t.$refs.routers.getCheckedNodes(),o=t.$refs.routers.getHalfCheckedNodes();s.push.apply(s,o),r.modules=a.handleRouter(n,s),t.$service.admin.saveAdmin(r,(function(e){e?(a.$message.success(\"保存成功!\"),a.closeDialog()):a.$message.error(\"保存失败!\")}))}}))},resetForm:function(){this.$refs.ruleForm.resetFields()},closeDialog:function(){this.dialogVisible=!1,this.checkeds=void 0,this.resetForm(),this.$emit(\"fetchData\")},handleRouter:function(e,t){var a=[],r=[];return t.forEach((function(e){e.isParent?(e.children=void 0,a.push(e)):r.push(e)})),a.sort((function(e,t){return e.order-t.order})),JSON.stringify({checkKeys:e,parents:a,childrens:r})},handleTree:function(){var e=[],t=0;return u[\"a\"].forEach((function(a){var r={key:a.name,isParent:!0,order:t++};if(\"undefined\"===typeof a.meta)r.title=a.children[0].meta.title;else{r.title=a.meta.title;var i=[];a.children.forEach((function(e){var a={key:e.name,title:e.meta.title,isParent:!1,order:t++};i.push(a)})),r.children=i}e.push(r)})),e}}},f=d,m=(a(\"2d5b\"),a(\"2877\")),p=Object(m[\"a\"])(f,s,o,!1,null,null,null),h=p.exports,g={components:{Pagination:n[\"a\"],addSysAccount:h},data:function(){return{listLoading:!0,search:{uid:void 0,app:void 0,robotId:void 0,page:{currentPage:1,pageSize:10}},total:0,isSubmit:!1,areaList:Object(l[\"f\"])(!0)}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,this.$service.admin.getAdminList(this.search,(function(t){var a=t.getAdminsList(),r=[];a.forEach((function(t,a){var i={id:t.getId(),enable:t.getEnable(),email:t.getEmail(),password:t.getPassword(),passwordNew:\"\",name:t.getName(),note:t.getNote(),areaId:t.getAreaId(),areaStr:Object(l[\"g\"])(e.areaList,t.getAreaId()),app_ids:t.getAppIdsList(),modules:t.getModules(),login_at:t.getLoginAt(),login_ip:t.getLoginIp(),fail_count:t.getFailCount(),access_token:t.getAccessToken(),updated_at:t.getUpdatedAt(),created_at:t.getCreatedAt()};r.push(i)})),e.total=a.length,e.tableData=r,e.listLoading=!1}))},onSearch:function(){this.search.currentPage=1,this.fetchData()},toDialog:function(e,t){var a=this;this.$refs[e].dialogVisible=!0,this.$nextTick((function(){a.$refs[e].init(t)}))},resetForm:function(){this.$refs.searchForm.resetFields()},changePageSize:function(e){this.search.page.pageSize=e.limit}}},b=g,v=(a(\"a5c5\"),Object(m[\"a\"])(b,r,i,!1,null,null,null));t[\"default\"]=v.exports},5168:function(e,t,a){},\"841c\":function(e,t,a){\"use strict\";var r=a(\"d784\"),i=a(\"825a\"),n=a(\"1d80\"),s=a(\"129f\"),o=a(\"577e\"),l=a(\"14c3\");r(\"search\",(function(e,t,a){return[function(t){var a=n(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](o(a))},function(e){var r=i(this),n=o(e),c=a(t,r,n);if(c.done)return c.value;var u=r.lastIndex;s(u,0)||(r.lastIndex=0);var d=l(r,n);return s(r.lastIndex,u)||(r.lastIndex=u),null===d?-1:d.index}]}))},9734:function(e,t,a){},a5c5:function(e,t,a){\"use strict\";a(\"9734\")},a9e3:function(e,t,a){\"use strict\";var r=a(\"83ab\"),i=a(\"da84\"),n=a(\"94ca\"),s=a(\"6eeb\"),o=a(\"5135\"),l=a(\"c6b6\"),c=a(\"7156\"),u=a(\"d9b5\"),d=a(\"c04e\"),f=a(\"d039\"),m=a(\"7c73\"),p=a(\"241c\").f,h=a(\"06cf\").f,g=a(\"9bf2\").f,b=a(\"58a8\").trim,v=\"Number\",w=i[v],k=w.prototype,N=l(m(k))==v,I=function(e){if(u(e))throw TypeError(\"Cannot convert a Symbol value to a number\");var t,a,r,i,n,s,o,l,c=d(e,\"number\");if(\"string\"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(n=c.slice(2),s=n.length,o=0;o<s;o++)if(l=n.charCodeAt(o),l<48||l>i)return NaN;return parseInt(n,r)}return+c};if(n(v,!w(\" 0o1\")||!w(\"0b1\")||w(\"+0x1\"))){for(var y,S=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof S&&(N?f((function(){k.valueOf.call(a)})):l(a)!=v)?c(new w(I(t)),a,S):I(t)},A=r?p(w):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range\".split(\",\"),_=0;A.length>_;_++)o(w,y=A[_])&&!o(S,y)&&g(S,y,h(w,y));S.prototype=k,k.constructor=S,s(i,v,S)}}}]);","extractedComments":[]}
{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-f56e3dfe\"],{\"129f\":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},\"2f9b\":function(t,e,i){},\"3c2a\":function(t,e,i){\"use strict\";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"table-classic-wrapper\"},[i(\"Hints\",[i(\"template\",{slot:\"hintName\"},[t._v(\" 编辑 < \"+t._s(t.search.nickname)+\" > 动态\")])],2),i(\"el-card\",{attrs:{shadow:\"always\"}},[i(\"div\",{staticClass:\"control-btns\"},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.toDialog(\"addRobotDynamic\",t.search.entityId)}}},[t._v(\"+ 新增动态\")]),i(\"el-button\",{attrs:{type:\"danger\"},on:{click:t.batchDelete}},[t._v(\"批量删除\")])],1),i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:t.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[i(\"el-table-column\",{attrs:{type:\"selection\",width:\"60\"}}),i(\"el-table-column\",{attrs:{prop:\"nickname\",label:\"昵称\",align:\"center\",width:\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"avatar\",label:\"头像\",align:\"center\",width:\"100\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[i(\"el-image\",{staticStyle:{width:\"50px\",height:\"50px\"},attrs:{fit:t.contain,src:e.row.avatar,\"preview-src-list\":[e.row.avatar]}})]}}])}),i(\"el-table-column\",{attrs:{prop:\"appStr\",label:\"app\",align:\"center\",width:\"80\"}}),i(\"el-table-column\",{attrs:{prop:\"areaStr\",label:\"区域\",align:\"center\",width:\"80\"}}),i(\"el-table-column\",{attrs:{prop:\"status\",label:\"审核状态\",align:\"center\",width:\"150\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[i(\"el-tag\",{attrs:{size:\"medium\"}},[t._v(t._s(e.row.status))])]}}])}),i(\"el-table-column\",{attrs:{prop:\"content\",label:\"内容\",align:\"center\",width:\"350\"}}),i(\"el-table-column\",{attrs:{prop:\"thumb\",label:\"图片/视频\",align:\"center\",width:\"150\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[\"\"!=e.row.thumb?i(\"el-image\",{staticStyle:{width:\"50px\",height:\"50px\"},attrs:{src:e.row.thumb,contain:\"\"}}):t._e()]}}])}),i(\"el-table-column\",{attrs:{prop:\"likes\",label:\"点赞次数\",align:\"center\",width:\"150\"}}),i(\"el-table-column\",{attrs:{prop:\"publishAt\",label:\"发布时间\",align:\"center\"}})],1),i(\"addRobotDynamic\",{ref:\"addRobotDynamic\",on:{fetchData:t.fetchData}})],1)],1)},o=[],n=(i(\"ac1f\"),i(\"841c\"),i(\"159b\"),i(\"333d\")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{attrs:{title:\"新增动态\",visible:t.dialogVisible,\"append-to-body\":\"\",width:\"50%\",\"before-close\":t.closeDialog},on:{\"update:visible\":function(e){t.dialogVisible=e}}},[i(\"div\",{staticClass:\"form-list-wrapper\"},[i(\"el-form\",{ref:\"ruleForm\",staticClass:\"form-list\",attrs:{model:t.form,\"label-width\":\"150px\"}},[i(\"el-form-item\",{attrs:{label:\"机器人Id\",prop:\"entityId\"}},[i(\"el-input\",{attrs:{disabled:\"\"},model:{value:t.form.entityId,callback:function(e){t.$set(t.form,\"entityId\",e)},expression:\"form.entityId\"}})],1),i(\"el-form-item\",{attrs:{label:\"应用\",prop:\"appId\"}},[i(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:t.form.appId,callback:function(e){t.$set(t.form,\"appId\",e)},expression:\"form.appId\"}},t._l(t.appList,(function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i(\"el-form-item\",{attrs:{label:\"区域\",prop:\"areaId\"}},[i(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:t.form.areaId,callback:function(e){t.$set(t.form,\"areaId\",e)},expression:\"form.areaId\"}},t._l(t.areaList,(function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i(\"el-form-item\",{attrs:{label:\"内容\",prop:\"text\"}},[i(\"el-input\",{attrs:{type:\"textarea\",autosize:{minRows:3,maxRows:5},placeholder:\"请输入内容\",maxlength:\"50\",\"show-word-limit\":\"\"},model:{value:t.form.content,callback:function(e){t.$set(t.form,\"content\",e)},expression:\"form.content\"}})],1),i(\"el-form-item\",{attrs:{label:\"图片\",prop:\"photoIds\"}},[i(\"div\",{staticClass:\"img\"},[i(\"el-upload\",{attrs:{action:\"\",limit:10,\"on-preview\":t.previewPhoto,\"on-change\":t.successPhoto,\"on-remove\":t.removePhoto,\"list-type\":\"picture-card\",\"file-list\":t.form.photoUris,\"auto-upload\":!1}},[i(\"i\",{staticClass:\"el-icon-plus\"})]),i(\"el-dialog\",{attrs:{visible:t.imgDialogVisible,\"modal-append-to-body\":!0,\"append-to-body\":\"\"},on:{\"update:visible\":function(e){t.imgDialogVisible=e}}},[i(\"img\",{attrs:{width:\"100%\",src:t.form.images,alt:\"\"}})])],1)]),i(\"el-form-item\",{attrs:{label:\"视频\",prop:\"videoIds\"}},[i(\"div\",{staticClass:\"img\"},[i(\"el-upload\",{attrs:{action:\"\",limit:10,\"on-preview\":t.previewVideo,\"on-change\":t.successVideo,\"on-remove\":t.removeVideo,\"list-type\":\"picture-card\",\"file-list\":t.form.videoUris,\"auto-upload\":!1}},[i(\"i\",{staticClass:\"el-icon-plus\"})]),i(\"el-dialog\",{attrs:{visible:t.imgDialogVisible,\"modal-append-to-body\":!0,\"append-to-body\":\"\"},on:{\"update:visible\":function(e){t.imgDialogVisible=e}}},[i(\"img\",{attrs:{width:\"100%\",src:t.form.video,alt:\"\"}})])],1)]),i(\"el-form-item\",{attrs:{label:\"点赞次数\",prop:\"likes\"}},[i(\"el-input-number\",{attrs:{min:1},model:{value:t.form.likes,callback:function(e){t.$set(t.form,\"likes\",e)},expression:\"form.likes\"}})],1),i(\"el-form-item\",{attrs:{label:\"发布时间\",prop:\"likes\"}},[i(\"el-date-picker\",{attrs:{type:\"datetime\",placeholder:\"选择日期时间\",\"default-time\":\"12:00:00\"},model:{value:t.form.publishAtTime,callback:function(e){t.$set(t.form,\"publishAtTime\",e)},expression:\"form.publishAtTime\"}})],1),i(\"el-form-item\",{staticClass:\"submit-box\"},[i(\"el-button\",{staticStyle:{\"margin-right\":\"50px\"},attrs:{type:\"primary\"},on:{click:t.submitForm}},[t._v(\"确   定\")]),i(\"el-button\",{on:{click:t.resetForm}},[t._v(\"重   置\")])],1)],1)],1)])},s=[],l=(i(\"b0c0\"),i(\"a434\"),i(\"7139\")),c=i(\"f3e4\"),u=i(\"cebe\"),d=i.n(u),p={data:function(){return{form:{entityId:\"\",entityType:2,status:5,appId:\"\",areaId:\"\",content:\"\",images:\"\",video:\"\",likes:10,publishAtTime:void 0},dialogVisible:!1,imgDialogVisible:!1,messageTypes:Object(l[\"s\"])(),areaList:Object(l[\"e\"])(),appList:Object(l[\"c\"])()}},methods:{init:function(t){this.form.entityId=t},submitForm:function(){var t=this,e=this;this.$refs.ruleForm.validate((function(i){if(i){var a=t.form;a.publishAt=a.publishAtTime.getTime()/1e3,t.$service.robot.saveMoment(a,(function(t){t?(e.$message.success(\"保存成功!\"),e.closeDialog()):e.$message.error(\"保存失败!\")}))}}))},resetForm:function(t){this.$refs.ruleForm.resetFields()},closeDialog:function(){this.dialogVisible=!1,this.resetForm(),this.$emit(\"fetchData\")},previewAvatar:function(t){this.imgDialogVisible=!0},previewPhoto:function(t){this.imgDialogVisible=!0},previewVideo:function(t){this.imgDialogVisible=!0},successAvatar:function(t){var e=this;this.imgUpload(t.raw,1,(function(t){e.form.avatar=t.uri}))},successPhoto:function(t){var e=this;this.imgUpload(t.raw,1,(function(t){e.form.photoIds.push(t.id)}))},successVideo:function(t){var e=this;this.imgUpload(t.raw,2,(function(t){e.form.videoIds.push(t.id),e.form.video=t.id}))},removePhoto:function(t,e){for(var i=this.form.photoIds,a=t.name,o=0;o<i.length;o++)if(i[o]===a){i.splice(o,1);break}},removeVideo:function(t,e){for(var i=this.form.videoIds,a=t.name,o=0;o<i.length;o++)if(i[o]===a){i.splice(o,1);break}},imgUpload:function(t,e,i){var a={\"Content-Type\":\"multipart/form-data\",token:Object(c[\"a\"])(),\"area-id\":1,\"file-type\":e},o=new FormData;o.append(\"file\",t),d()({url:\"http://101.33.118.232:8101/file/upload\",method:\"post\",data:o,headers:a}).then((function(t){var e=t.data;i(e)}))}}},m=p,f=(i(\"bc7a\"),i(\"2877\")),b=Object(f[\"a\"])(m,r,s,!1,null,null,null),h=b.exports,g=i(\"b522\"),v=i(\"c466\"),y={name:\"Table\",components:{Pagination:n[\"a\"],Hints:g[\"a\"],addRobotDynamic:h},data:function(){return{listLoading:!0,search:{entityType:2,entityId:\"\",page:{currentPage:1,pageSize:10}},total:0,tableData:[],multipleSelection:[],formVisible:!1,areaList:Object(l[\"e\"])(),appList:[]}},created:function(){},watch:{$route:{handler:function(t,e){this.search.entityId=this.$route.query.robotId,this.search.nickname=this.$route.query.nickname,this.fetchData()},deep:!0}},methods:{fetchData:function(){var t=this;this.listLoading=!0,this.$service.robot.getMomentList(this.search,(function(e){var i=e.getMomentsList(),a=[];i.forEach((function(e,i){var o={id:e.getId(),appId:e.getAppId(),appStr:Object(l[\"d\"])(Object(l[\"f\"])(t.search.areaId,!1),e.getAppId()),areaId:e.getAreaId(),areaStr:Object(l[\"g\"])(t.areaList,e.getAreaId()),entityType:e.getEntityType(),entityId:e.getEntityId(),status:Object(l[\"B\"])(e.getStatus()),content:e.getContent(),images:e.getImagesList(),video:e.getVideo(),thumb:e.getThumb(),likes:e.getLikes(),publishAt:Object(v[\"c\"])(e.getPublishAt()),nickname:e.getNickname(),avatar:e.getAvatar()};a.push(o)})),t.tableData=a,t.listLoading=!1}))},onSubmit:function(){this.search.page.currentPage=1,this.fetchData()},toDialog:function(t,e){var i=this;this.$refs[t].dialogVisible=!0,this.$nextTick((function(){i.$refs[t].init(i.search.entityId)}))},handleDelete:function(t,e){var i=this;console.log(t,e),this.$confirm(\"此操作将删除选中数据, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){i.$message({type:\"success\",message:\"删除成功!\"})})).catch((function(){i.$message({type:\"info\",message:\"已取消删除\"})}))},batchDelete:function(){this.multipleSelection.length<1?this.$message({message:\"请先选择要删除的数据！\",type:\"warning\"}):this.handleDelete()}}},I=y,w=(i(\"82bb\"),Object(f[\"a\"])(I,a,o,!1,null,null,null));e[\"default\"]=w.exports},\"82bb\":function(t,e,i){\"use strict\";i(\"2f9b\")},\"841c\":function(t,e,i){\"use strict\";var a=i(\"d784\"),o=i(\"825a\"),n=i(\"1d80\"),r=i(\"129f\"),s=i(\"577e\"),l=i(\"14c3\");a(\"search\",(function(t,e,i){return[function(e){var i=n(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,i):new RegExp(e)[t](s(i))},function(t){var a=o(this),n=s(t),c=i(e,a,n);if(c.done)return c.value;var u=a.lastIndex;r(u,0)||(a.lastIndex=0);var d=l(a,n);return r(a.lastIndex,u)||(a.lastIndex=u),null===d?-1:d.index}]}))},\"8b72\":function(t,e,i){},a9e3:function(t,e,i){\"use strict\";var a=i(\"83ab\"),o=i(\"da84\"),n=i(\"94ca\"),r=i(\"6eeb\"),s=i(\"5135\"),l=i(\"c6b6\"),c=i(\"7156\"),u=i(\"d9b5\"),d=i(\"c04e\"),p=i(\"d039\"),m=i(\"7c73\"),f=i(\"241c\").f,b=i(\"06cf\").f,h=i(\"9bf2\").f,g=i(\"58a8\").trim,v=\"Number\",y=o[v],I=y.prototype,w=l(m(I))==v,k=function(t){if(u(t))throw TypeError(\"Cannot convert a Symbol value to a number\");var e,i,a,o,n,r,s,l,c=d(t,\"number\");if(\"string\"==typeof c&&c.length>2)if(c=g(c),e=c.charCodeAt(0),43===e||45===e){if(i=c.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+c}for(n=c.slice(2),r=n.length,s=0;s<r;s++)if(l=n.charCodeAt(s),l<48||l>o)return NaN;return parseInt(n,a)}return+c};if(n(v,!y(\" 0o1\")||!y(\"0b1\")||y(\"+0x1\"))){for(var D,x=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof x&&(w?p((function(){I.valueOf.call(i)})):l(i)!=v)?c(new y(k(e)),i,x):k(e)},A=a?f(y):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range\".split(\",\"),_=0;A.length>_;_++)s(y,D=A[_])&&!s(x,D)&&h(x,D,b(y,D));x.prototype=I,I.constructor=x,r(o,v,x)}},bc7a:function(t,e,i){\"use strict\";i(\"8b72\")},c466:function(t,e,i){\"use strict\";function a(t){return 0===t?\"\":new Date(1e3*t).format(\"yyyy-MM-dd\")}function o(t){return 0===t?\"\":new Date(1e3*t).format(\"yyyy-MM-dd hh:mm:ss\")}function n(t){return\"undefined\"==typeof t&&(t=new Date),t.format(\"yyyy-MM-dd\")}i.d(e,\"b\",(function(){return a})),i.d(e,\"c\",(function(){return o})),i.d(e,\"a\",(function(){return n}))}}]);","extractedComments":[]}
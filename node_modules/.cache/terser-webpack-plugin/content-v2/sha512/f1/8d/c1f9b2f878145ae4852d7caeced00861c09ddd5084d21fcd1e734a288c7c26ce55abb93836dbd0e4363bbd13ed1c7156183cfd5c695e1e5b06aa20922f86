{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-25831638\"],{1:function(e,t){},\"206f\":function(e,t,a){\"use strict\";a(\"f678\")},\"333d\":function(e,t,a){\"use strict\";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"pagination-wrapper\"},[a(\"el-pagination\",{attrs:{background:e.background,\"current-page\":e.currentPage,\"page-sizes\":e.pageSizes,\"page-size\":e.pageSize,total:e.total,layout:e.layout},on:{\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t},\"update:pageSize\":function(t){e.pageSize=t},\"update:page-size\":function(t){e.pageSize=t},\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)},r=[],n=(a(\"a9e3\"),{name:\"Pagination\",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[5,10,15,20,50,1e3]}},total:{type:Number,default:0,required:!0},layout:{type:String,default:\"total, prev, pager, next, sizes, jumper\"}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit(\"update:page\",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.emit(\"update:limit\",e)}}},methods:{handleSizeChange:function(e){this.$emit(\"changePageSize\",{page:this.currentPage,limit:e}),this.$emit(\"pagination\",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit(\"pagination\",{page:e,limit:this.pageSize})}}}),l=n,s=(a(\"206f\"),a(\"2877\")),o=Object(s[\"a\"])(l,i,r,!1,null,null,null);t[\"a\"]=o.exports},\"657c\":function(e,t,a){\"use strict\";a(\"f90b\")},\"6cf0\":function(e,t,a){\"use strict\";a(\"b75c\")},\"76e0\":function(e,t,a){\"use strict\";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"table-classic-wrapper\"},[a(\"el-card\",{attrs:{shadow:\"always\"}},[a(\"el-form\",{ref:\"searchForm\",staticClass:\"search-form\",attrs:{inline:!0,model:e.search,\"label-width\":\"90px\"}},[a(\"el-form-item\",{attrs:{label:\"关键词\"}},[a(\"el-input\",{attrs:{placeholder:\"关键词\"},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,\"keyword\",t)},expression:\"search.keyword\"}})],1),a(\"el-form-item\",{attrs:{label:\"消息类型\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.search.type,callback:function(t){e.$set(e.search,\"type\",t)},expression:\"search.type\"}},e._l(e.messageTypeList,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"区域\"}},[a(\"el-select\",{attrs:{disabled:0!==e.authAreaId,placeholder:\"请选择\"},on:{change:e.changeArea},model:{value:e.search.areaId,callback:function(t){e.$set(e.search,\"areaId\",t)},expression:\"search.areaId\"}},e._l(e.areaData,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"el-button\",{staticStyle:{width:\"120px\"},attrs:{type:\"primary\",size:\"small\"},on:{click:e.onSearch}},[e._v(\"查  询\")])],1),a(\"el-collapse\",{attrs:{accordion:\"\"},on:{change:function(t){e.isCollapse=!e.isCollapse}}},[a(\"el-collapse-item\",[a(\"template\",{slot:\"title\"},[e._v(\"\\n                            \"+e._s(e.isCollapse?\"展开\":\"收起\")+\"\\n                        \")]),a(\"div\",[a(\"el-form-item\",{attrs:{label:\"用户Id\"}},[a(\"el-input\",{attrs:{type:\"number\",placeholder:\"用户Id\"},model:{value:e.search.userId,callback:function(t){e.$set(e.search,\"userId\",t)},expression:\"search.userId\"}})],1),a(\"el-form-item\",{attrs:{label:\"主播Id\"}},[a(\"el-input\",{attrs:{type:\"number\",placeholder:\"主播Id\"},model:{value:e.search.anchorId,callback:function(t){e.$set(e.search,\"anchorId\",t)},expression:\"search.anchorId\"}})],1),a(\"el-form-item\",{attrs:{label:\"APP\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.search.appId,callback:function(t){e.$set(e.search,\"appId\",t)},expression:\"search.appId\"}},e._l(e.appList,(function(t){return a(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}},[a(\"span\",{staticStyle:{float:\"left\"}},[e._v(e._s(t.label))]),1===t.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\",staticStyle:{float:\"right\"}})]):2===t.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\",staticStyle:{float:\"right\"}})]):e._e()])})),1)],1),a(\"el-form-item\",{attrs:{label:\"发送时间\"}},[a(\"el-date-picker\",{attrs:{type:\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:e.search.date,callback:function(t){e.$set(e.search,\"date\",t)},expression:\"search.date\"}})],1)],1)],2)],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[a(\"el-table-column\",{attrs:{prop:\"app\",label:\"来源App\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[e._v(\"\\n                            \"+e._s(t.row.app.label)+\"\\n                            \"),1===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\"})]):2===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\"})]):e._e()])]}}])}),a(\"el-table-column\",{attrs:{prop:\"areaStr\",label:\"区域\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"userId\",label:\"用户id\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"directionStr\",label:\"消息方向\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"anchorId\",label:\"主播id\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"typeStr\",label:\"消息类型\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[a(\"el-tag\",{attrs:{size:\"medium\"}},[e._v(e._s(t.row.typeStr))])],1)]}}])}),a(\"el-table-column\",{attrs:{prop:\"text\",label:\"私信内容\",align:\"center\",\"show-overflow-tooltip\":!0},scopedSlots:e._u([{key:\"default\",fn:function(t){return[1===t.row.type?a(\"div\",[e._v(\"\\n                            \"+e._s(t.row.text)+\"\\n                        \")]):e._e(),4===t.row.type?a(\"div\",[a(\"el-image\",{staticStyle:{width:\"50px\",height:\"50px\"},attrs:{contain:\"\",src:t.row.uri,\"preview-src-list\":[t.row.uri]}})],1):e._e(),5===t.row.type||8===t.row.type?a(\"div\",[a(\"div\",{on:{click:function(a){return e.play(t.row)}}},[a(\"el-image\",{staticStyle:{width:\"50px\",height:\"50px\"},attrs:{src:t.row.thumb,contain:\"\"}})],1)]):e._e(),6===t.row.type?a(\"div\",[t.row.uri?a(\"div\",[a(\"m-audio\",{attrs:{src:t.row.uri}})],1):e._e()]):a(\"div\",[e._v(\"\\n                            \"+e._s(t.row.text)+\"\\n                        \")])]}}])}),a(\"el-table-column\",{attrs:{prop:\"sendAt\",label:\"发送时间\",align:\"center\",width:\"220\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"250\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(a){return e.toDialog(\"showDialog\",t.row)}}},[e._v(\"查看对话\")])]}}])})],1),a(\"Pagination\",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{\"update:page\":function(t){return e.$set(e.search.page,\"currentPage\",t)},\"update:limit\":function(t){return e.$set(e.search.page,\"pageSize\",t)},pagination:e.fetchData,changePageSize:function(t){return e.changePageSize(t)}}}),a(\"showDialog\",{ref:\"showDialog\"}),a(\"el-dialog\",{attrs:{title:\"播放视频\",visible:e.playVisible,\"before-close\":e.closeVideo,\"append-to-body\":!0},on:{\"update:visible\":function(t){e.playVisible=t}}},[a(\"div\",{staticClass:\"content-item\"},[a(\"VueVideoPlayer\",{ref:\"myVideoPlayer\"})],1)])],1)],1)},r=[],n=(a(\"ac1f\"),a(\"841c\"),a(\"159b\"),a(\"ed2c\"),a(\"333d\")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{title:\"对话\",visible:e.dialogVisible,\"append-to-body\":\"\",width:\"70%\",\"before-close\":e.closeDialog},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"div\",{staticClass:\"table-classic-wrapper\",staticStyle:{\"padding-bottom\":\"20px\"}},[a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[a(\"el-table-column\",{attrs:{prop:\"app\",label:\"来源App\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[e._v(\"\\n                            \"+e._s(t.row.app.label)+\"\\n                            \"),1===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\"})]):2===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\"})]):e._e()])]}}])}),a(\"el-table-column\",{attrs:{prop:\"userId\",label:\"用户id\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"directionStr\",label:\"消息方向\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"anchorId\",label:\"主播id\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"type\",label:\"消息类型\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[a(\"el-tag\",{attrs:{size:\"medium\"}},[e._v(e._s(t.row.type))])],1)]}}])}),a(\"el-table-column\",{attrs:{prop:\"text\",label:\"私信内容\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"sendAt\",label:\"发送时间\",align:\"center\",width:\"220\"}})],1),a(\"Pagination\",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{\"update:page\":function(t){return e.$set(e.search.page,\"currentPage\",t)},\"update:limit\":function(t){return e.$set(e.search.page,\"pageSize\",t)},pagination:e.fetchData}})],1)])},s=[],o=a(\"7139\"),c=a(\"ca00\"),u={name:\"Table\",components:{Pagination:n[\"a\"]},data:function(){return{listLoading:!0,search:{areaId:void 0,userId:void 0,anchorId:void 0,appId:void 0,direction:0,type:void 0,keyword:void 0,createdStart:void 0,createdEnd:void 0,page:{currentPage:1,pageSize:10}},tableData:{},total:0,dialogVisible:!1,areaData:Object(o[\"f\"])(!0),appList:Object(o[\"c\"])(),messageTypeList:Object(o[\"u\"])()}},methods:{init:function(e){this.search.userId=e.userId,this.search.anchorId=e.anchorId,this.fetchData()},fetchData:function(){var e=this;this.listLoading=!0,this.$service.chat.getChatMessageList(this.handleParam(),(function(t){var a=t.getMessagesList(),i=[];a.forEach((function(t,a){var r={id:t.getId(),appId:t.getAppId(),app:Object(o[\"e\"])(e.appList,t.getAppId()),userId:t.getUserId(),direction:t.getDirection(),directionStr:1===t.getDirection()?\"<--\":\"--\\x3e\",anchorId:t.getAnchorId(),type:Object(o[\"u\"])(t.getType()),text:t.getText(),uri:t.getUri(),sendAt:Object(c[\"i\"])(t.getSendAt())};i.push(r)})),e.total=t.getTotalCount(),e.tableData=i,e.listLoading=!1}))},handleParam:function(){var e=this.search;return e},resetForm:function(){this.$refs.ruleForm.resetFields()},closeDialog:function(){this.dialogVisible=!1,this.resetForm(),this.$emit(\"fetchData\")}}},d=u,p=(a(\"6cf0\"),a(\"2877\")),g=Object(p[\"a\"])(d,l,s,!1,null,null,null),h=g.exports,f=a(\"be3f\"),b={components:{Pagination:n[\"a\"],showDialog:h,VueVideoPlayer:f[\"a\"]},data:function(){return{listLoading:!0,search:{areaId:Object(o[\"n\"])(),userId:void 0,anchorId:void 0,appId:void 0,direction:0,type:void 0,keyword:void 0,date:[],page:{currentPage:1,pageSize:10}},total:0,playVisible:!1,authAreaId:Object(o[\"n\"])(),isCollapse:!0,areaData:Object(o[\"f\"])(!0),appList:[],messageTypeList:Object(o[\"u\"])()}},created:function(){this.changeArea(this.search.areaId),this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,this.$service.chat.getChatMessageList(this.handleParam(),(function(t){var a=t.getMessagesList(),i=[];a.forEach((function(t,a){var r={id:t.getId(),areaId:t.getAreaId(),areaStr:Object(o[\"g\"])(e.areaData,t.getAreaId()),appId:t.getAppId(),app:Object(o[\"e\"])(Object(o[\"d\"])(e.search.areaId,!1),t.getAppId()),userId:t.getUserId(),direction:t.getDirection(),directionStr:1===t.getDirection()?\"<--\":\"--\\x3e\",anchorId:t.getAnchorId(),type:t.getType(),typeStr:Object(o[\"u\"])(t.getType()),text:t.getText(),uri:t.getUri(),sendAt:Object(c[\"i\"])(t.getSendAt())};i.push(r)})),e.total=t.getTotalCount(),e.tableData=i,e.listLoading=!1}))},handleParam:function(){var e=this.search;return e.date.length>0&&(e.createdStartUint=Object(c[\"f\"])(this.search.date[0]),e.createdEndUint=Object(c[\"b\"])(this.search.date[1])),e},onSearch:function(){this.search.page.currentPage=1,this.fetchData()},toDialog:function(e,t){var a=this;this.$refs[e].dialogVisible=!0,this.$nextTick((function(){a.$refs[e].init(t)}))},changePageSize:function(e){this.search.page.pageSize=e.limit},resetForm:function(){this.$refs.searchForm.resetFields()},play:function(e){var t=this;this.playVisible=!0;var a=e.uri;this.$nextTick((function(){t.$refs.myVideoPlayer.initSrc(a)}))},closeVideo:function(){var e=this;this.playVisible=!1,this.$nextTick((function(){e.$refs.myVideoPlayer.emptySrc()}))},changeArea:function(e){this.appList=Object(o[\"d\"])(e,!0,!0)}}},m=b,y=(a(\"657c\"),Object(p[\"a\"])(m,i,r,!1,null,null,null));t[\"default\"]=y.exports},b75c:function(e,t,a){},be3f:function(e,t,a){\"use strict\";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"videoPlayer\",{ref:\"videoPlayer\",staticClass:\"video-player vjs-custom-skin\",attrs:{playsinline:!0,options:e.playerOptions}})},r=[],n=a(\"d6d3\"),l=(a(\"fda2\"),{name:\"VueVideoPlayer\",components:{videoPlayer:n[\"videoPlayer\"]},data:function(){return{playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:\"auto\",language:\"zh-CN\",aspectRatio:\"16:9\",fluid:!0,sources:[{type:\"video/mp4\",src:\"\"}],poster:\"\",notSupportedMessage:\"此视频暂无法播放，请稍后再试\",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}},methods:{initSrc:function(e){this.playerOptions.sources[0].src=e},emptySrc:function(){this.playerOptions.sources[0].src=\"\"}}}),s=l,o=a(\"2877\"),c=Object(o[\"a\"])(s,i,r,!1,null,null,null);t[\"a\"]=c.exports},ca00:function(e,t,a){\"use strict\";a.d(t,\"h\",(function(){return i})),a.d(t,\"g\",(function(){return r})),a.d(t,\"i\",(function(){return n})),a.d(t,\"d\",(function(){return l})),a.d(t,\"c\",(function(){return s})),a.d(t,\"e\",(function(){return o})),a.d(t,\"a\",(function(){return c})),a.d(t,\"f\",(function(){return u})),a.d(t,\"b\",(function(){return d}));a(\"b0c0\");function i(e){return e/100}function r(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd\")}function n(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd hh:mm:ss\")}function l(e){return\"undefined\"==typeof e&&(e=new Date),e.format(\"yyyy-MM-dd\")}function s(e){var t=new Date((new Date).toLocaleDateString());return e?new Date(t.setDate(t.getDate()+e)):t}function o(){return new Date((new Date).toLocaleDateString())}function c(){return new Date(1e3*d(new Date))}function u(e){return new Date(e.toLocaleDateString()).getTime()/1e3}function d(e){return u(e)+86400-1}},ed2c:function(e,t,a){},f678:function(e,t,a){},f90b:function(e,t,a){}}]);","extractedComments":[]}
{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0d75f94e\"],{\"129f\":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},\"206f\":function(e,t,a){\"use strict\";a(\"f678\")},\"333d\":function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"pagination-wrapper\"},[a(\"el-pagination\",{attrs:{background:e.background,\"current-page\":e.currentPage,\"page-sizes\":e.pageSizes,\"page-size\":e.pageSize,total:e.total,layout:e.layout},on:{\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t},\"update:pageSize\":function(t){e.pageSize=t},\"update:page-size\":function(t){e.pageSize=t},\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)},i=[],n=(a(\"a9e3\"),{name:\"Pagination\",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[5,10,15,20,50,1e3]}},total:{type:Number,default:0,required:!0},layout:{type:String,default:\"total, prev, pager, next, sizes, jumper\"}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit(\"update:page\",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.emit(\"update:limit\",e)}}},methods:{handleSizeChange:function(e){this.$emit(\"changePageSize\",{page:this.currentPage,limit:e}),this.$emit(\"pagination\",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit(\"pagination\",{page:e,limit:this.pageSize})}}}),l=n,o=(a(\"206f\"),a(\"2877\")),s=Object(o[\"a\"])(l,r,i,!1,null,null,null);t[\"a\"]=s.exports},\"5f33\":function(e,t,a){\"use strict\";a(\"d859\")},\"79fb\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"table-classic-wrapper\"},[a(\"el-card\",{attrs:{shadow:\"always\"}},[a(\"div\",{staticClass:\"control-btns\"},[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.toDialog(\"push\",\"\")}}},[e._v(\"+ 创建推送消息\")])],1),a(\"el-form\",{ref:\"searchForm\",staticClass:\"search-form\",attrs:{inline:!0,model:e.search,\"label-width\":\"90px\"}},[a(\"el-form-item\",{attrs:{label:\"区域\"}},[a(\"el-select\",{attrs:{disabled:0!==e.authAreaId,placeholder:\"请选择\"},on:{change:e.changeArea},model:{value:e.search.areaId,callback:function(t){e.$set(e.search,\"areaId\",t)},expression:\"search.areaId\"}},e._l(e.areaData,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"APP\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.search.appId,callback:function(t){e.$set(e.search,\"appId\",t)},expression:\"search.appId\"}},e._l(e.appList,(function(t){return a(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}},[a(\"span\",{staticStyle:{float:\"left\"}},[e._v(e._s(t.label))]),1===t.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\",staticStyle:{float:\"right\"}})]):2===t.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\",staticStyle:{float:\"right\"}})]):e._e()])})),1)],1),a(\"el-form-item\",{attrs:{label:\"用户Id\"}},[a(\"el-input\",{attrs:{type:\"number\",placeholder:\"用户Id\"},model:{value:e.search.userId,callback:function(t){e.$set(e.search,\"userId\",t)},expression:\"search.userId\"}})],1),a(\"el-form-item\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"el-button\",{staticStyle:{width:\"120px\"},attrs:{type:\"primary\",size:\"small\"},on:{click:e.onSearch}},[e._v(\"查  询\")])],1),a(\"el-collapse\",{attrs:{accordion:\"\"},on:{change:function(t){e.isCollapse=!e.isCollapse}}},[a(\"el-collapse-item\",[a(\"template\",{slot:\"title\"},[e._v(\"\\n                        \"+e._s(e.isCollapse?\"展开\":\"收起\")+\"\\n                    \")]),a(\"div\",[a(\"el-form-item\",{attrs:{label:\"主播Id\"}},[a(\"el-input\",{attrs:{type:\"number\",placeholder:\"主播Id\"},model:{value:e.search.anchorId,callback:function(t){e.$set(e.search,\"anchorId\",t)},expression:\"search.anchorId\"}})],1),a(\"el-form-item\",{attrs:{label:\"发送时间\"}},[a(\"el-date-picker\",{attrs:{type:\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:e.search.date,callback:function(t){e.$set(e.search,\"date\",t)},expression:\"search.date\"}})],1)],1)],2)],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[a(\"el-table-column\",{attrs:{prop:\"app\",label:\"来源App\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[e._v(\"\\n                        \"+e._s(t.row.app.label)+\"\\n                        \"),1===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\"})]):2===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\"})]):e._e()])]}}])}),a(\"el-table-column\",{attrs:{prop:\"areaStr\",label:\"区域\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"userId\",label:\"用户id\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"anchorId\",label:\"主播id\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"sendScene\",label:\"发送场景\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[a(\"el-tag\",{attrs:{size:\"medium\"}},[e._v(e._s(t.row.sendScene))])],1)]}}])}),a(\"el-table-column\",{attrs:{prop:\"giftId\",label:\"礼物id\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"quantity\",label:\"数量\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"price\",label:\"单价\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"total\",label:\"总价\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"income\",label:\"主播端收入\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"createdAt\",label:\"发送时间\",align:\"center\"}})],1),a(\"Pagination\",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{\"update:page\":function(t){return e.$set(e.search.page,\"currentPage\",t)},\"update:limit\":function(t){return e.$set(e.search.page,\"pageSize\",t)},pagination:e.fetchData,changePageSize:function(t){return e.changePageSize(t)}}}),a(\"push\",{ref:\"push\"})],1)],1)},i=[],n=(a(\"ac1f\"),a(\"841c\"),a(\"159b\"),a(\"ed2c\"),a(\"333d\")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{title:\"创建消息\",visible:e.dialogVisible,\"append-to-body\":\"\",width:\"50%\",\"before-close\":e.closeDialog},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"div\",{staticClass:\"form-list-wrapper\"},[a(\"el-form\",{ref:\"ruleForm\",staticClass:\"form-list\",attrs:{model:e.form,rules:e.rules,\"label-width\":\"150px\"}},[a(\"el-form-item\",{attrs:{label:\"目标APP\",prop:\"appId\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.form.appId,callback:function(t){e.$set(e.form,\"appId\",t)},expression:\"form.appId\"}},e._l(e.appList,(function(t){return a(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}},[a(\"span\",{staticStyle:{float:\"left\"}},[e._v(e._s(t.label))]),1===t.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\",staticStyle:{float:\"right\"}})]):2===t.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\",staticStyle:{float:\"right\"}})]):e._e()])})),1)],1),a(\"el-form-item\",{attrs:{label:\"目标区域\",prop:\"areaId\"}},[a(\"el-select\",{attrs:{disabled:0!==e.authAreaId,placeholder:\"请选择\"},model:{value:e.form.areaId,callback:function(t){e.$set(e.form,\"areaId\",t)},expression:\"form.areaId\"}},e._l(e.areaData,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"目标对象\",prop:\"areaId\"}}),a(\"el-form-item\",{attrs:{label:\"推送标题\",prop:\"name\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入\"},model:{value:e.form.name,callback:function(t){e.$set(e.form,\"name\",t)},expression:\"form.name\"}})],1),a(\"el-form-item\",{attrs:{label:\"推送封面\",prop:\"areaId\"}},[a(\"div\",{staticClass:\"img\"},[a(\"el-upload\",{attrs:{limit:1,accept:\"image/*\",\"on-preview\":e.imgPreview,\"on-change\":e.successImg,\"list-type\":\"picture-card\",\"file-list\":e.imgArr,\"auto-upload\":!1}},[a(\"i\",{staticClass:\"el-icon-plus\"})])],1),a(\"div\",{staticClass:\"imgSpan2\"},[e._v(\"只能上传jpg/png文件，50X50px\")])]),a(\"el-form-item\",{attrs:{label:\"推送内容\",prop:\"areaId\"}},[a(\"el-input\",{attrs:{type:\"textarea\",autosize:{minRows:3,maxRows:5},placeholder:\"请输入内容\",maxlength:\"50\",\"show-word-limit\":\"\"},model:{value:e.form.note,callback:function(t){e.$set(e.form,\"note\",t)},expression:\"form.note\"}})],1),a(\"el-form-item\",{attrs:{label:\"跳转链接\",prop:\"areaId\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入\"},model:{value:e.form.name,callback:function(t){e.$set(e.form,\"name\",t)},expression:\"form.name\"}})],1),a(\"el-form-item\",{attrs:{label:\"是否定时推送\",prop:\"areaId\"}},[a(\"el-switch\",{model:{value:e.form.statusBool,callback:function(t){e.$set(e.form,\"statusBool\",t)},expression:\"form.statusBool\"}})],1),a(\"el-form-item\",{attrs:{label:\"定时时间\",prop:\"date\"}},[a(\"el-date-picker\",{attrs:{type:\"datetime\",placeholder:\"选择日期时间\"},model:{value:e.form.date,callback:function(t){e.$set(e.form,\"date\",t)},expression:\"form.date\"}})],1),a(\"el-form-item\",{staticClass:\"submit-box\"},[a(\"el-button\",{staticStyle:{\"margin-right\":\"50px\"},attrs:{type:\"primary\"},on:{click:e.submitForm}},[e._v(\"提   交\")]),a(\"el-button\",{on:{click:e.resetForm}},[e._v(\"重   置\")])],1)],1)],1),a(\"el-dialog\",{attrs:{visible:e.imgDialog,\"modal-append-to-body\":!0,\"append-to-body\":\"\"},on:{\"update:visible\":function(t){e.imgDialog=t}}},[a(\"img\",{attrs:{width:\"100%\",src:e.imgUri,alt:\"\"}})])],1)},o=[],s=a(\"da46\"),c=a(\"7139\"),u=a(\"f3e4\"),d=a(\"cebe\"),p=a.n(d),f={name:\"Form\",components:{boolDict:s[\"d\"]},data:function(){return{form:{areaId:void 0},authAreaId:Object(c[\"n\"])(),dialogVisible:!1,imgArr:[],imgDialog:!1,imgUri:void 0,areaData:Object(c[\"f\"])(!1),appList:Object(c[\"c\"])(!0,!0),rules:{areaId:[{required:!0,message:\"请选择\",trigger:\"change\"}],name:[{required:!0,message:\"内容不能为空\",trigger:\"blur\"}],enable:[{required:!0,message:\"内容不能为空\",trigger:\"blur\"}]}}},methods:{init:function(e){this.form.areaId=0===this.authAreaId?this.areaData[0].value:this.authAreaId},submitForm:function(e){var t=this,a=this;this.$refs.ruleForm.validate((function(e){e&&t.$service.guild.saveGuild(t.form,(function(e){e?(a.$message.success(\"保存成功!\"),Object(c[\"P\"])(),a.closeDialog()):a.$message.error(\"保存失败!\")}))}))},closeDialog:function(){this.dialogVisible=!1,this.resetForm(),this.$emit(\"fetchData\")},resetForm:function(){this.$refs.ruleForm.resetFields()},imgPreview:function(e){this.imgDialog=!0,this.imgUri=e.url},successImg:function(e){var t=this;this.formLoading=!0,this.imgUpload(e.raw,1,(function(e){t.form.avatar=e.uri,t.formLoading=!1}))},imgUpload:function(e,t,a){var r={\"Content-Type\":\"multipart/form-data\",token:Object(u[\"a\"])(),\"area-id\":1,\"file-type\":t},i=new FormData;i.append(\"file\",e),p()({url:\"https://freshjuice.cc/file/upload\",method:\"post\",data:i,headers:r}).then((function(e){var t=e.data;a(t)}))}}},m=f,g=(a(\"5f33\"),a(\"2877\")),h=Object(g[\"a\"])(m,l,o,!1,null,null,null),b=h.exports,v=a(\"ca00\"),I={components:{Pagination:n[\"a\"],push:b},data:function(){return{listLoading:!0,search:{areaId:Object(c[\"n\"])(),userId:void 0,anchorId:void 0,appId:void 0,date:[],page:{currentPage:1,pageSize:10}},total:0,authAreaId:Object(c[\"n\"])(),isCollapse:!0,areaData:Object(c[\"f\"])(!0),appList:[],messageTypeList:Object(c[\"u\"])()}},created:function(){this.changeArea(this.search.areaId),this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,this.$service.gift.getGiftList(this.handleParam(),(function(t){var a=t.getGiftsList(),r=[];a.forEach((function(t,a){var i={id:t.getId(),areaId:t.getAreaId(),areaStr:Object(c[\"g\"])(e.areaData,t.getAreaId()),appId:t.getAppId(),app:Object(c[\"e\"])(Object(c[\"d\"])(e.search.areaId,!1),t.getAppId()),userId:t.getUserId(),anchorId:t.getAnchorId(),sendScene:0===t.getCallId()?\"聊天\":\"通话\",giftId:t.getGiftId(),quantity:t.getQuantity(),price:t.getPrice(),total:t.getTotal(),income:t.getIncome(),createdAt:Object(v[\"i\"])(t.getCreatedAt())};r.push(i)})),e.total=t.getTotalCount(),e.tableData=r,e.listLoading=!1}))},handleParam:function(){var e=this.search;return e.date.length>0&&(e.createdStartUint=Object(v[\"f\"])(this.search.date[0]),e.createdEndUint=Object(v[\"b\"])(this.search.date[1])),e},onSearch:function(){this.search.page.currentPage=1,this.fetchData()},toDialog:function(e,t){var a=this;this.$refs[e].dialogVisible=!0,this.$nextTick((function(){a.$refs[e].init(t)}))},changePageSize:function(e){this.search.page.pageSize=e.limit},resetForm:function(){this.$refs.searchForm.resetFields()},play:function(e){var t=this;this.playVisible=!0;var a=e.uri;this.$nextTick((function(){t.$refs.myVideoPlayer.initSrc(a)}))},changeArea:function(e){this.appList=Object(c[\"d\"])(e,!0,!0)}}},y=I,w=(a(\"c9af\"),Object(g[\"a\"])(y,r,i,!1,null,null,null));t[\"default\"]=w.exports},\"841c\":function(e,t,a){\"use strict\";var r=a(\"d784\"),i=a(\"825a\"),n=a(\"1d80\"),l=a(\"129f\"),o=a(\"577e\"),s=a(\"14c3\");r(\"search\",(function(e,t,a){return[function(t){var a=n(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](o(a))},function(e){var r=i(this),n=o(e),c=a(t,r,n);if(c.done)return c.value;var u=r.lastIndex;l(u,0)||(r.lastIndex=0);var d=s(r,n);return l(r.lastIndex,u)||(r.lastIndex=u),null===d?-1:d.index}]}))},a9e3:function(e,t,a){\"use strict\";var r=a(\"83ab\"),i=a(\"da84\"),n=a(\"94ca\"),l=a(\"6eeb\"),o=a(\"5135\"),s=a(\"c6b6\"),c=a(\"7156\"),u=a(\"d9b5\"),d=a(\"c04e\"),p=a(\"d039\"),f=a(\"7c73\"),m=a(\"241c\").f,g=a(\"06cf\").f,h=a(\"9bf2\").f,b=a(\"58a8\").trim,v=\"Number\",I=i[v],y=I.prototype,w=s(f(y))==v,S=function(e){if(u(e))throw TypeError(\"Cannot convert a Symbol value to a number\");var t,a,r,i,n,l,o,s,c=d(e,\"number\");if(\"string\"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(n=c.slice(2),l=n.length,o=0;o<l;o++)if(s=n.charCodeAt(o),s<48||s>i)return NaN;return parseInt(n,r)}return+c};if(n(v,!I(\" 0o1\")||!I(\"0b1\")||I(\"+0x1\"))){for(var D,_=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof _&&(w?p((function(){y.valueOf.call(a)})):s(a)!=v)?c(new I(S(t)),a,_):S(t)},x=r?m(I):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range\".split(\",\"),k=0;x.length>k;k++)o(I,D=x[k])&&!o(_,D)&&h(_,D,g(I,D));_.prototype=y,y.constructor=_,l(i,v,_)}},c9af:function(e,t,a){\"use strict\";a(\"f004\")},ca00:function(e,t,a){\"use strict\";a.d(t,\"h\",(function(){return r})),a.d(t,\"g\",(function(){return i})),a.d(t,\"i\",(function(){return n})),a.d(t,\"d\",(function(){return l})),a.d(t,\"c\",(function(){return o})),a.d(t,\"e\",(function(){return s})),a.d(t,\"a\",(function(){return c})),a.d(t,\"f\",(function(){return u})),a.d(t,\"b\",(function(){return d}));a(\"b0c0\");function r(e){return e/100}function i(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd\")}function n(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd hh:mm:ss\")}function l(e){return\"undefined\"==typeof e&&(e=new Date),e.format(\"yyyy-MM-dd\")}function o(e){var t=new Date((new Date).toLocaleDateString());return e?new Date(t.setDate(t.getDate()+e)):t}function s(){return new Date((new Date).toLocaleDateString())}function c(){return new Date(1e3*d(new Date))}function u(e){return new Date(e.toLocaleDateString()).getTime()/1e3}function d(e){return u(e)+86400-1}},d859:function(e,t,a){},da46:function(e,t,a){\"use strict\";a.d(t,\"d\",(function(){return r})),a.d(t,\"b\",(function(){return i})),a.d(t,\"a\",(function(){return n})),a.d(t,\"c\",(function(){return l})),a.d(t,\"e\",(function(){return o}));var r=[{value:!0,label:\"是\"},{value:!1,label:\"否\"}],i=[{value:1,label:\"中东\"},{value:2,label:\"印尼\"}],n=[{value:1,label:\"差劲\"},{value:2,label:\"中等\"},{value:2,label:\"良好\"},{value:2,label:\"优秀\"}],l=[{value:\"0.5\",label:\"30分钟\"},{value:1,label:\"1小时\"},{value:3,label:\"3小时\"},{value:\"24\",label:\"1天\"},{value:\"72\",label:\"3天\"},{value:\"168\",label:\"7天\"}],o=[{value:1,label:\"奖励\"},{value:2,label:\"抽奖\"}]},ed2c:function(e,t,a){},f004:function(e,t,a){},f678:function(e,t,a){}}]);","extractedComments":[]}
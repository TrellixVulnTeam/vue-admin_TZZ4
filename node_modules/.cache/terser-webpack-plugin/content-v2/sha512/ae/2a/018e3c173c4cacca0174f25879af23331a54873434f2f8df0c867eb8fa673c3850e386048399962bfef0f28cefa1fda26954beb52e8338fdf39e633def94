{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-11792c09\"],{\"206f\":function(e,t,a){\"use strict\";a(\"f678\")},\"333d\":function(e,t,a){\"use strict\";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"pagination-wrapper\"},[a(\"el-pagination\",{attrs:{background:e.background,\"current-page\":e.currentPage,\"page-sizes\":e.pageSizes,\"page-size\":e.pageSize,total:e.total,layout:e.layout},on:{\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t},\"update:pageSize\":function(t){e.pageSize=t},\"update:page-size\":function(t){e.pageSize=t},\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)},r=[],i=(a(\"a9e3\"),{name:\"Pagination\",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[5,10,15,20,50,1e3]}},total:{type:Number,default:0,required:!0},layout:{type:String,default:\"total, prev, pager, next, sizes, jumper\"}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit(\"update:page\",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.emit(\"update:limit\",e)}}},methods:{handleSizeChange:function(e){this.$emit(\"changePageSize\",{page:this.currentPage,limit:e}),this.$emit(\"pagination\",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit(\"pagination\",{page:e,limit:this.pageSize})}}}),s=i,l=(a(\"206f\"),a(\"2877\")),o=Object(l[\"a\"])(s,n,r,!1,null,null,null);t[\"a\"]=o.exports},\"64b6\":function(e,t,a){\"use strict\";a(\"77d3\")},\"77d3\":function(e,t,a){},\"7ac6\":function(e,t,a){\"use strict\";a(\"c567\")},8719:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"home-wrapper\"},[a(\"el-row\",{staticClass:\"date-box\",attrs:{gutter:20}},[a(\"el-col\",{attrs:{span:24}},[a(\"el-card\",{attrs:{shadow:\"always\",\"body-style\":{padding:\"10px\",paddingTop:\"20px\"}}},[a(\"el-form\",{ref:\"searchForm\",staticClass:\"search-form\",attrs:{inline:!0,model:e.search,\"label-width\":\"90px\"}},[a(\"el-form-item\",{attrs:{label:\"区域\"}},[a(\"el-select\",{attrs:{disabled:0!==e.authAreaId,placeholder:\"请选择\"},on:{change:e.changeArea},model:{value:e.search.areaId,callback:function(t){e.$set(e.search,\"areaId\",t)},expression:\"search.areaId\"}},e._l(e.areaList,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"APP\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.search.appId,callback:function(t){e.$set(e.search,\"appId\",t)},expression:\"search.appId\"}},e._l(e.appList,(function(t){return a(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}},[a(\"span\",{staticStyle:{float:\"left\"}},[e._v(e._s(t.label))]),1===t.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\",staticStyle:{float:\"right\"}})]):2===t.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\",staticStyle:{float:\"right\"}})]):e._e()])})),1)],1),a(\"el-form-item\",{attrs:{label:\"间隔\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.search.interval,callback:function(t){e.$set(e.search,\"interval\",t)},expression:\"search.interval\"}},e._l(e.intervalList,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"时间\",prop:\"createdStart\"}},[a(\"el-date-picker\",{attrs:{type:\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:e.search.date,callback:function(t){e.$set(e.search,\"date\",t)},expression:\"search.date\"}})],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"danger\",icon:\"el-icon-refresh\"},on:{click:e.onSearch}},[e._v(\"刷 新\")])],1)],1)],1)],1)],1),a(\"el-menu\",{staticClass:\"el-menu-demo\",attrs:{\"default-active\":e.activeIndex,mode:\"horizontal\"},on:{select:e.selItem}},[a(\"el-menu-item\",{attrs:{index:\"1\"}},[e._v(\"整体收入\")]),a(\"el-menu-item\",{attrs:{index:\"2\"}},[e._v(\"新增收入\")]),a(\"el-menu-item\",{attrs:{index:\"3\"}},[e._v(\"整体付费率\")]),a(\"el-menu-item\",{attrs:{index:\"4\"}},[e._v(\"新增付费率\")]),a(\"el-menu-item\",{attrs:{index:\"5\"}},[e._v(\"新增用户数\")]),a(\"el-menu-item\",{attrs:{index:\"7\"}},[e._v(\"电话接通率\")]),a(\"el-menu-item\",{attrs:{index:\"8\"}},[e._v(\"平均通话时长\")]),a(\"el-menu-item\",{attrs:{index:\"9\"}},[e._v(\"APUR\")])],1),a(\"el-row\",{staticClass:\"date-box\",attrs:{gutter:30}},[a(\"el-col\",{attrs:{span:24}},[a(\"el-card\",{attrs:{shadow:\"always\",\"body-style\":{padding:\"10px\",paddingTop:\"20px\"}}},[a(\"ChartsLine\",{ref:\"chartsLine\",staticClass:\"data-chart\",attrs:{data:e.incomeData}})],1)],1)],1),a(\"el-card\",{staticStyle:{\"padding-top\":\"30px\",\"padding-bottom\":\"50px\"},attrs:{shadow:\"always\"}},[a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"tooltip-effect\":\"dark\",size:\"medium\"}},[a(\"el-table-column\",{attrs:{prop:\"date\",label:\"日期\",align:\"center\",width:\"200\"}}),a(\"el-table-column\",{attrs:{prop:\"app\",label:\"APP\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{attrs:{slot:\"reference\"},slot:\"reference\"},[e._v(\"\\n                        \"+e._s(t.row.app.label)+\"\\n                        \"),1===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-android-fill\"})]):2===t.row.app.os?a(\"span\",[a(\"i\",{staticClass:\"icon-pingguo\"})]):e._e()])]}}])}),a(\"el-table-column\",{attrs:{prop:\"areaName\",label:\"区域\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"income\",label:\"整体收入\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"newIncome\",label:\"新增收入\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"payPaidRatio\",label:\"整体付费率\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"newPayPaidRatio\",label:\"新增付费率\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"newUser\",label:\"新增用户数\",align:\"center\",width:\"120\"}}),a(\"el-table-column\",{attrs:{prop:\"answerRatio\",label:\"电话接通率\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"durationRatio\",label:\"平均通话时长\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"arpu\",label:\"ARPU\",align:\"center\"}})],1),a(\"Pagination\",{attrs:{total:e.total,page:e.search.page.currentPage,limit:e.search.page.pageSize},on:{\"update:page\":function(t){return e.$set(e.search.page,\"currentPage\",t)},\"update:limit\":function(t){return e.$set(e.search.page,\"pageSize\",t)},pagination:e.fetchData}})],1)],1)},r=[],i=(a(\"ac1f\"),a(\"841c\"),a(\"159b\"),a(\"d3b7\"),a(\"ddb0\"),a(\"ec1b\")),s=a.n(i),l=a(\"d909\"),o=a(\"333d\"),c=a(\"7139\"),u=a(\"ca00\"),d={name:\"Home\",components:{CountTo:s.a,ChartsLine:l[\"a\"],Pagination:o[\"a\"]},data:function(){return{listLoading:!0,search:{areaId:0,appId:0,date:[Object(u[\"c\"])(-6),Object(u[\"c\"])()],interval:4,page:{currentPage:1,pageSize:1e3}},total:0,activeIndex:\"1\",currentDate:{},authAreaId:Object(c[\"n\"])(),appList:void 0,areaList:Object(c[\"f\"])(!0),areaListAll:Object(c[\"f\"])(!1),intervalList:Object(c[\"H\"])(),incomeData:{title:\"整体收入\",legend:[\"整体收入\"],values:[]},newIncomeData:{title:\"新增收入\",legend:[\"新增收入\"]},payPaidRatioData:{title:\"整体付费率\",legend:[\"整体付费率\"],values:[]},newPayPaidRatioData:{title:\"新增付费率\",legend:[\"新增付费率\"],keys:[],values:[]},newUserData:{title:\"新增用户数\",legend:[\"新增用户\"],keys:[],values:[]},payUserData:{title:\"活跃的付费用户数\",legend:[\"付费率用户\"],keys:[],values:[]},answerRatioData:{title:\"电话接通率\",legend:[\"接通率\"],keys:[],values:[]},durationAverageData:{title:\"平均通话时长\",legend:[\"通话时长\"],keys:[],values:[]},arpuData:{title:\"ARPU\",legend:[\"ARPU\"],keys:[],values:[]}}},mounted:function(){this.init()},methods:{init:function(){this.search.areaId=0===this.authAreaId?this.areaList[0].value:this.authAreaId,this.changeArea(this.search.areaId),this.fetchData()},fetchData:function(){var e=this;this.cardInfoData=[];var t=this.handleSearch();this.$service.home.getUserStat(t,(function(a){var n=a.getStatsList(),r=[],i=[],s=e.toFmt(t),l=[],o=[],d=[],p=[],h=[],g=[],f=[],m=[],v=[];n.forEach((function(t,a){var n=t.getStartAt();r.push(new Date(1e3*n).format(s)),l.push(Object(u[\"h\"])(t.getIncome())),o.push(Object(u[\"h\"])(t.getNewIncome()));var b=e.toRatio(t.getPayUser(),t.getActiveUser());d.push(b);var y=e.toRatio(t.getNewPayUser(),t.getNewUser());p.push(y),h.push(t.getNewUser()),g.push(t.getPayUser());var w=e.toRatio(t.getAnswer(),t.getCall());f.push(w);var D=e.toAve(t.getDuration(),t.getAnswer());m.push(D);var I=e.toAve(t.getIncome(),t.getActiveUser());v.push(Object(u[\"h\"])(I));var P={id:t.getId(),date:new Date(1e3*n).format(\"yyyy-MM-dd hh:mm\"),appId:t.getAppId(),app:Object(c[\"e\"])(e.appList,t.getAppId()),areaId:t.getAreaId(),areaName:Object(c[\"g\"])(e.areaListAll,t.getAreaId()),income:Object(u[\"h\"])(t.getIncome()),newIncome:Object(u[\"h\"])(t.getNewIncome()),payPaidRatio:b,newPayPaidRatio:y,newUser:t.getNewUser(),payUser:t.getPayUser(),answerRatio:w,durationRatio:D,arpu:I};i.push(P)})),e.incomeData.keys=r,e.incomeData.values=[],e.incomeData.values.push(l),e.newIncomeData.keys=r,e.newIncomeData.values=[],e.newIncomeData.values.push(o),e.payPaidRatioData.keys=r,e.payPaidRatioData.values=[],e.payPaidRatioData.values.push(d),e.newPayPaidRatioData.keys=r,e.newPayPaidRatioData.values=[],e.newPayPaidRatioData.values.push(p),e.newUserData.keys=r,e.newUserData.values=[],e.newUserData.values.push(h),e.payUserData.keys=r,e.payUserData.values=[],e.payUserData.values.push(g),e.answerRatioData.keys=r,e.answerRatioData.values=[],e.answerRatioData.values.push(f),e.durationAverageData.keys=r,e.durationAverageData.values=[],e.durationAverageData.values.push(m),e.arpuData.keys=r,e.arpuData.values=[],e.arpuData.values.push(v),e.total=i.length,e.tableData=i,e.listLoading=!1,e.selItem(e.activeIndex)}))},toFmt:function(e){var t=\"MM-dd hh:mm\",a=e.interval;if(3===a){var n=e.date[0],r=e.date[1];t=n.getTime()===r.getTime()?\"hh:mm\":\"MM-dd hh:mm\"}return t},toRatio:function(e,t){return e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t)||t<=0?0:Math.round(e/t*1e4)/100},toAve:function(e,t){return 0===t?e:Math.round(e/t)},handleSearch:function(){var e=this.search;return e.startAt=Object(u[\"f\"])(this.search.date[0]),e.endAt=Object(u[\"b\"])(this.search.date[1]),e},onSearch:function(){this.search.page.currentPage=1,this.fetchData()},selItem:function(e){switch(this.currentDate={},e){case\"1\":this.currentDate=this.incomeData;break;case\"2\":this.currentDate=this.newIncomeData;break;case\"3\":this.currentDate=this.payPaidRatioData;break;case\"4\":this.currentDate=this.newPayPaidRatioData;break;case\"5\":this.currentDate=this.newUserData;break;case\"6\":this.currentDate=this.payUserData;break;case\"7\":this.currentDate=this.answerRatioData;break;case\"8\":this.currentDate=this.durationAverageData;break;case\"9\":this.currentDate=this.arpuData;break}this.activeIndex=e,this.$refs.chartsLine.init(this.currentDate)},changeArea:function(e){this.appList=Object(c[\"d\"])(e,!0,!0)}}},p=d,h=(a(\"64b6\"),a(\"7ac6\"),a(\"2877\")),g=Object(h[\"a\"])(p,n,r,!1,null,null,null);t[\"default\"]=g.exports},a9e3:function(e,t,a){\"use strict\";var n=a(\"83ab\"),r=a(\"da84\"),i=a(\"94ca\"),s=a(\"6eeb\"),l=a(\"5135\"),o=a(\"c6b6\"),c=a(\"7156\"),u=a(\"d9b5\"),d=a(\"c04e\"),p=a(\"d039\"),h=a(\"7c73\"),g=a(\"241c\").f,f=a(\"06cf\").f,m=a(\"9bf2\").f,v=a(\"58a8\").trim,b=\"Number\",y=r[b],w=y.prototype,D=o(h(w))==b,I=function(e){if(u(e))throw TypeError(\"Cannot convert a Symbol value to a number\");var t,a,n,r,i,s,l,o,c=d(e,\"number\");if(\"string\"==typeof c&&c.length>2)if(c=v(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=c.slice(2),s=i.length,l=0;l<s;l++)if(o=i.charCodeAt(l),o<48||o>r)return NaN;return parseInt(i,n)}return+c};if(i(b,!y(\" 0o1\")||!y(\"0b1\")||y(\"+0x1\"))){for(var P,A=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof A&&(D?p((function(){w.valueOf.call(a)})):o(a)!=b)?c(new y(I(t)),a,A):I(t)},k=n?g(y):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range\".split(\",\"),S=0;k.length>S;S++)l(y,P=k[S])&&!l(A,P)&&m(A,P,f(y,P));A.prototype=w,w.constructor=A,s(r,b,A)}},c567:function(e,t,a){},ca00:function(e,t,a){\"use strict\";a.d(t,\"h\",(function(){return n})),a.d(t,\"g\",(function(){return r})),a.d(t,\"i\",(function(){return i})),a.d(t,\"d\",(function(){return s})),a.d(t,\"c\",(function(){return l})),a.d(t,\"e\",(function(){return o})),a.d(t,\"a\",(function(){return c})),a.d(t,\"f\",(function(){return u})),a.d(t,\"b\",(function(){return d}));a(\"b0c0\");function n(e){return e/100}function r(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd\")}function i(e){return 0===e?\"\":new Date(1e3*e).format(\"yyyy-MM-dd hh:mm:ss\")}function s(e){return\"undefined\"==typeof e&&(e=new Date),e.format(\"yyyy-MM-dd\")}function l(e){var t=new Date((new Date).toLocaleDateString());return e?new Date(t.setDate(t.getDate()+e)):t}function o(){return new Date((new Date).toLocaleDateString())}function c(){return new Date(1e3*d(new Date))}function u(e){return new Date(e.toLocaleDateString()).getTime()/1e3}function d(e){return u(e)+86400-1}},d909:function(e,t,a){\"use strict\";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{ref:\"dom\",staticClass:\"charts-line\"})},r=[],i=(a(\"d3b7\"),a(\"ddb0\"),a(\"159b\"),a(\"313e\")),s=a.n(i),l={name:\"ChartsLine\",props:{data:{type:Object,default:function(){}}},data:function(){return{dom:null}},mounted:function(){this.drawing()},beforeDestroy:function(){window.removeEventListener(\"resize\",this.resize)},methods:{init:function(e){this.data=e,this.drawing()},resize:function(){this.dom.resize()},drawing:function(){var e=this,t=this.data.title,a=this.data.legend,n=this.data.keys,r=[];a.forEach((function(t,a){var n={name:t,type:\"line\",showSymbol:!1,data:e.data.values[a]};r.push(n)}));var i={title:{text:t,top:15},tooltip:{trigger:\"axis\",axisPointer:{type:\"cross\",crossStyle:{color:\"#999\"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:[\"line\",\"bar\"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{top:5,data:a},grid:{left:\"3%\",right:\"4%\",bottom:\"3%\",containLabel:!0},xAxis:[{type:\"category\",data:n,axisTick:{alignWithLabel:!0,type:\"shadow\"}}],yAxis:[{type:\"value\"}],series:r};this.dom=s.a.init(this.$refs.dom),this.dom.setOption(i),window.addEventListener(\"resize\",this.resize)}}},o=l,c=a(\"2877\"),u=Object(c[\"a\"])(o,n,r,!1,null,null,null);t[\"a\"]=u.exports},f678:function(e,t,a){}}]);","extractedComments":[]}
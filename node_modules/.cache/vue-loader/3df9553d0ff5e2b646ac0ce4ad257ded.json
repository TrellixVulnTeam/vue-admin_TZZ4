{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-manage/src/components/ImageRichText/index.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-manage/src/components/ImageRichText/index.vue","mtime":1626074843826},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5pbWFnZS1yaWNoLXRleHQgew0KICAgIG1pbi1oZWlnaHQ6IDE4cHg7DQogICAgcGFkZGluZzogNnB4IDhweCAhaW1wb3J0YW50Ow0KICAgIG91dGxpbmU6IG5vbmU7DQogICAgd29yZC1icmVhazogYnJlYWstYWxsOw0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ImageRichText","sourcesContent":["<template>\r\n    <div\r\n        class=\"image-rich-text\"\r\n        spellcheck=\"false\"\r\n        contenteditable=\"true\"\r\n        :style=\"element.style\"\r\n        @focus=\"handleFocus\"\r\n        @keydown=\"$event.stopPropagation()\"\r\n        @keyup.stop=\"emitInput($event)\"\r\n        @paste=\"handlePaste($event)\"\r\n        @click.stop\r\n        v-html=\"innerText\"\r\n    />\r\n</template>\r\n\r\n<script>\r\nimport {getPlainText, keepCursorEnd} from '../../utils'\r\n\r\nexport default {\r\n    name: 'ImageRichText',\r\n    props: {\r\n        value: {\r\n            type: String,\r\n            default: '请输入文本'\r\n        },\r\n        element: {\r\n            type: Object,\r\n            default: () => {\r\n                return {\r\n                    style: {}\r\n                }\r\n            }\r\n        },\r\n        activeEleText: {\r\n            type: Object,\r\n            default: () => {\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            innerText: this.value.replace(/\\n/g, '<br>')\r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            this.innerText = val\r\n        }\r\n    },\r\n    methods: {\r\n        // 输入文本\r\n        emitInput(event) {\r\n            this.$emit('input', event.target.innerHTML)\r\n            this.keepCursorLast(event)\r\n        },\r\n        // 粘贴文本\r\n        handlePaste(event) {\r\n            this.$emit('input', getPlainText(event))\r\n            this.keepCursorLast(event)\r\n        },\r\n        // 光标定位到最后\r\n        keepCursorLast(event) {\r\n            this.$nextTick(() => {\r\n                keepCursorEnd(event.target)\r\n            })\r\n        },\r\n        // 光标聚焦\r\n        handleFocus() {\r\n            this.activeEleText.active = true\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.image-rich-text {\r\n    min-height: 18px;\r\n    padding: 6px 8px !important;\r\n    outline: none;\r\n    word-break: break-all;\r\n}\r\n</style>\r\n"]}]}
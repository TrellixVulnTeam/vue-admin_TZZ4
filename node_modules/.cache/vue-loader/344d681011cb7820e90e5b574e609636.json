{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/components/e-desc/e-desc.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/components/e-desc/e-desc.vue","mtime":1630669827909},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdFRGVzYycsCiAgICAvLyDpgJrov4dwcm92aWRl5o+Q5L6b57uZ5a2Q57uE5Lu2CiAgICBwcm92aWRlICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsYWJlbFdpZHRoOiB0aGlzLmxhYmVsV2lkdGgsCiAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW4sCiAgICAgICAgICAgIHNpemU6IHRoaXMuc2l6ZQogICAgICAgIH0KICAgIH0sCiAgICBwcm9wczogewogICAgICAgIC8vIOagh+mimAogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogJycKICAgICAgICB9LAogICAgICAgIC8vIOi+uei3nQogICAgICAgIG1hcmdpbjogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICcwJwogICAgICAgIH0sCiAgICAgICAgLy8gbGFiZWzlrr3luqYKICAgICAgICBsYWJlbFdpZHRoOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogJzEyMHB4JwogICAgICAgIH0sCiAgICAgICAgY29sdW1uOiB7CiAgICAgICAgICAgIC8vIOavj+ihjOaYvuekuueahOmhueebruS4quaVsAogICAgICAgICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICAgICAgICBkZWZhdWx0OiAzCiAgICAgICAgfSwKICAgICAgICBzaXplOiB7CiAgICAgICAgICAgIC8vIOWkp+WwjwogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICcnCiAgICAgICAgfQogICAgfSwKICAgIGRhdGEgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC8vIOebkeWQrOaPkuanveWPmOWMlgogICAgICAgICAgICBvYnNlcnZlOiBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLmNvbXB1dGVkU3BhbikKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCAoKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICB0aGlzLmNvbXB1dGVkU3BhbigpCiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZS5vYnNlcnZlKHRoaXMuJHJlZnMuZWxSb3cuJGVsLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KQogICAgICAgIH0pCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGNvbXB1dGVkU3BhbiAoKSB7CiAgICAgICAgICAgIC8vIOetm+mAieWHuuWtkOe7hOS7tmUtZGVzYy1pdGVtCiAgICAgICAgICAgIGNvbnN0IGRhdGFTb3VyY2UgPSB0aGlzLiRzbG90cy5kZWZhdWx0CiAgICAgICAgICAgIGNvbnN0IGRhdGFMaXN0ID0gW10KICAgICAgICAgICAgZGF0YVNvdXJjZS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uY29tcG9uZW50T3B0aW9ucyAmJiBpdGVtLmNvbXBvbmVudE9wdGlvbnMudGFnID09PSAnZS1kZXNjLWl0ZW0nKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YUxpc3QucHVzaChpdGVtLmNvbXBvbmVudEluc3RhbmNlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAvLyDliankvZlzcGFuCiAgICAgICAgICAgIGxldCBsZWZ0U3BhbiA9IHRoaXMuY29sdW1uCiAgICAgICAgICAgIGNvbnN0IGxlbiA9IGRhdGFMaXN0Lmxlbmd0aAogICAgICAgICAgICBkYXRhTGlzdC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgLy8g5aSE55CGY29sdW1u5LiOc3BhbuS5i+mXtOeahOWFs+ezuwogICAgICAgICAgICAgICAgLy8g5Ymp5L2Z55qE5YiX5pWw5bCP5LqO6K6+572u55qEc3BhbuaVsAogICAgICAgICAgICAgICAgY29uc3QgaGFzTGVmdCA9IGxlZnRTcGFuIDw9IChpdGVtLnNwYW4gfHwgMSkKICAgICAgICAgICAgICAgIC8vIOW9k+WJjeWIl+eahOS4i+S4gOWIl+Wkp+S6juS6huWJqeS9mXNwYW4KICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDb2x1bW5TcGFuID0gKGluZGV4IDwgKGxlbiAtIDEpKSAmJiAoZGF0YUxpc3RbaW5kZXggKyAxXS5zcGFuID49IGxlZnRTcGFuKQogICAgICAgICAgICAgICAgLy8g5piv5pyA5ZCO5LiA6KGM55qE5pyA5ZCO5LiA5YiXCiAgICAgICAgICAgICAgICBjb25zdCBpc0xhc3QgPSBpbmRleCA9PT0gKGxlbiAtIDEpCiAgICAgICAgICAgICAgICBpZiAoaGFzTGVmdCB8fCBuZXh0Q29sdW1uU3BhbiB8fCBpc0xhc3QpIHsKICAgICAgICAgICAgICAgICAgICAvLyDmu6HotrPku6XkuIrmnaHku7bvvIzpnIDopoHoh6rliqjooaXlhahzcGFu77yM6YG/5YWN5pyA5ZCO5LiA5YiX5Ye6546w5q6L57y655qE5oOF5Ya1CiAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWxmU3BhbiA9IGxlZnRTcGFuCiAgICAgICAgICAgICAgICAgICAgbGVmdFNwYW4gPSB0aGlzLmNvbHVtbgogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsZWZ0U3BhbiAtPSBpdGVtLnNwYW4gfHwgMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCiAgICBiZWZvcmVEZXN0cm95ICgpIHsKICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKQogICAgfQp9Cg=="},{"version":3,"sources":["e-desc.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"e-desc.vue","sourceRoot":"src/components/e-desc","sourcesContent":["<template>\n    <div class=\"desc\" :style=\"{margin}\">\n        <!-- 标题 -->\n        <h1 v-if=\"title\" class=\"desc-title\" v-html=\"title\"></h1>\n        <el-row class=\"desc-row\" ref='elRow'>\n            <slot/>\n        </el-row>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'EDesc',\n    // 通过provide提供给子组件\n    provide () {\n        return {\n            labelWidth: this.labelWidth,\n            column: this.column,\n            size: this.size\n        }\n    },\n    props: {\n        // 标题\n        title: {\n            type: String,\n            default: ''\n        },\n        // 边距\n        margin: {\n            type: String,\n            default: '0'\n        },\n        // label宽度\n        labelWidth: {\n            type: String,\n            default: '120px'\n        },\n        column: {\n            // 每行显示的项目个数\n            type: [Number, String],\n            default: 3\n        },\n        size: {\n            // 大小\n            type: String,\n            default: ''\n        }\n    },\n    data () {\n        return {\n            // 监听插槽变化\n            observe: new MutationObserver(this.computedSpan)\n        }\n    },\n    mounted () {\n        this.$nextTick(() => {\n            this.computedSpan()\n            this.observe.observe(this.$refs.elRow.$el, { childList: true })\n        })\n    },\n    methods: {\n        computedSpan () {\n            // 筛选出子组件e-desc-item\n            const dataSource = this.$slots.default\n            const dataList = []\n            dataSource.forEach(item => {\n                if (item.componentOptions && item.componentOptions.tag === 'e-desc-item') {\n                    dataList.push(item.componentInstance)\n                }\n            })\n            // 剩余span\n            let leftSpan = this.column\n            const len = dataList.length\n            dataList.forEach((item, index) => {\n                // 处理column与span之间的关系\n                // 剩余的列数小于设置的span数\n                const hasLeft = leftSpan <= (item.span || 1)\n                // 当前列的下一列大于了剩余span\n                const nextColumnSpan = (index < (len - 1)) && (dataList[index + 1].span >= leftSpan)\n                // 是最后一行的最后一列\n                const isLast = index === (len - 1)\n                if (hasLeft || nextColumnSpan || isLast) {\n                    // 满足以上条件，需要自动补全span，避免最后一列出现残缺的情况\n                    item.selfSpan = leftSpan\n                    leftSpan = this.column\n                } else {\n                    leftSpan -= item.span || 1\n                }\n            })\n        }\n    },\n    beforeDestroy () {\n        this.observer.disconnect()\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.desc{\n    .desc-title {\n        margin-bottom: 10px;\n        color: #333;\n        font-weight: 700;\n        font-size: 16px;\n        line-height: 1.5715;\n    }\n    .desc-row{\n        display: flex;\n        flex-wrap: wrap;\n        border-radius: 2px;\n        border: 1px solid #EBEEF5;\n        border-bottom: 0;\n        border-right: 0;\n        width: 100%;\n    }\n}\n</style>\n"]}]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/count/real-revenue.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/count/real-revenue.vue","mtime":1634192546166},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1634111095606},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1634111096162}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb3VudFRvIGZyb20gJ3Z1ZS1jb3VudC10bycKaW1wb3J0IENoYXJ0c0JhckxpbmUgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9DaGFydHMvQ2hhcnRzQmFyTGluZScKaW1wb3J0IENoYXJ0c0JhciBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL0NoYXJ0cy9DaGFydHNCYXInCmltcG9ydCBDaGFydHNDb3VudExpbmUgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9DaGFydHMvQ2hhcnRzQ291bnRMaW5lJwppbXBvcnQge2dldEFyZWFMaXN0LCBnZXRDdXJyZW50VXNlckFyZWFJZH0gZnJvbSAiQC91dGlscy9kaXN0IjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdIb21lJywKICAgIGNvbXBvbmVudHM6IHtDb3VudFRvLCBDaGFydHNCYXIsIENoYXJ0c0JhckxpbmUsIENoYXJ0c0NvdW50TGluZX0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGV4cGVuc2VLZXk6IDIwLAogICAgICAgICAgICBkZXBvc2l0S2V5OiA0MCwKICAgICAgICAgICAgcGF5S2V5OiA2MCwKICAgICAgICAgICAgc2VhcmNoOiB7CiAgICAgICAgICAgICAgICBhcmVhSWQ6IHVuZGVmaW5lZAogICAgICAgICAgICB9LAogICAgICAgICAgICBhdXRoQXJlYUlkOiBnZXRDdXJyZW50VXNlckFyZWFJZCgpLAogICAgICAgICAgICBhcmVhTGlzdDogZ2V0QXJlYUxpc3QoZmFsc2UpLAogICAgICAgICAgICBleHBlbnNlRGF0YTogewogICAgICAgICAgICAgICAgdGl0bGU6ICflrp7ml7bmtojogJcnLAogICAgICAgICAgICAgICAgbGVnZW5kOiBbJ+WFqOmDqOeUqOaItyddLAogICAgICAgICAgICAgICAga2V5czogW10sCiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlcG9zaXREYXRhOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+WunuaXtuWFheWAvCcsCiAgICAgICAgICAgICAgICBsZWdlbmQ6IFsn5YWo6YOo55So5oi3J10sCiAgICAgICAgICAgICAgICBrZXlzOiBbXSwKICAgICAgICAgICAgICAgIHZhbHVlczogW10KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGF5RGF0YTogewogICAgICAgICAgICAgICAgdGl0bGU6ICfmuKDpgZPljaDmr5QnLAogICAgICAgICAgICAgICAgbGVnZW5kOiBbJ0dvb2dsZScsICdBcHBsZScsICfkuInmlrnmuKDpgZMnXSwKICAgICAgICAgICAgICAgIGtleXM6IFtdLAogICAgICAgICAgICAgICAgdmFsdWVzOiBbXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5zZWFyY2guYXJlYUlkID0gdGhpcy5hdXRoQXJlYUlkID09PSAwID8gdGhpcy5hcmVhTGlzdFswXS52YWx1ZSA6IHRoaXMuYXV0aEFyZWFJZAogICAgICAgIHRoaXMuaW5pdERhdGEoKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvblNlYXJjaCgpIHsKICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpCiAgICAgICAgfSwKICAgICAgICBpbml0RGF0YSgpewogICAgICAgICAgICBjb25zdCAkdGhpcyA9IHRoaXMKICAgICAgICAgICAgbGV0IHBhcmFtID0gdGhpcy5zZWFyY2gKICAgICAgICAgICAgcGFyYW0uc3RhcnRBdCA9IHRoaXMuc3RhcnRVbml4KG5ldyBEYXRlKCkpCiAgICAgICAgICAgIHBhcmFtLmVuZEF0ID0gdGhpcy5lbmRVbml4KG5ldyBEYXRlKCkpCiAgICAgICAgICAgIHRoaXMuJHNlcnZpY2UuaG9tZS5nZXRBcmVhU3RhdCh0aGlzLnNlYXJjaCwgZnVuY3Rpb24gKHJlc3VsdCl7CiAgICAgICAgICAgICAgICBsZXQgc3RhdExpc3QgPSByZXN1bHQuZ2V0U3RhdHNMaXN0KCkKICAgICAgICAgICAgICAgICR0aGlzLmhhbmRsZUV4cGVuc2VEYXRhKHN0YXRMaXN0KQogICAgICAgICAgICAgICAgJHRoaXMuaGFuZGxlRGVwb3NpdERhdGEoc3RhdExpc3QpCiAgICAgICAgICAgICAgICAkdGhpcy5oYW5kbGVQYXlEYXRhKHN0YXRMaXN0KQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUV4cGVuc2VEYXRhKHN0YXRMaXN0KXsKICAgICAgICAgICAgbGV0IGtleXMgPSBbXQogICAgICAgICAgICBsZXQgdmFsdWVzID0gW10KICAgICAgICAgICAgbGV0IGV4cGVuc2UgPSBbXQogICAgICAgICAgICBzdGF0TGlzdC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgbGV0IHN0YXJ0QXQgPSBpdGVtLmdldFN0YXJ0QXQoKQogICAgICAgICAgICAgICAga2V5cy5wdXNoKG5ldyBEYXRlKHN0YXJ0QXQgKiAxMDAwKS5mb3JtYXQoImhoOm1tIikpCiAgICAgICAgICAgICAgICBleHBlbnNlLnB1c2goaXRlbS5nZXRFeHBlbnNlKCkpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGV4cGVuc2UpCiAgICAgICAgICAgIHRoaXMuZXhwZW5zZURhdGEudmFsdWVzID0gdmFsdWVzCiAgICAgICAgICAgIHRoaXMuZXhwZW5zZURhdGEua2V5cyA9IGtleXMKICAgICAgICAgICAgKyt0aGlzLmV4cGVuc2VLZXkKICAgICAgICB9LAogICAgICAgIGhhbmRsZURlcG9zaXREYXRhKHN0YXRMaXN0KXsKICAgICAgICAgICAgbGV0IGtleXMgPSBbXQogICAgICAgICAgICBsZXQgdmFsdWVzID0gW10KICAgICAgICAgICAgbGV0IGRlcG9zaXQgPSBbXQogICAgICAgICAgICBzdGF0TGlzdC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgbGV0IHN0YXJ0QXQgPSBpdGVtLmdldFN0YXJ0QXQoKQogICAgICAgICAgICAgICAga2V5cy5wdXNoKG5ldyBEYXRlKHN0YXJ0QXQgKiAxMDAwKS5mb3JtYXQoImhoOm1tIikpCiAgICAgICAgICAgICAgICBkZXBvc2l0LnB1c2goaXRlbS5nZXREZXBvc2l0KCkpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGRlcG9zaXQpCiAgICAgICAgICAgIHRoaXMuZGVwb3NpdERhdGEudmFsdWVzID0gdmFsdWVzCiAgICAgICAgICAgIHRoaXMuZGVwb3NpdERhdGEua2V5cyA9IGtleXMKICAgICAgICAgICAgKyt0aGlzLmRlcG9zaXRLZXkKICAgICAgICB9LAogICAgICAgIGhhbmRsZVBheURhdGEoc3RhdExpc3QpewogICAgICAgICAgICBsZXQga2V5cyA9IFtdCiAgICAgICAgICAgIGxldCB2YWx1ZXMgPSBbXQogICAgICAgICAgICBsZXQgZ29vZ2xlUGF5ID0gW10KICAgICAgICAgICAgbGV0IGFwcGxlUGF5ID0gW10KICAgICAgICAgICAgbGV0IG90aGVyUGF5ID0gW10KICAgICAgICAgICAgc3RhdExpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBzdGFydEF0ID0gaXRlbS5nZXRTdGFydEF0KCkKICAgICAgICAgICAgICAgIGtleXMucHVzaChuZXcgRGF0ZShzdGFydEF0ICogMTAwMCkuZm9ybWF0KCJoaDptbSIpKQogICAgICAgICAgICAgICAgZ29vZ2xlUGF5LnB1c2goaXRlbS5nZXRHb29nbGVQYXkoKSkKICAgICAgICAgICAgICAgIGFwcGxlUGF5LnB1c2goaXRlbS5nZXRBcHBsZVBheSgpKQogICAgICAgICAgICAgICAgb3RoZXJQYXkucHVzaChpdGVtLmdldE90aGVyUGF5KCkpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGdvb2dsZVBheSkKICAgICAgICAgICAgdmFsdWVzLnB1c2goYXBwbGVQYXkpCiAgICAgICAgICAgIHZhbHVlcy5wdXNoKG90aGVyUGF5KQogICAgICAgICAgICB0aGlzLnBheURhdGEudmFsdWVzID0gdmFsdWVzCiAgICAgICAgICAgIHRoaXMucGF5RGF0YS5rZXlzID0ga2V5cwogICAgICAgICAgICArK3RoaXMucGF5S2V5CiAgICAgICAgfSwKICAgICAgICBzdGFydFVuaXgoJGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCRkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpKS5nZXRUaW1lKCkgLyAxMDAwCiAgICAgICAgfSwKICAgICAgICBlbmRVbml4KCRkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXJ0VW5peCgkZGF0ZSkgKyAyNCAqIDYwICogNjAgLSAxCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["real-revenue.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"real-revenue.vue","sourceRoot":"src/views/manage/count","sourcesContent":["<template>\n    <div class=\"home-wrapper\">\n        <el-row class=\"date-box\" :gutter=\"20\">\n            <el-col :span=\"24\">\n                <el-card shadow=\"always\" :body-style=\"{padding: '10px', paddingTop:'20px'}\">\n                    <el-form\n                        ref=\"searchForm\"\n                        :inline=\"true\"\n                        :model=\"search\"\n                        label-width=\"90px\"\n                        class=\"search-form\"\n                    >\n                        <el-form-item label=\"区域\">\n                            <el-select v-model=\"search.areaId\" :disabled=\"authAreaId !== 0\" placeholder=\"请选择\">\n                                <el-option v-for=\"item in areaList\"\n                                           :key=\"item.value\"\n                                           :label=\"item.label\"\n                                           :value=\"item.value\">\n                                </el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item>\n                            <el-button type=\"danger\" @click=\"onSearch\" icon=\"el-icon-refresh\">刷 新</el-button>\n                        </el-form-item>\n                    </el-form>\n                </el-card>\n            </el-col>\n        </el-row>\n        <el-row class=\"date-box\" :gutter=\"30\">\n            <el-col :span=\"24\">\n                <el-card shadow=\"always\" :body-style=\"{padding: '10px', paddingTop:'20px'}\">\n                    <ChartsCountLine :data=\"expenseData\" :key=\"expenseKey\" class=\"data-chart\"/>\n                </el-card>\n            </el-col>\n        </el-row>\n\n        <el-row class=\"date-box\" :gutter=\"30\">\n            <el-col :span=\"24\">\n                <el-card shadow=\"always\" :body-style=\"{padding: '10px', paddingTop:'20px'}\">\n                    <ChartsCountLine :data=\"depositData\" :key=\"depositKey\" class=\"data-chart\"/>\n                </el-card>\n            </el-col>\n        </el-row>\n\n        <el-row class=\"date-box\" :gutter=\"30\">\n            <el-col :span=\"24\">\n                <el-card shadow=\"always\" :body-style=\"{padding: '10px', paddingTop:'20px'}\">\n                    <ChartsCountLine :data=\"payData\" :key=\"payKey\" class=\"data-chart\"/>\n                </el-card>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n\n<script>\nimport CountTo from 'vue-count-to'\nimport ChartsBarLine from '../../../components/Charts/ChartsBarLine'\nimport ChartsBar from '../../../components/Charts/ChartsBar'\nimport ChartsCountLine from '../../../components/Charts/ChartsCountLine'\nimport {getAreaList, getCurrentUserAreaId} from \"@/utils/dist\";\n\nexport default {\n    name: 'Home',\n    components: {CountTo, ChartsBar, ChartsBarLine, ChartsCountLine},\n    data() {\n        return {\n            expenseKey: 20,\n            depositKey: 40,\n            payKey: 60,\n            search: {\n                areaId: undefined\n            },\n            authAreaId: getCurrentUserAreaId(),\n            areaList: getAreaList(false),\n            expenseData: {\n                title: '实时消耗',\n                legend: ['全部用户'],\n                keys: [],\n                values: []\n            },\n            depositData: {\n                title: '实时充值',\n                legend: ['全部用户'],\n                keys: [],\n                values: []\n            },\n            payData: {\n                title: '渠道占比',\n                legend: ['Google', 'Apple', '三方渠道'],\n                keys: [],\n                values: []\n            }\n        }\n    },\n    created() {\n        this.search.areaId = this.authAreaId === 0 ? this.areaList[0].value : this.authAreaId\n        this.initData()\n    },\n    methods: {\n        onSearch() {\n            this.initData()\n        },\n        initData(){\n            const $this = this\n            let param = this.search\n            param.startAt = this.startUnix(new Date())\n            param.endAt = this.endUnix(new Date())\n            this.$service.home.getAreaStat(this.search, function (result){\n                let statList = result.getStatsList()\n                $this.handleExpenseData(statList)\n                $this.handleDepositData(statList)\n                $this.handlePayData(statList)\n            });\n        },\n        handleExpenseData(statList){\n            let keys = []\n            let values = []\n            let expense = []\n            statList.forEach((item, index) => {\n                let startAt = item.getStartAt()\n                keys.push(new Date(startAt * 1000).format(\"hh:mm\"))\n                expense.push(item.getExpense())\n            })\n            values.push(expense)\n            this.expenseData.values = values\n            this.expenseData.keys = keys\n            ++this.expenseKey\n        },\n        handleDepositData(statList){\n            let keys = []\n            let values = []\n            let deposit = []\n            statList.forEach((item, index) => {\n                let startAt = item.getStartAt()\n                keys.push(new Date(startAt * 1000).format(\"hh:mm\"))\n                deposit.push(item.getDeposit())\n            })\n            values.push(deposit)\n            this.depositData.values = values\n            this.depositData.keys = keys\n            ++this.depositKey\n        },\n        handlePayData(statList){\n            let keys = []\n            let values = []\n            let googlePay = []\n            let applePay = []\n            let otherPay = []\n            statList.forEach((item, index) => {\n                let startAt = item.getStartAt()\n                keys.push(new Date(startAt * 1000).format(\"hh:mm\"))\n                googlePay.push(item.getGooglePay())\n                applePay.push(item.getApplePay())\n                otherPay.push(item.getOtherPay())\n            })\n            values.push(googlePay)\n            values.push(applePay)\n            values.push(otherPay)\n            this.payData.values = values\n            this.payData.keys = keys\n            ++this.payKey\n        },\n        startUnix($date) {\n            return new Date($date.toLocaleDateString()).getTime() / 1000\n        },\n        endUnix($date) {\n            return this.startUnix($date) + 24 * 60 * 60 - 1\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n@import \"../../../assets/less/home\";\n</style>\n"]}]}
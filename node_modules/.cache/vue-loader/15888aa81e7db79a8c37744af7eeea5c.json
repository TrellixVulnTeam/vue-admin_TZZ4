{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/components/ImageRichText/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/components/ImageRichText/index.vue","mtime":1626074843826},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFBsYWluVGV4dCwga2VlcEN1cnNvckVuZH0gZnJvbSAnLi4vLi4vdXRpbHMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnSW1hZ2VSaWNoVGV4dCcsDQogICAgcHJvcHM6IHsNCiAgICAgICAgdmFsdWU6IHsNCiAgICAgICAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgICAgICAgIGRlZmF1bHQ6ICfor7fovpPlhaXmlofmnKwnDQogICAgICAgIH0sDQogICAgICAgIGVsZW1lbnQ6IHsNCiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICBzdHlsZToge30NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFjdGl2ZUVsZVRleHQ6IHsNCiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlubmVyVGV4dDogdGhpcy52YWx1ZS5yZXBsYWNlKC9cbi9nLCAnPGJyPicpDQogICAgICAgIH0NCiAgICB9LA0KICAgIHdhdGNoOiB7DQogICAgICAgIHZhbHVlKHZhbCkgew0KICAgICAgICAgICAgdGhpcy5pbm5lclRleHQgPSB2YWwNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICAvLyDovpPlhaXmlofmnKwNCiAgICAgICAgZW1pdElucHV0KGV2ZW50KSB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGV2ZW50LnRhcmdldC5pbm5lckhUTUwpDQogICAgICAgICAgICB0aGlzLmtlZXBDdXJzb3JMYXN0KGV2ZW50KQ0KICAgICAgICB9LA0KICAgICAgICAvLyDnspjotLTmlofmnKwNCiAgICAgICAgaGFuZGxlUGFzdGUoZXZlbnQpIHsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZ2V0UGxhaW5UZXh0KGV2ZW50KSkNCiAgICAgICAgICAgIHRoaXMua2VlcEN1cnNvckxhc3QoZXZlbnQpDQogICAgICAgIH0sDQogICAgICAgIC8vIOWFieagh+WumuS9jeWIsOacgOWQjg0KICAgICAgICBrZWVwQ3Vyc29yTGFzdChldmVudCkgew0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIGtlZXBDdXJzb3JFbmQoZXZlbnQudGFyZ2V0KQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5YWJ5qCH6IGa54SmDQogICAgICAgIGhhbmRsZUZvY3VzKCkgew0KICAgICAgICAgICAgdGhpcy5hY3RpdmVFbGVUZXh0LmFjdGl2ZSA9IHRydWUNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ImageRichText","sourcesContent":["<template>\r\n    <div\r\n        class=\"image-rich-text\"\r\n        spellcheck=\"false\"\r\n        contenteditable=\"true\"\r\n        :style=\"element.style\"\r\n        @focus=\"handleFocus\"\r\n        @keydown=\"$event.stopPropagation()\"\r\n        @keyup.stop=\"emitInput($event)\"\r\n        @paste=\"handlePaste($event)\"\r\n        @click.stop\r\n        v-html=\"innerText\"\r\n    />\r\n</template>\r\n\r\n<script>\r\nimport {getPlainText, keepCursorEnd} from '../../utils'\r\n\r\nexport default {\r\n    name: 'ImageRichText',\r\n    props: {\r\n        value: {\r\n            type: String,\r\n            default: '请输入文本'\r\n        },\r\n        element: {\r\n            type: Object,\r\n            default: () => {\r\n                return {\r\n                    style: {}\r\n                }\r\n            }\r\n        },\r\n        activeEleText: {\r\n            type: Object,\r\n            default: () => {\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            innerText: this.value.replace(/\\n/g, '<br>')\r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            this.innerText = val\r\n        }\r\n    },\r\n    methods: {\r\n        // 输入文本\r\n        emitInput(event) {\r\n            this.$emit('input', event.target.innerHTML)\r\n            this.keepCursorLast(event)\r\n        },\r\n        // 粘贴文本\r\n        handlePaste(event) {\r\n            this.$emit('input', getPlainText(event))\r\n            this.keepCursorLast(event)\r\n        },\r\n        // 光标定位到最后\r\n        keepCursorLast(event) {\r\n            this.$nextTick(() => {\r\n                keepCursorEnd(event.target)\r\n            })\r\n        },\r\n        // 光标聚焦\r\n        handleFocus() {\r\n            this.activeEleText.active = true\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.image-rich-text {\r\n    min-height: 18px;\r\n    padding: 6px 8px !important;\r\n    outline: none;\r\n    word-break: break-all;\r\n}\r\n</style>\r\n"]}]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/audit/dialog/anchor-video-list.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/audit/dialog/anchor-video-list.vue","mtime":1634703272951},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGlhbG9nLWxpc3R7CiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7CiAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwogICAgcGFkZGluZy1ib3R0b206ICAyMHB4Owp9Cg=="},{"version":3,"sources":["anchor-video-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmLA;AACA;AACA;AACA;AACA","file":"anchor-video-list.vue","sourceRoot":"src/views/manage/audit/dialog","sourcesContent":["<template>\n    <el-dialog title=\"查看视频\" :visible.sync=\"dialogVisible\" append-to-body width=\"60%\" :before-close=\"handleClose\">\n        <div class=\"table-classic-wrapper dialog-list\">\n            <!-- 操作栏 -->\n            <div class=\"control-btns\">\n                <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"batchPassed\">批量通过</el-button>\n                <el-button type=\"warning\" icon=\"el-icon-delete\" @click=\"batchDele\">批量删除</el-button>\n            </div>\n            <!-- 表格栏 -->\n            <el-table\n                ref=\"multipleTable\"\n                v-loading=\"listLoading\"\n                :data=\"tableData\"\n                tooltip-effect=\"dark\"\n                style=\"width: 100%\"\n                size=\"medium\"\n                @selection-change=\"handleSelectionChange\"\n            >\n                <el-table-column type=\"selection\" width=\"60\"/>\n                <el-table-column prop=\"id\" label=\"ID\" align=\"center\" width=\"150\" />\n                <el-table-column prop=\"ownerId\" label=\"所有者ID\" align=\"center\" width=\"150\"/>\n                <el-table-column prop=\"thumb\" label=\"视频\" align=\"center\" width=\"180\">\n                    <template scope=\"scope\">\n                        <el-image @click=\"play(scope.row)\" style=\"width: 50px; height: 50px\" :src=\"scope.row.thumb\" contain></el-image>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"areaStr\" label=\"区域\" align=\"center\" width=\"180\"/>\n                <el-table-column prop=\"status\" label=\"审核状态\" align=\"center\" width=\"120\"/>\n                <el-table-column label=\"操作\" align=\"center\" fixed=\"right\">\n                    <template slot-scope=\"scope\">\n                        <el-button type=\"text\" @click=\"passed(scope.row)\">通过</el-button>\n                        <el-button type=\"text\" @click=\"delVideo(scope.row)\">删除</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <!-- 分页栏 -->\n            <Pagination :total=\"total\" :page.sync=\"search.page.currentPage\" :limit.sync=\"search.page.pageSize\"\n                        @pagination=\"fetchData\" @changePageSize=\"changePageSize($event)\"/>\n        </div>\n        <el-dialog\n            title=\"播放视频\"\n            :visible.sync=\"playVisible\"\n            :before-close=\"closeVideo\"\n            :append-to-body=\"true\">\n            <div class=\"content-item\">\n                <VueVideoPlayer ref=\"myVideoPlayer\"></VueVideoPlayer>\n            </div>\n        </el-dialog>\n    </el-dialog>\n</template>\n\n<script>\nimport Pagination from '../../../../components/Pagination'\nimport VueVideoPlayer from '../../../../components/VueVideoPlayer'\nimport {getAppList, getAppName, getAreaList, getArrName, getFileType, getReviewStatus} from \"@/utils/dist\"\nimport {toTime} from \"@/utils/util\";\n\nexport default {\n    name: 'Table',\n    components: { Pagination, VueVideoPlayer },\n    data() {\n        return {\n            // 数据列表加载动画\n            listLoading: true,\n            search: {\n                anchorId : undefined,\n                status: 5,\n                page: {\n                    currentPage: 1,\n                    pageSize: 10\n                }\n            },\n            videoList: [],\n            imgList: [],\n            // 数据总条数\n            total: 0,\n            multipleSelection: [],\n            playVisible: false,\n            dialogVisible: false,\n            appList: getAppList(),\n            areaList: getAreaList(true),\n            fileTypeList: getFileType()\n        }\n    },\n    created() {\n        this.fetchData()\n    },\n    methods: {\n        init(row){\n            this.search.anchorId = row.ownerId\n            this.fetchData()\n        },\n        fetchData() {\n            const $this = this\n            this.listLoading = true\n            this.$service.audit.getLiveList(this.search, function (result){\n                const list = result.getRecordsList()\n                const data = []\n                list.forEach((item, index)=>{\n                    const json = {\n                        \"id\" : item.getId(),\n                        \"app\" : getAppName($this.appList, item.getAppId()),\n                        \"areaStr\" : getArrName($this.areaList, item.getAreaId()),\n                        \"type\" : getArrName($this.fileTypeList, item.getType()),\n                        \"ownerId\" : item.getOwnerId(),\n                        \"thumb\" : item.getThumb(),\n                        \"uri\" : item.getUri(),\n                        \"status\" : getReviewStatus(item.getStatus())\n                    }\n                    data.push(json)\n                })\n                $this.total = result.getTotalCount()\n                $this.tableData = data\n                $this.listLoading = false\n            });\n        },\n        play(row) {\n            this.playVisible = true;\n            let src = row.uri\n            this.$nextTick(()=>{\n                this.$refs.myVideoPlayer.initSrc(src);\n            })\n        },\n        // 多选操作\n        handleSelectionChange(val) {\n            this.multipleSelection = val\n        },\n        closeVideo(){\n            this.playVisible = false;\n            this.$nextTick(()=>{\n                this.$refs.myVideoPlayer.emptySrc();\n            })\n        },\n        closeDialog() {\n            this.dialogVisible = false\n            this.resetForm()\n            this.$emit('fetchData');\n        },\n        changePageSize(msg){\n            this.search.page.pageSize = msg.limit\n        },\n        passed(row) {\n            const $this = this\n            let param = {\n                \"id\" : row.id,\n                \"status\" : 5\n            }\n            this.$service.audit.processLive(param, function (result){\n                result ? $this.$message.success(\"审核通过 !\") : $this.$message.error(\"审核失败 !\")\n                $this.fetchData()\n            });\n        },\n        // 删除\n        delVideo(row) {\n            const $this = this\n            let param = {\n                \"id\" : row.id,\n                \"status\" : 4\n            }\n            this.$service.audit.processLive(param, function (result){\n                result ? $this.$message.success(\"已删除 !\") : $this.$message.error(\"删除失败 !\")\n                $this.fetchData()\n            });\n        },\n        batchPassed(){\n            this.multipleSelection.forEach(item => {\n                this.passed(item)\n            })\n        },\n        batchDele(){\n            this.multipleSelection.forEach(item => {\n                this.delVideo(item)\n            })\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n.dialog-list{\n    padding-left: 20px;\n    padding-right: 20px;\n    padding-bottom:  20px;\n}\n</style>\n"]}]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/settle/dialog/import-data.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/settle/dialog/import-data.vue","mtime":1634111099599},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1634111095606},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1634111096162}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVcGxvYWRFeGNlbCBmcm9tICdAL2NvbXBvbmVudHMvVXBsb2FkRXhjZWwnCmltcG9ydCBIaW50cyBmcm9tICdAL2NvbXBvbmVudHMvSGludHMnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOiB7IFVwbG9hZEV4Y2VsLCBIaW50cyB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgdGFibGVIZWFkZXI6IFtdLAogICAgICAgICAgICB0YWJsZURhdGE6IFtdLAogICAgICAgICAgICByZWNvcmRzQXJyOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaW5pdChyb3cpe30sCiAgICAgICAgaGFuZGxlU3VjY2Vzcyh7IGhlYWRlciwgcmVzdWx0cyB9KSB7CiAgICAgICAgICAgIHRoaXMudGFibGVIZWFkZXIgPSBoZWFkZXIKICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXN1bHRzCiAgICAgICAgICAgIHJlc3VsdHMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMucmVjb3Jkc0FycltpbmRleF0gPSB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uSUQsCiAgICAgICAgICAgICAgICAgICAgYWRqdXN0bWVudDogaXRlbVsi5omL5Yqo6LCD5pW05pWw6aKdIl0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIG9uSW1wb3J0KCl7CiAgICAgICAgICAgIGlmKHRoaXMucmVjb3Jkc0Fyci5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5pWw5o2u5Li656m6ISIpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRlbWl0KCdpbXBvcnRTdWNjZXNzJywge2FycjogdGhpcy5yZWNvcmRzQXJyfSk7CiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKQogICAgICAgIH0sCiAgICAgICAgY2xvc2VEaWFsb2coKSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["import-data.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"import-data.vue","sourceRoot":"src/views/manage/settle/dialog","sourcesContent":["<template>\n    <el-dialog title=\"导入数据\" :visible.sync=\"dialogVisible\" width=\"80%\" :before-close=\"closeDialog\">\n        <el-card shadow=\"always\">\n            <UploadExcel @on-success=\"handleSuccess\" />\n            <div align=\"center\" class=\"importButton\">\n                <el-button @click=\"onImport\" type=\"primary\" size=\"small\" style=\"width: 120px;\">导&nbsp;&nbsp;入</el-button>\n            </div>\n            <el-table\n                :data=\"tableData\"\n                tooltip-effect=\"dark\"\n                style=\"width: 100%\"\n                size=\"medium\"\n            >\n                <el-table-column v-for=\"item in tableHeader\" :key=\"item\" :prop=\"item\" :label=\"item\" align=\"center\" />\n            </el-table>\n        </el-card>\n    </el-dialog>\n</template>\n\n<script>\nimport UploadExcel from '@/components/UploadExcel'\nimport Hints from '@/components/Hints'\n\nexport default {\n    components: { UploadExcel, Hints },\n    data() {\n        return {\n            dialogVisible: false,\n            tableHeader: [],\n            tableData: [],\n            recordsArr: []\n        }\n    },\n    methods: {\n        init(row){},\n        handleSuccess({ header, results }) {\n            this.tableHeader = header\n            this.tableData = results\n            results.forEach((item, index) => {\n                this.recordsArr[index] = {\n                    id: item.ID,\n                    adjustment: item[\"手动调整数额\"]\n                }\n            })\n        },\n        onImport(){\n            if(this.recordsArr.length === 0){\n                this.$message.error(\"数据为空!\")\n                return\n            }\n            this.$emit('importSuccess', {arr: this.recordsArr});\n            this.closeDialog()\n        },\n        closeDialog() {\n            this.dialogVisible = false\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n.import-excel-wrapper {\n    .el-card {\n        min-height: 400px;\n    }\n    .search-form {\n        padding-top: 18px;\n        margin-bottom: 15px;\n        background-color: #f7f8fb;\n    }\n    .el-table thead {\n        font-weight: 600;\n        th{\n            background-color: #f2f3f7;\n        }\n    }\n    .el-dialog__body {\n        padding: 15px 5px;\n        color: #606266;\n        font-size: 14px;\n        word-break: break-all;\n    }\n    .upload-excel-wrapper {\n        display: flex;\n        align-content: center;\n        justify-content: center;\n        margin-bottom: 10px;\n    }\n\n}\n.importButton{\n    margin-bottom: 10px;\n}\n</style>\n\n"]}]}
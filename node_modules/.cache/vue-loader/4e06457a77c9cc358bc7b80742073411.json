{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/config/dialog/version.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/config/dialog/version.vue","mtime":1635330777698},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGlhbG9nLWxpc3R7CiAgICBwYWRkaW5nOiAyMHB4Owp9Cgo="},{"version":3,"sources":["version.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiKA;AACA;AACA","file":"version.vue","sourceRoot":"src/views/manage/config/dialog","sourcesContent":["<template>\n    <el-dialog title=\"版本\" :visible.sync=\"dialogVisible\" append-to-body width=\"80%\" :before-close=\"closeDialog\">\n        <div class=\"table-classic-wrapper dialog-list\">\n            <!-- 表格栏 -->\n            <el-table\n                ref=\"multipleTable\"\n                v-loading=\"listLoading\"\n                :data=\"tableData\"\n                tooltip-effect=\"dark\"\n                style=\"width: 100%\"\n                size=\"medium\"\n            >\n                <el-table-column prop=\"app\" label=\"来源App\" align=\"center\" width=\"120\">\n                    <template scope=\"scope\">\n                        <div slot=\"reference\">\n                            {{ scope.row.app.label }}\n                            <span v-if=\"scope.row.app.os === 1\">\n                            <i class=\"icon-android-fill\"></i>\n                        </span>\n                            <span v-else>\n                            <i class=\"icon-pingguo\"></i>\n                        </span>\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"code\" label=\"版本号\" align=\"center\" width=\"90\" />\n                <el-table-column prop=\"name\" label=\"版本名称\" align=\"center\" width=\"200\">\n                    <template slot-scope=\"{row}\">\n                        <template v-if=\"row.editable\">\n                            <el-input v-model=\"row.name\" style=\"width: 140px;\"/>\n                            <el-button class=\"cancel-btn\" type=\"text\" @click=\"cancelEdit(row)\">取消</el-button>\n                        </template>\n                        <span v-else>{{ row.name }}</span>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"enable\" label=\"是否启用\" align=\"center\" width=\"90\">\n                    <template slot-scope=\"scope\">\n                        <el-switch v-model=\"scope.row.enable\" :disabled=\"!scope.row.editable\"/>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"inReview\" label=\"是否审核中\" align=\"center\" width=\"90\">\n                    <template slot-scope=\"scope\">\n                        <el-switch v-model=\"scope.row.inReview\" :disabled=\"!scope.row.editable\"/>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"note\" label=\"备注\" align=\"center\" >\n                    <template slot-scope=\"{row}\">\n                        <template v-if=\"row.editable\">\n                            <el-input v-model=\"row.note\" style=\"width: 420px;\"/>\n                            <el-button class=\"cancel-btn\" type=\"text\" @click=\"cancelEdit(row)\">取消</el-button>\n                        </template>\n                        <span v-else>{{ row.note }}</span>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"createdAt\" label=\"创建时间\" align=\"center\" width=\"200\"/>\n                <el-table-column label=\"操作\" align=\"center\" width=\"150\">\n                    <template slot-scope=\"{row}\">\n                        <el-button type=\"text\" @click=\"enable(row)\">启用</el-button>\n                        <el-button v-if=\"row.editable\" type=\"text\" size=\"small\" @click=\"confirmEdit(row)\">保存\n                        </el-button>\n                        <el-button v-else type=\"text\" size=\"small\" @click=\"row.editable = !row.editable\">编辑\n                        </el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <!-- 分页栏 -->\n            <Pagination :total=\"total\" :page.sync=\"search.page.currentPage\" :limit.sync=\"search.page.pageSize\"\n                        @pagination=\"fetchData\"/>\n        </div>\n    </el-dialog>\n</template>\n\n<script>\nimport Pagination from '../../../../components/Pagination'\nimport {getAppList, getAppName, getAreaList, getMessageType} from \"@/utils/dist\";\n\nexport default {\n    name: 'Table',\n    components: { Pagination },\n    data() {\n        return {\n            listLoading: true,\n            search: {\n                appId: undefined,\n                page:{\n                    currentPage: 1,\n                    pageSize: 10\n                }\n            },\n            tableData: {},\n            total: 0,\n            dialogVisible: false,\n            areaData: getAreaList(true),\n            appList: getAppList(),\n            messageTypeList: getMessageType()\n        }\n    },\n    methods: {\n        init(row){\n            this.search.appId = row.id;\n            this.fetchData()\n        },\n        // 获取数据列表\n        fetchData() {\n            const $this = this\n            this.listLoading = true\n            this.$service.config.getVersionList(this.search, function (result){\n                const list = result.getVersionsList();\n                const data = []\n                list.forEach((item, index)=>{\n                    const json = {\n                        \"id\" : item.getId(),\n                        \"appId\" : item.getAppId(),\n                        \"app\" : getAppName($this.appList, item.getAppId()),\n                        \"osType\" : item.getOsType(),\n                        \"code\" : item.getCode(),\n                        \"name\" : item.getName(),\n                        \"enable\" : item.getEnable(),\n                        \"inReview\" : item.getInReview(),\n                        \"note\" : item.getNote(),\n                        \"editable\" : false\n                    }\n                    data.push(json)\n                })\n                $this.total = list.length\n                $this.tableData = data\n                $this.listLoading = false\n            })\n        },\n        resetForm() {\n            this.$refs.ruleForm.resetFields()\n        },\n        closeDialog() {\n            this.dialogVisible = false\n            this.resetForm()\n            this.$emit('fetchData');\n        },\n        enable(row){\n            row.enable = true\n        },\n        cancelEdit(row) {\n            row.hobby = row.originalHobby\n            row.editable = false\n        },\n        confirmEdit(row) {\n            row.editable = false\n            row.originalHobby = row.hobby\n            const $this = this\n            this.$service.config.saveVersion(row, function (result){\n                if (result) {\n                    $this.$message.success(\"保存成功!\")\n                } else {\n                    $this.$message.error(\"保存失败!\")\n                }\n            });\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n.dialog-list{\n    padding: 20px;\n}\n\n</style>\n"]}]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-mobile-audio/src/lib/audio.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-mobile-audio/src/lib/audio.vue","mtime":1634630052361},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6J20tYXVkaW8nLAogICAgcHJvcHM6ewogICAgICAgIHNyYzp7CiAgICAgICAgICAgIHR5cGU6U3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OicnCiAgICAgICAgfSwKICAgICAgICB0ZXh0OnsKICAgICAgICAgICAgdHlwZTpTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6Iui9u+inpuaSreaUviIKICAgICAgICB9LAogICAgICAgIHNob3dEdXJhdGlvbjp7CiAgICAgICAgICAgIHR5cGU6Qm9vbGVhbiwKICAgICAgICAgICAgZGVmYXVsdDp0cnVlCiAgICAgICAgfSwKICAgICAgICBibG9jazp7CiAgICAgICAgICAgIHR5cGU6Qm9vbGVhbiwKICAgICAgICAgICAgZGVmYXVsdDpmYWxzZQogICAgICAgIH0sCiAgICB9LAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgYXVkaW86bnVsbCwKICAgICAgICAgICAgYW5pbWF0ZTpmYWxzZSwKICAgICAgICAgICAgdGltZXI6bnVsbCwKICAgICAgICAgICAgZHVyYXRpb246bnVsbAogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgICAgdGhpcy5hdWRpbz1uZXcgQXVkaW8oKQogICAgICAgIHRoaXMuYXVkaW8uc3JjPXRoaXMuc3JjCiAgICAgICAgdGhpcy5hdWRpby5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsKCk9PnsKICAgICAgICAgICAgdGhpcy5kdXJhdGlvbj10aGlzLmZvcm1hdCh0aGlzLmF1ZGlvLmR1cmF0aW9uKQogICAgICAgIH0pCiAgICAgICAgdGhpcy5hdWRpby5vbnBsYXk9KCk9PnsKICAgICAgICAgICAgdGhpcy5hbmltYXRlPXRydWUKICAgICAgICAgICAgdGhpcy50aW1lcj1zZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGU9ZmFsc2UKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGU9dHJ1ZQogICAgICAgICAgICAgICAgfSw1MCkKICAgICAgICAgICAgfSwgMTI1MCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuYXVkaW8ub25wYXVzZT0oKT0+ewogICAgICAgICAgICB0aGlzLmFuaW1hdGU9ZmFsc2UKICAgICAgICAgICAgdGhpcy50aW1lciYmY2xlYXJJbnRlcnZhbCggdGhpcy50aW1lcikKICAgICAgICB9CiAgICAgICAgdGhpcy5hdWRpby5vbmVuZGVkPSgpPT57CiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZT1mYWxzZQogICAgICAgICAgICB0aGlzLnRpbWVyJiZjbGVhckludGVydmFsKCB0aGlzLnRpbWVyKQogICAgICAgIH0KICAgICAgICB3aW5kb3cuYXVkaW9MaXN0LnB1c2godGhpcy5hdWRpbykvL+aJgOacieWunuS+i+WKoOWFpeWFqOWxgOWPmOmHjwogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIHBsYXkoKXsKICAgICAgICAgICAgbGV0IHBhdXNlZCA9IHRoaXMuYXVkaW8ucGF1c2VkCiAgICAgICAgICAgIHdpbmRvdy5hdWRpb0xpc3QuZm9yRWFjaChhdWRpbz0+ey8v5byA5aeL5YmN5YWI5YWz6Zet5omA5pyJ5Y+v6IO95q2j5Zyo6L+Q6KGM55qE5a6e5L6LCiAgICAgICAgICAgICAgICBhdWRpby5wYXVzZSgpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGlmKHBhdXNlZCl7CiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvLnBsYXkoKQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMuYXVkaW8ucGF1c2UoKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmb3JtYXQocyl7CiAgICAgICAgICAgIHZhciB0PScnOwogICAgICAgICAgICBpZihzID4gLTEpewogICAgICAgICAgICAgICAgdmFyIG1pbiA9IE1hdGguZmxvb3Iocy82MCkgJSA2MDsKICAgICAgICAgICAgICAgIHZhciBzZWMgPSBzICUgNjA7CgogICAgICAgICAgICAgICAgaWYobWluIDwgMTApe3QgKz0gIjAiO30KICAgICAgICAgICAgICAgIHQgKz0gbWluICsgIiciOwogICAgICAgICAgICAgICAgaWYoc2VjIDwgMTApe3QgKz0gIjAiO30KICAgICAgICAgICAgICAgIHQgKz0gc2VjLnRvRml4ZWQoMik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdD10LnJlcGxhY2UoJy4nLCdcIicpCiAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0sCiAgICB9Cn0K"},{"version":3,"sources":["audio.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"audio.vue","sourceRoot":"node_modules/vue-mobile-audio/src/lib","sourcesContent":["<template>\n    <div class=\"x-audio-wrap\" :class=\"{inline:!block}\" ref=\"wrap\" @click=\"play\">\n        <div class=\"x-sector\" :class=\"{play:animate}\">\n            <div class=\"x-dot\"></div>\n        </div>\n        <div class=\"x-time\">{{duration&&showDuration?duration:text}}</div>\n    </div>\n</template>\n<script>\nexport default {\n    name:'m-audio',\n    props:{\n        src:{\n            type:String,\n            default:''\n        },\n        text:{\n            type:String,\n            default:\"轻触播放\"\n        },\n        showDuration:{\n            type:Boolean,\n            default:true\n        },\n        block:{\n            type:Boolean,\n            default:false\n        },\n    },\n    data(){\n        return{\n            audio:null,\n            animate:false,\n            timer:null,\n            duration:null\n        }\n    },\n    mounted(){\n        this.audio=new Audio()\n        this.audio.src=this.src\n        this.audio.addEventListener('canplaythrough',()=>{\n            this.duration=this.format(this.audio.duration)\n        })\n        this.audio.onplay=()=>{\n            this.animate=true\n            this.timer=setInterval(() => {\n                this.animate=false\n                setTimeout(()=>{\n                    this.animate=true\n                },50)\n            }, 1250);\n        }\n        this.audio.onpause=()=>{\n            this.animate=false\n            this.timer&&clearInterval( this.timer)\n        }\n        this.audio.onended=()=>{\n            this.animate=false\n            this.timer&&clearInterval( this.timer)\n        }\n        window.audioList.push(this.audio)//所有实例加入全局变量\n    },\n    methods:{\n        play(){\n            let paused = this.audio.paused\n            window.audioList.forEach(audio=>{//开始前先关闭所有可能正在运行的实例\n                audio.pause()\n            })\n            if(paused){\n                this.audio.play()\n            }else{\n                this.audio.pause()\n            }\n        },\n        format(s){\n            var t='';\n            if(s > -1){\n                var min = Math.floor(s/60) % 60;\n                var sec = s % 60;\n\n                if(min < 10){t += \"0\";}\n                t += min + \"'\";\n                if(sec < 10){t += \"0\";}\n                t += sec.toFixed(2);\n            }\n            t=t.replace('.','\\\"')\n            return t;\n        },\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n.x-audio-wrap{\n    height: 30px;\n    width: 110px;\n    border-radius: 15px;\n    // border: 1px solid #ddd;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    cursor: pointer;\n    box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.25);\n    .x-sector{\n        height: 7px;\n        width: 7px;\n        border-radius:4px 10px;\n        border-right: 2px solid #ddd;\n        border-top: 2px solid #ddd;\n        transform: rotate(45deg);\n        position: relative;\n        margin-left: 10px;\n        .x-dot{\n            height: 4px;\n            width: 4px;\n            border-radius: 4px;\n            background: #ddd;\n            position: absolute;\n            top: 4px;\n        }\n    }\n    .x-sector::before{\n        content: \"\";\n        height: 9px;\n        width: 9px;\n        border-radius:4px 12px;\n        border-right: 2px solid #ddd;\n        border-top: 2px solid #ddd;\n        transform: rotate(0deg);\n        position: absolute;\n        right: -7px;\n        top: -7px;\n    }\n    .x-sector::after{\n        content: \"\";\n        height: 12px;\n        width: 12px;\n        border-radius:4px 14px;\n        border-right: 2px solid #ddd;\n        border-top: 2px solid #ddd;\n        transform: rotate(0deg);\n        position: absolute;\n        right: -13px;\n        top: -13px;\n    }\n\n    .x-time{\n        color: #999;\n        font-size: 12px;\n        margin-right: 10px;\n    }\n    &.inline{\n        display: inline-flex\n    }\n}\n\n@keyframes play-dot{\n    from{\n        background: #ddd\n    }\n    to{\n        background: #5cadff\n    }\n}\n@keyframes play-sector{\n    from{\n        border-color: #ddd\n    }\n    to{\n        border-color: #5cadff\n    }\n}\n.x-sector.play{\n    animation: play-sector 0.3s 0.1s ease-in-out;\n}\n.x-sector.play::before{\n    animation: play-sector 0.3s 0.2s ease-in-out;\n}\n.x-sector.play::after{\n    animation: play-sector 0.3s 0.3s ease-in-out;\n}\n.x-sector.play .x-dot{\n    animation: play-dot 0.3s ease-in-out;\n}\n</style>\n"]}]}
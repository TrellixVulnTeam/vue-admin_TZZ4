{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mengy/develop/iwork/kafo/vue-manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-manage/src/components/ElementDrr/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-manage/src/components/ElementDrr/index.vue","mtime":1626074721542},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLW1hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF9WdWVEcnIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMvVnVlRHJyIikpOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0MiA9IHsKICBuYW1lOiAnRWxlbWVudERycicsCiAgY29tcG9uZW50czogewogICAgVnVlRHJyOiBfVnVlRHJyLmRlZmF1bHQKICB9LAogIHByb3BzOiB7CiAgICBlbGVtZW50OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fQogICAgfSwKICAgIGhhbmRsZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbJ24nLCAnZScsICdzJywgJ3cnLCAnbncnLCAnbmUnLCAnc2UnLCAnc3cnXTsKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGVsZW1lbnQ6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy51cGRhdGVIZWlnaHQoKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5ZCM5q2l5pu05paw5a655Zmo6auY5bqmCiAgICB1cGRhdGVIZWlnaHQ6IGZ1bmN0aW9uIHVwZGF0ZUhlaWdodCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5lbGVtZW50LnR5cGUgPT09ICd0ZXh0JykgewogICAgICAgIHZhciBub2RlID0gdGhpcy4kZWw7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHZpZXdIZWlnaHQgPSBNYXRoLmNlaWwobm9kZS5wYXJlbnROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCk7CiAgICAgICAgICB2YXIgaCA9IE1hdGguY2VpbChub2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1yaWNoLXRleHQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQpOwoKICAgICAgICAgIGlmIChfdGhpczIuZWxlbWVudC55ICsgaCA+PSB2aWV3SGVpZ2h0KSB7CiAgICAgICAgICAgIF90aGlzMi5lbGVtZW50LnkgPSB2aWV3SGVpZ2h0IC0gaDsKICAgICAgICAgIH0KCiAgICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IGggKyAncHgnOwogICAgICAgICAgX3RoaXMyLmVsZW1lbnQuaCA9IGg7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlpITnkIbmi5bmlL4KICAgIGhhbmRsZURyYWdTdG9wOiBmdW5jdGlvbiBoYW5kbGVEcmFnU3RvcCh4LCB5KSB7CiAgICAgIGlmICh0aGlzLmVsZW1lbnQueCAhPT0geCB8fCB0aGlzLmVsZW1lbnQueSAhPT0geSkgewogICAgICAgIHRoaXMuZWxlbWVudC54ID0geDsKICAgICAgICB0aGlzLmVsZW1lbnQueSA9IHk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnvKnmlL7mlofmnKzml7bmm7TmlrDpq5jluqYKICAgIGhhbmRsZVJlc2l6aW5nOiBmdW5jdGlvbiBoYW5kbGVSZXNpemluZygpIHsKICAgICAgaWYgKHRoaXMuZWxlbWVudC50eXBlID09PSAndGV4dCcpIHsKICAgICAgICB0aGlzLnVwZGF0ZUhlaWdodCgpOwogICAgICB9CiAgICB9LAogICAgLy8g5aSE55CG57yp5pS+CiAgICBoYW5kbGVSZXNpemVTdG9wOiBmdW5jdGlvbiBoYW5kbGVSZXNpemVTdG9wKHgsIHksIHcsIGgpIHsKICAgICAgaWYgKHRoaXMuZWxlbWVudC54ICE9PSB4IHx8IHRoaXMuZWxlbWVudC55ICE9PSB5IHx8IHRoaXMuZWxlbWVudC53ICE9PSB3IHx8IHRoaXMuZWxlbWVudC5oICE9PSBoKSB7CiAgICAgICAgdGhpcy5lbGVtZW50LnggPSB4OwogICAgICAgIHRoaXMuZWxlbWVudC55ID0geTsKICAgICAgICB0aGlzLmVsZW1lbnQudyA9IHc7CgogICAgICAgIGlmICh0aGlzLmVsZW1lbnQudHlwZSA9PT0gJ3RleHQnKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZUhlaWdodCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVsZW1lbnQuaCA9IGg7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5aSE55CG5aSx54SmCiAgICBoYW5kbGVEZWFjdGl2YXRlOiBmdW5jdGlvbiBoYW5kbGVEZWFjdGl2YXRlKCkgewogICAgICB0aGlzLmVsZW1lbnQuYWN0aXZlID0gZmFsc2U7CiAgICB9LAogICAgLy8g5aSE55CG6IGa54SmCiAgICBoYW5kbGVBY3RpdmF0ZWQ6IGZ1bmN0aW9uIGhhbmRsZUFjdGl2YXRlZCgpIHsKICAgICAgdGhpcy5lbGVtZW50LmFjdGl2ZSA9IHRydWU7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZUFjdGl2ZUVsZScsIHRoaXMuZWxlbWVudCk7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDI7"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;AAwBA;;;;;;;;;;;;;;;;;;;;;;;;;gBAEA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,MAAA,EAAA;AAAA,GAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CACA;AAHA,KADA;AAMA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,CAAA,GAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,CAAA;AAAA;AAFA;AANA,GAHA;AAcA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,OADA,mBACA,GADA,EACA;AAAA;;AACA,aAAA,SAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,YAAA;AACA,SAFA;AAGA,OALA;AAMA,MAAA,IAAA,EAAA;AANA;AADA,GAdA;AAwBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,YAFA,0BAEA;AAAA;;AACA,UAAA,KAAA,OAAA,CAAA,IAAA,KAAA,MAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,GAAA;AACA,aAAA,SAAA,CAAA,YAAA;AACA,cAAA,UAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,UAAA,CAAA,qBAAA,GAAA,MAAA,CAAA;AACA,cAAA,CAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,aAAA,CAAA,kBAAA,EAAA,qBAAA,GAAA,MAAA,CAAA;;AACA,cAAA,MAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA,IAAA,UAAA,EAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,CAAA,GAAA,UAAA,GAAA,CAAA;AACA;;AACA,UAAA,IAAA,CAAA,KAAA,CAAA,MAAA,GAAA,CAAA,GAAA,IAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA;AACA,SARA;AASA;AACA,KAfA;AAgBA;AACA,IAAA,cAjBA,0BAiBA,CAjBA,EAiBA,CAjBA,EAiBA;AACA,UAAA,KAAA,OAAA,CAAA,CAAA,KAAA,CAAA,IAAA,KAAA,OAAA,CAAA,CAAA,KAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,CAAA,GAAA,CAAA;AACA,aAAA,OAAA,CAAA,CAAA,GAAA,CAAA;AACA;AACA,KAtBA;AAuBA;AACA,IAAA,cAxBA,4BAwBA;AACA,UAAA,KAAA,OAAA,CAAA,IAAA,KAAA,MAAA,EAAA;AACA,aAAA,YAAA;AACA;AACA,KA5BA;AA6BA;AACA,IAAA,gBA9BA,4BA8BA,CA9BA,EA8BA,CA9BA,EA8BA,CA9BA,EA8BA,CA9BA,EA8BA;AACA,UAAA,KAAA,OAAA,CAAA,CAAA,KAAA,CAAA,IAAA,KAAA,OAAA,CAAA,CAAA,KAAA,CAAA,IAAA,KAAA,OAAA,CAAA,CAAA,KAAA,CAAA,IAAA,KAAA,OAAA,CAAA,CAAA,KAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,CAAA,GAAA,CAAA;AACA,aAAA,OAAA,CAAA,CAAA,GAAA,CAAA;AACA,aAAA,OAAA,CAAA,CAAA,GAAA,CAAA;;AACA,YAAA,KAAA,OAAA,CAAA,IAAA,KAAA,MAAA,EAAA;AACA,eAAA,YAAA;AACA,SAFA,MAEA;AACA,eAAA,OAAA,CAAA,CAAA,GAAA,CAAA;AACA;AACA;AACA,KAzCA;AA0CA;AACA,IAAA,gBA3CA,8BA2CA;AACA,WAAA,OAAA,CAAA,MAAA,GAAA,KAAA;AACA,KA7CA;AA8CA;AACA,IAAA,eA/CA,6BA+CA;AACA,WAAA,OAAA,CAAA,MAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,iBAAA,EAAA,KAAA,OAAA;AACA;AAlDA;AAxBA,C","sourcesContent":["<template>\r\n    <VueDrr\r\n        class=\"element-drr-wrapper\"\r\n        :x=\"element.x\"\r\n        :y=\"element.y\"\r\n        :w=\"element.w\"\r\n        :h=\"element.h\"\r\n        :handles=\"handles\"\r\n        :active=\"element.active\"\r\n        :minw=\"80\"\r\n        :minh=\"18\"\r\n        :parent=\"true\"\r\n        :rotatable=\"false\"\r\n        @dragstop=\"handleDragStop\"\r\n        @resizing=\"handleResizing\"\r\n        @resizestop=\"handleResizeStop\"\r\n        @deactivated=\"handleDeactivate\"\r\n        @activated=\"handleActivated\"\r\n    >\r\n        <slot/>\r\n    </VueDrr>\r\n</template>\r\n\r\n<script>\r\nimport VueDrr from '../../components/VueDrr'\r\n\r\nexport default {\r\n    name: 'ElementDrr',\r\n    components: {VueDrr},\r\n    props: {\r\n        element: {\r\n            type: Object,\r\n            default: () => {\r\n            }\r\n        },\r\n        handles: {\r\n            type: Array,\r\n            default: () => ['n', 'e', 's', 'w', 'nw', 'ne', 'se', 'sw']\r\n        }\r\n    },\r\n    watch: {\r\n        element: {\r\n            handler(val) {\r\n                this.$nextTick(() => {\r\n                    this.updateHeight()\r\n                })\r\n            },\r\n            deep: true\r\n        }\r\n    },\r\n    methods: {\r\n        // 同步更新容器高度\r\n        updateHeight() {\r\n            if (this.element.type === 'text') {\r\n                const node = this.$el\r\n                this.$nextTick(() => {\r\n                    const viewHeight = Math.ceil(node.parentNode.getBoundingClientRect().height)\r\n                    const h = Math.ceil(node.querySelector('.image-rich-text').getBoundingClientRect().height)\r\n                    if (this.element.y + h >= viewHeight) {\r\n                        this.element.y = viewHeight - h\r\n                    }\r\n                    node.style.height = h + 'px'\r\n                    this.element.h = h\r\n                })\r\n            }\r\n        },\r\n        // 处理拖放\r\n        handleDragStop(x, y) {\r\n            if (this.element.x !== x || this.element.y !== y) {\r\n                this.element.x = x\r\n                this.element.y = y\r\n            }\r\n        },\r\n        // 缩放文本时更新高度\r\n        handleResizing() {\r\n            if (this.element.type === 'text') {\r\n                this.updateHeight()\r\n            }\r\n        },\r\n        // 处理缩放\r\n        handleResizeStop(x, y, w, h) {\r\n            if (this.element.x !== x || this.element.y !== y || this.element.w !== w || this.element.h !== h) {\r\n                this.element.x = x\r\n                this.element.y = y\r\n                this.element.w = w\r\n                if (this.element.type === 'text') {\r\n                    this.updateHeight()\r\n                } else {\r\n                    this.element.h = h\r\n                }\r\n            }\r\n        },\r\n        // 处理失焦\r\n        handleDeactivate() {\r\n            this.element.active = false\r\n        },\r\n        // 处理聚焦\r\n        handleActivated() {\r\n            this.element.active = true\r\n            this.$emit('updateActiveEle', this.element)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.element-drr-wrapper {\r\n    .z-handle-nw,\r\n    .z-handle-ne,\r\n    .z-handle-sw,\r\n    .z-handle-se,\r\n    .z-handle-n:after,\r\n    .z-handle-w:after,\r\n    .z-handle-e:after,\r\n    .z-handle-s:after {\r\n        width: 9px;\r\n        height: 9px;\r\n    }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/ElementDrr"}]}
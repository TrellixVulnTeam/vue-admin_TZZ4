{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/utils/error.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/utils/error.js","mtime":1630296576178},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgRW1wdHkgfSBmcm9tICJAL3Byb3RvL2pzL3VzZXJ0eXBlX3BiIjsKaW1wb3J0IHsgZ2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAiQC91dGlscy9jb29raWUiOwppbXBvcnQgeyBjbXNTZXJ2aWNlIH0gZnJvbSAiQC9ncnBjL3NlcnZlciI7IC8vIGdycGPpooTlrprkuYnkuobkuIDlpZfpgJrnlKjplJnor6/noIEgaHR0cHM6Ly9ncnBjLmdpdGh1Yi5pby9ncnBjL2NvcmUvbWRfZG9jX3N0YXR1c2NvZGVzLmh0bWwKLy8g56iL5bqP5L2/55So5LqG5YW25Lit55qE6YOo5YiG6ZSZ6K+v56CB77yM6L+Z5Liq6ZSZ6K+v56CB55u05o6l6YCa6L+H5o2V6I63cnBj55qE5byC5bi45oiW6ICF6L+U5Zue5YC86I635Y+W77yM5L2/55So55qE6ZSZ6K+v56CB5aaC5LiLCi8vIDIgVU5LTk9XTiDmnKrnn6XplJnor68KLy8gMyBJTlZBTElEX0FSR1VNRU5UIOiwg+eUqOWPguaVsOmdnuazlQovLyA1IE5PVF9GT1VORCDmn6Xor6LnmoTorrDlvZXkuI3lrZjlnKgKLy8gNiBBTFJFQURZX0VYSVNUUyDliJvlu7rnmoTorrDlvZXlt7LlrZjlnKgKLy8gNyBQRVJNSVNTSU9OX0RFTklFRCDmsqHmnInmk43kvZzmnYPpmZAKLy8gOSBGQUlMRURfUFJFQ09ORElUSU9OIOWJjee9ruadoeS7tuS4jea7oei2s++8jOeUqOaIt+W3suiiq+Wwgeemge+8jOajgOa1i+WIsOivpemUmeivr+aXtui3s+WIsOWwgeemgemhtemdouW5tuiwg+eUqEdldEJsb2NrSW5mb+iOt+WPluWwgeemgeeahOivpue7huS/oeaBrwovLyAxMyBJTlRFUk5BTCDlhoXpg6jmnI3liqHlmajplJnor68KLy8gMTQgVU5BVkFJTEFCTEUg572R57uc6ZSZ6K+v5oiW6LaF5pe277yMYXBw5pys5Zyw6ZSZ6K+v77yM6K+35rGC5rKh5pyJ5Yiw5pyN5Yqh5ZmoCi8vIDE2IFVOQVVUSEVOVElDQVRFRCDmnKrnmbvlvZXvvIzmo4DmtYvliLDor6XplJnor6/ml7bot7PliLDnmbvlvZXpobXpnaIKLy8g5YW25Lit6ZyA6KaB54m55q6K5aSE55CG55qE5pivIjIgVU5LTk9XTiDmnKrnn6XplJnor68i77yM5qOA5rWL5Yiw6K+l6ZSZ6K+v56CB5pe26KGo56S65Li65Lia5Yqh5bGC6ZSZ6K+v77yM6ZyA6KaB6YCa6L+H6L+U5Zue55qEaGVhZGVy5p2l6I635Y+W6K+m57uG55qECi8vIOS4muWKoeWxgumUmeivr+egge+8jOS4muWKoeWxgumUmeivr+eggemAmui/h+aemuS4vkVycm9yQ29kZeWumuS5ie+8jGhlYWRlcueahGtleeS4uiJlcnJvci1jb2RlIgoKZXhwb3J0IGZ1bmN0aW9uIGVycm9yKGVycikgewogIGlmICgxNiA9PSBlcnIuY29kZSkgewogICAgbG9naW5PdXQoKTsKICB9CgogIGNvbnNvbGUubG9nKGVycik7Cn0KZXhwb3J0IGZ1bmN0aW9uIGxvZ2luT3V0KCkgewogIHJlbW92ZVRva2VuKCk7CiAgbG9jYXRpb24ucmVsb2FkKCk7Cn0="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/utils/error.js"],"names":["Empty","getToken","removeToken","cmsService","error","err","code","loginOut","console","log","location","reload"],"mappings":"AAAA,SAAQA,KAAR,QAAoB,wBAApB;AACA,SAAQC,QAAR,EAAkBC,WAAlB,QAAoC,gBAApC;AACA,SAAQC,UAAR,QAAyB,eAAzB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,OAAO,SAASC,KAAT,CAAeC,GAAf,EAAoB;AACvB,MAAG,MAAMA,GAAG,CAACC,IAAb,EAAkB;AACdC,IAAAA,QAAQ;AACX;;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACH;AAGD,OAAO,SAASE,QAAT,GAAoB;AACvBL,EAAAA,WAAW;AACXQ,EAAAA,QAAQ,CAACC,MAAT;AACH","sourcesContent":["import {Empty} from \"@/proto/js/usertype_pb\";\nimport {getToken, removeToken} from \"@/utils/cookie\";\nimport {cmsService} from \"@/grpc/server\";\n\n// grpc预定义了一套通用错误码 https://grpc.github.io/grpc/core/md_doc_statuscodes.html\n// 程序使用了其中的部分错误码，这个错误码直接通过捕获rpc的异常或者返回值获取，使用的错误码如下\n// 2 UNKNOWN 未知错误\n// 3 INVALID_ARGUMENT 调用参数非法\n// 5 NOT_FOUND 查询的记录不存在\n// 6 ALREADY_EXISTS 创建的记录已存在\n// 7 PERMISSION_DENIED 没有操作权限\n// 9 FAILED_PRECONDITION 前置条件不满足，用户已被封禁，检测到该错误时跳到封禁页面并调用GetBlockInfo获取封禁的详细信息\n// 13 INTERNAL 内部服务器错误\n// 14 UNAVAILABLE 网络错误或超时，app本地错误，请求没有到服务器\n// 16 UNAUTHENTICATED 未登录，检测到该错误时跳到登录页面\n// 其中需要特殊处理的是\"2 UNKNOWN 未知错误\"，检测到该错误码时表示为业务层错误，需要通过返回的header来获取详细的\n// 业务层错误码，业务层错误码通过枚举ErrorCode定义，header的key为\"error-code\"\n\n\nexport function error(err) {\n    if(16 == err.code){\n        loginOut()\n    }\n    console.log(err)\n}\n\n\nexport function loginOut() {\n    removeToken()\n    location.reload()\n}\n\n"]}]}
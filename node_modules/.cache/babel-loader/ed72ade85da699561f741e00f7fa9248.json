{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/utils/error.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/utils/error.js","mtime":1635162107830},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgRW1wdHkgfSBmcm9tICJAL3Byb3RvL2pzL3VzZXJ0eXBlX3BiIjsKaW1wb3J0IHsgZ2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAiQC91dGlscy9jb29raWUiOwppbXBvcnQgeyBjbXNTZXJ2aWNlIH0gZnJvbSAiQC9ncnBjL3NlcnZlciI7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsgLy8gZ3JwY+mihOWumuS5ieS6huS4gOWll+mAmueUqOmUmeivr+eggSBodHRwczovL2dycGMuZ2l0aHViLmlvL2dycGMvY29yZS9tZF9kb2Nfc3RhdHVzY29kZXMuaHRtbAovLyDnqIvluo/kvb/nlKjkuoblhbbkuK3nmoTpg6jliIbplJnor6/noIHvvIzov5nkuKrplJnor6/noIHnm7TmjqXpgJrov4fmjZXojrdycGPnmoTlvILluLjmiJbogIXov5Tlm57lgLzojrflj5bvvIzkvb/nlKjnmoTplJnor6/noIHlpoLkuIsKLy8gMiBVTktOT1dOIOacquefpemUmeivrwovLyAzIElOVkFMSURfQVJHVU1FTlQg6LCD55So5Y+C5pWw6Z2e5rOVCi8vIDUgTk9UX0ZPVU5EIOafpeivoueahOiusOW9leS4jeWtmOWcqAovLyA2IEFMUkVBRFlfRVhJU1RTIOWIm+W7uueahOiusOW9leW3suWtmOWcqAovLyA3IFBFUk1JU1NJT05fREVOSUVEIOayoeacieaTjeS9nOadg+mZkAovLyA5IEZBSUxFRF9QUkVDT05ESVRJT04g5YmN572u5p2h5Lu25LiN5ruh6Laz77yM55So5oi35bey6KKr5bCB56aB77yM5qOA5rWL5Yiw6K+l6ZSZ6K+v5pe26Lez5Yiw5bCB56aB6aG16Z2i5bm26LCD55SoR2V0QmxvY2tJbmZv6I635Y+W5bCB56aB55qE6K+m57uG5L+h5oGvCi8vIDEzIElOVEVSTkFMIOWGhemDqOacjeWKoeWZqOmUmeivrwovLyAxNCBVTkFWQUlMQUJMRSDnvZHnu5zplJnor6/miJbotoXml7bvvIxhcHDmnKzlnLDplJnor6/vvIzor7fmsYLmsqHmnInliLDmnI3liqHlmagKLy8gMTYgVU5BVVRIRU5USUNBVEVEIOacqueZu+W9le+8jOajgOa1i+WIsOivpemUmeivr+aXtui3s+WIsOeZu+W9lemhtemdogovLyDlhbbkuK3pnIDopoHnibnmrorlpITnkIbnmoTmmK8iMiBVTktOT1dOIOacquefpemUmeivryLvvIzmo4DmtYvliLDor6XplJnor6/noIHml7booajnpLrkuLrkuJrliqHlsYLplJnor6/vvIzpnIDopoHpgJrov4fov5Tlm57nmoRoZWFkZXLmnaXojrflj5bor6bnu4bnmoQKLy8g5Lia5Yqh5bGC6ZSZ6K+v56CB77yM5Lia5Yqh5bGC6ZSZ6K+v56CB6YCa6L+H5p6a5Li+RXJyb3JDb2Rl5a6a5LmJ77yMaGVhZGVy55qEa2V55Li6ImVycm9yLWNvZGUiCgpleHBvcnQgZnVuY3Rpb24gZXJyb3IoZXJyKSB7CiAgaWYgKDE2ID09IGVyci5jb2RlKSB7CiAgICBNZXNzYWdlLnN1Y2Nlc3MoIuacqueZu+W9lSEhISIpOwogICAgbG9naW5PdXQoKTsKICB9IGVsc2UgewogICAgTWVzc2FnZS5zdWNjZXNzKCLlhoXpg6jplJnor68hISEiKTsKICB9CgogIGNvbnNvbGUubG9nKGVycik7Cn0KZXhwb3J0IGZ1bmN0aW9uIGxvZ2luT3V0KCkgewogIHJlbW92ZVRva2VuKCk7CiAgbG9jYXRpb24ucmVsb2FkKCk7Cn0="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/utils/error.js"],"names":["Empty","getToken","removeToken","cmsService","Message","error","err","code","success","loginOut","console","log","location","reload"],"mappings":"AAAA,SAAQA,KAAR,QAAoB,wBAApB;AACA,SAAQC,QAAR,EAAkBC,WAAlB,QAAoC,gBAApC;AACA,SAAQC,UAAR,QAAyB,eAAzB;AACA,SAASC,OAAT,QAAwB,YAAxB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,OAAO,SAASC,KAAT,CAAeC,GAAf,EAAoB;AAEvB,MAAG,MAAMA,GAAG,CAACC,IAAb,EAAkB;AACdH,IAAAA,OAAO,CAACI,OAAR,CAAgB,QAAhB;AACAC,IAAAA,QAAQ;AACX,GAHD,MAGK;AACDL,IAAAA,OAAO,CAACI,OAAR,CAAgB,SAAhB;AACH;;AACDE,EAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACH;AAGD,OAAO,SAASG,QAAT,GAAoB;AACvBP,EAAAA,WAAW;AACXU,EAAAA,QAAQ,CAACC,MAAT;AACH","sourcesContent":["import {Empty} from \"@/proto/js/usertype_pb\";\nimport {getToken, removeToken} from \"@/utils/cookie\";\nimport {cmsService} from \"@/grpc/server\";\nimport { Message } from 'element-ui';\n\n// grpc预定义了一套通用错误码 https://grpc.github.io/grpc/core/md_doc_statuscodes.html\n// 程序使用了其中的部分错误码，这个错误码直接通过捕获rpc的异常或者返回值获取，使用的错误码如下\n// 2 UNKNOWN 未知错误\n// 3 INVALID_ARGUMENT 调用参数非法\n// 5 NOT_FOUND 查询的记录不存在\n// 6 ALREADY_EXISTS 创建的记录已存在\n// 7 PERMISSION_DENIED 没有操作权限\n// 9 FAILED_PRECONDITION 前置条件不满足，用户已被封禁，检测到该错误时跳到封禁页面并调用GetBlockInfo获取封禁的详细信息\n// 13 INTERNAL 内部服务器错误\n// 14 UNAVAILABLE 网络错误或超时，app本地错误，请求没有到服务器\n// 16 UNAUTHENTICATED 未登录，检测到该错误时跳到登录页面\n// 其中需要特殊处理的是\"2 UNKNOWN 未知错误\"，检测到该错误码时表示为业务层错误，需要通过返回的header来获取详细的\n// 业务层错误码，业务层错误码通过枚举ErrorCode定义，header的key为\"error-code\"\n\n\nexport function error(err) {\n\n    if(16 == err.code){\n        Message.success(\"未登录!!!\")\n        loginOut()\n    }else{\n        Message.success(\"内部错误!!!\")\n    }\n    console.log(err)\n}\n\n\nexport function loginOut() {\n    removeToken()\n    location.reload()\n}\n\n"]}]}
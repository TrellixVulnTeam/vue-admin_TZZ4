{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/admin.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/admin.js","mtime":1634111099586},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1634111095606},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":1634111096212}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IHNldFRva2VuLCBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvY29va2llJzsKaW1wb3J0IHsgZXJyb3IgfSBmcm9tICdAL3V0aWxzL2Vycm9yJzsKCnZhciBfZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gX2RlZmF1bHQoZGVwcykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9kZWZhdWx0KTsKCiAgICB0aGlzLnByb3RvID0gZGVwcy5wcm90bzsKICAgIHRoaXMuY2xpZW50ID0gbmV3IGRlcHMucHJvdG8uQ21zQ2xpZW50KHByb2Nlc3MuZW52LlZVRV9BUFBfR1JQQ19QUk9YWV9VUkksIG51bGwsIG51bGwpOwogIH0KICAvKioKICAgKiDmn6Xor6LlkI7lj7DnrqHnkIbluJDlj7cKICAgKiBAcGFyYW0gY2FsbGJhY2sKICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3sKICAgIGtleTogImdldEFkbWluTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEFkbWluTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgZW1wdHlSZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGVtcHR5UmVxID0gbmV3IHRoaXMucHJvdG8uRW1wdHkoKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuZ2V0QWRtaW5MaXN0KGVtcHR5UmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0QWRtaW5MaXN0KF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX2dldEFkbWluTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0QWRtaW5MaXN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2F2ZUFkbWluIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZUFkbWluID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgYWRtaW4sIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhZG1pbiA9IG5ldyB0aGlzLnByb3RvLkFkbWluKCk7CiAgICAgICAgICAgICAgICBhZG1pbi5zZXRFbmFibGUodHJ1ZSk7CiAgICAgICAgICAgICAgICBhZG1pbi5zZXRJZChwYXJhbS5pZCk7CiAgICAgICAgICAgICAgICBhZG1pbi5zZXRFbWFpbChwYXJhbS5lbWFpbCk7CiAgICAgICAgICAgICAgICBhZG1pbi5zZXRQYXNzd29yZChwYXJhbS5wYXNzd29yZCk7CiAgICAgICAgICAgICAgICBhZG1pbi5zZXROYW1lKHBhcmFtLm5hbWUpOwogICAgICAgICAgICAgICAgYWRtaW4uc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICBhZG1pbi5zZXRNb2R1bGVzKHBhcmFtLm1vZHVsZXMpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5zYXZlQWRtaW4oYWRtaW4sIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgICFlcnIgPyBjYWxsYmFjayh0cnVlKSA6IGNhbGxiYWNrKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2F2ZUFkbWluKF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9zYXZlQWRtaW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNhdmVBZG1pbjsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIF9kZWZhdWx0Owp9KCk7CgpleHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/admin.js"],"names":["setToken","getToken","error","deps","proto","client","CmsClient","process","env","VUE_APP_GRPC_PROXY_URI","param","callback","emptyReq","Empty","metadata","getAdminList","err","resp","admin","Admin","setEnable","setId","id","setEmail","email","setPassword","password","setName","name","setAreaId","areaId","setModules","modules","saveAdmin"],"mappings":";;;;;AAAA,SAAQA,QAAR,EAAkBC,QAAlB,QAAiC,gBAAjC;AACA,SAASC,KAAT,QAAsB,eAAtB;;;AAGI,oBAAaC,IAAb,EAAmB;AAAA;;AACf,SAAKC,KAAL,GAAaD,IAAI,CAACC,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIF,IAAI,CAACC,KAAL,CAAWE,SAAf,CAAyBC,OAAO,CAACC,GAAR,CAAYC,sBAArC,EAA6D,IAA7D,EAAmE,IAAnE,CAAd;AACH;AAGD;AACJ;AACA;AACA;AACA;;;;;;kFACI,iBAAoBC,KAApB,EAA2BC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AACUC,gBAAAA,QADV,GACqB,IAAI,KAAKR,KAAL,CAAWS,KAAf,EADrB;AAEUC,gBAAAA,QAFV,GAEqB;AAAC,2BAASb,QAAQ;AAAlB,iBAFrB;AAGI,qBAAKI,MAAL,CAAYU,YAAZ,CAAyBH,QAAzB,EAAmCE,QAAnC,EAA6C,UAACE,GAAD,EAAMC,IAAN,EAAe;AACxD,sBAAI,CAACD,GAAL,EAAU;AACNL,oBAAAA,QAAQ,CAACM,IAAD,CAAR;AACH,mBAFD,MAEO;AACHf,oBAAAA,KAAK,CAACc,GAAD,CAAL;AACH;AACJ,iBAND;;AAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;+EAYA,kBAAiBN,KAAjB,EAAwBC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AACUO,gBAAAA,KADV,GACkB,IAAI,KAAKd,KAAL,CAAWe,KAAf,EADlB;AAEID,gBAAAA,KAAK,CAACE,SAAN,CAAgB,IAAhB;AACAF,gBAAAA,KAAK,CAACG,KAAN,CAAYX,KAAK,CAACY,EAAlB;AACAJ,gBAAAA,KAAK,CAACK,QAAN,CAAeb,KAAK,CAACc,KAArB;AACAN,gBAAAA,KAAK,CAACO,WAAN,CAAkBf,KAAK,CAACgB,QAAxB;AACAR,gBAAAA,KAAK,CAACS,OAAN,CAAcjB,KAAK,CAACkB,IAApB;AACAV,gBAAAA,KAAK,CAACW,SAAN,CAAgBnB,KAAK,CAACoB,MAAtB;AACAZ,gBAAAA,KAAK,CAACa,UAAN,CAAiBrB,KAAK,CAACsB,OAAvB;AAEMlB,gBAAAA,QAVV,GAUqB;AAAC,2BAASb,QAAQ;AAAlB,iBAVrB;AAWI,qBAAKI,MAAL,CAAY4B,SAAZ,CAAsBf,KAAtB,EAA6BJ,QAA7B,EAAuC,UAACE,GAAD,EAAMC,IAAN,EAAe;AAClD,mBAACD,GAAD,GAAOL,QAAQ,CAAC,IAAD,CAAf,GAAwBA,QAAQ,CAAC,KAAD,CAAhC;AACH,iBAFD;;AAXJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O","sourcesContent":["import {setToken, getToken} from '@/utils/cookie'\nimport { error } from '@/utils/error'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(process.env.VUE_APP_GRPC_PROXY_URI, null, null)\n    }\n\n\n    /**\n     * 查询后台管理帐号\n     * @param callback\n     * @returns {Promise<void>}\n     */\n    async getAdminList (param, callback) {\n        const emptyReq = new this.proto.Empty();\n        const metadata = {'token': getToken()};\n        this.client.getAdminList(emptyReq, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n    async saveAdmin (param, callback) {\n        const admin = new this.proto.Admin();\n        admin.setEnable(true)\n        admin.setId(param.id)\n        admin.setEmail(param.email)\n        admin.setPassword(param.password)\n        admin.setName(param.name)\n        admin.setAreaId(param.areaId)\n        admin.setModules(param.modules)\n\n        const metadata = {'token': getToken()};\n        this.client.saveAdmin(admin, metadata, (err, resp) => {\n            !err ? callback(true) : callback(false)\n        })\n    }\n\n\n}\n"]}]}
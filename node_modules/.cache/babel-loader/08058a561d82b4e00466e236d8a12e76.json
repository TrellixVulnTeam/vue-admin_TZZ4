{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/components/ElementDrr/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/components/ElementDrr/index.vue","mtime":1626074721542},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX1Z1ZURyciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9WdWVEcnIiKSk7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQyID0gewogIG5hbWU6ICdFbGVtZW50RHJyJywKICBjb21wb25lbnRzOiB7CiAgICBWdWVEcnI6IF9WdWVEcnIuZGVmYXVsdAogIH0sCiAgcHJvcHM6IHsKICAgIGVsZW1lbnQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9LAogICAgaGFuZGxlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFsnbicsICdlJywgJ3MnLCAndycsICdudycsICduZScsICdzZScsICdzdyddOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZWxlbWVudDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLnVwZGF0ZUhlaWdodCgpOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDlkIzmraXmm7TmlrDlrrnlmajpq5jluqYKICAgIHVwZGF0ZUhlaWdodDogZnVuY3Rpb24gdXBkYXRlSGVpZ2h0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmVsZW1lbnQudHlwZSA9PT0gJ3RleHQnKSB7CiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLiRlbDsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdmlld0hlaWdodCA9IE1hdGguY2VpbChub2RlLnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KTsKICAgICAgICAgIHZhciBoID0gTWF0aC5jZWlsKG5vZGUucXVlcnlTZWxlY3RvcignLmltYWdlLXJpY2gtdGV4dCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCk7CgogICAgICAgICAgaWYgKF90aGlzMi5lbGVtZW50LnkgKyBoID49IHZpZXdIZWlnaHQpIHsKICAgICAgICAgICAgX3RoaXMyLmVsZW1lbnQueSA9IHZpZXdIZWlnaHQgLSBoOwogICAgICAgICAgfQoKICAgICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gaCArICdweCc7CiAgICAgICAgICBfdGhpczIuZWxlbWVudC5oID0gaDsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOWkhOeQhuaLluaUvgogICAgaGFuZGxlRHJhZ1N0b3A6IGZ1bmN0aW9uIGhhbmRsZURyYWdTdG9wKHgsIHkpIHsKICAgICAgaWYgKHRoaXMuZWxlbWVudC54ICE9PSB4IHx8IHRoaXMuZWxlbWVudC55ICE9PSB5KSB7CiAgICAgICAgdGhpcy5lbGVtZW50LnggPSB4OwogICAgICAgIHRoaXMuZWxlbWVudC55ID0geTsKICAgICAgfQogICAgfSwKICAgIC8vIOe8qeaUvuaWh+acrOaXtuabtOaWsOmrmOW6pgogICAgaGFuZGxlUmVzaXppbmc6IGZ1bmN0aW9uIGhhbmRsZVJlc2l6aW5nKCkgewogICAgICBpZiAodGhpcy5lbGVtZW50LnR5cGUgPT09ICd0ZXh0JykgewogICAgICAgIHRoaXMudXBkYXRlSGVpZ2h0KCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlpITnkIbnvKnmlL4KICAgIGhhbmRsZVJlc2l6ZVN0b3A6IGZ1bmN0aW9uIGhhbmRsZVJlc2l6ZVN0b3AoeCwgeSwgdywgaCkgewogICAgICBpZiAodGhpcy5lbGVtZW50LnggIT09IHggfHwgdGhpcy5lbGVtZW50LnkgIT09IHkgfHwgdGhpcy5lbGVtZW50LncgIT09IHcgfHwgdGhpcy5lbGVtZW50LmggIT09IGgpIHsKICAgICAgICB0aGlzLmVsZW1lbnQueCA9IHg7CiAgICAgICAgdGhpcy5lbGVtZW50LnkgPSB5OwogICAgICAgIHRoaXMuZWxlbWVudC53ID0gdzsKCiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC50eXBlID09PSAndGV4dCcpIHsKICAgICAgICAgIHRoaXMudXBkYXRlSGVpZ2h0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZWxlbWVudC5oID0gaDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDlpITnkIblpLHnhKYKICAgIGhhbmRsZURlYWN0aXZhdGU6IGZ1bmN0aW9uIGhhbmRsZURlYWN0aXZhdGUoKSB7CiAgICAgIHRoaXMuZWxlbWVudC5hY3RpdmUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDlpITnkIbogZrnhKYKICAgIGhhbmRsZUFjdGl2YXRlZDogZnVuY3Rpb24gaGFuZGxlQWN0aXZhdGVkKCkgewogICAgICB0aGlzLmVsZW1lbnQuYWN0aXZlID0gdHJ1ZTsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlQWN0aXZlRWxlJywgdGhpcy5lbGVtZW50KTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Mjs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <VueDrr\r\n        class=\"element-drr-wrapper\"\r\n        :x=\"element.x\"\r\n        :y=\"element.y\"\r\n        :w=\"element.w\"\r\n        :h=\"element.h\"\r\n        :handles=\"handles\"\r\n        :active=\"element.active\"\r\n        :minw=\"80\"\r\n        :minh=\"18\"\r\n        :parent=\"true\"\r\n        :rotatable=\"false\"\r\n        @dragstop=\"handleDragStop\"\r\n        @resizing=\"handleResizing\"\r\n        @resizestop=\"handleResizeStop\"\r\n        @deactivated=\"handleDeactivate\"\r\n        @activated=\"handleActivated\"\r\n    >\r\n        <slot/>\r\n    </VueDrr>\r\n</template>\r\n\r\n<script>\r\nimport VueDrr from '../../components/VueDrr'\r\n\r\nexport default {\r\n    name: 'ElementDrr',\r\n    components: {VueDrr},\r\n    props: {\r\n        element: {\r\n            type: Object,\r\n            default: () => {\r\n            }\r\n        },\r\n        handles: {\r\n            type: Array,\r\n            default: () => ['n', 'e', 's', 'w', 'nw', 'ne', 'se', 'sw']\r\n        }\r\n    },\r\n    watch: {\r\n        element: {\r\n            handler(val) {\r\n                this.$nextTick(() => {\r\n                    this.updateHeight()\r\n                })\r\n            },\r\n            deep: true\r\n        }\r\n    },\r\n    methods: {\r\n        // 同步更新容器高度\r\n        updateHeight() {\r\n            if (this.element.type === 'text') {\r\n                const node = this.$el\r\n                this.$nextTick(() => {\r\n                    const viewHeight = Math.ceil(node.parentNode.getBoundingClientRect().height)\r\n                    const h = Math.ceil(node.querySelector('.image-rich-text').getBoundingClientRect().height)\r\n                    if (this.element.y + h >= viewHeight) {\r\n                        this.element.y = viewHeight - h\r\n                    }\r\n                    node.style.height = h + 'px'\r\n                    this.element.h = h\r\n                })\r\n            }\r\n        },\r\n        // 处理拖放\r\n        handleDragStop(x, y) {\r\n            if (this.element.x !== x || this.element.y !== y) {\r\n                this.element.x = x\r\n                this.element.y = y\r\n            }\r\n        },\r\n        // 缩放文本时更新高度\r\n        handleResizing() {\r\n            if (this.element.type === 'text') {\r\n                this.updateHeight()\r\n            }\r\n        },\r\n        // 处理缩放\r\n        handleResizeStop(x, y, w, h) {\r\n            if (this.element.x !== x || this.element.y !== y || this.element.w !== w || this.element.h !== h) {\r\n                this.element.x = x\r\n                this.element.y = y\r\n                this.element.w = w\r\n                if (this.element.type === 'text') {\r\n                    this.updateHeight()\r\n                } else {\r\n                    this.element.h = h\r\n                }\r\n            }\r\n        },\r\n        // 处理失焦\r\n        handleDeactivate() {\r\n            this.element.active = false\r\n        },\r\n        // 处理聚焦\r\n        handleActivated() {\r\n            this.element.active = true\r\n            this.$emit('updateActiveEle', this.element)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.element-drr-wrapper {\r\n    .z-handle-nw,\r\n    .z-handle-ne,\r\n    .z-handle-sw,\r\n    .z-handle-se,\r\n    .z-handle-n:after,\r\n    .z-handle-w:after,\r\n    .z-handle-e:after,\r\n    .z-handle-s:after {\r\n        width: 9px;\r\n        height: 9px;\r\n    }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/ElementDrr"}]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/guild.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/guild.js","mtime":1634111099589},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1634111095606},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":1634111096212}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IHNldFRva2VuLCBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvY29va2llJzsKaW1wb3J0IHsgZXJyb3IgfSBmcm9tICdAL3V0aWxzL2Vycm9yJzsKCnZhciBfZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gX2RlZmF1bHQoZGVwcykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9kZWZhdWx0KTsKCiAgICB0aGlzLnByb3RvID0gZGVwcy5wcm90bzsKICAgIHRoaXMuY2xpZW50ID0gbmV3IGRlcHMucHJvdG8uQ21zQ2xpZW50KHByb2Nlc3MuZW52LlZVRV9BUFBfR1JQQ19QUk9YWV9VUkksIG51bGwsIG51bGwpOwogIH0KICAvKioKICAgKiDmn6Xor6Llt6XkvJoKICAgKiBAcGFyYW0gcGFyYW0KICAgKiBAcGFyYW0gY2FsbGJhY2sKICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3sKICAgIGtleTogImdldEd1aWxkTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEd1aWxkTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5FbXB0eSgpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5nZXRHdWlsZExpc3QocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0R3VpbGRMaXN0KF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX2dldEd1aWxkTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0R3VpbGRMaXN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2F2ZUd1aWxkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZUd1aWxkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVxID0gcGFyYW0uc3RydWN0OwoKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVxID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLkd1aWxkKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXEuc2V0SWQocGFyYW0uaWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXROYW1lKHBhcmFtLm5hbWUpOwogICAgICAgICAgICAgICAgcmVxLnNldEVuYWJsZShwYXJhbS5lbmFibGUpOwogICAgICAgICAgICAgICAgcmVxLnNldE5vdGUocGFyYW0ubm90ZSk7CiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LnNhdmVHdWlsZChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgICFlcnIgPyBjYWxsYmFjayh0cnVlKSA6IGNhbGxiYWNrKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzYXZlR3VpbGQoX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX3NhdmVHdWlsZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2F2ZUd1aWxkOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gX2RlZmF1bHQ7Cn0oKTsKCmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/guild.js"],"names":["setToken","getToken","error","deps","proto","client","CmsClient","process","env","VUE_APP_GRPC_PROXY_URI","param","callback","req","Empty","metadata","getGuildList","err","resp","struct","Guild","setId","id","setAreaId","areaId","setName","name","setEnable","enable","setNote","note","saveGuild"],"mappings":";;;;;AAAA,SAAQA,QAAR,EAAkBC,QAAlB,QAAiC,gBAAjC;AACA,SAASC,KAAT,QAAsB,eAAtB;;;AAGI,oBAAaC,IAAb,EAAmB;AAAA;;AACf,SAAKC,KAAL,GAAaD,IAAI,CAACC,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIF,IAAI,CAACC,KAAL,CAAWE,SAAf,CAAyBC,OAAO,CAACC,GAAR,CAAYC,sBAArC,EAA6D,IAA7D,EAAmE,IAAnE,CAAd;AACH;AAGD;AACJ;AACA;AACA;AACA;AACA;;;;;;kFACI,iBAAoBC,KAApB,EAA2BC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AACUC,gBAAAA,GADV,GACgB,IAAI,KAAKR,KAAL,CAAWS,KAAf,EADhB;AAEUC,gBAAAA,QAFV,GAEqB;AAAC,2BAASb,QAAQ;AAAlB,iBAFrB;AAGI,qBAAKI,MAAL,CAAYU,YAAZ,CAAyBH,GAAzB,EAA8BE,QAA9B,EAAwC,UAACE,GAAD,EAAMC,IAAN,EAAe;AACnD,sBAAI,CAACD,GAAL,EAAU;AACNL,oBAAAA,QAAQ,CAACM,IAAD,CAAR;AACH,mBAFD,MAEO;AACHf,oBAAAA,KAAK,CAACc,GAAD,CAAL;AACH;AACJ,iBAND;;AAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;+EAYA,kBAAiBN,KAAjB,EAAwBC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,gBAAAA,GADR,GACcF,KAAK,CAACQ,MADpB;;AAEI,oBAAG,OAAON,GAAP,IAAe,WAAlB,EAA8B;AAC1BA,kBAAAA,GAAG,GAAG,IAAI,KAAKR,KAAL,CAAWe,KAAf,EAAN;AACH,iBAFD,MAEK;AACDP,kBAAAA,GAAG,CAACQ,KAAJ,CAAUV,KAAK,CAACW,EAAhB;AACH;;AACDT,gBAAAA,GAAG,CAACU,SAAJ,CAAcZ,KAAK,CAACa,MAApB;AACAX,gBAAAA,GAAG,CAACY,OAAJ,CAAYd,KAAK,CAACe,IAAlB;AACAb,gBAAAA,GAAG,CAACc,SAAJ,CAAchB,KAAK,CAACiB,MAApB;AACAf,gBAAAA,GAAG,CAACgB,OAAJ,CAAYlB,KAAK,CAACmB,IAAlB;AAEMf,gBAAAA,QAZV,GAYqB;AAAC,2BAASb,QAAQ;AAAlB,iBAZrB;AAaI,qBAAKI,MAAL,CAAYyB,SAAZ,CAAsBlB,GAAtB,EAA2BE,QAA3B,EAAqC,UAACE,GAAD,EAAMC,IAAN,EAAe;AAChD,mBAACD,GAAD,GAAOL,QAAQ,CAAC,IAAD,CAAf,GAAwBA,QAAQ,CAAC,KAAD,CAAhC;AACH,iBAFD;;AAbJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O","sourcesContent":["import {setToken, getToken} from '@/utils/cookie'\nimport { error } from '@/utils/error'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(process.env.VUE_APP_GRPC_PROXY_URI, null, null)\n    }\n\n\n    /**\n     * 查询工会\n     * @param param\n     * @param callback\n     * @returns {Promise<void>}\n     */\n    async getGuildList (param, callback) {\n        const req = new this.proto.Empty();\n        const metadata = {'token': getToken()};\n        this.client.getGuildList(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n    async saveGuild (param, callback) {\n        let req = param.struct;\n        if(typeof(req) == \"undefined\"){\n            req = new this.proto.Guild()\n        }else{\n            req.setId(param.id)\n        }\n        req.setAreaId(param.areaId)\n        req.setName(param.name)\n        req.setEnable(param.enable)\n        req.setNote(param.note)\n\n        const metadata = {'token': getToken()}\n        this.client.saveGuild(req, metadata, (err, resp) => {\n            !err ? callback(true) : callback(false)\n        })\n    }\n\n\n}\n"]}]}
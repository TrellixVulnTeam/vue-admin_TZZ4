{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/thread-loader/dist/cjs.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/config.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/config.js","mtime":1634287216802},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/thread-loader/dist/cjs.js","mtime":1634111096142},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1634111095606}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBzZXRUb2tlbiwgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2Nvb2tpZSc7CmltcG9ydCB7IGVycm9yIH0gZnJvbSAnQC91dGlscy9lcnJvcic7CmltcG9ydCB7IE9zVHlwZSB9IGZyb20gIkAvcHJvdG8vanMvdXNlcnR5cGVfcGIiOwoKdmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBfZGVmYXVsdChkZXBzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2RlZmF1bHQpOwoKICAgIHRoaXMucHJvdG8gPSBkZXBzLnByb3RvOwogICAgdGhpcy5jbGllbnQgPSBuZXcgZGVwcy5wcm90by5DbXNDbGllbnQocHJvY2Vzcy5lbnYuVlVFX0FQUF9HUlBDX1BST1hZX1VSSSwgbnVsbCwgbnVsbCk7CiAgfSAvLyDmn6Xor6LljLrln5/liJfooagKCgogIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3sKICAgIGtleTogImdldEFyZWFDb25maWdMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0QXJlYUNvbmZpZ0xpc3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVxID0gbmV3IHRoaXMucHJvdG8uQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXBwSWQocGFyYW0uYXBwSWQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5nZXRBcmVhQ29uZmlnTGlzdChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRBcmVhQ29uZmlnTGlzdChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBcmVhQ29uZmlnTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0QXJlYUNvbmZpZ0xpc3Q7CiAgICB9KCkgLy8g5L+d5a2Y5Yy65Z+f6YWN572uCgogIH0sIHsKICAgIGtleTogInNhdmVBcmVhQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZUFyZWFDb25maWcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBwYXJhbS5zdHJ1Y3Q7CgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXEgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgcmVxID0gbmV3IHRoaXMucHJvdG8uQXJlYUNvbmZpZygpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlcS5zZXRBcHBJZChwYXJhbS5hcHBJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0Q29udmVydFJhdGUocGFyYW0uY29udmVydFJhdGUpOwogICAgICAgICAgICAgICAgcmVxLnNldERlcG9zaXRDb21taXNzaW9uKHBhcmFtLmRlcG9zaXRDb21taXNzaW9uKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRSZXdhcmRDb21taXNzaW9uKHBhcmFtLnJld2FyZENvbW1pc3Npb24pOwogICAgICAgICAgICAgICAgcmVxLnNldENhbGxQcmljZShwYXJhbS5jYWxsUHJpY2UpOwogICAgICAgICAgICAgICAgcmVxLnNldEZyZWVNZXNzYWdlQ291bnQocGFyYW0uZnJlZU1lc3NhZ2VDb3VudCk7CiAgICAgICAgICAgICAgICByZXEuc2V0TmV3VXNlclJld2FyZChwYXJhbS5uZXdVc2VyUmV3YXJkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRIZWFydGJlYXRJbnRlcnZhbChwYXJhbS5oZWFydGJlYXRJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICByZXEuc2V0UGF5VHlwZXNMaXN0KHBhcmFtLnBheVR5cGVzKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRQYXlDaGFubmVsSWRzTGlzdChwYXJhbS5wYXlDaGFubmVsSWRzKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRDZG4ocGFyYW0uY2RuKTsKICAgICAgICAgICAgICAgIHJlcS5zZXREbmRQZXJpb2QocGFyYW0uZG5kUGVyaW9kKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRUYWdzTGlzdChwYXJhbS50YWdzKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBbmNob3JFeGNoYW5nZVJhdGUocGFyYW0uYW5jaG9yRXhjaGFuZ2VSYXRlKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRPc3NDb25maWcocGFyYW0ub3NzQ29uZmlnKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBZ29yYUNvbmZpZyhwYXJhbS5hZ29yYUNvbmZpZyk7CiAgICAgICAgICAgICAgICByZXEuc2V0Um9uZ2Nsb3VkQ29uZmlnKHBhcmFtLnJvbmdjbG91ZENvbmZpZyk7CiAgICAgICAgICAgICAgICByZXEuc2V0R3JlZW5Db25maWcocGFyYW0uZ3JlZW5Db25maWcpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5zYXZlQXJlYUNvbmZpZyhyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2F2ZUFyZWFDb25maWcoX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX3NhdmVBcmVhQ29uZmlnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzYXZlQXJlYUNvbmZpZzsKICAgIH0oKSAvLyDmn6Xor6LmlK/ku5jmuKDpgZMKCiAgfSwgewogICAga2V5OiAiZ2V0UGF5Q2hhbm5lbExpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRQYXlDaGFubmVsTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLlBheUNoYW5uZWxMaXN0UmVxdWVzdCgpOwogICAgICAgICAgICAgICAgcmVxLnNldEFyZWFJZChwYXJhbS5hcmVhSWQpOwogICAgICAgICAgICAgICAgcmVxLnNldFBheVR5cGUocGFyYW0ucGF5VHlwZSk7CiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LmdldFBheUNoYW5uZWxMaXN0KHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0UGF5Q2hhbm5lbExpc3QoX3g1LCBfeDYpIHsKICAgICAgICByZXR1cm4gX2dldFBheUNoYW5uZWxMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRQYXlDaGFubmVsTGlzdDsKICAgIH0oKSAvLyDkv53lrZjmlK/ku5jmuKDpgZPphY3nva4KCiAgfSwgewogICAga2V5OiAic2F2ZVBheUNoYW5uZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zYXZlUGF5Q2hhbm5lbCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IHBhcmFtLnN0cnVjdDsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlcSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5QYXlDaGFubmVsKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVxLnNldEFyZWFJZChwYXJhbS5hcmVhSWQpOwogICAgICAgICAgICAgICAgcmVxLnNldE9zVHlwZShwYXJhbS5vc1R5cGUpOwogICAgICAgICAgICAgICAgcmVxLnNldFBheVR5cGUocGFyYW0ucGF5VHlwZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0Q2hhbm5lbChwYXJhbS5jaGFubmVsKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRUaXRsZShwYXJhbS50aXRsZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0TmFtZShwYXJhbS5uYW1lKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRJY29uKHBhcmFtLmljb24pOwogICAgICAgICAgICAgICAgcmVxLnNldEVuYWJsZShwYXJhbS5lbmFibGUpOwogICAgICAgICAgICAgICAgcmVxLnNldERpc2NvdW50KHBhcmFtLmRpc2NvdW50KTsKICAgICAgICAgICAgICAgIHJlcS5zZXRTb3J0KHBhcmFtLnNvcnQpOwogICAgICAgICAgICAgICAgcmVxLnNldE5vdGUocGFyYW0ubm90ZSk7CiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LnNhdmVQYXlDaGFubmVsKHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNhdmVQYXlDaGFubmVsKF94NywgX3g4KSB7CiAgICAgICAgcmV0dXJuIF9zYXZlUGF5Q2hhbm5lbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2F2ZVBheUNoYW5uZWw7CiAgICB9KCkgLy8g5p+l6K+i5pSv5LuY5Y+C5pWwCgogIH0sIHsKICAgIGtleTogImdldFBheUNvbmZpZ0xpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRQYXlDb25maWdMaXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVxID0gbmV3IHRoaXMucHJvdG8uUGF5Q29uZmlnTGlzdFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuZ2V0UGF5Q29uZmlnTGlzdChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldFBheUNvbmZpZ0xpc3QoX3g5LCBfeDEwKSB7CiAgICAgICAgcmV0dXJuIF9nZXRQYXlDb25maWdMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRQYXlDb25maWdMaXN0OwogICAgfSgpIC8vIOS/neWtmOaUr+S7mOWPguaVsAoKICB9LCB7CiAgICBrZXk6ICJzYXZlUGF5Q29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZVBheUNvbmZpZyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IHBhcmFtLnN0cnVjdDsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlcSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5QYXlDb25maWcoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXEuc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0VHlwZShwYXJhbS50eXBlKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcHBJZChwYXJhbS5hcHBJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXBwU2VjcmV0KHBhcmFtLmFwcFNlY3JldCk7CiAgICAgICAgICAgICAgICByZXEuc2V0UmVkaXJlY3RVcmwocGFyYW0ucmVkaXJlY3RVcmwpOwogICAgICAgICAgICAgICAgcmVxLnNldENhbGxiYWNrVXJsKHBhcmFtLmNhbGxiYWNrVXJsKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRFeHRyYTEocGFyYW0uZXh0cmExKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRFeHRyYTIocGFyYW0uZXh0cmEyKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRFeHRyYTMocGFyYW0uZXh0cmEzKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuc2F2ZVBheUNvbmZpZyhyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzYXZlUGF5Q29uZmlnKF94MTEsIF94MTIpIHsKICAgICAgICByZXR1cm4gX3NhdmVQYXlDb25maWcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNhdmVQYXlDb25maWc7CiAgICB9KCkgLy8g5p+l6K+i5Zu95a626YWN572uCgogIH0sIHsKICAgIGtleTogImdldENvdW50cnlDb25maWdMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0Q291bnRyeUNvbmZpZ0xpc3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuZ2V0Q291bnRyeUNvbmZpZ0xpc3QocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRDb3VudHJ5Q29uZmlnTGlzdChfeDEzLCBfeDE0KSB7CiAgICAgICAgcmV0dXJuIF9nZXRDb3VudHJ5Q29uZmlnTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0Q291bnRyeUNvbmZpZ0xpc3Q7CiAgICB9KCkgLy8g5L+d5a2Y5Zu95a626YWN572uCgogIH0sIHsKICAgIGtleTogInNhdmVDb3VudHJ5Q29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZUNvdW50cnlDb25maWcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBwYXJhbS5zdHJ1Y3Q7CgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXEgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgcmVxID0gbmV3IHRoaXMucHJvdG8uQ291bnRyeUNvbmZpZygpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRDb3VudHJ5KHBhcmFtLmNvdW50cnkpOwogICAgICAgICAgICAgICAgcmVxLnNldEVuYWJsZShwYXJhbS5lbmFibGUpOwogICAgICAgICAgICAgICAgcmVxLnNldFRpdGxlKHBhcmFtLnRpdGxlKTsKICAgICAgICAgICAgICAgIHJlcS5zZXROYW1lKHBhcmFtLm5hbWUpOwogICAgICAgICAgICAgICAgcmVxLnNldEN1cnJlbmN5KHBhcmFtLmN1cnJlbmN5KTsKICAgICAgICAgICAgICAgIHJlcS5zZXRJY29uKHBhcmFtLmljb24pOwogICAgICAgICAgICAgICAgcmVxLnNldEV4Y2hhbmdlUmF0ZShwYXJhbS5leGNoYW5nZVJhdGUpOwogICAgICAgICAgICAgICAgcmVxLnNldEFwcHJveGltYXRpb25zTGlzdChwYXJhbS5hcHByb3hpbWF0aW9ucyk7CiAgICAgICAgICAgICAgICByZXEuc2V0UGF5Q2hhbm5lbElkc0xpc3QocGFyYW0ucGF5Q2hhbm5lbElkcyk7CiAgICAgICAgICAgICAgICByZXEuc2V0U29ydChwYXJhbS5zb3J0KTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuc2F2ZUNvdW50cnlDb25maWcocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2F2ZUNvdW50cnlDb25maWcoX3gxNSwgX3gxNikgewogICAgICAgIHJldHVybiBfc2F2ZUNvdW50cnlDb25maWcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNhdmVDb3VudHJ5Q29uZmlnOwogICAgfSgpIC8vIOafpeivouW6lOeUqOWIl+ihqAoKICB9LCB7CiAgICBrZXk6ICJnZXRBcHBMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0QXBwTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLkNvdW50cnlDb25maWdMaXN0UmVxdWVzdCgpOwogICAgICAgICAgICAgICAgcmVxLnNldEFyZWFJZChwYXJhbS5hcmVhSWQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5nZXRBcHBMaXN0KHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0QXBwTGlzdChfeDE3LCBfeDE4KSB7CiAgICAgICAgcmV0dXJuIF9nZXRBcHBMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRBcHBMaXN0OwogICAgfSgpIC8vIOS/neWtmOW6lOeUqAoKICB9LCB7CiAgICBrZXk6ICJzYXZlQXBwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZUFwcCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVxID0gcGFyYW0uc3RydWN0OwoKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVxID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLkFwcCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlcS5zZXRJZChwYXJhbS5pZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0T3NUeXBlKHBhcmFtLm9zVHlwZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXBwS2V5KHBhcmFtLmFwcEtleSk7CiAgICAgICAgICAgICAgICByZXEuc2V0RW5hYmxlKHBhcmFtLmVuYWJsZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0VGl0bGUocGFyYW0udGl0bGUpOwogICAgICAgICAgICAgICAgcmVxLnNldElzQW5jaG9yKHBhcmFtLmlzQW5jaG9yKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRCdW5kbGVJZChwYXJhbS5idW5kbGVJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0U3RvcmVDcmVkKHBhcmFtLnN0b3JlQ3JlZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXBpQWRkcihwYXJhbS5hcGlBZGRyKTsKICAgICAgICAgICAgICAgIHJlcS5zZXROb3RlKHBhcmFtLm5vdGUpOwogICAgICAgICAgICAgICAgcmVxLnNldEFyZWFJZHNMaXN0KHBhcmFtLmFyZWFJZHMpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5zYXZlQXBwKHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEwLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2F2ZUFwcChfeDE5LCBfeDIwKSB7CiAgICAgICAgcmV0dXJuIF9zYXZlQXBwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzYXZlQXBwOwogICAgfSgpIC8vIOiOt+WPluWVhuWTgemFjee9rgoKICB9LCB7CiAgICBrZXk6ICJnZXRDb21tb2RpdHlMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0Q29tbW9kaXR5TGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVxID0gbmV3IHRoaXMucHJvdG8uQ29tbW9kaXR5TGlzdFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcHBJZChwYXJhbS5hcHBJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0SXNTdWJzY3JpcHRpb24ocGFyYW0uaXNTdWJzY3JpcHRpb24pOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5nZXRDb21tb2RpdHlMaXN0KHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTEsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRDb21tb2RpdHlMaXN0KF94MjEsIF94MjIpIHsKICAgICAgICByZXR1cm4gX2dldENvbW1vZGl0eUxpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldENvbW1vZGl0eUxpc3Q7CiAgICB9KCkgLy8g5L+d5a2Y5ZWG5ZOBCgogIH0sIHsKICAgIGtleTogInNhdmVDb21tb2RpdHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zYXZlQ29tbW9kaXR5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBwYXJhbS5zdHJ1Y3Q7CgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXEgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgcmVxID0gbmV3IHRoaXMucHJvdG8uQ29tbW9kaXR5KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVxLnNldElkKHBhcmFtLmlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcHBJZChwYXJhbS5hcHBJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0RW5hYmxlKHBhcmFtLmVuYWJsZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0VGl0bGUocGFyYW0udGl0bGUpOwogICAgICAgICAgICAgICAgcmVxLnNldE5hbWUocGFyYW0ubmFtZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0U2t1KHBhcmFtLnNrdSk7CiAgICAgICAgICAgICAgICByZXEuc2V0UHJpY2UocGFyYW0ucHJpY2UpOwogICAgICAgICAgICAgICAgcmVxLnNldEN1cnJlbmN5KHBhcmFtLmN1cnJlbmN5KTsKICAgICAgICAgICAgICAgIHJlcS5zZXREaXNjb3VudChwYXJhbS5kaXNjb3VudCk7CiAgICAgICAgICAgICAgICByZXEuc2V0SWNvbihwYXJhbS5pY29uKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBbW91bnQocGFyYW0uYW1vdW50KTsKICAgICAgICAgICAgICAgIHJlcS5zZXRCb251cyhwYXJhbS5ib251cyk7CiAgICAgICAgICAgICAgICByZXEuc2V0VmlwRGF5cyhwYXJhbS52aXBEYXlzKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRTb3J0KHBhcmFtLnNvcnQpOwogICAgICAgICAgICAgICAgcmVxLnNldElzU3Vic2NyaXB0aW9uKHBhcmFtLmlzU3Vic2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRJc0ZpcnN0UmV3YXJkKHBhcmFtLmlzRmlyc3RSZXdhcmQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5zYXZlQ29tbW9kaXR5KHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2F2ZUNvbW1vZGl0eShfeDIzLCBfeDI0KSB7CiAgICAgICAgcmV0dXJuIF9zYXZlQ29tbW9kaXR5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzYXZlQ29tbW9kaXR5OwogICAgfSgpIC8vIOiOt+WPlueJiOacrOWIl+ihqAoKICB9LCB7CiAgICBrZXk6ICJnZXRWZXJzaW9uTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldFZlcnNpb25MaXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5WZXJzaW9uTGlzdFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcHBJZChwYXJhbS5hcHBJZCk7CiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LmdldFZlcnNpb25MaXN0KHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRWZXJzaW9uTGlzdChfeDI1LCBfeDI2KSB7CiAgICAgICAgcmV0dXJuIF9nZXRWZXJzaW9uTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0VmVyc2lvbkxpc3Q7CiAgICB9KCkgLy8g5L+d5a2Y5ZWG5ZOBCgogIH0sIHsKICAgIGtleTogInNhdmVWZXJzaW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZVZlcnNpb24gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNChwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IHBhcmFtLnN0cnVjdDsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlcSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5WZXJzaW9uKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVxLnNldElkKHBhcmFtLmlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcHBJZChwYXJhbS5hcHBJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0T3NUeXBlKHBhcmFtLm9zVHlwZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0Q29kZShwYXJhbS5jb2RlKTsKICAgICAgICAgICAgICAgIHJlcS5zZXROYW1lKHBhcmFtLm5hbWUpOwogICAgICAgICAgICAgICAgcmVxLnNldEVuYWJsZShwYXJhbS5lbmFibGUpOwogICAgICAgICAgICAgICAgcmVxLnNldEluUmV2aWV3KHBhcmFtLmluUmV2aWV3KTsKICAgICAgICAgICAgICAgIHJlcS5zZXROb3RlKHBhcmFtLm5vdGUpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5zYXZlVmVyc2lvbihyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNhdmVWZXJzaW9uKF94MjcsIF94MjgpIHsKICAgICAgICByZXR1cm4gX3NhdmVWZXJzaW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzYXZlVmVyc2lvbjsKICAgIH0oKSAvLyDojrflj5bnrb7liLDphY3nva4KCiAgfSwgewogICAga2V5OiAiZ2V0Q2hlY2tpbkNvbmZpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldENoZWNraW5Db25maWcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNShwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLkNoZWNraW5Db25maWdSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXBwSWQocGFyYW0uYXBwSWQpOwogICAgICAgICAgICAgICAgcmVxLnNldEFyZWFJZChwYXJhbS5hcmVhSWQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5nZXRDaGVja2luQ29uZmlnKHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRDaGVja2luQ29uZmlnKF94MjksIF94MzApIHsKICAgICAgICByZXR1cm4gX2dldENoZWNraW5Db25maWcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldENoZWNraW5Db25maWc7CiAgICB9KCkgLy8g5L+d5a2Y562+5Yiw6YWN572uCgogIH0sIHsKICAgIGtleTogInNhdmVDaGVja2luQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZUNoZWNraW5Db25maWcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNihwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE2JChfY29udGV4dDE2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IHBhcmFtLnN0cnVjdDsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlcSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5DaGVja2luQ29uZmlnKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVxLnNldElkKHBhcmFtLmlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcHBJZChwYXJhbS5hcHBJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0Qm9udXMocGFyYW0uYm9udXMpOwogICAgICAgICAgICAgICAgcmVxLnNldFZpcERheXMocGFyYW0udmlwRGF5cyk7CiAgICAgICAgICAgICAgICByZXEuc2V0TWF0Y2hlcyhwYXJhbS5tYXRjaGVzKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRXZWlnaHQocGFyYW0ud2VpZ2h0KTsKICAgICAgICAgICAgICAgIHJlcS5zZXRTb3J0KHBhcmFtLnNvcnQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5zYXZlQ2hlY2tpbkNvbmZpZyhyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNhdmVDaGVja2luQ29uZmlnKF94MzEsIF94MzIpIHsKICAgICAgICByZXR1cm4gX3NhdmVDaGVja2luQ29uZmlnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzYXZlQ2hlY2tpbkNvbmZpZzsKICAgIH0oKSAvLyDojrflj5Z2aXDphY3nva4KCiAgfSwgewogICAga2V5OiAiZ2V0VmlwQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0VmlwQ29uZmlnID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNyQoX2NvbnRleHQxNykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5WaXBDb25maWdSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXBwSWQocGFyYW0uYXBwSWQpOwogICAgICAgICAgICAgICAgcmVxLnNldEFyZWFJZChwYXJhbS5hcmVhSWQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5nZXRWaXBDb25maWcocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldFZpcENvbmZpZyhfeDMzLCBfeDM0KSB7CiAgICAgICAgcmV0dXJuIF9nZXRWaXBDb25maWcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldFZpcENvbmZpZzsKICAgIH0oKSAvLyDkv53lrZh2aXDphY3nva4KCiAgfSwgewogICAga2V5OiAic2F2ZVZpcENvbmZpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NhdmVWaXBDb25maWcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOChwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE4JChfY29udGV4dDE4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IHBhcmFtLnN0cnVjdDsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlcSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5WaXBDb25maWcoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXEuc2V0SWQocGFyYW0uaWQpOwogICAgICAgICAgICAgICAgcmVxLnNldEFwcElkKHBhcmFtLmFwcElkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRUaXRsZShwYXJhbS50aXRsZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0RGF5cyhwYXJhbS5kYXlzKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRQcmljZShwYXJhbS5wcmljZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0RGlzY291bnQocGFyYW0uZGlzY291bnQpOwogICAgICAgICAgICAgICAgcmVxLnNldEVuYWJsZShwYXJhbS5lbmFibGUpOwogICAgICAgICAgICAgICAgcmVxLnNldFNvcnQocGFyYW0uc29ydCk7CiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LnNhdmVWaXBDb25maWcocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTgsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzYXZlVmlwQ29uZmlnKF94MzUsIF94MzYpIHsKICAgICAgICByZXR1cm4gX3NhdmVWaXBDb25maWcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNhdmVWaXBDb25maWc7CiAgICB9KCkKICB9XSk7CgogIHJldHVybiBfZGVmYXVsdDsKfSgpOwoKZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9Ow=="},null]}
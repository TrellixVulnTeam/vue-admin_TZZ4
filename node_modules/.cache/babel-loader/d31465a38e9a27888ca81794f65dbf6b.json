{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/src/proto/js/anchortype_pb.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/proto/js/anchortype_pb.js","mtime":1631588621219},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gc291cmNlOiBhbmNob3J0eXBlLnByb3RvCgovKioKICogQGZpbGVvdmVydmlldwogKiBAZW5oYW5jZWFibGUKICogQHN1cHByZXNzIHttaXNzaW5nUmVxdWlyZX0gcmVwb3J0cyBlcnJvciBvbiBpbXBsaWNpdCB0eXBlIHVzYWdlcy4KICogQHN1cHByZXNzIHttZXNzYWdlQ29udmVudGlvbnN9IEpTIENvbXBpbGVyIHJlcG9ydHMgYW4gZXJyb3IgaWYgYSB2YXJpYWJsZSBvcgogKiAgICAgZmllbGQgc3RhcnRzIHdpdGggJ01TR18nIGFuZCBpc24ndCBhIHRyYW5zbGF0YWJsZSBtZXNzYWdlLgogKiBAcHVibGljCiAqLwovLyBHRU5FUkFURUQgQ09ERSAtLSBETyBOT1QgRURJVCEKCi8qIGVzbGludC1kaXNhYmxlICovCi8vIEB0cy1ub2NoZWNrCnZhciBqc3BiID0gcmVxdWlyZSgnZ29vZ2xlLXByb3RvYnVmJyk7Cgp2YXIgZ29vZyA9IGpzcGI7CnZhciBnbG9iYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwoKdmFyIHVzZXJ0eXBlX3BiID0gcmVxdWlyZSgnLi91c2VydHlwZV9wYi5qcycpOwoKZ29vZy5vYmplY3QuZXh0ZW5kKHByb3RvLCB1c2VydHlwZV9wYik7Cmdvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5BbmNob3JCYXNpYycsIG51bGwsIGdsb2JhbCk7Cmdvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5BbmNob3JQcm9maWxlJywgbnVsbCwgZ2xvYmFsKTsKZ29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLk9ubGluZVJlY29yZCcsIG51bGwsIGdsb2JhbCk7Cmdvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5TZXR0bGVSZWNvcmQnLCBudWxsLCBnbG9iYWwpOwpnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuU2V0dGxlU3RhdHVzJywgbnVsbCwgZ2xvYmFsKTsKLyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi8KCnByb3RvLnBiLkFuY2hvckJhc2ljID0gZnVuY3Rpb24gKG9wdF9kYXRhKSB7CiAganNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcywgb3B0X2RhdGEsIDAsIC0xLCBwcm90by5wYi5BbmNob3JCYXNpYy5yZXBlYXRlZEZpZWxkc18sIG51bGwpOwp9OwoKZ29vZy5pbmhlcml0cyhwcm90by5wYi5BbmNob3JCYXNpYywganNwYi5NZXNzYWdlKTsKCmlmIChnb29nLkRFQlVHICYmICFDT01QSUxFRCkgewogIC8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi8KICBwcm90by5wYi5BbmNob3JCYXNpYy5kaXNwbGF5TmFtZSA9ICdwcm90by5wYi5BbmNob3JCYXNpYyc7Cn0KLyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlID0gZnVuY3Rpb24gKG9wdF9kYXRhKSB7CiAganNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcywgb3B0X2RhdGEsIDAsIC0xLCBwcm90by5wYi5BbmNob3JQcm9maWxlLnJlcGVhdGVkRmllbGRzXywgbnVsbCk7Cn07Cgpnb29nLmluaGVyaXRzKHByb3RvLnBiLkFuY2hvclByb2ZpbGUsIGpzcGIuTWVzc2FnZSk7CgppZiAoZ29vZy5ERUJVRyAmJiAhQ09NUElMRUQpIHsKICAvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovCiAgcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5kaXNwbGF5TmFtZSA9ICdwcm90by5wYi5BbmNob3JQcm9maWxlJzsKfQovKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqLwoKCnByb3RvLnBiLk9ubGluZVJlY29yZCA9IGZ1bmN0aW9uIChvcHRfZGF0YSkgewogIGpzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsIG9wdF9kYXRhLCAwLCAtMSwgbnVsbCwgbnVsbCk7Cn07Cgpnb29nLmluaGVyaXRzKHByb3RvLnBiLk9ubGluZVJlY29yZCwganNwYi5NZXNzYWdlKTsKCmlmIChnb29nLkRFQlVHICYmICFDT01QSUxFRCkgewogIC8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi8KICBwcm90by5wYi5PbmxpbmVSZWNvcmQuZGlzcGxheU5hbWUgPSAncHJvdG8ucGIuT25saW5lUmVjb3JkJzsKfQovKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZCA9IGZ1bmN0aW9uIChvcHRfZGF0YSkgewogIGpzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsIG9wdF9kYXRhLCAwLCAtMSwgbnVsbCwgbnVsbCk7Cn07Cgpnb29nLmluaGVyaXRzKHByb3RvLnBiLlNldHRsZVJlY29yZCwganNwYi5NZXNzYWdlKTsKCmlmIChnb29nLkRFQlVHICYmICFDT01QSUxFRCkgewogIC8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi8KICBwcm90by5wYi5TZXR0bGVSZWNvcmQuZGlzcGxheU5hbWUgPSAncHJvdG8ucGIuU2V0dGxlUmVjb3JkJzsKfQovKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5yZXBlYXRlZEZpZWxkc18gPSBbMTQsIDI0LCAxMDAsIDEwMV07CgppZiAoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCkgewogIC8qKgogICAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAgICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAgICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogICAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogICAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogICAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICAgKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogICAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAgICogQHJldHVybiB7IU9iamVjdH0KICAgKi8KICBwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbiAob3B0X2luY2x1ZGVJbnN0YW5jZSkgewogICAgcmV0dXJuIHByb3RvLnBiLkFuY2hvckJhc2ljLnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsIHRoaXMpOwogIH07CiAgLyoqCiAgICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAgICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogICAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogICAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAgICogQHBhcmFtIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICAgKiBAcmV0dXJuIHshT2JqZWN0fQogICAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICAgKi8KCgogIHByb3RvLnBiLkFuY2hvckJhc2ljLnRvT2JqZWN0ID0gZnVuY3Rpb24gKGluY2x1ZGVJbnN0YW5jZSwgbXNnKSB7CiAgICB2YXIgZiwKICAgICAgICBvYmogPSB7CiAgICAgIGlkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDEsIDApLAogICAgICBhcHBJZDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAyLCAwKSwKICAgICAgdmVyc2lvbjoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAzLCAwKSwKICAgICAgZ3VpbGRJZDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA0LCAwKSwKICAgICAgYXJlYUlkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDUsIDApLAogICAgICByb2JvdDoganNwYi5NZXNzYWdlLmdldEJvb2xlYW5GaWVsZFdpdGhEZWZhdWx0KG1zZywgNiwgZmFsc2UpLAogICAgICBjb3VudHJ5OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDcsICIiKSwKICAgICAgb25saW5lU3RhdHVzOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDgsIDApLAogICAgICByZXZpZXdTdGF0dXM6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgOSwgMCksCiAgICAgIHByb2ZpbGVDb3VudDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAxMCwgMCksCiAgICAgIGFjdGl2ZUNvdW50OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDExLCAwKSwKICAgICAgbGV2ZWw6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMTIsIDApLAogICAgICBsYW5nOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDEzLCAiIiksCiAgICAgIGxhbmdzTGlzdDogKGYgPSBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRGaWVsZChtc2csIDE0KSkgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGYsCiAgICAgIHByaWNlOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDE1LCAwKSwKICAgICAgY2FsbEluY29tZToganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAxNiwgMCksCiAgICAgIGdpZnRJbmNvbWU6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMTcsIDApLAogICAgICBjb21taXNzaW9uSW5jb21lOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDE4LCAwKSwKICAgICAgYWRqdXN0SW5jb21lOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDE5LCAwKSwKICAgICAgYmFsYW5jZToganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAyMCwgMCksCiAgICAgIHNldHRsZWQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMjEsIDApLAogICAgICBzZXR0bGVkQXQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMjIsIDApLAogICAgICBmYW5zQ291bnQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMjMsIDApLAogICAgICBsaXZlSWRzTGlzdDogKGYgPSBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRGaWVsZChtc2csIDI0KSkgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGYsCiAgICAgIG9mZmxpbmVBdDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAyNSwgMCksCiAgICAgIGJsb2NrU3RhdHVzOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDI2LCAwKSwKICAgICAgb25saW5lSXA6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMjcsICIiKSwKICAgICAgbG9uZ2l0dWRlOiBqc3BiLk1lc3NhZ2UuZ2V0RmxvYXRpbmdQb2ludEZpZWxkV2l0aERlZmF1bHQobXNnLCAyOCwgMC4wKSwKICAgICAgbGF0aXR1ZGU6IGpzcGIuTWVzc2FnZS5nZXRGbG9hdGluZ1BvaW50RmllbGRXaXRoRGVmYXVsdChtc2csIDI5LCAwLjApLAogICAgICBjcmVhdGVJcDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAzMCwgIiIpLAogICAgICBkZXZpY2VJZDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAzMSwgMCksCiAgICAgIG5ldHdvcmtUeXBlOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDMyLCAwKSwKICAgICAgYmFua05hbWU6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMzMsICIiKSwKICAgICAgYWNjb3VudE5hbWU6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMzQsICIiKSwKICAgICAgYmFua0FjY291bnQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMzUsICIiKSwKICAgICAgZW1haWw6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMzYsICIiKSwKICAgICAgbm90ZToganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAzNywgIiIpLAogICAgICBoZWFydGJlYXRBdDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAzOCwgMCksCiAgICAgIGFjY2Vzc1Rva2VuOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDM5LCAiIiksCiAgICAgIGFjY2Vzc0V4cGlyZUF0OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDQwLCAwKSwKICAgICAgYWdvcmFSdG1Ub2tlbjoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA0MSwgIiIpLAogICAgICBhZ29yYVJ0bUV4cGlyZUF0OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDQyLCAwKSwKICAgICAgcmNUb2tlbjoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA0MywgIiIpLAogICAgICByY0V4cGlyZUF0OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDQ0LCAwKSwKICAgICAgdXBkYXRlZEF0OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDYwLCAwKSwKICAgICAgY3JlYXRlZEF0OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDYxLCAwKSwKICAgICAgdG95YUlkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDYyLCAwKSwKICAgICAgdG95YVN5bmNlZEF0OiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDYzLCAwKSwKICAgICAgdG95YVN0YXR1czoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA2NCwgMCksCiAgICAgIHByb2ZpbGVzTGlzdDoganNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0UHJvZmlsZXNMaXN0KCksIHByb3RvLnBiLkFuY2hvclByb2ZpbGUudG9PYmplY3QsIGluY2x1ZGVJbnN0YW5jZSksCiAgICAgIGxpdmVzTGlzdDoganNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0TGl2ZXNMaXN0KCksIHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQudG9PYmplY3QsIGluY2x1ZGVJbnN0YW5jZSkKICAgIH07CgogICAgaWYgKGluY2x1ZGVJbnN0YW5jZSkgewogICAgICBvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2UgPSBtc2c7CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9Owp9Ci8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5kZXNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uIChieXRlcykgewogIHZhciByZWFkZXIgPSBuZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpOwogIHZhciBtc2cgPSBuZXcgcHJvdG8ucGIuQW5jaG9yQmFzaWMoKTsKICByZXR1cm4gcHJvdG8ucGIuQW5jaG9yQmFzaWMuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZywgcmVhZGVyKTsKfTsKLyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIgPSBmdW5jdGlvbiAobXNnLCByZWFkZXIpIHsKICB3aGlsZSAocmVhZGVyLm5leHRGaWVsZCgpKSB7CiAgICBpZiAocmVhZGVyLmlzRW5kR3JvdXAoKSkgewogICAgICBicmVhazsKICAgIH0KCiAgICB2YXIgZmllbGQgPSByZWFkZXIuZ2V0RmllbGROdW1iZXIoKTsKCiAgICBzd2l0Y2ggKGZpZWxkKSB7CiAgICAgIGNhc2UgMToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRJZCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDI6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0QXBwSWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldFZlcnNpb24odmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldEd1aWxkSWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldEFyZWFJZCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDY6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRCb29sKCk7CiAgICAgICAgbXNnLnNldFJvYm90KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNzoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXRDb3VudHJ5KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgODoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZEVudW0oKTsKICAgICAgICBtc2cuc2V0T25saW5lU3RhdHVzKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgOToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZEVudW0oKTsKICAgICAgICBtc2cuc2V0UmV2aWV3U3RhdHVzKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTA6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0UHJvZmlsZUNvdW50KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTE6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0QWN0aXZlQ291bnQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxMjoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZEVudW0oKTsKICAgICAgICBtc2cuc2V0TGV2ZWwodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxMzoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXRMYW5nKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTQ6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRTdHJpbmcoKTsKICAgICAgICBtc2cuYWRkTGFuZ3ModmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxNToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRQcmljZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDE2OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldENhbGxJbmNvbWUodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxNzoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRHaWZ0SW5jb21lKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTg6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0Q29tbWlzc2lvbkluY29tZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDE5OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkSW50MzIoKTsKICAgICAgICBtc2cuc2V0QWRqdXN0SW5jb21lKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMjA6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0QmFsYW5jZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDIxOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldFNldHRsZWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyMjoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRTZXR0bGVkQXQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyMzoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRGYW5zQ291bnQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyNDoKICAgICAgICB2YXIgdmFsdWVzID0gcmVhZGVyLmlzRGVsaW1pdGVkKCkgPyByZWFkZXIucmVhZFBhY2tlZFVpbnQ2NCgpIDogW3JlYWRlci5yZWFkVWludDY0KCldOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgbXNnLmFkZExpdmVJZHModmFsdWVzW2ldKTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyNToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRPZmZsaW5lQXQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyNjoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZEVudW0oKTsKICAgICAgICBtc2cuc2V0QmxvY2tTdGF0dXModmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyNzoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXRPbmxpbmVJcCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDI4OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkRmxvYXQoKTsKICAgICAgICBtc2cuc2V0TG9uZ2l0dWRlKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMjk6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRGbG9hdCgpOwogICAgICAgIG1zZy5zZXRMYXRpdHVkZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDMwOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkU3RyaW5nKCk7CiAgICAgICAgbXNnLnNldENyZWF0ZUlwKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMzE6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0RGV2aWNlSWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzMjoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZEVudW0oKTsKICAgICAgICBtc2cuc2V0TmV0d29ya1R5cGUodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzMzoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXRCYW5rTmFtZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDM0OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkU3RyaW5nKCk7CiAgICAgICAgbXNnLnNldEFjY291bnROYW1lKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMzU6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRTdHJpbmcoKTsKICAgICAgICBtc2cuc2V0QmFua0FjY291bnQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzNjoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXRFbWFpbCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDM3OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkU3RyaW5nKCk7CiAgICAgICAgbXNnLnNldE5vdGUodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzODoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRIZWFydGJlYXRBdCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDM5OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkU3RyaW5nKCk7CiAgICAgICAgbXNnLnNldEFjY2Vzc1Rva2VuKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDA6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0QWNjZXNzRXhwaXJlQXQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0MToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXRBZ29yYVJ0bVRva2VuKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDI6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0QWdvcmFSdG1FeHBpcmVBdCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQzOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkU3RyaW5nKCk7CiAgICAgICAgbXNnLnNldFJjVG9rZW4odmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0NDoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRSY0V4cGlyZUF0KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNjA6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0VXBkYXRlZEF0KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNjE6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0Q3JlYXRlZEF0KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNjI6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0VG95YUlkKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNjM6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0VG95YVN5bmNlZEF0KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNjQ6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRFbnVtKCk7CiAgICAgICAgbXNnLnNldFRveWFTdGF0dXModmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxMDA6CiAgICAgICAgdmFyIHZhbHVlID0gbmV3IHByb3RvLnBiLkFuY2hvclByb2ZpbGUoKTsKICAgICAgICByZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsIHByb3RvLnBiLkFuY2hvclByb2ZpbGUuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTsKICAgICAgICBtc2cuYWRkUHJvZmlsZXModmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxMDE6CiAgICAgICAgdmFyIHZhbHVlID0gbmV3IHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQoKTsKICAgICAgICByZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsIHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTsKICAgICAgICBtc2cuYWRkTGl2ZXModmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICByZWFkZXIuc2tpcEZpZWxkKCk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gbXNnOwp9OwovKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgd3JpdGVyID0gbmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7CiAgcHJvdG8ucGIuQW5jaG9yQmFzaWMuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcywgd3JpdGVyKTsKICByZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpOwp9OwovKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5zZXJpYWxpemVCaW5hcnlUb1dyaXRlciA9IGZ1bmN0aW9uIChtZXNzYWdlLCB3cml0ZXIpIHsKICB2YXIgZiA9IHVuZGVmaW5lZDsKICBmID0gbWVzc2FnZS5nZXRJZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDEsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QXBwSWQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigyLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFZlcnNpb24oKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigzLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldEd1aWxkSWQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMig0LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldEFyZWFJZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDUsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0Um9ib3QoKTsKCiAgaWYgKGYpIHsKICAgIHdyaXRlci53cml0ZUJvb2woNiwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRDb3VudHJ5KCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVN0cmluZyg3LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldE9ubGluZVN0YXR1cygpOwoKICBpZiAoZiAhPT0gMC4wKSB7CiAgICB3cml0ZXIud3JpdGVFbnVtKDgsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0UmV2aWV3U3RhdHVzKCk7CgogIGlmIChmICE9PSAwLjApIHsKICAgIHdyaXRlci53cml0ZUVudW0oOSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRQcm9maWxlQ291bnQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigxMCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRBY3RpdmVDb3VudCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDExLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldExldmVsKCk7CgogIGlmIChmICE9PSAwLjApIHsKICAgIHdyaXRlci53cml0ZUVudW0oMTIsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0TGFuZygpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoMTMsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0TGFuZ3NMaXN0KCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVJlcGVhdGVkU3RyaW5nKDE0LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFByaWNlKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMTUsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0Q2FsbEluY29tZSgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDE2LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldEdpZnRJbmNvbWUoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigxNywgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRDb21taXNzaW9uSW5jb21lKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMTgsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QWRqdXN0SW5jb21lKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVJbnQzMigxOSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRCYWxhbmNlKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMjAsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0U2V0dGxlZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDIxLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFNldHRsZWRBdCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDIyLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldEZhbnNDb3VudCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDIzLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldExpdmVJZHNMaXN0KCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVBhY2tlZFVpbnQ2NCgyNCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRPZmZsaW5lQXQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigyNSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRCbG9ja1N0YXR1cygpOwoKICBpZiAoZiAhPT0gMC4wKSB7CiAgICB3cml0ZXIud3JpdGVFbnVtKDI2LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldE9ubGluZUlwKCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVN0cmluZygyNywgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRMb25naXR1ZGUoKTsKCiAgaWYgKGYgIT09IDAuMCkgewogICAgd3JpdGVyLndyaXRlRmxvYXQoMjgsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0TGF0aXR1ZGUoKTsKCiAgaWYgKGYgIT09IDAuMCkgewogICAgd3JpdGVyLndyaXRlRmxvYXQoMjksIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0Q3JlYXRlSXAoKTsKCiAgaWYgKGYubGVuZ3RoID4gMCkgewogICAgd3JpdGVyLndyaXRlU3RyaW5nKDMwLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldERldmljZUlkKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMzEsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0TmV0d29ya1R5cGUoKTsKCiAgaWYgKGYgIT09IDAuMCkgewogICAgd3JpdGVyLndyaXRlRW51bSgzMiwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRCYW5rTmFtZSgpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoMzMsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QWNjb3VudE5hbWUoKTsKCiAgaWYgKGYubGVuZ3RoID4gMCkgewogICAgd3JpdGVyLndyaXRlU3RyaW5nKDM0LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldEJhbmtBY2NvdW50KCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVN0cmluZygzNSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRFbWFpbCgpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoMzYsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0Tm90ZSgpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoMzcsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0SGVhcnRiZWF0QXQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigzOCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRBY2Nlc3NUb2tlbigpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoMzksIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QWNjZXNzRXhwaXJlQXQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMig0MCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRBZ29yYVJ0bVRva2VuKCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVN0cmluZyg0MSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRBZ29yYVJ0bUV4cGlyZUF0KCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoNDIsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0UmNUb2tlbigpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoNDMsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0UmNFeHBpcmVBdCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDQ0LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFVwZGF0ZWRBdCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDYwLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldENyZWF0ZWRBdCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDYxLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFRveWFJZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDYyLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFRveWFTeW5jZWRBdCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDYzLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFRveWFTdGF0dXMoKTsKCiAgaWYgKGYgIT09IDAuMCkgewogICAgd3JpdGVyLndyaXRlRW51bSg2NCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRQcm9maWxlc0xpc3QoKTsKCiAgaWYgKGYubGVuZ3RoID4gMCkgewogICAgd3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEwMCwgZiwgcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRMaXZlc0xpc3QoKTsKCiAgaWYgKGYubGVuZ3RoID4gMCkgewogICAgd3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEwMSwgZiwgdXNlcnR5cGVfcGIuRmlsZVJlY29yZC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcik7CiAgfQp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGlkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDEsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRJZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGFwcF9pZCA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldEFwcElkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAyLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0QXBwSWQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDIsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB2ZXJzaW9uID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0VmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMywgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldFZlcnNpb24gPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDMsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBndWlsZF9pZCA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldEd1aWxkSWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDQsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRHdWlsZElkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCA0LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgYXJlYV9pZCA9IDU7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldEFyZWFJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldEFyZWFJZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgNSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgYm9vbCByb2JvdCA9IDY7CiAqIEByZXR1cm4ge2Jvb2xlYW59CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRSb2JvdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEJvb2xlYW5GaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDYsIGZhbHNlKTsKfTsKLyoqCiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldFJvYm90ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNCb29sZWFuRmllbGQodGhpcywgNiwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgc3RyaW5nIGNvdW50cnkgPSA3OwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRDb3VudHJ5ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCA3LCAiIik7Cn07Ci8qKgogKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldENvdW50cnkgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsIDcsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIE9ubGluZVN0YXR1cyBvbmxpbmVfc3RhdHVzID0gODsKICogQHJldHVybiB7IXByb3RvLnBiLk9ubGluZVN0YXR1c30KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldE9ubGluZVN0YXR1cyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgOCwgMCk7Cn07Ci8qKgogKiBAcGFyYW0geyFwcm90by5wYi5PbmxpbmVTdGF0dXN9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRPbmxpbmVTdGF0dXMgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLCA4LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBSZXZpZXdTdGF0dXMgcmV2aWV3X3N0YXR1cyA9IDk7CiAqIEByZXR1cm4geyFwcm90by5wYi5SZXZpZXdTdGF0dXN9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRSZXZpZXdTdGF0dXMgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDksIDApOwp9OwovKioKICogQHBhcmFtIHshcHJvdG8ucGIuUmV2aWV3U3RhdHVzfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0UmV2aWV3U3RhdHVzID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcywgOSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIHByb2ZpbGVfY291bnQgPSAxMDsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0UHJvZmlsZUNvdW50ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxMCwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldFByb2ZpbGVDb3VudCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMTAsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhY3RpdmVfY291bnQgPSAxMTsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0QWN0aXZlQ291bnQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDExLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0QWN0aXZlQ291bnQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDExLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBBbmNob3JMZXZlbCBsZXZlbCA9IDEyOwogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yTGV2ZWx9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRMZXZlbCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMTIsIDApOwp9OwovKioKICogQHBhcmFtIHshcHJvdG8ucGIuQW5jaG9yTGV2ZWx9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRMZXZlbCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsIDEyLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBzdHJpbmcgbGFuZyA9IDEzOwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRMYW5nID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxMywgIiIpOwp9OwovKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRMYW5nID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLCAxMywgdmFsdWUpOwp9OwovKioKICogcmVwZWF0ZWQgc3RyaW5nIGxhbmdzID0gMTQ7CiAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0TGFuZ3NMaXN0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRGaWVsZCh0aGlzLCAxNCk7Cn07Ci8qKgogKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0TGFuZ3NMaXN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRGaWVsZCh0aGlzLCAxNCwgdmFsdWUgfHwgW10pOwp9OwovKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5hZGRMYW5ncyA9IGZ1bmN0aW9uICh2YWx1ZSwgb3B0X2luZGV4KSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkRmllbGQodGhpcywgMTQsIHZhbHVlLCBvcHRfaW5kZXgpOwp9OwovKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5jbGVhckxhbmdzTGlzdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5zZXRMYW5nc0xpc3QoW10pOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIHByaWNlID0gMTU7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldFByaWNlID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxNSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldFByaWNlID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAxNSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGNhbGxfaW5jb21lID0gMTY7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldENhbGxJbmNvbWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDE2LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0Q2FsbEluY29tZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMTYsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBnaWZ0X2luY29tZSA9IDE3OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRHaWZ0SW5jb21lID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxNywgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldEdpZnRJbmNvbWUgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDE3LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgY29tbWlzc2lvbl9pbmNvbWUgPSAxODsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0Q29tbWlzc2lvbkluY29tZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMTgsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRDb21taXNzaW9uSW5jb21lID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAxOCwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgaW50MzIgYWRqdXN0X2luY29tZSA9IDE5OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRBZGp1c3RJbmNvbWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDE5LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0QWRqdXN0SW5jb21lID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAxOSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGJhbGFuY2UgPSAyMDsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0QmFsYW5jZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMjAsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRCYWxhbmNlID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAyMCwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIHNldHRsZWQgPSAyMTsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0U2V0dGxlZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMjEsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRTZXR0bGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAyMSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIHNldHRsZWRfYXQgPSAyMjsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0U2V0dGxlZEF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAyMiwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldFNldHRsZWRBdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMjIsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBmYW5zX2NvdW50ID0gMjM7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldEZhbnNDb3VudCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMjMsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRGYW5zQ291bnQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDIzLCB2YWx1ZSk7Cn07Ci8qKgogKiByZXBlYXRlZCB1aW50NjQgbGl2ZV9pZHMgPSAyNDsKICogQHJldHVybiB7IUFycmF5PG51bWJlcj59CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRMaXZlSWRzTGlzdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkRmllbGQodGhpcywgMjQpOwp9OwovKioKICogQHBhcmFtIHshQXJyYXk8bnVtYmVyPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldExpdmVJZHNMaXN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRGaWVsZCh0aGlzLCAyNCwgdmFsdWUgfHwgW10pOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5hZGRMaXZlSWRzID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRfaW5kZXgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRGaWVsZCh0aGlzLCAyNCwgdmFsdWUsIG9wdF9pbmRleCk7Cn07Ci8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmNsZWFyTGl2ZUlkc0xpc3QgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuc2V0TGl2ZUlkc0xpc3QoW10pOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIG9mZmxpbmVfYXQgPSAyNTsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0T2ZmbGluZUF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAyNSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldE9mZmxpbmVBdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMjUsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIEJsb2NrU3RhdHVzIGJsb2NrX3N0YXR1cyA9IDI2OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuQmxvY2tTdGF0dXN9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRCbG9ja1N0YXR1cyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMjYsIDApOwp9OwovKioKICogQHBhcmFtIHshcHJvdG8ucGIuQmxvY2tTdGF0dXN9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRCbG9ja1N0YXR1cyA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsIDI2LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBzdHJpbmcgb25saW5lX2lwID0gMjc7CiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldE9ubGluZUlwID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAyNywgIiIpOwp9OwovKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRPbmxpbmVJcCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywgMjcsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIGZsb2F0IGxvbmdpdHVkZSA9IDI4OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRMb25naXR1ZGUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGbG9hdGluZ1BvaW50RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAyOCwgMC4wKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0TG9uZ2l0dWRlID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNGbG9hdEZpZWxkKHRoaXMsIDI4LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBmbG9hdCBsYXRpdHVkZSA9IDI5OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRMYXRpdHVkZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZsb2F0aW5nUG9pbnRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDI5LCAwLjApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRMYXRpdHVkZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRmxvYXRGaWVsZCh0aGlzLCAyOSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgc3RyaW5nIGNyZWF0ZV9pcCA9IDMwOwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRDcmVhdGVJcCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMzAsICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0Q3JlYXRlSXAgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsIDMwLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgZGV2aWNlX2lkID0gMzE7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldERldmljZUlkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAzMSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldERldmljZUlkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAzMSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgTmV0d29ya1R5cGUgbmV0d29ya190eXBlID0gMzI7CiAqIEByZXR1cm4geyFwcm90by5wYi5OZXR3b3JrVHlwZX0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldE5ldHdvcmtUeXBlID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAzMiwgMCk7Cn07Ci8qKgogKiBAcGFyYW0geyFwcm90by5wYi5OZXR3b3JrVHlwZX0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldE5ldHdvcmtUeXBlID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcywgMzIsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHN0cmluZyBiYW5rX25hbWUgPSAzMzsKICogQHJldHVybiB7c3RyaW5nfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0QmFua05hbWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDMzLCAiIik7Cn07Ci8qKgogKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldEJhbmtOYW1lID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLCAzMywgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgc3RyaW5nIGFjY291bnRfbmFtZSA9IDM0OwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRBY2NvdW50TmFtZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMzQsICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0QWNjb3VudE5hbWUgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsIDM0LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBzdHJpbmcgYmFua19hY2NvdW50ID0gMzU7CiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldEJhbmtBY2NvdW50ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAzNSwgIiIpOwp9OwovKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRCYW5rQWNjb3VudCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywgMzUsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHN0cmluZyBlbWFpbCA9IDM2OwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRFbWFpbCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMzYsICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0RW1haWwgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsIDM2LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBzdHJpbmcgbm90ZSA9IDM3OwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXROb3RlID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAzNywgIiIpOwp9OwovKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXROb3RlID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLCAzNywgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGhlYXJ0YmVhdF9hdCA9IDM4OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRIZWFydGJlYXRBdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMzgsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRIZWFydGJlYXRBdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMzgsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHN0cmluZyBhY2Nlc3NfdG9rZW4gPSAzOTsKICogQHJldHVybiB7c3RyaW5nfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0QWNjZXNzVG9rZW4gPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDM5LCAiIik7Cn07Ci8qKgogKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldEFjY2Vzc1Rva2VuID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLCAzOSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGFjY2Vzc19leHBpcmVfYXQgPSA0MDsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0QWNjZXNzRXhwaXJlQXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDQwLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0QWNjZXNzRXhwaXJlQXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDQwLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBzdHJpbmcgYWdvcmFfcnRtX3Rva2VuID0gNDE7CiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldEFnb3JhUnRtVG9rZW4gPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDQxLCAiIik7Cn07Ci8qKgogKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldEFnb3JhUnRtVG9rZW4gPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsIDQxLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgYWdvcmFfcnRtX2V4cGlyZV9hdCA9IDQyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRBZ29yYVJ0bUV4cGlyZUF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCA0MiwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldEFnb3JhUnRtRXhwaXJlQXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDQyLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBzdHJpbmcgcmNfdG9rZW4gPSA0MzsKICogQHJldHVybiB7c3RyaW5nfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0UmNUb2tlbiA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNDMsICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0UmNUb2tlbiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywgNDMsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiByY19leHBpcmVfYXQgPSA0NDsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0UmNFeHBpcmVBdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNDQsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRSY0V4cGlyZUF0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCA0NCwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIHVwZGF0ZWRfYXQgPSA2MDsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0VXBkYXRlZEF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCA2MCwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldFVwZGF0ZWRBdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgNjAsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBjcmVhdGVkX2F0ID0gNjE7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldENyZWF0ZWRBdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNjEsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRDcmVhdGVkQXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDYxLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgdG95YV9pZCA9IDYyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5nZXRUb3lhSWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDYyLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0VG95YUlkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCA2MiwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIHRveWFfc3luY2VkX2F0ID0gNjM7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldFRveWFTeW5jZWRBdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNjMsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5zZXRUb3lhU3luY2VkQXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDYzLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBUb3lhU3RhdHVzIHRveWFfc3RhdHVzID0gNjQ7CiAqIEByZXR1cm4geyFwcm90by5wYi5Ub3lhU3RhdHVzfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0VG95YVN0YXR1cyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNjQsIDApOwp9OwovKioKICogQHBhcmFtIHshcHJvdG8ucGIuVG95YVN0YXR1c30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldFRveWFTdGF0dXMgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLCA2NCwgdmFsdWUpOwp9OwovKioKICogcmVwZWF0ZWQgQW5jaG9yUHJvZmlsZSBwcm9maWxlcyA9IDEwMDsKICogQHJldHVybiB7IUFycmF5PCFwcm90by5wYi5BbmNob3JQcm9maWxlPn0KICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmdldFByb2ZpbGVzTGlzdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsIHByb3RvLnBiLkFuY2hvclByb2ZpbGUsIDEwMCk7Cn07Ci8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuQW5jaG9yUHJvZmlsZT59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JCYXNpY30gcmV0dXJucyB0aGlzCiovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLnNldFByb2ZpbGVzTGlzdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywgMTAwLCB2YWx1ZSk7Cn07Ci8qKgogKiBAcGFyYW0geyFwcm90by5wYi5BbmNob3JQcm9maWxlPX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuYWRkUHJvZmlsZXMgPSBmdW5jdGlvbiAob3B0X3ZhbHVlLCBvcHRfaW5kZXgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywgMTAwLCBvcHRfdmFsdWUsIHByb3RvLnBiLkFuY2hvclByb2ZpbGUsIG9wdF9pbmRleCk7Cn07Ci8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yQmFzaWMucHJvdG90eXBlLmNsZWFyUHJvZmlsZXNMaXN0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLnNldFByb2ZpbGVzTGlzdChbXSk7Cn07Ci8qKgogKiByZXBlYXRlZCBGaWxlUmVjb3JkIGxpdmVzID0gMTAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkZpbGVSZWNvcmQ+fQogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuZ2V0TGl2ZXNMaXN0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywgdXNlcnR5cGVfcGIuRmlsZVJlY29yZCwgMTAxKTsKfTsKLyoqCiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5wYi5GaWxlUmVjb3JkPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvckJhc2ljfSByZXR1cm5zIHRoaXMKKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuc2V0TGl2ZXNMaXN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLCAxMDEsIHZhbHVlKTsKfTsKLyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkZpbGVSZWNvcmQ9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkZpbGVSZWNvcmR9CiAqLwoKCnByb3RvLnBiLkFuY2hvckJhc2ljLnByb3RvdHlwZS5hZGRMaXZlcyA9IGZ1bmN0aW9uIChvcHRfdmFsdWUsIG9wdF9pbmRleCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLCAxMDEsIG9wdF92YWx1ZSwgcHJvdG8ucGIuRmlsZVJlY29yZCwgb3B0X2luZGV4KTsKfTsKLyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JCYXNpYy5wcm90b3R5cGUuY2xlYXJMaXZlc0xpc3QgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuc2V0TGl2ZXNMaXN0KFtdKTsKfTsKLyoqCiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS4KICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fQogKiBAY29uc3QKICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5yZXBlYXRlZEZpZWxkc18gPSBbMTQsIDE4LCAxOSwgMTAwLCAxMDFdOwoKaWYgKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1QpIHsKICAvKioKICAgKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogICAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogICAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICAgKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICAgKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICAgKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAgICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICAgKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogICAqIEByZXR1cm4geyFPYmplY3R9CiAgICovCiAgcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbiAob3B0X2luY2x1ZGVJbnN0YW5jZSkgewogICAgcmV0dXJuIHByb3RvLnBiLkFuY2hvclByb2ZpbGUudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSwgdGhpcyk7CiAgfTsKICAvKioKICAgKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICAgKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAgICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAgICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICAgKiBAcGFyYW0geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAgICogQHJldHVybiB7IU9iamVjdH0KICAgKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAgICovCgoKICBwcm90by5wYi5BbmNob3JQcm9maWxlLnRvT2JqZWN0ID0gZnVuY3Rpb24gKGluY2x1ZGVJbnN0YW5jZSwgbXNnKSB7CiAgICB2YXIgZiwKICAgICAgICBvYmogPSB7CiAgICAgIGlkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDEsIDApLAogICAgICBhcHBJZDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAyLCAwKSwKICAgICAgYXJlYUlkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDMsIDApLAogICAgICBhbmNob3JJZDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA0LCAwKSwKICAgICAgcGFyZW50SWQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgNSwgMCksCiAgICAgIHN0YXR1czoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA2LCAwKSwKICAgICAgbGFuZzoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA3LCAiIiksCiAgICAgIGdlbmRlcjoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA4LCAwKSwKICAgICAgbmlja25hbWU6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgOSwgIiIpLAogICAgICBzaWduYXR1cmU6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMTAsICIiKSwKICAgICAgYXZhdGFyOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDExLCAiIiksCiAgICAgIG9jY3VwYXRpb246IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMTIsIDApLAogICAgICBiaXJ0aGRheToganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAxMywgMCksCiAgICAgIHRhZ3NMaXN0OiAoZiA9IGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZEZpZWxkKG1zZywgMTQpKSA9PSBudWxsID8gdW5kZWZpbmVkIDogZiwKICAgICAgdm9pY2VHcmVldGluZzoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAxNSwgIiIpLAogICAgICBvbmxpbmVTdGFydDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAxNiwgMCksCiAgICAgIG9ubGluZUVuZDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAxNywgMCksCiAgICAgIHBob3RvSWRzTGlzdDogKGYgPSBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRGaWVsZChtc2csIDE4KSkgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGYsCiAgICAgIHZpZGVvSWRzTGlzdDogKGYgPSBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRGaWVsZChtc2csIDE5KSkgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGYsCiAgICAgIHJlamVjdFJlYXNvbjoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAyMCwgIiIpLAogICAgICB1cGRhdGVkQXQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMzAsIDApLAogICAgICBjcmVhdGVkQXQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMzEsIDApLAogICAgICBwaG90b3NMaXN0OiBqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRQaG90b3NMaXN0KCksIHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQudG9PYmplY3QsIGluY2x1ZGVJbnN0YW5jZSksCiAgICAgIHZpZGVvc0xpc3Q6IGpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFZpZGVvc0xpc3QoKSwgdXNlcnR5cGVfcGIuRmlsZVJlY29yZC50b09iamVjdCwgaW5jbHVkZUluc3RhbmNlKSwKICAgICAgaXNPbGQ6IGpzcGIuTWVzc2FnZS5nZXRCb29sZWFuRmllbGRXaXRoRGVmYXVsdChtc2csIDIwMCwgZmFsc2UpCiAgICB9OwoKICAgIGlmIChpbmNsdWRlSW5zdGFuY2UpIHsKICAgICAgb2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlID0gbXNnOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfTsKfQovKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfQogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLmRlc2VyaWFsaXplQmluYXJ5ID0gZnVuY3Rpb24gKGJ5dGVzKSB7CiAgdmFyIHJlYWRlciA9IG5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7CiAgdmFyIG1zZyA9IG5ldyBwcm90by5wYi5BbmNob3JQcm9maWxlKCk7CiAgcmV0dXJuIHByb3RvLnBiLkFuY2hvclByb2ZpbGUuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZywgcmVhZGVyKTsKfTsKLyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIgPSBmdW5jdGlvbiAobXNnLCByZWFkZXIpIHsKICB3aGlsZSAocmVhZGVyLm5leHRGaWVsZCgpKSB7CiAgICBpZiAocmVhZGVyLmlzRW5kR3JvdXAoKSkgewogICAgICBicmVhazsKICAgIH0KCiAgICB2YXIgZmllbGQgPSByZWFkZXIuZ2V0RmllbGROdW1iZXIoKTsKCiAgICBzd2l0Y2ggKGZpZWxkKSB7CiAgICAgIGNhc2UgMToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRJZCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDI6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0QXBwSWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldEFyZWFJZCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQ6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0QW5jaG9ySWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldFBhcmVudElkKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNjoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZEVudW0oKTsKICAgICAgICBtc2cuc2V0U3RhdHVzKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNzoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXRMYW5nKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgODoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZEVudW0oKTsKICAgICAgICBtc2cuc2V0R2VuZGVyKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgOToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXROaWNrbmFtZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDEwOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkU3RyaW5nKCk7CiAgICAgICAgbXNnLnNldFNpZ25hdHVyZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDExOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkU3RyaW5nKCk7CiAgICAgICAgbXNnLnNldEF2YXRhcih2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDEyOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkRW51bSgpOwogICAgICAgIG1zZy5zZXRPY2N1cGF0aW9uKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTM6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0QmlydGhkYXkodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxNDoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5hZGRUYWdzKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTU6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRTdHJpbmcoKTsKICAgICAgICBtc2cuc2V0Vm9pY2VHcmVldGluZyh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDE2OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldE9ubGluZVN0YXJ0KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTc6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0T25saW5lRW5kKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTg6CiAgICAgICAgdmFyIHZhbHVlcyA9IHJlYWRlci5pc0RlbGltaXRlZCgpID8gcmVhZGVyLnJlYWRQYWNrZWRVaW50NjQoKSA6IFtyZWFkZXIucmVhZFVpbnQ2NCgpXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIG1zZy5hZGRQaG90b0lkcyh2YWx1ZXNbaV0pOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDE5OgogICAgICAgIHZhciB2YWx1ZXMgPSByZWFkZXIuaXNEZWxpbWl0ZWQoKSA/IHJlYWRlci5yZWFkUGFja2VkVWludDY0KCkgOiBbcmVhZGVyLnJlYWRVaW50NjQoKV07CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBtc2cuYWRkVmlkZW9JZHModmFsdWVzW2ldKTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyMDoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFN0cmluZygpOwogICAgICAgIG1zZy5zZXRSZWplY3RSZWFzb24odmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzMDoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRVcGRhdGVkQXQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzMToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRDcmVhdGVkQXQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxMDA6CiAgICAgICAgdmFyIHZhbHVlID0gbmV3IHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQoKTsKICAgICAgICByZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsIHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTsKICAgICAgICBtc2cuYWRkUGhvdG9zKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTAxOgogICAgICAgIHZhciB2YWx1ZSA9IG5ldyB1c2VydHlwZV9wYi5GaWxlUmVjb3JkKCk7CiAgICAgICAgcmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLCB1c2VydHlwZV9wYi5GaWxlUmVjb3JkLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7CiAgICAgICAgbXNnLmFkZFZpZGVvcyh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDIwMDoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZEJvb2woKTsKICAgICAgICBtc2cuc2V0SXNPbGQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICByZWFkZXIuc2tpcEZpZWxkKCk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gbXNnOwp9OwovKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5ID0gZnVuY3Rpb24gKCkgewogIHZhciB3cml0ZXIgPSBuZXcganNwYi5CaW5hcnlXcml0ZXIoKTsKICBwcm90by5wYi5BbmNob3JQcm9maWxlLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsIHdyaXRlcik7CiAgcmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTsKfTsKLyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHdyaXRlcikgewogIHZhciBmID0gdW5kZWZpbmVkOwogIGYgPSBtZXNzYWdlLmdldElkKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRBcHBJZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDIsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QXJlYUlkKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMywgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRBbmNob3JJZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDQsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0UGFyZW50SWQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMig1LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFN0YXR1cygpOwoKICBpZiAoZiAhPT0gMC4wKSB7CiAgICB3cml0ZXIud3JpdGVFbnVtKDYsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0TGFuZygpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoNywgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRHZW5kZXIoKTsKCiAgaWYgKGYgIT09IDAuMCkgewogICAgd3JpdGVyLndyaXRlRW51bSg4LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldE5pY2tuYW1lKCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVN0cmluZyg5LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFNpZ25hdHVyZSgpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoMTAsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QXZhdGFyKCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVN0cmluZygxMSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRPY2N1cGF0aW9uKCk7CgogIGlmIChmICE9PSAwLjApIHsKICAgIHdyaXRlci53cml0ZUVudW0oMTIsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QmlydGhkYXkoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigxMywgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRUYWdzTGlzdCgpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVSZXBlYXRlZFN0cmluZygxNCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRWb2ljZUdyZWV0aW5nKCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVN0cmluZygxNSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRPbmxpbmVTdGFydCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDE2LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldE9ubGluZUVuZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDE3LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFBob3RvSWRzTGlzdCgpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVQYWNrZWRVaW50NjQoMTgsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0VmlkZW9JZHNMaXN0KCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVBhY2tlZFVpbnQ2NCgxOSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRSZWplY3RSZWFzb24oKTsKCiAgaWYgKGYubGVuZ3RoID4gMCkgewogICAgd3JpdGVyLndyaXRlU3RyaW5nKDIwLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFVwZGF0ZWRBdCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDMwLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldENyZWF0ZWRBdCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDMxLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFBob3Rvc0xpc3QoKTsKCiAgaWYgKGYubGVuZ3RoID4gMCkgewogICAgd3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEwMCwgZiwgdXNlcnR5cGVfcGIuRmlsZVJlY29yZC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRWaWRlb3NMaXN0KCk7CgogIGlmIChmLmxlbmd0aCA+IDApIHsKICAgIHdyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxMDEsIGYsIHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0SXNPbGQoKTsKCiAgaWYgKGYpIHsKICAgIHdyaXRlci53cml0ZUJvb2woMjAwLCBmKTsKICB9Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgaWQgPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldElkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAxLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgYXBwX2lkID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5nZXRBcHBJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMiwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRBcHBJZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMiwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldEFyZWFJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMywgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRBcmVhSWQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDMsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhbmNob3JfaWQgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldEFuY2hvcklkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCA0LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldEFuY2hvcklkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCA0LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFyZW50X2lkID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5nZXRQYXJlbnRJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRQYXJlbnRJZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgNSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgUmV2aWV3U3RhdHVzIHN0YXR1cyA9IDY7CiAqIEByZXR1cm4geyFwcm90by5wYi5SZXZpZXdTdGF0dXN9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldFN0YXR1cyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNiwgMCk7Cn07Ci8qKgogKiBAcGFyYW0geyFwcm90by5wYi5SZXZpZXdTdGF0dXN9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuc2V0U3RhdHVzID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcywgNiwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgc3RyaW5nIGxhbmcgPSA3OwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldExhbmcgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDcsICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldExhbmcgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsIDcsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIEdlbmRlclR5cGUgZ2VuZGVyID0gODsKICogQHJldHVybiB7IXByb3RvLnBiLkdlbmRlclR5cGV9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldEdlbmRlciA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgOCwgMCk7Cn07Ci8qKgogKiBAcGFyYW0geyFwcm90by5wYi5HZW5kZXJUeXBlfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldEdlbmRlciA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsIDgsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHN0cmluZyBuaWNrbmFtZSA9IDk7CiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuZ2V0Tmlja25hbWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDksICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldE5pY2tuYW1lID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLCA5LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBzdHJpbmcgc2lnbmF0dXJlID0gMTA7CiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuZ2V0U2lnbmF0dXJlID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxMCwgIiIpOwp9OwovKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuc2V0U2lnbmF0dXJlID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLCAxMCwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgc3RyaW5nIGF2YXRhciA9IDExOwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldEF2YXRhciA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMTEsICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldEF2YXRhciA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywgMTEsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIE9jY3VwYXRpb25UeXBlIG9jY3VwYXRpb24gPSAxMjsKICogQHJldHVybiB7IXByb3RvLnBiLk9jY3VwYXRpb25UeXBlfQogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5nZXRPY2N1cGF0aW9uID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxMiwgMCk7Cn07Ci8qKgogKiBAcGFyYW0geyFwcm90by5wYi5PY2N1cGF0aW9uVHlwZX0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRPY2N1cGF0aW9uID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcywgMTIsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBiaXJ0aGRheSA9IDEzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldEJpcnRoZGF5ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxMywgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRCaXJ0aGRheSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMTMsIHZhbHVlKTsKfTsKLyoqCiAqIHJlcGVhdGVkIHN0cmluZyB0YWdzID0gMTQ7CiAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fQogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5nZXRUYWdzTGlzdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkRmllbGQodGhpcywgMTQpOwp9OwovKioKICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRUYWdzTGlzdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0RmllbGQodGhpcywgMTQsIHZhbHVlIHx8IFtdKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmFkZFRhZ3MgPSBmdW5jdGlvbiAodmFsdWUsIG9wdF9pbmRleCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZEZpZWxkKHRoaXMsIDE0LCB2YWx1ZSwgb3B0X2luZGV4KTsKfTsKLyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmNsZWFyVGFnc0xpc3QgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuc2V0VGFnc0xpc3QoW10pOwp9OwovKioKICogb3B0aW9uYWwgc3RyaW5nIHZvaWNlX2dyZWV0aW5nID0gMTU7CiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuZ2V0Vm9pY2VHcmVldGluZyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMTUsICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldFZvaWNlR3JlZXRpbmcgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsIDE1LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgb25saW5lX3N0YXJ0ID0gMTY7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuZ2V0T25saW5lU3RhcnQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDE2LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldE9ubGluZVN0YXJ0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAxNiwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIG9ubGluZV9lbmQgPSAxNzsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5nZXRPbmxpbmVFbmQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDE3LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldE9ubGluZUVuZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMTcsIHZhbHVlKTsKfTsKLyoqCiAqIHJlcGVhdGVkIHVpbnQ2NCBwaG90b19pZHMgPSAxODsKICogQHJldHVybiB7IUFycmF5PG51bWJlcj59CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldFBob3RvSWRzTGlzdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkRmllbGQodGhpcywgMTgpOwp9OwovKioKICogQHBhcmFtIHshQXJyYXk8bnVtYmVyPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRQaG90b0lkc0xpc3QgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldEZpZWxkKHRoaXMsIDE4LCB2YWx1ZSB8fCBbXSk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5hZGRQaG90b0lkcyA9IGZ1bmN0aW9uICh2YWx1ZSwgb3B0X2luZGV4KSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkRmllbGQodGhpcywgMTgsIHZhbHVlLCBvcHRfaW5kZXgpOwp9OwovKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuY2xlYXJQaG90b0lkc0xpc3QgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuc2V0UGhvdG9JZHNMaXN0KFtdKTsKfTsKLyoqCiAqIHJlcGVhdGVkIHVpbnQ2NCB2aWRlb19pZHMgPSAxOTsKICogQHJldHVybiB7IUFycmF5PG51bWJlcj59CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldFZpZGVvSWRzTGlzdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkRmllbGQodGhpcywgMTkpOwp9OwovKioKICogQHBhcmFtIHshQXJyYXk8bnVtYmVyPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRWaWRlb0lkc0xpc3QgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldEZpZWxkKHRoaXMsIDE5LCB2YWx1ZSB8fCBbXSk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5hZGRWaWRlb0lkcyA9IGZ1bmN0aW9uICh2YWx1ZSwgb3B0X2luZGV4KSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkRmllbGQodGhpcywgMTksIHZhbHVlLCBvcHRfaW5kZXgpOwp9OwovKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuY2xlYXJWaWRlb0lkc0xpc3QgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuc2V0VmlkZW9JZHNMaXN0KFtdKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHN0cmluZyByZWplY3RfcmVhc29uID0gMjA7CiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuZ2V0UmVqZWN0UmVhc29uID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAyMCwgIiIpOwp9OwovKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuc2V0UmVqZWN0UmVhc29uID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLCAyMCwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIHVwZGF0ZWRfYXQgPSAzMDsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5nZXRVcGRhdGVkQXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDMwLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldFVwZGF0ZWRBdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMzAsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBjcmVhdGVkX2F0ID0gMzE7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuZ2V0Q3JlYXRlZEF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAzMSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRDcmVhdGVkQXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDMxLCB2YWx1ZSk7Cn07Ci8qKgogKiByZXBlYXRlZCBGaWxlUmVjb3JkIHBob3RvcyA9IDEwMDsKICogQHJldHVybiB7IUFycmF5PCFwcm90by5wYi5GaWxlUmVjb3JkPn0KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuZ2V0UGhvdG9zTGlzdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsIHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQsIDEwMCk7Cn07Ci8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuRmlsZVJlY29yZD59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSByZXR1cm5zIHRoaXMKKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5zZXRQaG90b3NMaXN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLCAxMDAsIHZhbHVlKTsKfTsKLyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkZpbGVSZWNvcmQ9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkZpbGVSZWNvcmR9CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmFkZFBob3RvcyA9IGZ1bmN0aW9uIChvcHRfdmFsdWUsIG9wdF9pbmRleCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLCAxMDAsIG9wdF92YWx1ZSwgcHJvdG8ucGIuRmlsZVJlY29yZCwgb3B0X2luZGV4KTsKfTsKLyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmNsZWFyUGhvdG9zTGlzdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5zZXRQaG90b3NMaXN0KFtdKTsKfTsKLyoqCiAqIHJlcGVhdGVkIEZpbGVSZWNvcmQgdmlkZW9zID0gMTAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkZpbGVSZWNvcmQ+fQogKi8KCgpwcm90by5wYi5BbmNob3JQcm9maWxlLnByb3RvdHlwZS5nZXRWaWRlb3NMaXN0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywgdXNlcnR5cGVfcGIuRmlsZVJlY29yZCwgMTAxKTsKfTsKLyoqCiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5wYi5GaWxlUmVjb3JkPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLkFuY2hvclByb2ZpbGV9IHJldHVybnMgdGhpcwoqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLnNldFZpZGVvc0xpc3QgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsIDEwMSwgdmFsdWUpOwp9OwovKioKICogQHBhcmFtIHshcHJvdG8ucGIuRmlsZVJlY29yZD19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuRmlsZVJlY29yZH0KICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuYWRkVmlkZW9zID0gZnVuY3Rpb24gKG9wdF92YWx1ZSwgb3B0X2luZGV4KSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsIDEwMSwgb3B0X3ZhbHVlLCBwcm90by5wYi5GaWxlUmVjb3JkLCBvcHRfaW5kZXgpOwp9OwovKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuY2xlYXJWaWRlb3NMaXN0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLnNldFZpZGVvc0xpc3QoW10pOwp9OwovKioKICogb3B0aW9uYWwgYm9vbCBpc19vbGQgPSAyMDA7CiAqIEByZXR1cm4ge2Jvb2xlYW59CiAqLwoKCnByb3RvLnBiLkFuY2hvclByb2ZpbGUucHJvdG90eXBlLmdldElzT2xkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0Qm9vbGVhbkZpZWxkV2l0aERlZmF1bHQodGhpcywgMjAwLCBmYWxzZSk7Cn07Ci8qKgogKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuQW5jaG9yUHJvZmlsZS5wcm90b3R5cGUuc2V0SXNPbGQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0Jvb2xlYW5GaWVsZCh0aGlzLCAyMDAsIHZhbHVlKTsKfTsKCmlmIChqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKSB7CiAgLyoqCiAgICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICAgKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICAgKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAgICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAgICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAgICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogICAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAgICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICAgKiBAcmV0dXJuIHshT2JqZWN0fQogICAqLwogIHByb3RvLnBiLk9ubGluZVJlY29yZC5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbiAob3B0X2luY2x1ZGVJbnN0YW5jZSkgewogICAgcmV0dXJuIHByb3RvLnBiLk9ubGluZVJlY29yZC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLCB0aGlzKTsKICB9OwogIC8qKgogICAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogICAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICAgKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICAgKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogICAqIEBwYXJhbSB7IXByb3RvLnBiLk9ubGluZVJlY29yZH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogICAqIEByZXR1cm4geyFPYmplY3R9CiAgICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogICAqLwoKCiAgcHJvdG8ucGIuT25saW5lUmVjb3JkLnRvT2JqZWN0ID0gZnVuY3Rpb24gKGluY2x1ZGVJbnN0YW5jZSwgbXNnKSB7CiAgICB2YXIgZiwKICAgICAgICBvYmogPSB7CiAgICAgIGlkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDEsIDApLAogICAgICBhcmVhSWQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMiwgMCksCiAgICAgIGFuY2hvcklkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDMsIDApLAogICAgICBvbmxpbmVBdDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA0LCAwKSwKICAgICAgZHVyYXRpb246IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgNSwgMCksCiAgICAgIG9mZmxpbmVBdDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA2LCAwKSwKICAgICAgb25saW5lSXA6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgNywgIiIpLAogICAgICB1cGRhdGVkQXQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMjAsIDApLAogICAgICBjcmVhdGVkQXQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMjEsIDApCiAgICB9OwoKICAgIGlmIChpbmNsdWRlSW5zdGFuY2UpIHsKICAgICAgb2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlID0gbXNnOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfTsKfQovKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5PbmxpbmVSZWNvcmR9CiAqLwoKCnByb3RvLnBiLk9ubGluZVJlY29yZC5kZXNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uIChieXRlcykgewogIHZhciByZWFkZXIgPSBuZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpOwogIHZhciBtc2cgPSBuZXcgcHJvdG8ucGIuT25saW5lUmVjb3JkKCk7CiAgcmV0dXJuIHByb3RvLnBiLk9ubGluZVJlY29yZC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLCByZWFkZXIpOwp9OwovKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5PbmxpbmVSZWNvcmR9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLk9ubGluZVJlY29yZH0KICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlciA9IGZ1bmN0aW9uIChtc2csIHJlYWRlcikgewogIHdoaWxlIChyZWFkZXIubmV4dEZpZWxkKCkpIHsKICAgIGlmIChyZWFkZXIuaXNFbmRHcm91cCgpKSB7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIHZhciBmaWVsZCA9IHJlYWRlci5nZXRGaWVsZE51bWJlcigpOwoKICAgIHN3aXRjaCAoZmllbGQpIHsKICAgICAgY2FzZSAxOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDY0KCk7CiAgICAgICAgbXNnLnNldElkKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMjoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRBcmVhSWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldEFuY2hvcklkKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRPbmxpbmVBdCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDU6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0RHVyYXRpb24odmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA2OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldE9mZmxpbmVBdCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDc6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRTdHJpbmcoKTsKICAgICAgICBtc2cuc2V0T25saW5lSXAodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyMDoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRVcGRhdGVkQXQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyMToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRDcmVhdGVkQXQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICByZWFkZXIuc2tpcEZpZWxkKCk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gbXNnOwp9OwovKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnkgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHdyaXRlciA9IG5ldyBqc3BiLkJpbmFyeVdyaXRlcigpOwogIHByb3RvLnBiLk9ubGluZVJlY29yZC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLCB3cml0ZXIpOwogIHJldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7Cn07Ci8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuT25saW5lUmVjb3JkfSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi8KCgpwcm90by5wYi5PbmxpbmVSZWNvcmQuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIgPSBmdW5jdGlvbiAobWVzc2FnZSwgd3JpdGVyKSB7CiAgdmFyIGYgPSB1bmRlZmluZWQ7CiAgZiA9IG1lc3NhZ2UuZ2V0SWQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQ2NCgxLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldEFyZWFJZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDIsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QW5jaG9ySWQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigzLCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldE9ubGluZUF0KCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoNCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXREdXJhdGlvbigpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDUsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0T2ZmbGluZUF0KCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoNiwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRPbmxpbmVJcCgpOwoKICBpZiAoZi5sZW5ndGggPiAwKSB7CiAgICB3cml0ZXIud3JpdGVTdHJpbmcoNywgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRVcGRhdGVkQXQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigyMCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRDcmVhdGVkQXQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMigyMSwgZik7CiAgfQp9OwovKioKICogb3B0aW9uYWwgdWludDY0IGlkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5PbmxpbmVSZWNvcmQucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuT25saW5lUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5zZXRJZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLk9ubGluZVJlY29yZC5wcm90b3R5cGUuZ2V0QXJlYUlkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAyLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuT25saW5lUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5zZXRBcmVhSWQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDIsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhbmNob3JfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLk9ubGluZVJlY29yZC5wcm90b3R5cGUuZ2V0QW5jaG9ySWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDMsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5PbmxpbmVSZWNvcmR9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5PbmxpbmVSZWNvcmQucHJvdG90eXBlLnNldEFuY2hvcklkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAzLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgb25saW5lX2F0ID0gNDsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5PbmxpbmVSZWNvcmQucHJvdG90eXBlLmdldE9ubGluZUF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCA0LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuT25saW5lUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5zZXRPbmxpbmVBdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgNCwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGR1cmF0aW9uID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5PbmxpbmVSZWNvcmQucHJvdG90eXBlLmdldER1cmF0aW9uID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCA1LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuT25saW5lUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5zZXREdXJhdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgNSwgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIG9mZmxpbmVfYXQgPSA2OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLk9ubGluZVJlY29yZC5wcm90b3R5cGUuZ2V0T2ZmbGluZUF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCA2LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuT25saW5lUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5zZXRPZmZsaW5lQXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDYsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHN0cmluZyBvbmxpbmVfaXAgPSA3OwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCnByb3RvLnBiLk9ubGluZVJlY29yZC5wcm90b3R5cGUuZ2V0T25saW5lSXAgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDcsICIiKTsKfTsKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuT25saW5lUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5zZXRPbmxpbmVJcCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywgNywgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIHVwZGF0ZWRfYXQgPSAyMDsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5PbmxpbmVSZWNvcmQucHJvdG90eXBlLmdldFVwZGF0ZWRBdCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMjAsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5PbmxpbmVSZWNvcmR9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5PbmxpbmVSZWNvcmQucHJvdG90eXBlLnNldFVwZGF0ZWRBdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMjAsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBjcmVhdGVkX2F0ID0gMjE7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5nZXRDcmVhdGVkQXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDIxLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuT25saW5lUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuT25saW5lUmVjb3JkLnByb3RvdHlwZS5zZXRDcmVhdGVkQXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDIxLCB2YWx1ZSk7Cn07CgppZiAoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCkgewogIC8qKgogICAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAgICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAgICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogICAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogICAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogICAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICAgKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogICAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAgICogQHJldHVybiB7IU9iamVjdH0KICAgKi8KICBwcm90by5wYi5TZXR0bGVSZWNvcmQucHJvdG90eXBlLnRvT2JqZWN0ID0gZnVuY3Rpb24gKG9wdF9pbmNsdWRlSW5zdGFuY2UpIHsKICAgIHJldHVybiBwcm90by5wYi5TZXR0bGVSZWNvcmQudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSwgdGhpcyk7CiAgfTsKICAvKioKICAgKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICAgKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAgICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAgICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICAgKiBAcGFyYW0geyFwcm90by5wYi5TZXR0bGVSZWNvcmR9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICAgKiBAcmV0dXJuIHshT2JqZWN0fQogICAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICAgKi8KCgogIHByb3RvLnBiLlNldHRsZVJlY29yZC50b09iamVjdCA9IGZ1bmN0aW9uIChpbmNsdWRlSW5zdGFuY2UsIG1zZykgewogICAgdmFyIGYsCiAgICAgICAgb2JqID0gewogICAgICBpZDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAxLCAwKSwKICAgICAgYXJlYUlkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDIsIDApLAogICAgICBndWlsZElkOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDMsIDApLAogICAgICBhbmNob3JJZDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA0LCAwKSwKICAgICAgc2V0dGxlQXQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgNSwgMCksCiAgICAgIHN0YXR1czoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA2LCAwKSwKICAgICAgY2FsbEluY29tZToganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA3LCAwKSwKICAgICAgZ2lmdEluY29tZToganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA4LCAwKSwKICAgICAgY29tbWlzc2lvbkluY29tZToganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCA5LCAwKSwKICAgICAgYWRqdXN0SW5jb21lOiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csIDEwLCAwKSwKICAgICAgYWRqdXN0bWVudDoganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLCAxMSwgMCksCiAgICAgIHNldHRsZWQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMTIsIDApLAogICAgICB1cGRhdGVkQXQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMzAsIDApLAogICAgICBjcmVhdGVkQXQ6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMzEsIDApCiAgICB9OwoKICAgIGlmIChpbmNsdWRlSW5zdGFuY2UpIHsKICAgICAgb2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlID0gbXNnOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfTsKfQovKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5TZXR0bGVSZWNvcmR9CiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5kZXNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uIChieXRlcykgewogIHZhciByZWFkZXIgPSBuZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpOwogIHZhciBtc2cgPSBuZXcgcHJvdG8ucGIuU2V0dGxlUmVjb3JkKCk7CiAgcmV0dXJuIHByb3RvLnBiLlNldHRsZVJlY29yZC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLCByZWFkZXIpOwp9OwovKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5TZXR0bGVSZWNvcmR9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlciA9IGZ1bmN0aW9uIChtc2csIHJlYWRlcikgewogIHdoaWxlIChyZWFkZXIubmV4dEZpZWxkKCkpIHsKICAgIGlmIChyZWFkZXIuaXNFbmRHcm91cCgpKSB7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIHZhciBmaWVsZCA9IHJlYWRlci5nZXRGaWVsZE51bWJlcigpOwoKICAgIHN3aXRjaCAoZmllbGQpIHsKICAgICAgY2FzZSAxOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDY0KCk7CiAgICAgICAgbXNnLnNldElkKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMjoKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRBcmVhSWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldEd1aWxkSWQodmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0OgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldEFuY2hvcklkKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNToKICAgICAgICB2YXIgdmFsdWUgPSByZWFkZXIucmVhZFVpbnQzMigpOwogICAgICAgIG1zZy5zZXRTZXR0bGVBdCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDY6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRFbnVtKCk7CiAgICAgICAgbXNnLnNldFN0YXR1cyh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDc6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0Q2FsbEluY29tZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDg6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0R2lmdEluY29tZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDk6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0Q29tbWlzc2lvbkluY29tZSh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDEwOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkSW50MzIoKTsKICAgICAgICBtc2cuc2V0QWRqdXN0SW5jb21lKHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTE6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRJbnQzMigpOwogICAgICAgIG1zZy5zZXRBZGp1c3RtZW50KHZhbHVlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTI6CiAgICAgICAgdmFyIHZhbHVlID0gcmVhZGVyLnJlYWRVaW50MzIoKTsKICAgICAgICBtc2cuc2V0U2V0dGxlZCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDMwOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldFVwZGF0ZWRBdCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDMxOgogICAgICAgIHZhciB2YWx1ZSA9IHJlYWRlci5yZWFkVWludDMyKCk7CiAgICAgICAgbXNnLnNldENyZWF0ZWRBdCh2YWx1ZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIHJlYWRlci5za2lwRmllbGQoKTsKICAgICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiBtc2c7Cn07Ci8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi8KCgpwcm90by5wYi5TZXR0bGVSZWNvcmQucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgd3JpdGVyID0gbmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7CiAgcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsIHdyaXRlcik7CiAgcmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTsKfTsKLyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5TZXR0bGVSZWNvcmR9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlciA9IGZ1bmN0aW9uIChtZXNzYWdlLCB3cml0ZXIpIHsKICB2YXIgZiA9IHVuZGVmaW5lZDsKICBmID0gbWVzc2FnZS5nZXRJZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDY0KDEsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QXJlYUlkKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMiwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRHdWlsZElkKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMywgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRBbmNob3JJZCgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDQsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0U2V0dGxlQXQoKTsKCiAgaWYgKGYgIT09IDApIHsKICAgIHdyaXRlci53cml0ZVVpbnQzMig1LCBmKTsKICB9CgogIGYgPSBtZXNzYWdlLmdldFN0YXR1cygpOwoKICBpZiAoZiAhPT0gMC4wKSB7CiAgICB3cml0ZXIud3JpdGVFbnVtKDYsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0Q2FsbEluY29tZSgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDcsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0R2lmdEluY29tZSgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDgsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0Q29tbWlzc2lvbkluY29tZSgpOwoKICBpZiAoZiAhPT0gMCkgewogICAgd3JpdGVyLndyaXRlVWludDMyKDksIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0QWRqdXN0SW5jb21lKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVJbnQzMigxMCwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRBZGp1c3RtZW50KCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVJbnQzMigxMSwgZik7CiAgfQoKICBmID0gbWVzc2FnZS5nZXRTZXR0bGVkKCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMTIsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0VXBkYXRlZEF0KCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMzAsIGYpOwogIH0KCiAgZiA9IG1lc3NhZ2UuZ2V0Q3JlYXRlZEF0KCk7CgogIGlmIChmICE9PSAwKSB7CiAgICB3cml0ZXIud3JpdGVVaW50MzIoMzEsIGYpOwogIH0KfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQ2NCBpZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuc2V0SWQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDEsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5TZXR0bGVSZWNvcmQucHJvdG90eXBlLmdldEFyZWFJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMiwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuc2V0QXJlYUlkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAyLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgZ3VpbGRfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuZ2V0R3VpbGRJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMywgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuc2V0R3VpbGRJZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMywgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGFuY2hvcl9pZCA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5nZXRBbmNob3JJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNCwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuc2V0QW5jaG9ySWQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDQsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBzZXR0bGVfYXQgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuZ2V0U2V0dGxlQXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDUsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5TZXR0bGVSZWNvcmR9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5TZXR0bGVSZWNvcmQucHJvdG90eXBlLnNldFNldHRsZUF0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCA1LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBTZXR0bGVTdGF0dXMgc3RhdHVzID0gNjsKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVN0YXR1c30KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5nZXRTdGF0dXMgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDYsIDApOwp9OwovKioKICogQHBhcmFtIHshcHJvdG8ucGIuU2V0dGxlU3RhdHVzfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuU2V0dGxlUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5zZXRTdGF0dXMgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLCA2LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgY2FsbF9pbmNvbWUgPSA3OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuZ2V0Q2FsbEluY29tZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgNywgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuc2V0Q2FsbEluY29tZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgNywgdmFsdWUpOwp9OwovKioKICogb3B0aW9uYWwgdWludDMyIGdpZnRfaW5jb21lID0gODsKICogQHJldHVybiB7bnVtYmVyfQogKi8KCgpwcm90by5wYi5TZXR0bGVSZWNvcmQucHJvdG90eXBlLmdldEdpZnRJbmNvbWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDgsIDApOwp9OwovKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5TZXR0bGVSZWNvcmR9IHJldHVybnMgdGhpcwogKi8KCgpwcm90by5wYi5TZXR0bGVSZWNvcmQucHJvdG90eXBlLnNldEdpZnRJbmNvbWUgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDgsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBjb21taXNzaW9uX2luY29tZSA9IDk7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5nZXRDb21taXNzaW9uSW5jb21lID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCA5LCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuU2V0dGxlUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5zZXRDb21taXNzaW9uSW5jb21lID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCA5LCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBpbnQzMiBhZGp1c3RfaW5jb21lID0gMTA7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5nZXRBZGp1c3RJbmNvbWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDEwLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuU2V0dGxlUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5zZXRBZGp1c3RJbmNvbWUgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDEwLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCBpbnQzMiBhZGp1c3RtZW50ID0gMTE7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5nZXRBZGp1c3RtZW50ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxMSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuc2V0QWRqdXN0bWVudCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMTEsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBzZXR0bGVkID0gMTI7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5nZXRTZXR0bGVkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAxMiwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuc2V0U2V0dGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMTIsIHZhbHVlKTsKfTsKLyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB1cGRhdGVkX2F0ID0gMzA7CiAqIEByZXR1cm4ge251bWJlcn0KICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5nZXRVcGRhdGVkQXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDMwLCAwKTsKfTsKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuU2V0dGxlUmVjb3JkfSByZXR1cm5zIHRoaXMKICovCgoKcHJvdG8ucGIuU2V0dGxlUmVjb3JkLnByb3RvdHlwZS5zZXRVcGRhdGVkQXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsIDMwLCB2YWx1ZSk7Cn07Ci8qKgogKiBvcHRpb25hbCB1aW50MzIgY3JlYXRlZF9hdCA9IDMxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuZ2V0Q3JlYXRlZEF0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLCAzMSwgMCk7Cn07Ci8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0gcmV0dXJucyB0aGlzCiAqLwoKCnByb3RvLnBiLlNldHRsZVJlY29yZC5wcm90b3R5cGUuc2V0Q3JlYXRlZEF0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCAzMSwgdmFsdWUpOwp9OwovKioKICogQGVudW0ge251bWJlcn0KICovCgoKcHJvdG8ucGIuU2V0dGxlU3RhdHVzID0gewogIFNFVFRMRVVOS05PV046IDAsCiAgU0VUVExFUFJFUEFSRTogMSwKICBTRVRUTEVDQU5DRUw6IDIsCiAgU0VUVExFRE9ORTogMywKICBTRVRUTEVSRVZPS0VEOiA0Cn07Cmdvb2cub2JqZWN0LmV4dGVuZChleHBvcnRzLCBwcm90by5wYik7"},null]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/message/dialog/push.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/message/dialog/push.vue","mtime":1635418744768},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYm9vbERpY3QgfSBmcm9tICdAL2RpY3QvaW5kZXgnOwppbXBvcnQgeyBnZXRBcHBMaXN0LCBnZXRBcmVhTGlzdCwgZ2V0Qm9vbCwgZ2V0Q3VycmVudFVzZXJBcmVhSWQsIGluaXRBcmVhcywgaW5pdEd1aWxkcyB9IGZyb20gIkAvdXRpbHMvZGlzdCI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9jb29raWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0Zvcm0nLAogIGNvbXBvbmVudHM6IHsKICAgIGJvb2xEaWN0OiBib29sRGljdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBhcmVhSWQ6IHVuZGVmaW5lZAogICAgICB9LAogICAgICBhdXRoQXJlYUlkOiBnZXRDdXJyZW50VXNlckFyZWFJZCgpLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgaW1nQXJyOiBbXSwKICAgICAgaW1nRGlhbG9nOiBmYWxzZSwKICAgICAgaW1nVXJpOiB1bmRlZmluZWQsCiAgICAgIGFyZWFEYXRhOiBnZXRBcmVhTGlzdChmYWxzZSksCiAgICAgIGFwcExpc3Q6IGdldEFwcExpc3QodHJ1ZSwgdHJ1ZSksCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgYXJlYUlkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oupJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+WGheWuueS4jeiDveS4uuepuicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBlbmFibGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICflhoXlrrnkuI3og73kuLrnqbonLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQocm93KSB7CiAgICAgIHRoaXMuZm9ybS5hcmVhSWQgPSB0aGlzLmF1dGhBcmVhSWQgPT09IDAgPyB0aGlzLmFyZWFEYXRhWzBdLnZhbHVlIDogdGhpcy5hdXRoQXJlYUlkOwogICAgfSwKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciAkdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpcy4kc2VydmljZS5ndWlsZC5zYXZlR3VpbGQoX3RoaXMuZm9ybSwgZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgJHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+d5a2Y5oiQ5YqfISIpOwogICAgICAgICAgICAgIGluaXRHdWlsZHMoKTsKICAgICAgICAgICAgICAkdGhpcy5jbG9zZURpYWxvZygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICR0aGlzLiRtZXNzYWdlLmVycm9yKCLkv53lrZjlpLHotKUhIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldEZvcm0oKTsKICAgICAgdGhpcy4kZW1pdCgnZmV0Y2hEYXRhJyk7CiAgICB9LAogICAgcmVzZXRGb3JtOiBmdW5jdGlvbiByZXNldEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgICBpbWdQcmV2aWV3OiBmdW5jdGlvbiBpbWdQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5pbWdEaWFsb2cgPSB0cnVlOwogICAgICB0aGlzLmltZ1VyaSA9IGZpbGUudXJsOwogICAgfSwKICAgIHN1Y2Nlc3NJbWc6IGZ1bmN0aW9uIHN1Y2Nlc3NJbWcoZmlsZSkgewogICAgICB2YXIgJHRoaXMgPSB0aGlzOwogICAgICB0aGlzLmZvcm1Mb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5pbWdVcGxvYWQoZmlsZS5yYXcsIDEsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgJHRoaXMuZm9ybS5hdmF0YXIgPSBkYXRhLnVyaTsKICAgICAgICAkdGhpcy5mb3JtTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBpbWdVcGxvYWQ6IGZ1bmN0aW9uIGltZ1VwbG9hZChmaWxlLCB0eXBlLCBjYWxsYmFjaykgewogICAgICB2YXIgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnLAogICAgICAgICJ0b2tlbiI6IGdldFRva2VuKCksCiAgICAgICAgImFyZWEtaWQiOiAxLAogICAgICAgICJmaWxlLXR5cGUiOiB0eXBlCiAgICAgIH07CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTsKICAgICAgYXhpb3MoewogICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9VUExPQURfVVJJLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IGZvcm1EYXRhLAogICAgICAgIGhlYWRlcnM6IGhlYWRlcnMKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgICAgICBjYWxsYmFjayhkYXRhKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["push.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <el-dialog title=\"创建消息\" :visible.sync=\"dialogVisible\" append-to-body width=\"50%\" :before-close=\"closeDialog\">\n        <div class=\"form-list-wrapper\">\n            <el-form ref=\"ruleForm\" :model=\"form\" :rules=\"rules\" label-width=\"150px\" class=\"form-list\">\n\n                <el-form-item label=\"目标APP\" prop=\"appId\">\n                    <el-select v-model=\"form.appId\" placeholder=\"请选择\">\n                        <el-option v-for=\"item in appList\"\n                                   :key=\"item.value\"\n                                   :label=\"item.label\"\n                                   :value=\"item.value\">\n                            <span style=\"float: left\">{{ item.label }}</span>\n                            <span v-if=\"item.os === 1\">\n                                <i class=\"icon-android-fill\" style=\"float: right\"></i>\n                            </span>\n                            <span v-else-if=\"item.os === 2\">\n                                <i class=\"icon-pingguo\" style=\"float: right\"></i>\n                            </span>\n                        </el-option>\n                    </el-select>\n                </el-form-item>\n                <el-form-item label=\"目标区域\" prop=\"areaId\">\n                    <el-select v-model=\"form.areaId\" :disabled=\"authAreaId !== 0\" placeholder=\"请选择\">\n                        <el-option\n                            v-for=\"item in areaData\"\n                            :key=\"item.value\"\n                            :label=\"item.label\"\n                            :value=\"item.value\">\n                        </el-option>\n                    </el-select>\n                </el-form-item>\n                <el-form-item label=\"目标对象\" prop=\"areaId\">\n\n                </el-form-item>\n                <el-form-item label=\"推送标题\" prop=\"name\">\n                    <el-input v-model=\"form.name\" placeholder=\"请输入\" />\n                </el-form-item>\n                <el-form-item label=\"推送封面\" prop=\"areaId\">\n                    <div class=\"img\">\n                        <el-upload\n                            :limit=\"1\"\n                            accept=\"image/*\"\n                            :on-preview=\"imgPreview\"\n                            :on-change=\"successImg\"\n                            list-type=\"picture-card\"\n                            :file-list=\"imgArr\"\n                            :auto-upload=\"false\"\n                        >\n                            <i class=\"el-icon-plus\"></i>\n                        </el-upload>\n                    </div>\n                    <div class=\"imgSpan2\">只能上传jpg/png文件，50X50px</div>\n                </el-form-item>\n                <el-form-item label=\"推送内容\" prop=\"areaId\">\n                    <el-input\n                        v-model=\"form.note\"\n                        type=\"textarea\"\n                        :autosize=\"{ minRows: 3, maxRows: 5 }\"\n                        placeholder=\"请输入内容\"\n                        maxlength=\"50\"\n                        show-word-limit\n                    />\n                </el-form-item>\n                <el-form-item label=\"跳转链接\" prop=\"areaId\">\n                    <el-input v-model=\"form.name\" placeholder=\"请输入\" />\n                </el-form-item>\n                <el-form-item label=\"是否定时推送\" prop=\"areaId\">\n                    <el-switch v-model=\"form.statusBool\"/>\n                </el-form-item>\n                <el-form-item label=\"定时时间\" prop=\"date\">\n                    <el-date-picker\n                        v-model=\"form.date\"\n                        type=\"datetime\"\n                        placeholder=\"选择日期时间\">\n                    </el-date-picker>\n                </el-form-item>\n\n                <el-form-item class=\"submit-box\">\n                    <el-button type=\"primary\" @click=\"submitForm\" style=\"margin-right: 50px\">提&nbsp;&nbsp;&nbsp;交</el-button>\n                    <el-button @click=\"resetForm\">重&nbsp;&nbsp;&nbsp;置</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n        <el-dialog :visible.sync=\"imgDialog\" :modal-append-to-body=\"true\" append-to-body>\n            <img width=\"100%\" :src=\"imgUri\" alt />\n        </el-dialog>\n    </el-dialog>\n</template>\n\n<script>\n\nimport { boolDict} from '@/dict/index'\nimport {getAppList, getAreaList, getBool, getCurrentUserAreaId, initAreas, initGuilds} from \"@/utils/dist\";\nimport {getToken} from \"@/utils/cookie\";\nimport axios from \"axios\";\n\nexport default {\n    name: 'Form',\n    components: { boolDict},\n    data() {\n        return {\n            form: {\n                areaId: undefined\n            },\n            authAreaId: getCurrentUserAreaId(),\n            dialogVisible: false,\n            imgArr: [],\n            imgDialog: false,\n            imgUri: undefined,\n            areaData : getAreaList(false),\n            appList: getAppList(true, true),\n            rules: {\n                areaId: [\n                    {required: true, message: '请选择', trigger: 'change'}\n                ],\n                name: [\n                    {required: true, message: '内容不能为空', trigger: 'blur'}\n                ],\n                enable: [\n                    {required: true, message: '内容不能为空', trigger: 'blur'}\n                ]\n            }\n        }\n    },\n    methods: {\n        init(row){\n            this.form.areaId = this.authAreaId === 0 ? this.areaData[0].value : this.authAreaId\n        },\n        submitForm(formName) {\n            const $this = this\n            this.$refs.ruleForm.validate((valid) => {\n                if (valid) {\n                    this.$service.guild.saveGuild(this.form, function (result){\n                        if (result) {\n                            $this.$message.success(\"保存成功!\")\n                            initGuilds()\n                            $this.closeDialog()\n                        } else {\n                            $this.$message.error(\"保存失败!\")\n                        }\n                    })\n                }\n            })\n        },\n        closeDialog() {\n            this.dialogVisible = false\n            this.resetForm()\n            this.$emit('fetchData');\n        },\n        resetForm() {\n            this.$refs.ruleForm.resetFields()\n        },\n        imgPreview(file) {\n            this.imgDialog = true;\n            this.imgUri = file.url\n        },\n        successImg(file) {\n            const $this = this\n            this.formLoading = true\n            this.imgUpload(file.raw, 1, function (data){\n                $this.form.avatar = data.uri\n                $this.formLoading = false\n            })\n        },\n        imgUpload(file, type, callback){\n            let headers = {\n                'Content-Type': 'multipart/form-data',\n                \"token\" : getToken(),\n                \"area-id\" : 1,\n                \"file-type\" : type\n            }\n            const formData = new FormData()\n            formData.append('file', file)\n            axios({\n                url: process.env.VUE_APP_UPLOAD_URI,\n                method: 'post',\n                data: formData,\n                headers: headers\n            }).then(res => {\n                const data = res.data\n                callback(data)\n            })\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n.form-list-wrapper {\n\n    .form-list {\n        width: 80%;\n        margin: 0 auto;\n\n        .el-rate {\n            line-height: 2;\n        }\n\n        > .el-form-item {\n            margin-bottom: 22px;\n\n            .line {\n                text-align: center;\n            }\n\n            .tip-title {\n                text-align: right;\n                color: #606266;\n            }\n        }\n\n        .submit-box {\n            margin-top: 35px;\n            margin-left: 0;\n            text-align: center;\n        }\n    }\n}\n</style>\n"],"sourceRoot":"src/views/manage/message/dialog"}]}
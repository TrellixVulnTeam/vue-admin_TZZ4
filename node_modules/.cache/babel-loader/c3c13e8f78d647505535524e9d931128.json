{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin-design/src/request.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin-design/src/request.js","mtime":1624500048821},{"path":"/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluLWRlc2lnbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwoKdmFyIF9lbGVtZW50VWkgPSByZXF1aXJlKCJlbGVtZW50LXVpIik7Cgp2YXIgX2Nvb2tpZSA9IHJlcXVpcmUoIi4vdXRpbHMvY29va2llIik7CgovLyDliJvlu7pheGlvc+WunuS+iwp2YXIgc2VydmljZSA9IF9heGlvcy5kZWZhdWx0LmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAvLyBhcGkg55qEIGJhc2VfdXJsCiAgdGltZW91dDogMTIwMDAwIC8vIOivt+axgui2heaXtuaXtumXtAoKfSk7IC8vIHJlcXVlc3Tmi6bmiKrlmajorr7nva4KCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKCgwLCBfY29va2llLmdldFRva2VuKSgpKSB7CiAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgKDAsIF9jb29raWUuZ2V0VG9rZW4pKCk7IC8vIOivt+axguWktOiuvue9ruiHquW4piB0b2tlbgogIH0KCiAgY29uZmlnLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nOyAvLyDor7fmsYLnmoTmlbDmja7moLzlvI/kuLoganNvbgoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZyhlcnJvcik7CiAgUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8gcmVzcG9uc2Ug5oum5oiq5Zmo6K6+572uCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogIHZhciBjb2RlID0gZGF0YS5jb2RlOwogIHZhciBtZXNzYWdlID0gZGF0YS5tc2c7CgogIGlmIChjb2RlID09PSAwKSB7CiAgICByZXR1cm4gZGF0YS5kYXRhOwogIH0gZWxzZSB7CiAgICAoMCwgX2VsZW1lbnRVaS5NZXNzYWdlKSh7CiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdlcnJvcicpOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgdmFyIGNvZGUgPSBlcnJvci5yZXNwb25zZS5kYXRhLnN0YXR1czsKCiAgaWYgKCFjb2RlKSB7CiAgICAoMCwgX2VsZW1lbnRVaS5NZXNzYWdlKSh7CiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIG1lc3NhZ2U6ICfmjqXlj6Por7fmsYLlpLHotKUnCiAgICB9KTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwp2YXIgX2RlZmF1bHQgPSBzZXJ2aWNlOwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin-design/src/request.js"],"names":["service","axois","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","headers","error","console","log","Promise","reject","response","data","code","message","msg","type","status"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;AACA,IAAMA,OAAO,GAAGC,eAAMC,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvCC,EAAAA,OAAO,EAAE,MAFkB,CAEX;;AAFW,CAAb,CAAhB,C,CAKA;;;AACAP,OAAO,CAACQ,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR,MAAI,uBAAJ,EAAgB;AACdA,IAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkC,YAAY,uBAA9C,CADc,CAC2C;AAC1D;;AACDD,EAAAA,MAAM,CAACC,OAAP,CAAe,cAAf,IAAiC,kBAAjC,CAJQ,CAI4C;;AACpD,SAAOD,MAAP;AACD,CAPH,EAQE,UAAAE,KAAK,EAAI;AACPC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAG,EAAAA,OAAO,CAACC,MAAR,CAAeJ,KAAf;AACD,CAXH,E,CAcA;;AACAb,OAAO,CAACQ,YAAR,CAAqBU,QAArB,CAA8BR,GAA9B,CACE,UAAAQ,QAAQ,EAAI;AACV,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB;AACA,MAAMC,IAAI,GAAGD,IAAI,CAACC,IAAlB;AACA,MAAMC,OAAO,GAAGF,IAAI,CAACG,GAArB;;AACA,MAAIF,IAAI,KAAK,CAAb,EAAgB;AACd,WAAOD,IAAI,CAACA,IAAZ;AACD,GAFD,MAEO;AACL,4BAAQ;AACNI,MAAAA,IAAI,EAAE,OADA;AAENF,MAAAA,OAAO,EAAPA;AAFM,KAAR;AAIA,WAAOL,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD;AACF,CAdH,EAeE,UAAAJ,KAAK,EAAI;AACP,MAAMO,IAAI,GAAGP,KAAK,CAACK,QAAN,CAAeC,IAAf,CAAoBK,MAAjC;;AACA,MAAI,CAACJ,IAAL,EAAW;AACT,4BAAQ;AACNG,MAAAA,IAAI,EAAE,OADA;AAENF,MAAAA,OAAO,EAAE;AAFH,KAAR;AAID;;AACD,SAAOL,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAxBH;eA2Beb,O","sourcesContent":["import axois from 'axios'\nimport { Message } from 'element-ui'\nimport { getToken } from './utils/cookie'\n\n// 创建axios实例\nconst service = axois.create({\n  baseURL: process.env.VUE_APP_BASE_API, // api 的 base_url\n  timeout: 120000 // 请求超时时间\n})\n\n// request拦截器设置\nservice.interceptors.request.use(\n  config => {\n    if (getToken()) {\n      config.headers['Authorization'] = 'Bearer ' + getToken() // 请求头设置自带 token\n    }\n    config.headers['Content-Type'] = 'application/json' // 请求的数据格式为 json\n    return config\n  },\n  error => {\n    console.log(error)\n    Promise.reject(error)\n  }\n)\n\n// response 拦截器设置\nservice.interceptors.response.use(\n  response => {\n    const data = response.data\n    const code = data.code\n    const message = data.msg\n    if (code === 0) {\n      return data.data\n    } else {\n      Message({\n        type: 'error',\n        message\n      })\n      return Promise.reject('error')\n    }\n  },\n  error => {\n    const code = error.response.data.status\n    if (!code) {\n      Message({\n        type: 'error',\n        message: '接口请求失败'\n      })\n    }\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}
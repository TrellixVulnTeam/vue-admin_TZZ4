{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin-design/src/router/auth.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin-design/src/router/auth.js","mtime":1624500048821},{"path":"/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin-design/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluLWRlc2lnbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyIpOwoKdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9pbmRleCIpKTsKCnZhciBfY29va2llID0gcmVxdWlyZSgiLi4vdXRpbHMvY29va2llIik7CgovLyDnmb3lkI3ljZXliJfooagKdmFyIHdoaXRlTGlzdCA9IFsnL2xvZ2luJ107CgpfaW5kZXguZGVmYXVsdC5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIGlmICgoMCwgX2Nvb2tpZS5nZXRUb2tlbikoKSkgewogICAgLy8g5bey55m75b2V5LiU6KaB6Lez6L2s55qE5piv55m75b2V6aG1CiAgICBpZiAodG8ucGF0aCA9PT0gJy9sb2dpbicpIHsKICAgICAgbmV4dCh7CiAgICAgICAgcGF0aDogJy8nCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSB7CiAgICAvLyDlnKjlhY3nmbvlvZXnmb3lkI3ljZXvvIznm7TmjqXov5vlhaUKICAgIGlmICh3aGl0ZUxpc3QuaW5jbHVkZXModG8ucGF0aCkpIHsKICAgICAgbmV4dCgpOwogICAgfSBlbHNlIHsKICAgICAgLy8g5ZCm5YiZ6YeN5a6a5ZCR5Yiw55m75b2V6aG1CiAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5mdWxsUGF0aCkpOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin-design/src/router/auth.js"],"names":["whiteList","router","beforeEach","to","from","next","path","includes","fullPath"],"mappings":";;;;;;AAAA;;AACA;;AAEA;AACA,IAAMA,SAAS,GAAG,CAAC,QAAD,CAAlB;;AAEAC,eAAOC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAI,uBAAJ,EAAgB;AACd;AACA,QAAIF,EAAE,CAACG,IAAH,KAAY,QAAhB,EAA0B;AACxBD,MAAAA,IAAI,CAAC;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD,KAFD,MAEO;AACLD,MAAAA,IAAI;AACL;AACF,GAPD,MAOO;AACL;AACA,QAAIL,SAAS,CAACO,QAAV,CAAmBJ,EAAE,CAACG,IAAtB,CAAJ,EAAiC;AAC/BD,MAAAA,IAAI;AACL,KAFD,MAEO;AACL;AACAA,MAAAA,IAAI,2BAAoBF,EAAE,CAACK,QAAvB,EAAJ;AACD;AACF;AACF,CAjBD","sourcesContent":["import router from './index'\nimport { getToken } from '../utils/cookie'\n\n// 白名单列表\nconst whiteList = ['/login']\n\nrouter.beforeEach((to, from, next) => {\n  if (getToken()) {\n    // 已登录且要跳转的是登录页\n    if (to.path === '/login') {\n      next({ path: '/' })\n    } else {\n      next()\n    }\n  } else {\n    // 在免登录白名单，直接进入\n    if (whiteList.includes(to.path)) {\n      next()\n    } else {\n      // 否则重定向到登录页\n      next(`/login?redirect=${to.fullPath}`)\n    }\n  }\n})\n"]}]}
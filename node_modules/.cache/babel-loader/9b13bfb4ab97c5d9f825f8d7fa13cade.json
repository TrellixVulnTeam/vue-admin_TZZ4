{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/thread-loader/dist/cjs.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/src/utils/dist.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/utils/dist.js","mtime":1634639662857},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IEVtcHR5IH0gZnJvbSAiQC9wcm90by9qcy91c2VydHlwZV9wYiI7CmltcG9ydCB7IFBheUNoYW5uZWxMaXN0UmVxdWVzdCwgQ29tbW9kaXR5TGlzdFJlcXVlc3QsIEFwcExpc3RSZXF1ZXN0LCBJcExvY2F0aW9uUmVxdWVzdCB9IGZyb20gIkAvcHJvdG8vanMvY21zX3BiIjsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL2Nvb2tpZSI7CmltcG9ydCB7IGNtc1NlcnZpY2UgfSBmcm9tICJAL2dycGMvc2VydmVyIjsKaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gIkAvYXBpL2FwaSI7CmV4cG9ydCBmdW5jdGlvbiBpbml0RGF0YSgpIHsKICByZXR1cm4gX2luaXREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0gLy8gZXhwb3J0IGZ1bmN0aW9uIGluaXRBc3luY0RhdGEoKXsKLy8gICAgIGdldEFwcHMoZnVuY3Rpb24gKGFycil7Ci8vICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXBwQXJyIiwgSlNPTi5zdHJpbmdpZnkoYXJyKSk7Ci8vICAgICB9KQovLyAgICAgZ2V0UGF5Q2hhbm5lbChmdW5jdGlvbihhcnIpewovLyAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInBheUNoYW5uZWxBcnIiLCBKU09OLnN0cmluZ2lmeShhcnIpKTsKLy8gICAgIH0pCi8vICAgICBnZXRDb21tb2RpdHkoZnVuY3Rpb24oYXJyKXsKLy8gICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiY29tbW9kaXR5QXJyIiwgSlNPTi5zdHJpbmdpZnkoYXJyKSkKLy8gICAgIH0pCi8vCi8vIH0KCmZ1bmN0aW9uIF9pbml0RGF0YSgpIHsKICBfaW5pdERhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICB2YXIgYXJlYUFyciwgZ3VpbGRBcnIsIGN1cnJlbnRVc2VyLCBhcHBzLCBwYXlDaGFubmVsQXJyLCBjb21tb2RpdHlBcnI7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gaW5pdEFyZWFzKCk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBhcmVhQXJyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXJlYUFyciIsIEpTT04uc3RyaW5naWZ5KGFyZWFBcnIpKTsgLy8gZ2V0QXJlYUxpc3QoKQogICAgICAgICAgICAvLyBnZXRHdWlsZExpc3QoKQogICAgICAgICAgICAvLyBnZXRBcHBMaXN0KCkKICAgICAgICAgICAgLy8gZ2V0UGF5Q2hhbm5lbExpc3QoKQogICAgICAgICAgICAvLyBnZXRDb21tb2RpdHlMaXN0KCkKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICByZXR1cm4gaW5pdEd1aWxkcygpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgZ3VpbGRBcnIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJndWlsZEFyciIsIEpTT04uc3RyaW5naWZ5KGd1aWxkQXJyKSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIGluaXRDdXJyZW50VXNlckluZm8oKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjdXJyZW50VXNlciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImN1cnJlbnRVc2VyIiwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFVzZXIpKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICByZXR1cm4gZ2V0QXBwcygpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGFwcHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhcHBBcnIiLCBKU09OLnN0cmluZ2lmeShhcHBzKSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgcmV0dXJuIGluaXRQYXlDaGFubmVsKCk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgcGF5Q2hhbm5lbEFyciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInBheUNoYW5uZWxBcnIiLCBKU09OLnN0cmluZ2lmeShwYXlDaGFubmVsQXJyKSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgcmV0dXJuIGluaXRDb21tb2RpdHkoKTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBjb21tb2RpdHlBcnIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJjb21tb2RpdHlBcnIiLCBKU09OLnN0cmluZ2lmeShjb21tb2RpdHlBcnIpKTsKCiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2luaXREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCB2YXIgaW5pdEN1cnJlbnRVc2VySW5mbyA9IGZ1bmN0aW9uIGluaXRDdXJyZW50VXNlckluZm8oKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciByZXEgPSBuZXcgRW1wdHkoKTsKICAgIHZhciBtZXRhZGF0YSA9IHsKICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgfTsKICAgIGNvbnNvbGUubG9nKCJpbml0Q3VycmVudFVzZXJJbmZvIik7CiAgICBjbXNTZXJ2aWNlLmdldEFkbWluSW5mbyhyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgIGlmICghZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coImluaXRDdXJyZW50VXNlckluZm8gcmVzcDoiICsgcmVzcCk7CiAgICAgICAgdmFyIGpzb24gPSB7CiAgICAgICAgICBuYW1lOiByZXNwLmdldE5hbWUoKSwKICAgICAgICAgIGVtYWlsOiByZXNwLmdldEVtYWlsKCksCiAgICAgICAgICBhcmVhSWQ6IHJlc3AuZ2V0QXJlYUlkKCksCiAgICAgICAgICBhcHBJZHM6IHJlc3AuZ2V0QXBwSWRzTGlzdCgpLAogICAgICAgICAgbW9kdWxlczogcmVzcC5nZXRNb2R1bGVzKCkKICAgICAgICB9OwogICAgICAgIHJlc29sdmUoanNvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfQogICAgfSk7CiAgfSk7Cn07CmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VXNlckFyZWFJZCgpIHsKICB0cnkgewogICAgdmFyIGpzb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlciIpOwogICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbikuYXJlYUlkOwogIH0gY2F0Y2ggKGVycikgewogICAgY29uc29sZS5sb2coZXJyKTsKICB9CgogIHJldHVybiB1bmRlZmluZWQ7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyTW9kdWxlcygpIHsKICB0cnkgewogICAgdmFyIGpzb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlciIpOwogICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbikubW9kdWxlczsKICB9IGNhdGNoIChlcnIpIHsKICAgIGNvbnNvbGUubG9nKGVycik7CiAgfQoKICByZXR1cm4gdW5kZWZpbmVkOwp9CmV4cG9ydCB2YXIgaW5pdEFyZWFzID0gZnVuY3Rpb24gaW5pdEFyZWFzKCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgZW1wdHkgPSBuZXcgRW1wdHkoKTsKICAgIHZhciBtZXRhZGF0YSA9IHsKICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgfTsKICAgIGNtc1NlcnZpY2UuZ2V0QXJlYUxpc3QoZW1wdHksIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgIGlmICghZXJyKSB7CiAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgIHZhciBsaXN0ID0gcmVzcC5nZXRBcmVhc0xpc3QoKTsKICAgICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICB2YXIganNvbiA9IHsKICAgICAgICAgICAgdmFsdWU6IGl0ZW0uZ2V0SWQoKSwKICAgICAgICAgICAgbGFiZWw6IGl0ZW0uZ2V0VGl0bGUoKQogICAgICAgICAgfTsKICAgICAgICAgIGFyci5wdXNoKGpzb24pOwogICAgICAgIH0pOwogICAgICAgIHJlc29sdmUoYXJyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9KTsKICB9KTsKfTsKZXhwb3J0IGZ1bmN0aW9uIGdldEFyZWFMaXN0KGlzU2hvd0FsbCkgewogIHZhciBqc29uID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXJlYUFyciIpOwoKICBpZiAoaXNFbXB0eShqc29uKSkgewogICAgaW5pdEFyZWFzKCkudGhlbihmdW5jdGlvbiAocikgewogICAgICBjb25zb2xlLmxvZygiaW5pdCBhcmVhIGxpc3Q6ICIgKyByKTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXJlYUFyciIsIEpTT04uc3RyaW5naWZ5KHIpKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICB2YXIgYXJyID0gSlNPTi5wYXJzZShqc29uKTsKICAgIHJldHVybiBzZXRPayhpc1Nob3dBbGwsIGFycik7CiAgfQp9IC8vIOW3peS8muWIl+ihqAoKZXhwb3J0IHZhciBpbml0R3VpbGRzID0gZnVuY3Rpb24gaW5pdEd1aWxkcygpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHJlcSA9IG5ldyBFbXB0eSgpOwogICAgdmFyIG1ldGFkYXRhID0gewogICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICB9OwogICAgY21zU2VydmljZS5nZXRHdWlsZExpc3QocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICBpZiAoIWVycikgewogICAgICAgIHZhciBhcnIgPSBbXTsKICAgICAgICB2YXIgbGlzdCA9IHJlc3AuZ2V0R3VpbGRzTGlzdCgpOwogICAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIHZhciBqc29uID0gewogICAgICAgICAgICB2YWx1ZTogaXRlbS5nZXRJZCgpLAogICAgICAgICAgICBsYWJlbDogaXRlbS5nZXROYW1lKCksCiAgICAgICAgICAgIGFyZWFJZDogaXRlbS5nZXRBcmVhSWQoKQogICAgICAgICAgfTsKICAgICAgICAgIGFyci5wdXNoKGpzb24pOwogICAgICAgIH0pOwogICAgICAgIHJlc29sdmUoYXJyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9KTsKICB9KTsKfTsKZXhwb3J0IGZ1bmN0aW9uIGdldEd1aWxkTGlzdChpc1Nob3dBbGwpIHsKICB2YXIganNvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImd1aWxkQXJyIik7CgogIGlmIChpc0VtcHR5KGpzb24pKSB7CiAgICBpbml0R3VpbGRzKCkudGhlbihmdW5jdGlvbiAocikgewogICAgICBjb25zb2xlLmxvZygiaW5pdCBndWlsZCBsaXN0OiAiICsgcik7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImd1aWxkQXJyIiwgSlNPTi5zdHJpbmdpZnkocikpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHZhciBhcnIgPSBKU09OLnBhcnNlKGpzb24pOwogICAgcmV0dXJuIHNldE9rKGlzU2hvd0FsbCwgYXJyKTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEd1aWxkTGlzdEJ5QXJlYUlkKHZhbCwgaXNTaG93QWxsKSB7CiAgdmFyIGd1aWxkTGlzdCA9IGdldEd1aWxkTGlzdChmYWxzZSk7CiAgdmFyIG5ld0xpc3QgPSBbXTsKCiAgaWYgKHZhbCA9PT0gMCkgewogICAgbmV3TGlzdCA9IGd1aWxkTGlzdDsKICB9IGVsc2UgewogICAgZ3VpbGRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0uYXJlYUlkID09PSB2YWwpIHsKICAgICAgICBuZXdMaXN0LnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIHNldE9rKGlzU2hvd0FsbCwgbmV3TGlzdCk7Cn0gLy8g5bqU55So5YiX6KGoCgpleHBvcnQgdmFyIGluaXRBcHBzID0gZnVuY3Rpb24gaW5pdEFwcHMoKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciByZXEgPSBuZXcgQXBwTGlzdFJlcXVlc3QoKTsKICAgIHZhciBtZXRhZGF0YSA9IHsKICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgfTsKICAgIGNtc1NlcnZpY2UuZ2V0QXBwTGlzdChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgIGlmICghZXJyKSB7CiAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgIHZhciBsaXN0ID0gcmVzcC5nZXRBcHBzTGlzdCgpOwogICAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIHZhciBqc29uID0gewogICAgICAgICAgICB2YWx1ZTogaXRlbS5nZXRJZCgpLAogICAgICAgICAgICBsYWJlbDogaXRlbS5nZXRUaXRsZSgpLAogICAgICAgICAgICBvczogaXRlbS5nZXRPc1R5cGUoKSwKICAgICAgICAgICAgaXNBbmNob3I6IGl0ZW0uZ2V0SXNBbmNob3IoKSwKICAgICAgICAgICAgYXJlYUlkczogaXRlbS5nZXRBcmVhSWRzTGlzdCgpCiAgICAgICAgICB9OwogICAgICAgICAgYXJyLnB1c2goanNvbik7CiAgICAgICAgfSk7CiAgICAgICAgcmVzb2x2ZShhcnIpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0KICAgIH0pOwogIH0pOwp9OwpleHBvcnQgZnVuY3Rpb24gZ2V0QXBwcyhfeCwgX3gyKSB7CiAgcmV0dXJuIF9nZXRBcHBzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9nZXRBcHBzKCkgewogIF9nZXRBcHBzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihpc05vQW5jaG9yLCBpc1Nob3dBbGwpIHsKICAgIHZhciBhcnI7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBpbml0QXBwcygpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgYXJyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBhcnIpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX2dldEFwcHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldEFwcExpc3QoaXNOb0FuY2hvciwgaXNTaG93QWxsKSB7CiAgdmFyIGpzb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcHBBcnIiKTsKICB2YXIgYXJyID0gW107CgogIGlmIChpc0VtcHR5KGpzb24pKSB7CiAgICBpbml0QXBwcygpLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgY29uc29sZS5sb2coImluaXQgYXBwIGxpc3Q6ICIgKyByKTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXBwQXJyIiwgSlNPTi5zdHJpbmdpZnkocikpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGFyciA9IEpTT04ucGFyc2UoanNvbik7CiAgfQoKICBpZiAoaXNOb0FuY2hvcikgewogICAgdmFyIHJlc3VsdCA9IFtdOwogICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKCFpdGVtLmlzQW5jaG9yKSB7CiAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHNldE9rKGlzU2hvd0FsbCwgcmVzdWx0KTsKICB9IGVsc2UgewogICAgcmV0dXJuIHNldE9rKGlzU2hvd0FsbCwgYXJyKTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEFwcExpc3RCeUFyZWFJZCh2YWwsIGlzRmlsdGVyLCBpc1Nob3dBbGwpIHsKICB2YXIgYXBwcyA9IGdldEFwcExpc3QoaXNGaWx0ZXIsIGZhbHNlKTsKICB2YXIgbmV3QXBwcyA9IFtdOwoKICBpZiAodmFsID09PSAwKSB7CiAgICBuZXdBcHBzID0gYXBwczsKICB9IGVsc2UgewogICAgYXBwcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChpdGVtLmFyZWFJZHMuaW5kZXhPZih2YWwpID49IDApIHsKICAgICAgICBuZXdBcHBzLnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIHNldE9rKGlzU2hvd0FsbCwgbmV3QXBwcyk7Cn0gLy8g5pSv5LuY5rig6YGTCgpleHBvcnQgdmFyIGluaXRQYXlDaGFubmVsID0gZnVuY3Rpb24gaW5pdFBheUNoYW5uZWwoKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciByZXEgPSBuZXcgUGF5Q2hhbm5lbExpc3RSZXF1ZXN0KCk7CiAgICB2YXIgbWV0YWRhdGEgPSB7CiAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgIH07CiAgICBjbXNTZXJ2aWNlLmdldFBheUNoYW5uZWxMaXN0KHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgaWYgKCFlcnIpIHsKICAgICAgICB2YXIgYXJyID0gW107CiAgICAgICAgdmFyIGxpc3QgPSByZXNwLmdldENoYW5uZWxzTGlzdCgpOwogICAgICAgIGNvbnNvbGUubG9nKCJnZXRQYXlDaGFubmVsIGxpc3Q6IiArIGxpc3QpOwogICAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIHZhciBqc29uID0gewogICAgICAgICAgICB2YWx1ZTogaXRlbS5nZXRJZCgpLAogICAgICAgICAgICBsYWJlbDogaXRlbS5nZXROYW1lKCksCiAgICAgICAgICAgIGljb246IGl0ZW0uZ2V0SWNvbigpLAogICAgICAgICAgICBhcmVhSWQ6IGl0ZW0uZ2V0QXJlYUlkKCkKICAgICAgICAgIH07CiAgICAgICAgICBhcnIucHVzaChqc29uKTsKICAgICAgICB9KTsKICAgICAgICByZXNvbHZlKGFycik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfQogICAgfSk7CiAgfSk7Cn07CmV4cG9ydCBmdW5jdGlvbiBnZXRQYXlDaGFubmVsTGlzdChhcmVhSWQpIHsKICB2YXIgc3RyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgicGF5Q2hhbm5lbEFyciIpOwoKICBpZiAoaXNFbXB0eShzdHIpKSB7CiAgICBpbml0UGF5Q2hhbm5lbCgpLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgY29uc29sZS5sb2coImluaXQgUGF5Q2hhbm5lbCBsaXN0OiAiICsgcik7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInBheUNoYW5uZWxBcnIiLCBKU09OLnN0cmluZ2lmeShyKSk7CiAgICB9KTsKICB9IGVsc2UgewogICAgdmFyIGFyciA9IEpTT04ucGFyc2Uoc3RyKTsKICAgIHZhciByZXN1bHQgPSBbXTsKICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChpdGVtLmFyZWFJZCA9PT0gYXJlYUlkKSB7CiAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHNldE9rKGZhbHNlLCBhcnIpOwogIH0KfSAvLyDllYblk4HliJfooagKCmV4cG9ydCB2YXIgaW5pdENvbW1vZGl0eSA9IGZ1bmN0aW9uIGluaXRDb21tb2RpdHkoKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciByZXEgPSBuZXcgQ29tbW9kaXR5TGlzdFJlcXVlc3QoKTsKICAgIHZhciBtZXRhZGF0YSA9IHsKICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgfTsKICAgIGNtc1NlcnZpY2UuZ2V0Q29tbW9kaXR5TGlzdChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgIGlmICghZXJyKSB7CiAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgIHZhciBsaXN0ID0gcmVzcC5nZXRDb21tb2RpdGllc0xpc3QoKTsKICAgICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICB2YXIganNvbiA9IHsKICAgICAgICAgICAgdmFsdWU6IGl0ZW0uZ2V0SWQoKSwKICAgICAgICAgICAgbGFiZWw6IGl0ZW0uZ2V0VGl0bGUoKSwKICAgICAgICAgICAgbmFtZTogaXRlbS5nZXROYW1lKCksCiAgICAgICAgICAgIGFyZWFJZDogaXRlbS5nZXRBcmVhSWQoKSwKICAgICAgICAgICAgYXBwSWQ6IGl0ZW0uZ2V0QXBwSWQoKQogICAgICAgICAgfTsKICAgICAgICAgIGFyci5wdXNoKGpzb24pOwogICAgICAgIH0pOwogICAgICAgIHJlc29sdmUoYXJyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9KTsKICB9KTsKfTsKZXhwb3J0IGZ1bmN0aW9uIGdldENvbW1vZGl0eUxpc3QoKSB7CiAgdmFyIHN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImNvbW1vZGl0eUFyciIpOwoKICBpZiAoaXNFbXB0eShzdHIpKSB7CiAgICBpbml0Q29tbW9kaXR5KCkudGhlbihmdW5jdGlvbiAocikgewogICAgICBjb25zb2xlLmxvZygiaW5pdCBDb21tb2RpdHkgbGlzdDogIiArIHIpOwogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJjb21tb2RpdHlBcnIiLCBKU09OLnN0cmluZ2lmeShyKSk7CiAgICB9KTsKICB9IGVsc2UgewogICAgdmFyIGFyciA9IEpTT04ucGFyc2Uoc3RyKTsKICAgIHJldHVybiBzZXRPayhmYWxzZSwgYXJyKTsKICB9Cn0gLy8g5p+l6K+iaXDnmoTlnLDlnYAKCmV4cG9ydCBmdW5jdGlvbiBpcFRvQWRkcmVzcyhpcCwgY2FsbGJhY2spIHsKICB2YXIgcmVxID0gbmV3IElwTG9jYXRpb25SZXF1ZXN0KCk7CiAgcmVxLnNldElwKGlwKTsKICB2YXIgbWV0YWRhdGEgPSB7CiAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgfTsKICBjbXNTZXJ2aWNlLmdldElwTG9jYXRpb24ocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgaWYgKCFlcnIpIHsKICAgICAgY2FsbGJhY2socmVzcCk7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgfQogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRBcnJOYW1lKGFyciwgaWQpIHsKICB2YXIgbGFiZWwgPSAiIjsKICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKHR5cGVvZiBpdGVtLnZhbHVlICE9PSAidW5kZWZpbmVkIikgewogICAgICBpZiAoaWQudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIGxhYmVsOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRBcHBOYW1lKGFyciwgaWQpIHsKICB2YXIgbGFiZWwgPSAiIjsKICB2YXIgb3MgPSAwOwogIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAodHlwZW9mIGl0ZW0udmFsdWUgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGlmIChpZC50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgICAgb3MgPSBpdGVtLm9zOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIHsKICAgIGxhYmVsOiBsYWJlbCwKICAgIG9zOiBvcwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIHNldE9rKGlzU2hvd0FsbCwgYXJyKSB7CiAgaWYgKGlzU2hvd0FsbCkgewogICAgYXJyLnVuc2hpZnQoewogICAgICBsYWJlbDogIuWFqOmDqCIsCiAgICAgIHZhbHVlOiAwCiAgICB9KTsKICB9CgogIHJldHVybiBhcnI7Cn0gLy8g5piv5ZCmCgpleHBvcnQgZnVuY3Rpb24gZ2V0Qm9vbCgpIHsKICByZXR1cm4gW3sKICAgIHZhbHVlOiB0cnVlLAogICAgbGFiZWw6ICfmmK8nCiAgfSwgewogICAgdmFsdWU6IGZhbHNlLAogICAgbGFiZWw6ICflkKYnCiAgfV07Cn0gLy8g5Li75pKt562J57qnCgpleHBvcnQgZnVuY3Rpb24gZ2V0QW5jaG9yTGV2ZWwoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICflt67lirInCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+S4reetiScKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn6Imv5aW9JwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICfkvJjnp4AnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICB2YXIgbGFiZWwgPSAiIjsKCiAgICBpZiAoa2V5ID09PSAwKSB7CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH0KCiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOWuoeaguOeKtuaAgQoKZXhwb3J0IGZ1bmN0aW9uIGdldFJldmlld1N0YXR1cyhrZXkpIHsKICB2YXIgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+acquWuoeaguCcKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5bey5o+Q5Lqk5a6h5qC4JwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICflrqHmoLjkuK0nCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+S4jemAmui/hycKICB9LCB7CiAgICB2YWx1ZTogNSwKICAgIGxhYmVsOiAn5a6h5qC46YCa6L+HJwogIH0sIHsKICAgIHZhbHVlOiA2LAogICAgbGFiZWw6ICflgZznlKgnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICB2YXIgbGFiZWwgPSAiIjsKCiAgICBpZiAoa2V5ID09PSAwKSB7CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH0KCiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vCgpleHBvcnQgZnVuY3Rpb24gZ2V0UmVwb3J0ZWRUeXBlcygpIHsKICByZXR1cm4gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+eUqOaItycKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5Li75pKtJwogIH1dOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRSZXBvcnRlZFRpbWUoKSB7CiAgcmV0dXJuIFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfku4rlpKknCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+acgOi/kTPlpKknCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+acgOi/kTflpKknCiAgfV07Cn0gLy8g5Zyo57q/54q25oCBCgpleHBvcnQgZnVuY3Rpb24gZ2V0T25saW5lU3RhdHVzKGtleSkgewogIHZhciBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn56a757q/JwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICflnKjnur8nCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+W/mee6vycKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn5Yu/5omwJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCkgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDov53op4TlnLrmma8KCmV4cG9ydCBmdW5jdGlvbiBnZXRWaW9sYXRpb25TY2VuZSgpIHsKICByZXR1cm4gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+inhumikemAmuivnScKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn6IGK5aSpJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICfkuLvmkq3otYTmlpknCiAgfV07Cn0gLy8g5bCB56aB57G75Z6LCgpleHBvcnQgZnVuY3Rpb24gZ2V0QmxvY2tTdGF0dXMoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn5LiN5bCB56aBJwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICflj5HpgIHorablkYonCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+Wwgeemgei0puWPtycKICB9LCB7CiAgICB2YWx1ZTogNCwKICAgIGxhYmVsOiAn5bCB56aB5omA5pyJJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOWwgeemgeaXtuW4uAoKZXhwb3J0IGZ1bmN0aW9uIGdldEJsb2NrVGltZShrZXkpIHsKICB2YXIgYXJyID0gW3sKICAgIHZhbHVlOiA1ICogNjAsCiAgICBsYWJlbDogJzXliIbpkp8nCiAgfSwgewogICAgdmFsdWU6IDMwICogNjAsCiAgICBsYWJlbDogJzMw5YiG6ZKfJwogIH0sIHsKICAgIHZhbHVlOiA2MCAqIDYwLAogICAgbGFiZWw6ICcx5bCP5pe2JwogIH0sIHsKICAgIHZhbHVlOiAzICogNjAgKiA2MCwKICAgIGxhYmVsOiAnM+Wwj+aXticKICB9LCB7CiAgICB2YWx1ZTogMjQgKiA2MCAqIDYwLAogICAgbGFiZWw6ICcx5aSpJwogIH0sIHsKICAgIHZhbHVlOiA3ICogMjQgKiA2MCAqIDYwLAogICAgbGFiZWw6ICc35aSpJwogIH0sIHsKICAgIHZhbHVlOiAzMCAqIDI0ICogNjAgKiA2MCwKICAgIGxhYmVsOiAnMeaciCcKICB9LCB7CiAgICB2YWx1ZTogMzY1ICogMjQgKiA2MCAqIDYwLAogICAgbGFiZWw6ICcx5bm0JwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOaUr+S7mOeKtuaAgQoKZXhwb3J0IGZ1bmN0aW9uIGdldFBheVN0YXR1cyhrZXkpIHsKICB2YXIgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+W+heaUr+S7mCcKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5bey5pSv5LuYJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICflt7Llj5bmtognCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+W3sumAgOasvicKICB9LCB7CiAgICB2YWx1ZTogNCwKICAgIGxhYmVsOiAn5bey6LaF5pe2JwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOiBjOS4muexu+WeiwoKZXhwb3J0IGZ1bmN0aW9uIGdldE9jY3VwYXRpb25UeXBlKGtleSkgewogIHZhciBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAnSVQv5LqS6IGU572RL+mAmuS/oScKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5a2m55SfJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICfmlofljJYv6Im65pyvJwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICflvbHop4Yv5aix5LmQJwogIH0sIHsKICAgIHZhbHVlOiA1LAogICAgbGFiZWw6ICfph5Hono0nCiAgfSwgewogICAgdmFsdWU6IDYsCiAgICBsYWJlbDogJ+WMu+iNry/lgaXlurcnCiAgfSwgewogICAgdmFsdWU6IDcsCiAgICBsYWJlbDogJ+W3peS4mi/liLbpgKDkuJonCiAgfSwgewogICAgdmFsdWU6IDgsCiAgICBsYWJlbDogJ+WqkuS9ky/lhazlhbMnCiAgfSwgewogICAgdmFsdWU6IDksCiAgICBsYWJlbDogJ+mbtuWUricKICB9LCB7CiAgICB2YWx1ZTogMTAsCiAgICBsYWJlbDogJ+aVmeiCsi/np5HnoJQnCiAgfSwgewogICAgdmFsdWU6IDExLAogICAgbGFiZWw6ICflhbbku5YnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICB2YXIgbGFiZWwgPSAiIjsKCiAgICBpZiAoa2V5ID09PSAwKSB7CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH0KCiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOa2iOaBr+exu+WeiwoKZXhwb3J0IGZ1bmN0aW9uIGdldE1lc3NhZ2VUeXBlKGtleSkgewogIHZhciBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn5paH5pysJwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICfnpLzniaknCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+WFheWAvCcKICB9LCB7CiAgICB2YWx1ZTogNCwKICAgIGxhYmVsOiAn5Zu+54mHJwogIH0sIHsKICAgIHZhbHVlOiA1LAogICAgbGFiZWw6ICfop4bpopEnCiAgfSwgewogICAgdmFsdWU6IDYsCiAgICBsYWJlbDogJ+ivremfsycKICB9LCB7CiAgICB2YWx1ZTogNywKICAgIGxhYmVsOiAn5L2N572uJwogIH0sIHsKICAgIHZhbHVlOiA4LAogICAgbGFiZWw6ICfomZrmi5/op4bpopEnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICB2YXIgbGFiZWwgPSAiIjsKICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g5Yqo5L2c57G75Z6LCgpleHBvcnQgZnVuY3Rpb24gZ2V0QWN0aW9uVHlwZShrZXkpIHsKICB2YXIgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+aLkue7neaOpeWQrCcKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5pyq5o6l5ZCsJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICfpgJror53nu5PmnZ8nCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+WFs+azqCcKICB9LCB7CiAgICB2YWx1ZTogNSwKICAgIGxhYmVsOiAn5YWF5YC8JwogIH0sIHsKICAgIHZhbHVlOiA2LAogICAgbGFiZWw6ICflj5HpgIHnpLzniaknCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICB2YXIgbGFiZWwgPSAiIjsKICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g6YCa6K+d5Y+R6LW357G75Z6LCgpleHBvcnQgZnVuY3Rpb24gZ2V0Q2FsbFR5cGUoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfnlKjmiLflkbzlj6snCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+S4u+aSreWRvOWPqycKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn55So5oi3QWnlkbzlj6snCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+S4u+aSrUFp5ZG85Y+rJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOe7k+adn+exu+WeiwoKZXhwb3J0IGZ1bmN0aW9uIGdldEhhbmdUeXBlKGtleSkgewogIHZhciBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn55So5oi35oyC5patJwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICfkuLvmkq3mjILmlq0nCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+aXoOS6uuaOpeWQrCcKICB9LCB7CiAgICB2YWx1ZTogNCwKICAgIGxhYmVsOiAn5a6i5oi356uv572R57uc5LiN5aW9JwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICfkvZnpop3kuI3otrMnCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+ezu+e7n+mUmeivrycKICB9LCB7CiAgICB2YWx1ZTogNCwKICAgIGxhYmVsOiAn5aOw572R6LaF5pe2JwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICflo7DnvZHplJnor68nCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICB2YXIgbGFiZWwgPSAiIjsKCiAgICBpZiAoa2V5ID09PSAwKSB7CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH0KCiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOe7k+adn+exu+WeiwoKZXhwb3J0IGZ1bmN0aW9uIGdldENhbGxTdGF0dXMoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfnrYnlvoXmjqXpgJonCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+mAmuivneS4rScKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn6YCa6K+d57uT5p2fJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOWunuS9k+exu+WeiwoKZXhwb3J0IGZ1bmN0aW9uIGdldEVudGl0eVR5cGUoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfmma7pgJrnlKjmiLcnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+S4u+aSrScKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn566h55CG5ZGYJwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICflhazkvJonCiAgfSwgewogICAgdmFsdWU6IDUsCiAgICBsYWJlbDogJ+iuoumYheiuouWNlScKICB9LCB7CiAgICB2YWx1ZTogNiwKICAgIGxhYmVsOiAn5YWF5YC86K6i5Y2VJwogIH0sIHsKICAgIHZhbHVlOiA3LAogICAgbGFiZWw6ICfnpLznianorrDlvZUnCiAgfSwgewogICAgdmFsdWU6IDgsCiAgICBsYWJlbDogJ1ZJUOiusOW9lScKICB9LCB7CiAgICB2YWx1ZTogOSwKICAgIGxhYmVsOiAn6YCa6K+d6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMCwKICAgIGxhYmVsOiAn562+5Yiw6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMSwKICAgIGxhYmVsOiAn5Li+5oql6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMiwKICAgIGxhYmVsOiAn5Zyo57q/6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMywKICAgIGxhYmVsOiAn57uT566X6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxNCwKICAgIGxhYmVsOiAn5aWW5oOp6K6w5b2VJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOeUqOaIt+exu+WeiwoKZXhwb3J0IGZ1bmN0aW9uIGdldFRyYWRlclR5cGUoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfnlKjmiLcnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+S4u+aSrScKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn566h55CG5ZGYJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOWunuS9k+exu+WeiwoKZXhwb3J0IGZ1bmN0aW9uIGdldFNvdXJjZVR5cGUoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiA1LAogICAgbGFiZWw6ICforqLpmIXorqLljZUnCiAgfSwgewogICAgdmFsdWU6IDYsCiAgICBsYWJlbDogJ+WFheWAvOiuouWNlScKICB9LCB7CiAgICB2YWx1ZTogNywKICAgIGxhYmVsOiAn56S854mp6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiA4LAogICAgbGFiZWw6ICdWSVDorrDlvZUnCiAgfSwgewogICAgdmFsdWU6IDksCiAgICBsYWJlbDogJ+mAmuivneiusOW9lScKICB9LCB7CiAgICB2YWx1ZTogMTAsCiAgICBsYWJlbDogJ+etvuWIsOiusOW9lScKICB9LCB7CiAgICB2YWx1ZTogMTEsCiAgICBsYWJlbDogJ+S4vuaKpeiusOW9lScKICB9LCB7CiAgICB2YWx1ZTogMTIsCiAgICBsYWJlbDogJ+WcqOe6v+iusOW9lScKICB9LCB7CiAgICB2YWx1ZTogMTMsCiAgICBsYWJlbDogJ+e7k+eul+iusOW9lScKICB9LCB7CiAgICB2YWx1ZTogMTQsCiAgICBsYWJlbDogJ+WlluaDqeiusOW9lScKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIHZhciBsYWJlbCA9ICIiOwogICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDnu5PnrpfnirbmgIEKCmV4cG9ydCBmdW5jdGlvbiBnZXRTZXR0bGVTdGF0dXMoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfpooTnu5PnrpcnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+W3suWJlOmZpCcKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn57uT566X5a6M5oiQJwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICfmkqTplIDnu5PnrpcnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICB2YXIgbGFiZWwgPSAiIjsKICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g5pSv5LuY5pa55byPCgpleHBvcnQgZnVuY3Rpb24gZ2V0UGF5VHlwZShrZXkpIHsKICB2YXIgYXJyID0gW3sKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICdHb29nbGUnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ0FwcGxlJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICdYZW5kaXQnCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ1BheWVyTWF4JwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCkgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDns7vnu5/nsbvlnosKCmV4cG9ydCBmdW5jdGlvbiBnZXRPc1R5cGUoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICdBbmRyb2lkJwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICdJb3MnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICB2YXIgbGFiZWwgPSAiIjsKCiAgICBpZiAoa2V5ID09PSAwKSB7CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH0KCiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOaWh+S7tuexu+WeiwoKZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVUeXBlKGtleSkgewogIHZhciBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn5Zu+54mHJwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICfop4bpopEnCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+mfs+mikScKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIHZhciBsYWJlbCA9ICIiOwoKICAgIGlmIChrZXkgPT09IDApIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfQoKICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g5oCn5Yir57G75Z6LCgpleHBvcnQgZnVuY3Rpb24gZ2V0R2VuZGVyVHlwZShrZXkpIHsKICB2YXIgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+eUtycKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5aWzJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgdmFyIGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCB8fCBrZXkgPT09ICcwJykgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDml7bpl7Tpl7TpmpQKCmV4cG9ydCBmdW5jdGlvbiBnZXRTdGF0SW50ZXJ2YWwoa2V5KSB7CiAgdmFyIGFyciA9IFt7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAnMeWwj+aXticKICB9LCB7CiAgICB2YWx1ZTogNCwKICAgIGxhYmVsOiAnMeWkqScKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIHZhciBsYWJlbCA9ICIiOwoKICAgIGlmIChrZXkgPT09IDApIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfQoKICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0="},null]}
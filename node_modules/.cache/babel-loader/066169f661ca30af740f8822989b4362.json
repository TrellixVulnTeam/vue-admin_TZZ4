{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/anchor.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/anchor.js","mtime":1630312262553},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiKTsKCnZhciBfYXN5bmNUb0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciIpKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIikpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSk7Cgp2YXIgX2Nvb2tpZSA9IHJlcXVpcmUoIkAvdXRpbHMvY29va2llIik7Cgp2YXIgX2Vycm9yID0gcmVxdWlyZSgiQC91dGlscy9lcnJvciIpOwoKdmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBfZGVmYXVsdChkZXBzKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBfZGVmYXVsdCk7CiAgICB0aGlzLnByb3RvID0gZGVwcy5wcm90bzsKICAgIHRoaXMuY2xpZW50ID0gbmV3IGRlcHMucHJvdG8uQ21zQ2xpZW50KHByb2Nlc3MuZW52LlZVRV9BUFBfR1JQQ19QUk9YWV9VUkksIG51bGwsIG51bGwpOwogIH0KICAvKioKICAgKiDmn6Xor6LkuLvmkq3liJfooagKICAgKiBAcGFyYW0gcGFnZQogICAqIEBwYXJhbSBwYXJhbQogICAqIEBwYXJhbSBjYWxsYmFjawogICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fQogICAqLwoKCiAgKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoX2RlZmF1bHQsIFt7CiAgICBrZXk6ICJnZXRBbmNob3JMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0QW5jaG9yTGlzdCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLkFuY2hvckxpc3RSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICByZXEuc2V0UGFnZU5vKHBhcmFtLnBhZ2UuY3VycmVudFBhZ2UpOwogICAgICAgICAgICAgICAgcmVxLnNldFBhZ2VTaXplKHBhcmFtLnBhZ2UucGFnZVNpemUpOwogICAgICAgICAgICAgICAgcmVxLnNldEFuY2hvcklkKHBhcmFtLmFuY2hvcklkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRHdWlsZElkKHBhcmFtLmd1aWxkSWQpOwogICAgICAgICAgICAgICAgcmVxLnNldEJsb2NrU3RhdHVzKHBhcmFtLmJsb2NrU3RhdHVzKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRPbmxpbmVTdGF0dXMocGFyYW0ub25saW5lU3RhdHVzKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRDcmVhdGVkU3RhcnQocGFyYW0uY3JlYXRlZFN0YXJ0KTsKICAgICAgICAgICAgICAgIHJlcS5zZXRDcmVhdGVkRW5kKHBhcmFtLmNyZWF0ZWRFbmQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6ICgwLCBfY29va2llLmdldFRva2VuKSgpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuZ2V0QW5jaG9yTGlzdChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgKDAsIF9lcnJvci5lcnJvcikoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0QW5jaG9yTGlzdChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBbmNob3JMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRBbmNob3JMaXN0OwogICAgfSgpCiAgICAvKioKICAgICAqIOabtOaWsOS4u+aSreWfuuehgOS/oeaBrwogICAgICovCgogIH0sIHsKICAgIGtleTogInVwZGF0ZUFuY2hvckJhc2ljIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBkYXRlQW5jaG9yQmFzaWMgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IHBhcmFtLnN0cnVjdDsKICAgICAgICAgICAgICAgIHJlcS5zZXRJZChwYXJhbS5pZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0R3VpbGRJZChwYXJhbS5ndWlsZElkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRMZXZlbChwYXJhbS5sZXZlbCk7CiAgICAgICAgICAgICAgICByZXEuc2V0Tm90ZShwYXJhbS5ub3RlKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiAoMCwgX2Nvb2tpZS5nZXRUb2tlbikoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LnVwZGF0ZUFuY2hvckJhc2ljKHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAoMCwgX2Vycm9yLmVycm9yKShlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdXBkYXRlQW5jaG9yQmFzaWMoX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZUFuY2hvckJhc2ljLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGRhdGVBbmNob3JCYXNpYzsKICAgIH0oKQogIH1dKTsKICByZXR1cm4gX2RlZmF1bHQ7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/anchor.js"],"names":["deps","proto","client","CmsClient","process","env","VUE_APP_GRPC_PROXY_URI","param","callback","req","AnchorListRequest","setPageNo","page","currentPage","setPageSize","pageSize","setAnchorId","anchorId","setAreaId","areaId","setGuildId","guildId","setBlockStatus","blockStatus","setOnlineStatus","onlineStatus","setCreatedStart","createdStart","setCreatedEnd","createdEnd","metadata","getAnchorList","err","resp","struct","setId","id","setLevel","level","setNote","note","updateAnchorBasic"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;;AAGI,oBAAaA,IAAb,EAAmB;AAAA;AACf,SAAKC,KAAL,GAAaD,IAAI,CAACC,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIF,IAAI,CAACC,KAAL,CAAWE,SAAf,CAAyBC,OAAO,CAACC,GAAR,CAAYC,sBAArC,EAA6D,IAA7D,EAAmE,IAAnE,CAAd;AACH;AAGD;;;;;;;;;;;;kHAOsBC,K,EAAOC,Q;;;;;;AACnBC,gBAAAA,G,GAAM,IAAI,KAAKR,KAAL,CAAWS,iBAAf,E;AACZD,gBAAAA,GAAG,CAACE,SAAJ,CAAcJ,KAAK,CAACK,IAAN,CAAWC,WAAzB;AACAJ,gBAAAA,GAAG,CAACK,WAAJ,CAAgBP,KAAK,CAACK,IAAN,CAAWG,QAA3B;AACAN,gBAAAA,GAAG,CAACO,WAAJ,CAAgBT,KAAK,CAACU,QAAtB;AACAR,gBAAAA,GAAG,CAACS,SAAJ,CAAcX,KAAK,CAACY,MAApB;AACAV,gBAAAA,GAAG,CAACW,UAAJ,CAAeb,KAAK,CAACc,OAArB;AACAZ,gBAAAA,GAAG,CAACa,cAAJ,CAAmBf,KAAK,CAACgB,WAAzB;AACAd,gBAAAA,GAAG,CAACe,eAAJ,CAAoBjB,KAAK,CAACkB,YAA1B;AACAhB,gBAAAA,GAAG,CAACiB,eAAJ,CAAoBnB,KAAK,CAACoB,YAA1B;AACAlB,gBAAAA,GAAG,CAACmB,aAAJ,CAAkBrB,KAAK,CAACsB,UAAxB;AAEMC,gBAAAA,Q,GAAW;AAAC,2BAAS;AAAV,iB;AACjB,qBAAK5B,MAAL,CAAY6B,aAAZ,CAA0BtB,GAA1B,EAA+BqB,QAA/B,EAAyC,UAACE,GAAD,EAAMC,IAAN,EAAe;AACpD,sBAAI,CAACD,GAAL,EAAU;AACNxB,oBAAAA,QAAQ,CAACyB,IAAD,CAAR;AACH,mBAFD,MAEO;AACH,sCAAMD,GAAN;AACH;AACJ,iBAND;;;;;;;;;;;;;;;;AAUJ;;;;;;;uHAGyBzB,K,EAAOC,Q;;;;;;AACtBC,gBAAAA,G,GAAMF,KAAK,CAAC2B,M;AAClBzB,gBAAAA,GAAG,CAAC0B,KAAJ,CAAU5B,KAAK,CAAC6B,EAAhB;AACA3B,gBAAAA,GAAG,CAACW,UAAJ,CAAeb,KAAK,CAACc,OAArB;AACAZ,gBAAAA,GAAG,CAACS,SAAJ,CAAcX,KAAK,CAACY,MAApB;AACAV,gBAAAA,GAAG,CAAC4B,QAAJ,CAAa9B,KAAK,CAAC+B,KAAnB;AACA7B,gBAAAA,GAAG,CAAC8B,OAAJ,CAAYhC,KAAK,CAACiC,IAAlB;AAEMV,gBAAAA,Q,GAAW;AAAC,2BAAS;AAAV,iB;AACjB,qBAAK5B,MAAL,CAAYuC,iBAAZ,CAA8BhC,GAA9B,EAAmCqB,QAAnC,EAA6C,UAACE,GAAD,EAAMC,IAAN,EAAe;AACxD,sBAAI,CAACD,GAAL,EAAU;AACNxB,oBAAAA,QAAQ,CAACyB,IAAD,CAAR;AACH,mBAFD,MAEO;AACH,sCAAMD,GAAN;AACH;AACJ,iBAND","sourcesContent":["import {setToken, getToken} from '@/utils/cookie'\nimport { error } from '@/utils/error'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(process.env.VUE_APP_GRPC_PROXY_URI, null, null)\n    }\n\n\n    /**\n     * 查询主播列表\n     * @param page\n     * @param param\n     * @param callback\n     * @returns {Promise<void>}\n     */\n    async getAnchorList ( param, callback) {\n        const req = new this.proto.AnchorListRequest()\n        req.setPageNo(param.page.currentPage)\n        req.setPageSize(param.page.pageSize)\n        req.setAnchorId(param.anchorId)\n        req.setAreaId(param.areaId)\n        req.setGuildId(param.guildId)\n        req.setBlockStatus(param.blockStatus)\n        req.setOnlineStatus(param.onlineStatus)\n        req.setCreatedStart(param.createdStart)\n        req.setCreatedEnd(param.createdEnd)\n\n        const metadata = {'token': getToken()};\n        this.client.getAnchorList(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n\n    /**\n     * 更新主播基础信息\n     */\n    async updateAnchorBasic (param, callback) {\n        const req = param.struct\n        req.setId(param.id)\n        req.setGuildId(param.guildId)\n        req.setAreaId(param.areaId)\n        req.setLevel(param.level)\n        req.setNote(param.note)\n\n        const metadata = {'token': getToken()};\n        this.client.updateAnchorBasic(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n}\n"]}]}
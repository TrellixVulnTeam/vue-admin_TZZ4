{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/anchor.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/anchor.js","mtime":1630666329502},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHsgc2V0VG9rZW4sIGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9jb29raWUnOwppbXBvcnQgeyBlcnJvciB9IGZyb20gJ0AvdXRpbHMvZXJyb3InOwoKdmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBfZGVmYXVsdChkZXBzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2RlZmF1bHQpOwoKICAgIHRoaXMucHJvdG8gPSBkZXBzLnByb3RvOwogICAgdGhpcy5jbGllbnQgPSBuZXcgZGVwcy5wcm90by5DbXNDbGllbnQocHJvY2Vzcy5lbnYuVlVFX0FQUF9HUlBDX1BST1hZX1VSSSwgbnVsbCwgbnVsbCk7CiAgfQogIC8qKgogICAqIOafpeivouS4u+aSreWIl+ihqAogICAqIEBwYXJhbSBwYWdlCiAgICogQHBhcmFtIHBhcmFtCiAgICogQHBhcmFtIGNhbGxiYWNrCiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59CiAgICovCgoKICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7CiAgICBrZXk6ICJnZXRBbmNob3JMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0QW5jaG9yTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5BbmNob3JMaXN0UmVxdWVzdCgpOwogICAgICAgICAgICAgICAgcmVxLnNldFBhZ2VObyhwYXJhbS5wYWdlLmN1cnJlbnRQYWdlKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRQYWdlU2l6ZShwYXJhbS5wYWdlLnBhZ2VTaXplKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBbmNob3JJZChwYXJhbS5hbmNob3JJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0R3VpbGRJZChwYXJhbS5ndWlsZElkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRCbG9ja1N0YXR1cyhwYXJhbS5ibG9ja1N0YXR1cyk7CiAgICAgICAgICAgICAgICByZXEuc2V0T25saW5lU3RhdHVzKHBhcmFtLm9ubGluZVN0YXR1cyk7CiAgICAgICAgICAgICAgICByZXEuc2V0Q3JlYXRlZFN0YXJ0KHBhcmFtLmNyZWF0ZWRTdGFydCk7CiAgICAgICAgICAgICAgICByZXEuc2V0Q3JlYXRlZEVuZChwYXJhbS5jcmVhdGVkRW5kKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuZ2V0QW5jaG9yTGlzdChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0QW5jaG9yTGlzdChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBbmNob3JMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRBbmNob3JMaXN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0QW5jaG9yRnVsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEFuY2hvckZ1bGwgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5BbmNob3JGdWxsUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgcmVxLnNldEFuY2hvcklkKHBhcmFtLmlkKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuZ2V0QW5jaG9yRnVsbChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEFuY2hvckZ1bGwoX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX2dldEFuY2hvckZ1bGwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEFuY2hvckZ1bGw7CiAgICB9KCkKICAgIC8qKgogICAgICog5pu05paw5Li75pKt5Z+656GA5L+h5oGvCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidXBkYXRlQW5jaG9yQmFzaWMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF91cGRhdGVBbmNob3JCYXNpYyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IHBhcmFtLnN0cnVjdDsKICAgICAgICAgICAgICAgIHJlcS5zZXRJZChwYXJhbS5pZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0R3VpbGRJZChwYXJhbS5ndWlsZElkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRMZXZlbChwYXJhbS5sZXZlbCk7CiAgICAgICAgICAgICAgICByZXEuc2V0Tm90ZShwYXJhbS5ub3RlKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQudXBkYXRlQW5jaG9yQmFzaWMocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGRhdGVBbmNob3JCYXNpYyhfeDUsIF94NikgewogICAgICAgIHJldHVybiBfdXBkYXRlQW5jaG9yQmFzaWMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVwZGF0ZUFuY2hvckJhc2ljOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gX2RlZmF1bHQ7Cn0oKTsKCmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/anchor.js"],"names":["setToken","getToken","error","deps","proto","client","CmsClient","process","env","VUE_APP_GRPC_PROXY_URI","param","callback","req","AnchorListRequest","setPageNo","page","currentPage","setPageSize","pageSize","setAnchorId","anchorId","setAreaId","areaId","setGuildId","guildId","setBlockStatus","blockStatus","setOnlineStatus","onlineStatus","setCreatedStart","createdStart","setCreatedEnd","createdEnd","metadata","getAnchorList","err","resp","AnchorFullRequest","id","getAnchorFull","struct","setId","setLevel","level","setNote","note","updateAnchorBasic"],"mappings":"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","sourcesContent":["import {setToken, getToken} from '@/utils/cookie'\nimport { error } from '@/utils/error'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(process.env.VUE_APP_GRPC_PROXY_URI, null, null)\n    }\n\n\n    /**\n     * 查询主播列表\n     * @param page\n     * @param param\n     * @param callback\n     * @returns {Promise<void>}\n     */\n    async getAnchorList ( param, callback) {\n        const req = new this.proto.AnchorListRequest()\n        req.setPageNo(param.page.currentPage)\n        req.setPageSize(param.page.pageSize)\n        req.setAnchorId(param.anchorId)\n        req.setAreaId(param.areaId)\n        req.setGuildId(param.guildId)\n        req.setBlockStatus(param.blockStatus)\n        req.setOnlineStatus(param.onlineStatus)\n        req.setCreatedStart(param.createdStart)\n        req.setCreatedEnd(param.createdEnd)\n\n        const metadata = {'token': getToken()};\n        this.client.getAnchorList(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n\n    async getAnchorFull ( param, callback) {\n        const req = new this.proto.AnchorFullRequest()\n        req.setAnchorId(param.id)\n\n        const metadata = {'token': getToken()};\n        this.client.getAnchorFull(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n\n    /**\n     * 更新主播基础信息\n     */\n    async updateAnchorBasic (param, callback) {\n        const req = param.struct\n        req.setId(param.id)\n        req.setGuildId(param.guildId)\n        req.setAreaId(param.areaId)\n        req.setLevel(param.level)\n        req.setNote(param.note)\n\n        const metadata = {'token': getToken()};\n        this.client.updateAnchorBasic(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n}\n"]}]}
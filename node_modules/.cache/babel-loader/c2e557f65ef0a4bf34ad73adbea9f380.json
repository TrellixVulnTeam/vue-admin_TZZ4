{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/user.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/user.js","mtime":1630480656885},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHsgc2V0VG9rZW4sIGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9jb29raWUnOwppbXBvcnQgeyBlcnJvciB9IGZyb20gJ0AvdXRpbHMvZXJyb3InOwoKdmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBfZGVmYXVsdChkZXBzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2RlZmF1bHQpOwoKICAgIHRoaXMucHJvdG8gPSBkZXBzLnByb3RvOwogICAgdGhpcy5jbGllbnQgPSBuZXcgZGVwcy5wcm90by5DbXNDbGllbnQocHJvY2Vzcy5lbnYuVlVFX0FQUF9HUlBDX1BST1hZX1VSSSwgbnVsbCwgbnVsbCk7CiAgfQogIC8qKgogICAqIOafpeivoueUqOaIt+WIl+ihqAogICAqIEBwYXJhbSBwYXJhbQogICAqIEBwYXJhbSBjYWxsYmFjawogICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbewogICAga2V5OiAiZ2V0VXNlckxpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRVc2VyTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5Vc2VyTGlzdFJlcXVlc3QoKTsgLy8gcmVxLnNldFBhZ2VObyhwYXJhbS5wYWdlLmN1cnJlbnRQYWdlKQogICAgICAgICAgICAgICAgLy8gcmVxLnNldFBhZ2VTaXplKHBhcmFtLnBhZ2UucGFnZVNpemUpCiAgICAgICAgICAgICAgICAvLyByZXEuc2V0VXNlcklkKHBhcmFtLnVzZXJJZCkKICAgICAgICAgICAgICAgIC8vIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKQogICAgICAgICAgICAgICAgLy8gcmVxLnNldE5pY2tuYW1lKHBhcmFtLm5pY2tuYW1lKQogICAgICAgICAgICAgICAgLy8gcmVxLnNldFZpcE9ubHkocGFyYW0udmlwT25seSkKICAgICAgICAgICAgICAgIC8vIHJlcS5zZXREZXBvc2l0T25seShwYXJhbS5kZXBvc2l0T25seSkKICAgICAgICAgICAgICAgIC8vIHJlcS5zZXRNaW5CYWxhbmNlKHBhcmFtLm1pbkJhbGFuY2UpCiAgICAgICAgICAgICAgICAvLyByZXEuc2V0Q3JlYXRlZFN0YXJ0KHBhcmFtLmNyZWF0ZWRTdGFydCkKICAgICAgICAgICAgICAgIC8vIHJlcS5zZXRDcmVhdGVkRW5kKHBhcmFtLmNyZWF0ZWRFbmQpCgogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5nZXRVc2VyTGlzdChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRVc2VyTGlzdChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9nZXRVc2VyTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0VXNlckxpc3Q7CiAgICB9KCkKICAgIC8qKgogICAgICog5YWF5YC8CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYWRqdXN0QmFsYW5jZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2FkanVzdEJhbGFuY2UgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5BZGp1c3RCYWxhbmNlUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgcmVxLnNldEVudGl0eVR5cGUodGhpcy5wcm90by5FbnRpdHlUeXBlLkVOVElUWVVTRVIpOwogICAgICAgICAgICAgICAgcmVxLnNldEVudGl0eUlkKHBhcmFtLmlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBbW91bnQocGFyYW0uYW1vdW50KTsKICAgICAgICAgICAgICAgIHJlcS5zZXRTZW5kTm90aWZ5KHBhcmFtLnNlbmROb3RpZnkpOwogICAgICAgICAgICAgICAgcmVxLnNldERlc2MocGFyYW0uZGVzYyk7CiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgJ3Rva2VuJzogZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LmFkanVzdEJhbGFuY2UocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBhZGp1c3RCYWxhbmNlKF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9hZGp1c3RCYWxhbmNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhZGp1c3RCYWxhbmNlOwogICAgfSgpCiAgICAvKioKICAgICAqIOabtOaWsOeUqOaItwogICAgICovCgogIH0sIHsKICAgIGtleTogInVwZGF0ZVVzZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF91cGRhdGVVc2VyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVxID0gbmV3IHRoaXMucHJvdG8uVXNlcigpOwogICAgICAgICAgICAgICAgcmVxLnNldElkKHBhcmFtLmlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRWaXBFbmRBdChwYXJhbS52aXBFbmRBdC5nZXRUaW1lKCkgLyAxMDAwKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQudXBkYXRlVXNlcihyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVVzZXIoX3g1LCBfeDYpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZVVzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVwZGF0ZVVzZXI7CiAgICB9KCkKICB9XSk7CgogIHJldHVybiBfZGVmYXVsdDsKfSgpOwoKZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/user.js"],"names":["setToken","getToken","error","deps","proto","client","CmsClient","process","env","VUE_APP_GRPC_PROXY_URI","param","callback","req","UserListRequest","metadata","getUserList","err","resp","AdjustBalanceRequest","setEntityType","EntityType","ENTITYUSER","setEntityId","id","setAmount","amount","setSendNotify","sendNotify","setDesc","desc","adjustBalance","User","setId","setVipEndAt","vipEndAt","getTime","updateUser"],"mappings":";;;;AAAA,SAAQA,QAAR,EAAkBC,QAAlB,QAAiC,gBAAjC;AACA,SAASC,KAAT,QAAsB,eAAtB;;;AAGI,oBAAaC,IAAb,EAAmB;AAAA;;AACf,SAAKC,KAAL,GAAaD,IAAI,CAACC,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIF,IAAI,CAACC,KAAL,CAAWE,SAAf,CAAyBC,OAAO,CAACC,GAAR,CAAYC,sBAArC,EAA6D,IAA7D,EAAmE,IAAnE,CAAd;AACH;AAED;;;;;;;;;;;kGAMmBC,K,EAAOC,Q;;;;;;AAClBC,gBAAAA,G,GAAM,IAAI,KAAKR,KAAL,CAAWS,eAAf,E,EACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEMC,gBAAAA,Q,GAAW;AAAC,2BAASb,QAAQ;AAAlB,iB;AACjB,qBAAKI,MAAL,CAAYU,WAAZ,CAAwBH,GAAxB,EAA6BE,QAA7B,EAAuC,UAACE,GAAD,EAAMC,IAAN,EAAe;AAClD,sBAAI,CAACD,GAAL,EAAU;AACNL,oBAAAA,QAAQ,CAACM,IAAD,CAAR;AACH,mBAFD,MAEO;AACHf,oBAAAA,KAAK,CAACc,GAAD,CAAL;AACH;AACJ,iBAND;;;;;;;;;;;;;;;;AAUJ;;;;;;;qGAGsBN,K,EAAOC,Q;;;;;;AACnBC,gBAAAA,G,GAAM,IAAI,KAAKR,KAAL,CAAWc,oBAAf,E;AACZN,gBAAAA,GAAG,CAACO,aAAJ,CAAkB,KAAKf,KAAL,CAAWgB,UAAX,CAAsBC,UAAxC;AACAT,gBAAAA,GAAG,CAACU,WAAJ,CAAgBZ,KAAK,CAACa,EAAtB;AACAX,gBAAAA,GAAG,CAACY,SAAJ,CAAcd,KAAK,CAACe,MAApB;AACAb,gBAAAA,GAAG,CAACc,aAAJ,CAAkBhB,KAAK,CAACiB,UAAxB;AACAf,gBAAAA,GAAG,CAACgB,OAAJ,CAAYlB,KAAK,CAACmB,IAAlB;AAEMf,gBAAAA,Q,GAAW;AAAC,2BAASb,QAAQ;AAAlB,iB;AACjB,qBAAKI,MAAL,CAAYyB,aAAZ,CAA0BlB,GAA1B,EAA+BE,QAA/B,EAAyC,UAACE,GAAD,EAAMC,IAAN,EAAe;AACpD,sBAAI,CAACD,GAAL,EAAU;AACNL,oBAAAA,QAAQ,CAACM,IAAD,CAAR;AACH,mBAFD,MAEO;AACHf,oBAAAA,KAAK,CAACc,GAAD,CAAL;AACH;AACJ,iBAND;;;;;;;;;;;;;;;;AAUJ;;;;;;;kGAGkBN,K,EAAOC,Q;;;;;;AACfC,gBAAAA,G,GAAM,IAAI,KAAKR,KAAL,CAAW2B,IAAf,E;AACZnB,gBAAAA,GAAG,CAACoB,KAAJ,CAAUtB,KAAK,CAACa,EAAhB;AACAX,gBAAAA,GAAG,CAACqB,WAAJ,CAAgBvB,KAAK,CAACwB,QAAN,CAAeC,OAAf,KAAyB,IAAzC;AAEMrB,gBAAAA,Q,GAAW;AAAC,2BAASb,QAAQ;AAAlB,iB;AACjB,qBAAKI,MAAL,CAAY+B,UAAZ,CAAuBxB,GAAvB,EAA4BE,QAA5B,EAAsC,UAACE,GAAD,EAAMC,IAAN,EAAe;AACjD,sBAAI,CAACD,GAAL,EAAU;AACNL,oBAAAA,QAAQ,CAACM,IAAD,CAAR;AACH,mBAFD,MAEO;AACHf,oBAAAA,KAAK,CAACc,GAAD,CAAL;AACH;AACJ,iBAND","sourcesContent":["import {setToken, getToken} from '@/utils/cookie'\nimport { error } from '@/utils/error'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(process.env.VUE_APP_GRPC_PROXY_URI, null, null)\n    }\n\n    /**\n     * 查询用户列表\n     * @param param\n     * @param callback\n     * @returns {Promise<void>}\n     */\n    async getUserList (param, callback) {\n        let req = new this.proto.UserListRequest();\n        // req.setPageNo(param.page.currentPage)\n        // req.setPageSize(param.page.pageSize)\n        // req.setUserId(param.userId)\n        // req.setAreaId(param.areaId)\n        // req.setNickname(param.nickname)\n        // req.setVipOnly(param.vipOnly)\n        // req.setDepositOnly(param.depositOnly)\n        // req.setMinBalance(param.minBalance)\n        // req.setCreatedStart(param.createdStart)\n        // req.setCreatedEnd(param.createdEnd)\n\n        const metadata = {'token': getToken()};\n        this.client.getUserList(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n\n    /**\n     * 充值\n     */\n    async adjustBalance ( param, callback) {\n        const req = new this.proto.AdjustBalanceRequest()\n        req.setEntityType(this.proto.EntityType.ENTITYUSER)\n        req.setEntityId(param.id)\n        req.setAmount(param.amount)\n        req.setSendNotify(param.sendNotify)\n        req.setDesc(param.desc)\n\n        const metadata = {'token': getToken()};\n        this.client.adjustBalance(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n\n    /**\n     * 更新用户\n     */\n    async updateUser (param, callback) {\n        const req = new this.proto.User()\n        req.setId(param.id)\n        req.setVipEndAt(param.vipEndAt.getTime()/1000)\n\n        const metadata = {'token': getToken()};\n        this.client.updateUser(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n}\n"]}]}
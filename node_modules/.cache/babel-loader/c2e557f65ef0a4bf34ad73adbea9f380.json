{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/user.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/user.js","mtime":1630482586906},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHsgc2V0VG9rZW4sIGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9jb29raWUnOwppbXBvcnQgeyBlcnJvciB9IGZyb20gJ0AvdXRpbHMvZXJyb3InOwoKdmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBfZGVmYXVsdChkZXBzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2RlZmF1bHQpOwoKICAgIHRoaXMucHJvdG8gPSBkZXBzLnByb3RvOwogICAgdGhpcy5jbGllbnQgPSBuZXcgZGVwcy5wcm90by5DbXNDbGllbnQocHJvY2Vzcy5lbnYuVlVFX0FQUF9HUlBDX1BST1hZX1VSSSwgbnVsbCwgbnVsbCk7CiAgfQogIC8qKgogICAqIOafpeivoueUqOaIt+WIl+ihqAogICAqIEBwYXJhbSBwYXJhbQogICAqIEBwYXJhbSBjYWxsYmFjawogICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbewogICAga2V5OiAiZ2V0VXNlckxpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRVc2VyTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5Vc2VyTGlzdFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRQYWdlTm8ocGFyYW0ucGFnZS5jdXJyZW50UGFnZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0UGFnZVNpemUocGFyYW0ucGFnZS5wYWdlU2l6ZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0VXNlcklkKHBhcmFtLnVzZXJJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0Tmlja25hbWUocGFyYW0ubmlja25hbWUpOwogICAgICAgICAgICAgICAgcmVxLnNldFZpcE9ubHkocGFyYW0udmlwT25seSk7CiAgICAgICAgICAgICAgICByZXEuc2V0RGVwb3NpdE9ubHkocGFyYW0uZGVwb3NpdE9ubHkpOwogICAgICAgICAgICAgICAgcmVxLnNldE1pbkJhbGFuY2UocGFyYW0ubWluQmFsYW5jZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0Q3JlYXRlZFN0YXJ0KHBhcmFtLmNyZWF0ZWRTdGFydCk7CiAgICAgICAgICAgICAgICByZXEuc2V0Q3JlYXRlZEVuZChwYXJhbS5jcmVhdGVkRW5kKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuZ2V0VXNlckxpc3QocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldFVzZXJMaXN0KF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX2dldFVzZXJMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRVc2VyTGlzdDsKICAgIH0oKQogICAgLyoqCiAgICAgKiDlhYXlgLwKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhZGp1c3RCYWxhbmNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYWRqdXN0QmFsYW5jZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocGFyYW0sIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcSwgbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLkFkanVzdEJhbGFuY2VSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICByZXEuc2V0RW50aXR5VHlwZSh0aGlzLnByb3RvLkVudGl0eVR5cGUuRU5USVRZVVNFUik7CiAgICAgICAgICAgICAgICByZXEuc2V0RW50aXR5SWQocGFyYW0uaWQpOwogICAgICAgICAgICAgICAgcmVxLnNldEFtb3VudChwYXJhbS5hbW91bnQpOwogICAgICAgICAgICAgICAgcmVxLnNldFNlbmROb3RpZnkocGFyYW0uc2VuZE5vdGlmeSk7CiAgICAgICAgICAgICAgICByZXEuc2V0RGVzYyhwYXJhbS5kZXNjKTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuYWRqdXN0QmFsYW5jZShyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGFkanVzdEJhbGFuY2UoX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX2FkanVzdEJhbGFuY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFkanVzdEJhbGFuY2U7CiAgICB9KCkKICAgIC8qKgogICAgICog5pu05paw55So5oi3CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidXBkYXRlVXNlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwZGF0ZVVzZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5Vc2VyKCk7CiAgICAgICAgICAgICAgICByZXEuc2V0SWQocGFyYW0uaWQpOwogICAgICAgICAgICAgICAgcmVxLnNldFZpcEVuZEF0KHBhcmFtLnZpcEVuZEF0LmdldFRpbWUoKSAvIDEwMDApOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC51cGRhdGVVc2VyKHJlcSwgbWV0YWRhdGEsIGZ1bmN0aW9uIChlcnIsIHJlc3ApIHsKICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdXBkYXRlVXNlcihfeDUsIF94NikgewogICAgICAgIHJldHVybiBfdXBkYXRlVXNlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBkYXRlVXNlcjsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIF9kZWZhdWx0Owp9KCk7CgpleHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/user.js"],"names":["setToken","getToken","error","deps","proto","client","CmsClient","process","env","VUE_APP_GRPC_PROXY_URI","param","callback","req","UserListRequest","setPageNo","page","currentPage","setPageSize","pageSize","setUserId","userId","setAreaId","areaId","setNickname","nickname","setVipOnly","vipOnly","setDepositOnly","depositOnly","setMinBalance","minBalance","setCreatedStart","createdStart","setCreatedEnd","createdEnd","metadata","getUserList","err","resp","AdjustBalanceRequest","setEntityType","EntityType","ENTITYUSER","setEntityId","id","setAmount","amount","setSendNotify","sendNotify","setDesc","desc","adjustBalance","User","setId","setVipEndAt","vipEndAt","getTime","updateUser"],"mappings":";;;;AAAA,SAAQA,QAAR,EAAkBC,QAAlB,QAAiC,gBAAjC;AACA,SAASC,KAAT,QAAsB,eAAtB;;;AAGI,oBAAaC,IAAb,EAAmB;AAAA;;AACf,SAAKC,KAAL,GAAaD,IAAI,CAACC,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIF,IAAI,CAACC,KAAL,CAAWE,SAAf,CAAyBC,OAAO,CAACC,GAAR,CAAYC,sBAArC,EAA6D,IAA7D,EAAmE,IAAnE,CAAd;AACH;AAED;;;;;;;;;;;kGAMmBC,K,EAAOC,Q;;;;;;AAClBC,gBAAAA,G,GAAM,IAAI,KAAKR,KAAL,CAAWS,eAAf,E;AACVD,gBAAAA,GAAG,CAACE,SAAJ,CAAcJ,KAAK,CAACK,IAAN,CAAWC,WAAzB;AACAJ,gBAAAA,GAAG,CAACK,WAAJ,CAAgBP,KAAK,CAACK,IAAN,CAAWG,QAA3B;AACAN,gBAAAA,GAAG,CAACO,SAAJ,CAAcT,KAAK,CAACU,MAApB;AACAR,gBAAAA,GAAG,CAACS,SAAJ,CAAcX,KAAK,CAACY,MAApB;AACAV,gBAAAA,GAAG,CAACW,WAAJ,CAAgBb,KAAK,CAACc,QAAtB;AACAZ,gBAAAA,GAAG,CAACa,UAAJ,CAAef,KAAK,CAACgB,OAArB;AACAd,gBAAAA,GAAG,CAACe,cAAJ,CAAmBjB,KAAK,CAACkB,WAAzB;AACAhB,gBAAAA,GAAG,CAACiB,aAAJ,CAAkBnB,KAAK,CAACoB,UAAxB;AACAlB,gBAAAA,GAAG,CAACmB,eAAJ,CAAoBrB,KAAK,CAACsB,YAA1B;AACApB,gBAAAA,GAAG,CAACqB,aAAJ,CAAkBvB,KAAK,CAACwB,UAAxB;AAEMC,gBAAAA,Q,GAAW;AAAC,2BAASlC,QAAQ;AAAlB,iB;AACjB,qBAAKI,MAAL,CAAY+B,WAAZ,CAAwBxB,GAAxB,EAA6BuB,QAA7B,EAAuC,UAACE,GAAD,EAAMC,IAAN,EAAe;AAClD,sBAAI,CAACD,GAAL,EAAU;AACN1B,oBAAAA,QAAQ,CAAC2B,IAAD,CAAR;AACH,mBAFD,MAEO;AACHpC,oBAAAA,KAAK,CAACmC,GAAD,CAAL;AACH;AACJ,iBAND;;;;;;;;;;;;;;;;AAUJ;;;;;;;qGAGsB3B,K,EAAOC,Q;;;;;;AACnBC,gBAAAA,G,GAAM,IAAI,KAAKR,KAAL,CAAWmC,oBAAf,E;AACZ3B,gBAAAA,GAAG,CAAC4B,aAAJ,CAAkB,KAAKpC,KAAL,CAAWqC,UAAX,CAAsBC,UAAxC;AACA9B,gBAAAA,GAAG,CAAC+B,WAAJ,CAAgBjC,KAAK,CAACkC,EAAtB;AACAhC,gBAAAA,GAAG,CAACiC,SAAJ,CAAcnC,KAAK,CAACoC,MAApB;AACAlC,gBAAAA,GAAG,CAACmC,aAAJ,CAAkBrC,KAAK,CAACsC,UAAxB;AACApC,gBAAAA,GAAG,CAACqC,OAAJ,CAAYvC,KAAK,CAACwC,IAAlB;AAEMf,gBAAAA,Q,GAAW;AAAC,2BAASlC,QAAQ;AAAlB,iB;AACjB,qBAAKI,MAAL,CAAY8C,aAAZ,CAA0BvC,GAA1B,EAA+BuB,QAA/B,EAAyC,UAACE,GAAD,EAAMC,IAAN,EAAe;AACpD,sBAAI,CAACD,GAAL,EAAU;AACN1B,oBAAAA,QAAQ,CAAC2B,IAAD,CAAR;AACH,mBAFD,MAEO;AACHpC,oBAAAA,KAAK,CAACmC,GAAD,CAAL;AACH;AACJ,iBAND;;;;;;;;;;;;;;;;AAUJ;;;;;;;kGAGkB3B,K,EAAOC,Q;;;;;;AACfC,gBAAAA,G,GAAM,IAAI,KAAKR,KAAL,CAAWgD,IAAf,E;AACZxC,gBAAAA,GAAG,CAACyC,KAAJ,CAAU3C,KAAK,CAACkC,EAAhB;AACAhC,gBAAAA,GAAG,CAAC0C,WAAJ,CAAgB5C,KAAK,CAAC6C,QAAN,CAAeC,OAAf,KAAyB,IAAzC;AAEMrB,gBAAAA,Q,GAAW;AAAC,2BAASlC,QAAQ;AAAlB,iB;AACjB,qBAAKI,MAAL,CAAYoD,UAAZ,CAAuB7C,GAAvB,EAA4BuB,QAA5B,EAAsC,UAACE,GAAD,EAAMC,IAAN,EAAe;AACjD,sBAAI,CAACD,GAAL,EAAU;AACN1B,oBAAAA,QAAQ,CAAC2B,IAAD,CAAR;AACH,mBAFD,MAEO;AACHpC,oBAAAA,KAAK,CAACmC,GAAD,CAAL;AACH;AACJ,iBAND","sourcesContent":["import {setToken, getToken} from '@/utils/cookie'\nimport { error } from '@/utils/error'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(process.env.VUE_APP_GRPC_PROXY_URI, null, null)\n    }\n\n    /**\n     * 查询用户列表\n     * @param param\n     * @param callback\n     * @returns {Promise<void>}\n     */\n    async getUserList (param, callback) {\n        let req = new this.proto.UserListRequest();\n        req.setPageNo(param.page.currentPage)\n        req.setPageSize(param.page.pageSize)\n        req.setUserId(param.userId)\n        req.setAreaId(param.areaId)\n        req.setNickname(param.nickname)\n        req.setVipOnly(param.vipOnly)\n        req.setDepositOnly(param.depositOnly)\n        req.setMinBalance(param.minBalance)\n        req.setCreatedStart(param.createdStart)\n        req.setCreatedEnd(param.createdEnd)\n\n        const metadata = {'token': getToken()};\n        this.client.getUserList(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n\n    /**\n     * 充值\n     */\n    async adjustBalance ( param, callback) {\n        const req = new this.proto.AdjustBalanceRequest()\n        req.setEntityType(this.proto.EntityType.ENTITYUSER)\n        req.setEntityId(param.id)\n        req.setAmount(param.amount)\n        req.setSendNotify(param.sendNotify)\n        req.setDesc(param.desc)\n\n        const metadata = {'token': getToken()};\n        this.client.adjustBalance(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n\n    /**\n     * 更新用户\n     */\n    async updateUser (param, callback) {\n        const req = new this.proto.User()\n        req.setId(param.id)\n        req.setVipEndAt(param.vipEndAt.getTime()/1000)\n\n        const metadata = {'token': getToken()};\n        this.client.updateUser(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n}\n"]}]}
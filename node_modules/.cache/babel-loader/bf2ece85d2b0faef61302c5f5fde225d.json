{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/call.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/call.js","mtime":1634556796297},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgc2V0VG9rZW4sIGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9jb29raWUnOwppbXBvcnQgeyBlcnJvciB9IGZyb20gJ0AvdXRpbHMvZXJyb3InOwoKdmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBfZGVmYXVsdChkZXBzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2RlZmF1bHQpOwoKICAgIHRoaXMucHJvdG8gPSBkZXBzLnByb3RvOwogICAgdGhpcy5jbGllbnQgPSBuZXcgZGVwcy5wcm90by5DbXNDbGllbnQocHJvY2Vzcy5lbnYuVlVFX0FQUF9HUlBDX1BST1hZX1VSSSwgbnVsbCwgbnVsbCk7CiAgfQogIC8qKgogICAqIOiOt+WPlumAmuivneiusOW9leWIl+ihqAogICAqIEBwYXJhbSBwYXJhbQogICAqIEBwYXJhbSBjYWxsYmFjawogICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbewogICAga2V5OiAiZ2V0Q2FsbExpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRDYWxsTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbSwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcmVxLCBtZXRhZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5DYWxsTGlzdFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRQYWdlTm8ocGFyYW0ucGFnZS5jdXJyZW50UGFnZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0UGFnZVNpemUocGFyYW0ucGFnZS5wYWdlU2l6ZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXJlYUlkKHBhcmFtLmFyZWFJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QXBwSWQocGFyYW0uYXBwSWQpOwogICAgICAgICAgICAgICAgcmVxLnNldFVzZXJJZChwYXJhbS51c2VySWQpOwogICAgICAgICAgICAgICAgcmVxLnNldEFuY2hvcklkKHBhcmFtLmFuY2hvcklkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRDYWxsVHlwZShwYXJhbS5jYWxsVHlwZSk7CiAgICAgICAgICAgICAgICByZXEuc2V0SGFuZ1R5cGUocGFyYW0uaGFuZ1R5cGUpOwogICAgICAgICAgICAgICAgcmVxLnNldFN0YXR1cyhwYXJhbS5zdGF0dXMpOwogICAgICAgICAgICAgICAgcmVxLnNldE1pbkR1cmF0aW9uKHBhcmFtLm1pbkR1cmF0aW9uKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRNYXhEdXJhdGlvbihwYXJhbS5tYXhEdXJhdGlvbik7CiAgICAgICAgICAgICAgICByZXEuc2V0Q3JlYXRlZFN0YXJ0KHBhcmFtLmNyZWF0ZWRTdGFydFVpbnQpOwogICAgICAgICAgICAgICAgcmVxLnNldENyZWF0ZWRFbmQocGFyYW0uY3JlYXRlZEVuZFVpbnQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICd0b2tlbic6IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5nZXRDYWxsTGlzdChyZXEsIG1ldGFkYXRhLCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0Q2FsbExpc3QoX3gsIF94MikgewogICAgICAgIHJldHVybiBfZ2V0Q2FsbExpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldENhbGxMaXN0OwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gX2RlZmF1bHQ7Cn0oKTsKCmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/call.js"],"names":["setToken","getToken","error","deps","proto","client","CmsClient","process","env","VUE_APP_GRPC_PROXY_URI","param","callback","req","CallListRequest","setPageNo","page","currentPage","setPageSize","pageSize","setAreaId","areaId","setAppId","appId","setUserId","userId","setAnchorId","anchorId","setCallType","callType","setHangType","hangType","setStatus","status","setMinDuration","minDuration","setMaxDuration","maxDuration","setCreatedStart","createdStartUint","setCreatedEnd","createdEndUint","metadata","getCallList","err","resp"],"mappings":";;;;AAAA,SAAQA,QAAR,EAAkBC,QAAlB,QAAiC,gBAAjC;AACA,SAASC,KAAT,QAAsB,eAAtB;;;AAGI,oBAAaC,IAAb,EAAmB;AAAA;;AACf,SAAKC,KAAL,GAAaD,IAAI,CAACC,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIF,IAAI,CAACC,KAAL,CAAWE,SAAf,CAAyBC,OAAO,CAACC,GAAR,CAAYC,sBAArC,EAA6D,IAA7D,EAAmE,IAAnE,CAAd;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;;;;iFACI,iBAAmBC,KAAnB,EAA0BC,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,gBAAAA,GADR,GACc,IAAI,KAAKR,KAAL,CAAWS,eAAf,EADd;AAEID,gBAAAA,GAAG,CAACE,SAAJ,CAAcJ,KAAK,CAACK,IAAN,CAAWC,WAAzB;AACAJ,gBAAAA,GAAG,CAACK,WAAJ,CAAgBP,KAAK,CAACK,IAAN,CAAWG,QAA3B;AACAN,gBAAAA,GAAG,CAACO,SAAJ,CAAcT,KAAK,CAACU,MAApB;AACAR,gBAAAA,GAAG,CAACS,QAAJ,CAAaX,KAAK,CAACY,KAAnB;AACAV,gBAAAA,GAAG,CAACW,SAAJ,CAAcb,KAAK,CAACc,MAApB;AACAZ,gBAAAA,GAAG,CAACa,WAAJ,CAAgBf,KAAK,CAACgB,QAAtB;AACAd,gBAAAA,GAAG,CAACe,WAAJ,CAAgBjB,KAAK,CAACkB,QAAtB;AACAhB,gBAAAA,GAAG,CAACiB,WAAJ,CAAgBnB,KAAK,CAACoB,QAAtB;AACAlB,gBAAAA,GAAG,CAACmB,SAAJ,CAAcrB,KAAK,CAACsB,MAApB;AACApB,gBAAAA,GAAG,CAACqB,cAAJ,CAAmBvB,KAAK,CAACwB,WAAzB;AACAtB,gBAAAA,GAAG,CAACuB,cAAJ,CAAmBzB,KAAK,CAAC0B,WAAzB;AACAxB,gBAAAA,GAAG,CAACyB,eAAJ,CAAoB3B,KAAK,CAAC4B,gBAA1B;AACA1B,gBAAAA,GAAG,CAAC2B,aAAJ,CAAkB7B,KAAK,CAAC8B,cAAxB;AAEMC,gBAAAA,QAhBV,GAgBqB;AAAC,2BAASxC,QAAQ;AAAlB,iBAhBrB;AAiBI,qBAAKI,MAAL,CAAYqC,WAAZ,CAAwB9B,GAAxB,EAA6B6B,QAA7B,EAAuC,UAACE,GAAD,EAAMC,IAAN,EAAe;AAClD,sBAAI,CAACD,GAAL,EAAU;AACNhC,oBAAAA,QAAQ,CAACiC,IAAD,CAAR;AACH,mBAFD,MAEO;AACH1C,oBAAAA,KAAK,CAACyC,GAAD,CAAL;AACH;AACJ,iBAND;;AAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O","sourcesContent":["import {setToken, getToken} from '@/utils/cookie'\nimport { error } from '@/utils/error'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(process.env.VUE_APP_GRPC_PROXY_URI, null, null)\n    }\n\n    /**\n     * 获取通话记录列表\n     * @param param\n     * @param callback\n     * @returns {Promise<void>}\n     */\n    async getCallList (param, callback) {\n        let req = new this.proto.CallListRequest();\n        req.setPageNo(param.page.currentPage)\n        req.setPageSize(param.page.pageSize)\n        req.setAreaId(param.areaId)\n        req.setAppId(param.appId)\n        req.setUserId(param.userId)\n        req.setAnchorId(param.anchorId)\n        req.setCallType(param.callType)\n        req.setHangType(param.hangType)\n        req.setStatus(param.status)\n        req.setMinDuration(param.minDuration)\n        req.setMaxDuration(param.maxDuration)\n        req.setCreatedStart(param.createdStartUint)\n        req.setCreatedEnd(param.createdEndUint)\n\n        const metadata = {'token': getToken()};\n        this.client.getCallList(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n}\n"]}]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/config/dialog/version.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/views/manage/config/dialog/version.vue","mtime":1634111099599},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1634111095606},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1634111096162}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJy4uLy4uLy4uLy4uL2NvbXBvbmVudHMvUGFnaW5hdGlvbic7CmltcG9ydCB7IGdldEFwcExpc3QsIGdldEFwcE5hbWUsIGdldEFyZWFMaXN0LCBnZXRNZXNzYWdlVHlwZSB9IGZyb20gIkAvdXRpbHMvZGlzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVGFibGUnLAogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2luYXRpb246IFBhZ2luYXRpb24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgc2VhcmNoOiB7CiAgICAgICAgYXBwSWQ6IHVuZGVmaW5lZCwKICAgICAgICBwYWdlOiB7CiAgICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICAgIHBhZ2VTaXplOiAxMAogICAgICAgIH0KICAgICAgfSwKICAgICAgdGFibGVEYXRhOiB7fSwKICAgICAgdG90YWw6IDAsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhcmVhRGF0YTogZ2V0QXJlYUxpc3QodHJ1ZSksCiAgICAgIGFwcExpc3Q6IGdldEFwcExpc3QoKSwKICAgICAgbWVzc2FnZVR5cGVMaXN0OiBnZXRNZXNzYWdlVHlwZSgpCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdChyb3cpIHsKICAgICAgdGhpcy5zZWFyY2guYXBwSWQgPSByb3cuaWQ7CiAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogICAgLy8g6I635Y+W5pWw5o2u5YiX6KGoCiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyICR0aGlzID0gdGhpczsKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJHNlcnZpY2UuY29uZmlnLmdldFZlcnNpb25MaXN0KHRoaXMuc2VhcmNoLCBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgdmFyIGxpc3QgPSByZXN1bHQuZ2V0VmVyc2lvbnNMaXN0KCk7CiAgICAgICAgdmFyIGRhdGEgPSBbXTsKICAgICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICB2YXIganNvbiA9IHsKICAgICAgICAgICAgImlkIjogaXRlbS5nZXRJZCgpLAogICAgICAgICAgICAiYXBwSWQiOiBpdGVtLmdldEFwcElkKCksCiAgICAgICAgICAgICJhcHAiOiBnZXRBcHBOYW1lKCR0aGlzLmFwcExpc3QsIGl0ZW0uZ2V0QXBwSWQoKSksCiAgICAgICAgICAgICJvc1R5cGUiOiBpdGVtLmdldE9zVHlwZSgpLAogICAgICAgICAgICAiY29kZSI6IGl0ZW0uZ2V0Q29kZSgpLAogICAgICAgICAgICAibmFtZSI6IGl0ZW0uZ2V0TmFtZSgpLAogICAgICAgICAgICAiZW5hYmxlIjogaXRlbS5nZXRFbmFibGUoKSwKICAgICAgICAgICAgImluUmV2aWV3IjogaXRlbS5nZXRJblJldmlldygpLAogICAgICAgICAgICAibm90ZSI6IGl0ZW0uZ2V0Tm90ZSgpLAogICAgICAgICAgICAiZWRpdGFibGUiOiBmYWxzZQogICAgICAgICAgfTsKICAgICAgICAgIGRhdGEucHVzaChqc29uKTsKICAgICAgICB9KTsKICAgICAgICAkdGhpcy50b3RhbCA9IGxpc3QubGVuZ3RoOwogICAgICAgICR0aGlzLnRhYmxlRGF0YSA9IGRhdGE7CiAgICAgICAgJHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGb3JtOiBmdW5jdGlvbiByZXNldEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgICBjbG9zZURpYWxvZzogZnVuY3Rpb24gY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLnJlc2V0Rm9ybSgpOwogICAgICB0aGlzLiRlbWl0KCdmZXRjaERhdGEnKTsKICAgIH0sCiAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZShyb3cpIHsKICAgICAgcm93LmVuYWJsZSA9IHRydWU7CiAgICB9LAogICAgY2FuY2VsRWRpdDogZnVuY3Rpb24gY2FuY2VsRWRpdChyb3cpIHsKICAgICAgcm93LmhvYmJ5ID0gcm93Lm9yaWdpbmFsSG9iYnk7CiAgICAgIHJvdy5lZGl0YWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGNvbmZpcm1FZGl0OiBmdW5jdGlvbiBjb25maXJtRWRpdChyb3cpIHsKICAgICAgcm93LmVkaXRhYmxlID0gZmFsc2U7CiAgICAgIHJvdy5vcmlnaW5hbEhvYmJ5ID0gcm93LmhvYmJ5OwogICAgICB2YXIgJHRoaXMgPSB0aGlzOwogICAgICB0aGlzLiRzZXJ2aWNlLmNvbmZpZy5zYXZlVmVyc2lvbihyb3csIGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAkdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv53lrZjmiJDlip8hIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICR0aGlzLiRtZXNzYWdlLmVycm9yKCLkv53lrZjlpLHotKUhIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["version.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <el-dialog title=\"版本\" :visible.sync=\"dialogVisible\" append-to-body width=\"80%\" :before-close=\"closeDialog\">\n        <div class=\"table-classic-wrapper dialog-list\">\n            <!-- 表格栏 -->\n            <el-table\n                ref=\"multipleTable\"\n                v-loading=\"listLoading\"\n                :data=\"tableData\"\n                tooltip-effect=\"dark\"\n                style=\"width: 100%\"\n                size=\"medium\"\n            >\n                <el-table-column prop=\"app\" label=\"来源App\" align=\"center\" width=\"120\">\n                    <template scope=\"scope\">\n                        <div slot=\"reference\">\n                            {{ scope.row.app.label }}\n                            <span v-if=\"scope.row.app.os === 1\">\n                            <i class=\"icon-android-fill\"></i>\n                        </span>\n                            <span v-else>\n                            <i class=\"icon-pingguo\"></i>\n                        </span>\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"code\" label=\"版本号\" align=\"center\" width=\"90\" />\n                <el-table-column prop=\"name\" label=\"版本名称\" align=\"center\" width=\"200\">\n                    <template slot-scope=\"{row}\">\n                        <template v-if=\"row.editable\">\n                            <el-input v-model=\"row.name\" style=\"width: 140px;\"/>\n                            <el-button class=\"cancel-btn\" type=\"text\" @click=\"cancelEdit(row)\">取消</el-button>\n                        </template>\n                        <span v-else>{{ row.name }}</span>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"enable\" label=\"是否启用\" align=\"center\" width=\"90\">\n                    <template slot-scope=\"scope\">\n                        <el-switch v-model=\"scope.row.enable\" disabled/>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"inReview\" label=\"是否审核中\" align=\"center\" width=\"90\">\n                    <template slot-scope=\"scope\">\n                        <el-switch v-model=\"scope.row.inReview\" disabled/>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"note\" label=\"备注\" align=\"center\" >\n                    <template slot-scope=\"{row}\">\n                        <template v-if=\"row.editable\">\n                            <el-input v-model=\"row.note\" style=\"width: 420px;\"/>\n                            <el-button class=\"cancel-btn\" type=\"text\" @click=\"cancelEdit(row)\">取消</el-button>\n                        </template>\n                        <span v-else>{{ row.note }}</span>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"createdAt\" label=\"创建时间\" align=\"center\" width=\"200\"/>\n                <el-table-column label=\"操作\" align=\"center\" width=\"150\">\n                    <template slot-scope=\"{row}\">\n                        <el-button type=\"text\" @click=\"enable(row)\">启用</el-button>\n                        <el-button v-if=\"row.editable\" type=\"text\" size=\"small\" @click=\"confirmEdit(row)\">保存\n                        </el-button>\n                        <el-button v-else type=\"text\" size=\"small\" @click=\"row.editable = !row.editable\">编辑\n                        </el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <!-- 分页栏 -->\n            <Pagination :total=\"total\" :page.sync=\"search.page.currentPage\" :limit.sync=\"search.page.pageSize\"\n                        @pagination=\"fetchData\"/>\n        </div>\n    </el-dialog>\n</template>\n\n<script>\nimport Pagination from '../../../../components/Pagination'\nimport {getAppList, getAppName, getAreaList, getMessageType} from \"@/utils/dist\";\n\nexport default {\n    name: 'Table',\n    components: { Pagination },\n    data() {\n        return {\n            listLoading: true,\n            search: {\n                appId: undefined,\n                page:{\n                    currentPage: 1,\n                    pageSize: 10\n                }\n            },\n            tableData: {},\n            total: 0,\n            dialogVisible: false,\n            areaData: getAreaList(true),\n            appList: getAppList(),\n            messageTypeList: getMessageType()\n        }\n    },\n    methods: {\n        init(row){\n            this.search.appId = row.id;\n            this.fetchData()\n        },\n        // 获取数据列表\n        fetchData() {\n            const $this = this\n            this.listLoading = true\n            this.$service.config.getVersionList(this.search, function (result){\n                const list = result.getVersionsList();\n                const data = []\n                list.forEach((item, index)=>{\n                    const json = {\n                        \"id\" : item.getId(),\n                        \"appId\" : item.getAppId(),\n                        \"app\" : getAppName($this.appList, item.getAppId()),\n                        \"osType\" : item.getOsType(),\n                        \"code\" : item.getCode(),\n                        \"name\" : item.getName(),\n                        \"enable\" : item.getEnable(),\n                        \"inReview\" : item.getInReview(),\n                        \"note\" : item.getNote(),\n                        \"editable\" : false\n                    }\n                    data.push(json)\n                })\n                $this.total = list.length\n                $this.tableData = data\n                $this.listLoading = false\n            })\n        },\n        resetForm() {\n            this.$refs.ruleForm.resetFields()\n        },\n        closeDialog() {\n            this.dialogVisible = false\n            this.resetForm()\n            this.$emit('fetchData');\n        },\n        enable(row){\n            row.enable = true\n        },\n        cancelEdit(row) {\n            row.hobby = row.originalHobby\n            row.editable = false\n        },\n        confirmEdit(row) {\n            row.editable = false\n            row.originalHobby = row.hobby\n            const $this = this\n            this.$service.config.saveVersion(row, function (result){\n                if (result) {\n                    $this.$message.success(\"保存成功!\")\n                } else {\n                    $this.$message.error(\"保存失败!\")\n                }\n            });\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n.dialog-list{\n    padding: 20px;\n}\n\n</style>\n"],"sourceRoot":"src/views/manage/config/dialog"}]}
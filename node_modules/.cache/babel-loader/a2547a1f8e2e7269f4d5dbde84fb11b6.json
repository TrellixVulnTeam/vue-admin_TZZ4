{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/src/utils/dist.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/utils/dist.js","mtime":1635751450603},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmluaXREYXRhID0gaW5pdERhdGE7CmV4cG9ydHMuZ2V0Q3VycmVudFVzZXJBcmVhSWQgPSBnZXRDdXJyZW50VXNlckFyZWFJZDsKZXhwb3J0cy5nZXRDdXJyZW50VXNlck1vZHVsZXMgPSBnZXRDdXJyZW50VXNlck1vZHVsZXM7CmV4cG9ydHMuZ2V0QXJlYUxpc3QgPSBnZXRBcmVhTGlzdDsKZXhwb3J0cy5nZXRHdWlsZExpc3QgPSBnZXRHdWlsZExpc3Q7CmV4cG9ydHMuZ2V0R3VpbGRMaXN0QnlBcmVhSWQgPSBnZXRHdWlsZExpc3RCeUFyZWFJZDsKZXhwb3J0cy5nZXRBcHBMaXN0ID0gZ2V0QXBwTGlzdDsKZXhwb3J0cy5nZXRBcHBMaXN0QnlBcmVhSWQgPSBnZXRBcHBMaXN0QnlBcmVhSWQ7CmV4cG9ydHMuZ2V0UGF5Q2hhbm5lbExpc3QgPSBnZXRQYXlDaGFubmVsTGlzdDsKZXhwb3J0cy5nZXRDb21tb2RpdHlMaXN0ID0gZ2V0Q29tbW9kaXR5TGlzdDsKZXhwb3J0cy5pcFRvQWRkcmVzcyA9IGlwVG9BZGRyZXNzOwpleHBvcnRzLmdldEFyck5hbWUgPSBnZXRBcnJOYW1lOwpleHBvcnRzLmdldEFwcE5hbWUgPSBnZXRBcHBOYW1lOwpleHBvcnRzLnNldE9rID0gc2V0T2s7CmV4cG9ydHMuZ2V0Qm9vbCA9IGdldEJvb2w7CmV4cG9ydHMuZ2V0QW5jaG9yTGV2ZWwgPSBnZXRBbmNob3JMZXZlbDsKZXhwb3J0cy5nZXRSZXZpZXdTdGF0dXMgPSBnZXRSZXZpZXdTdGF0dXM7CmV4cG9ydHMuZ2V0UmVwb3J0ZWRUeXBlcyA9IGdldFJlcG9ydGVkVHlwZXM7CmV4cG9ydHMuZ2V0UmVwb3J0ZWRUaW1lID0gZ2V0UmVwb3J0ZWRUaW1lOwpleHBvcnRzLmdldE9ubGluZVN0YXR1cyA9IGdldE9ubGluZVN0YXR1czsKZXhwb3J0cy5nZXRWaW9sYXRpb25TY2VuZSA9IGdldFZpb2xhdGlvblNjZW5lOwpleHBvcnRzLmdldEJsb2NrU3RhdHVzID0gZ2V0QmxvY2tTdGF0dXM7CmV4cG9ydHMuZ2V0QmxvY2tUaW1lID0gZ2V0QmxvY2tUaW1lOwpleHBvcnRzLmdldFBheVN0YXR1cyA9IGdldFBheVN0YXR1czsKZXhwb3J0cy5nZXRPY2N1cGF0aW9uVHlwZSA9IGdldE9jY3VwYXRpb25UeXBlOwpleHBvcnRzLmdldE1lc3NhZ2VUeXBlID0gZ2V0TWVzc2FnZVR5cGU7CmV4cG9ydHMuZ2V0TWVzc2FnZVR5cGVSZWplY3QgPSBnZXRNZXNzYWdlVHlwZVJlamVjdDsKZXhwb3J0cy5nZXRBY3Rpb25UeXBlID0gZ2V0QWN0aW9uVHlwZTsKZXhwb3J0cy5nZXRWaW9sYXRpb25UeXBlID0gZ2V0VmlvbGF0aW9uVHlwZTsKZXhwb3J0cy5nZXRDYWxsVHlwZSA9IGdldENhbGxUeXBlOwpleHBvcnRzLmdldEhhbmdUeXBlID0gZ2V0SGFuZ1R5cGU7CmV4cG9ydHMuZ2V0Q2FsbFN0YXR1cyA9IGdldENhbGxTdGF0dXM7CmV4cG9ydHMuZ2V0RW50aXR5VHlwZSA9IGdldEVudGl0eVR5cGU7CmV4cG9ydHMuZ2V0VHJhZGVyVHlwZSA9IGdldFRyYWRlclR5cGU7CmV4cG9ydHMuZ2V0U291cmNlVHlwZSA9IGdldFNvdXJjZVR5cGU7CmV4cG9ydHMuZ2V0U2V0dGxlU3RhdHVzID0gZ2V0U2V0dGxlU3RhdHVzOwpleHBvcnRzLmdldFBheVR5cGUgPSBnZXRQYXlUeXBlOwpleHBvcnRzLmdldE9zVHlwZSA9IGdldE9zVHlwZTsKZXhwb3J0cy5nZXRGaWxlVHlwZSA9IGdldEZpbGVUeXBlOwpleHBvcnRzLmdldEdlbmRlclR5cGUgPSBnZXRHZW5kZXJUeXBlOwpleHBvcnRzLmdldFN0YXRJbnRlcnZhbCA9IGdldFN0YXRJbnRlcnZhbDsKZXhwb3J0cy5pbml0Q29tbW9kaXR5ID0gZXhwb3J0cy5pbml0UGF5Q2hhbm5lbCA9IGV4cG9ydHMuaW5pdEFwcHMgPSBleHBvcnRzLmluaXRHdWlsZHMgPSBleHBvcnRzLmluaXRBcmVhcyA9IGV4cG9ydHMuaW5pdEN1cnJlbnRVc2VySW5mbyA9IHZvaWQgMDsKCnZhciBfdXNlcnR5cGVfcGIgPSByZXF1aXJlKCJAL3Byb3RvL2pzL3VzZXJ0eXBlX3BiIik7Cgp2YXIgX2Ntc19wYiA9IHJlcXVpcmUoIkAvcHJvdG8vanMvY21zX3BiIik7Cgp2YXIgX2Nvb2tpZSA9IHJlcXVpcmUoIkAvdXRpbHMvY29va2llIik7Cgp2YXIgX3NlcnZlciA9IHJlcXVpcmUoIkAvZ3JwYy9zZXJ2ZXIiKTsKCnZhciBfYXBpID0gcmVxdWlyZSgiQC9hcGkvYXBpIik7Cgp2YXIgX2Vycm9yID0gcmVxdWlyZSgiQC91dGlscy9lcnJvciIpOwoKYXN5bmMgZnVuY3Rpb24gaW5pdERhdGEoKSB7CiAgbGV0IGFyZWFBcnIgPSBhd2FpdCBpbml0QXJlYXMoKTsgLy8gZ2V0QXJlYUxpc3QoKQogIC8vIGdldEd1aWxkTGlzdCgpCiAgLy8gZ2V0QXBwTGlzdCgpCiAgLy8gZ2V0UGF5Q2hhbm5lbExpc3QoKQogIC8vIGdldENvbW1vZGl0eUxpc3QoKQoKICBsZXQgZ3VpbGRBcnIgPSBhd2FpdCBpbml0R3VpbGRzKCk7CiAgbGV0IGN1cnJlbnRVc2VyID0gYXdhaXQgaW5pdEN1cnJlbnRVc2VySW5mbygpOwogIGxldCBhcHBzID0gYXdhaXQgaW5pdEFwcHMoKTsKICBsZXQgcGF5Q2hhbm5lbEFyciA9IGF3YWl0IGluaXRQYXlDaGFubmVsKCk7CiAgbGV0IGNvbW1vZGl0eUFyciA9IGF3YWl0IGluaXRDb21tb2RpdHkoKTsKfSAvLyBleHBvcnQgZnVuY3Rpb24gaW5pdEFzeW5jRGF0YSgpewovLyAgICAgZ2V0QXBwcyhmdW5jdGlvbiAoYXJyKXsKLy8gICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhcHBBcnIiLCBKU09OLnN0cmluZ2lmeShhcnIpKTsKLy8gICAgIH0pCi8vICAgICBnZXRQYXlDaGFubmVsKGZ1bmN0aW9uKGFycil7Ci8vICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgicGF5Q2hhbm5lbEFyciIsIEpTT04uc3RyaW5naWZ5KGFycikpOwovLyAgICAgfSkKLy8gICAgIGdldENvbW1vZGl0eShmdW5jdGlvbihhcnIpewovLyAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJjb21tb2RpdHlBcnIiLCBKU09OLnN0cmluZ2lmeShhcnIpKQovLyAgICAgfSkKLy8KLy8gfQoKCmNvbnN0IGluaXRDdXJyZW50VXNlckluZm8gPSAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgY29uc3QgcmVxID0gbmV3IF91c2VydHlwZV9wYi5FbXB0eSgpOwogIGNvbnN0IG1ldGFkYXRhID0gewogICAgJ3Rva2VuJzogKDAsIF9jb29raWUuZ2V0VG9rZW4pKCkKICB9OwoKICBfc2VydmVyLmNtc1NlcnZpY2UuZ2V0QWRtaW5JbmZvKHJlcSwgbWV0YWRhdGEsIChlcnIsIHJlc3ApID0+IHsKICAgIGlmICghZXJyKSB7CiAgICAgIGNvbnN0IGpzb24gPSB7CiAgICAgICAgbmFtZTogcmVzcC5nZXROYW1lKCksCiAgICAgICAgZW1haWw6IHJlc3AuZ2V0RW1haWwoKSwKICAgICAgICBhcmVhSWQ6IHJlc3AuZ2V0QXJlYUlkKCksCiAgICAgICAgYXBwSWRzOiByZXNwLmdldEFwcElkc0xpc3QoKSwKICAgICAgICBtb2R1bGVzOiByZXNwLmdldE1vZHVsZXMoKQogICAgICB9OwogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJjdXJyZW50VXNlciIsIEpTT04uc3RyaW5naWZ5KGpzb24pKTsKICAgICAgcmVzb2x2ZShqc29uKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJpbml0Q3VycmVudFVzZXJJbmZvIDoiICsgZXJyKTsKICAgIH0KICB9KTsKfSk7CgpleHBvcnRzLmluaXRDdXJyZW50VXNlckluZm8gPSBpbml0Q3VycmVudFVzZXJJbmZvOwoKZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJBcmVhSWQoKSB7CiAgdHJ5IHsKICAgIGxldCBqc29uID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXIiKTsKCiAgICBpZiAoKDAsIF9hcGkuaXNFbXB0eSkoanNvbikpIHsKICAgICAgKDAsIF9lcnJvci5sb2dpbk91dCkoKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pLmFyZWFJZDsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIGNvbnNvbGUubG9nKGVycik7CiAgfQoKICByZXR1cm4gdW5kZWZpbmVkOwp9CgpmdW5jdGlvbiBnZXRDdXJyZW50VXNlck1vZHVsZXMoKSB7CiAgdHJ5IHsKICAgIGxldCBqc29uID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiY3VycmVudFVzZXIiKTsKICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pLm1vZHVsZXM7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBjb25zb2xlLmxvZyhlcnIpOwogIH0KCiAgcmV0dXJuIHVuZGVmaW5lZDsKfQoKY29uc3QgaW5pdEFyZWFzID0gKCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogIGNvbnN0IGVtcHR5ID0gbmV3IF91c2VydHlwZV9wYi5FbXB0eSgpOwogIGNvbnN0IG1ldGFkYXRhID0gewogICAgJ3Rva2VuJzogKDAsIF9jb29raWUuZ2V0VG9rZW4pKCkKICB9OwoKICBfc2VydmVyLmNtc1NlcnZpY2UuZ2V0QXJlYUxpc3QoZW1wdHksIG1ldGFkYXRhLCAoZXJyLCByZXNwKSA9PiB7CiAgICBpZiAoIWVycikgewogICAgICBjb25zdCBhcnIgPSBbXTsKICAgICAgY29uc3QgbGlzdCA9IHJlc3AuZ2V0QXJlYXNMaXN0KCk7CiAgICAgIGxpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBjb25zdCBqc29uID0gewogICAgICAgICAgdmFsdWU6IGl0ZW0uZ2V0SWQoKSwKICAgICAgICAgIGxhYmVsOiBpdGVtLmdldFRpdGxlKCkKICAgICAgICB9OwogICAgICAgIGFyci5wdXNoKGpzb24pOwogICAgICB9KTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXJlYUFyciIsIEpTT04uc3RyaW5naWZ5KGFycikpOwogICAgICByZXNvbHZlKGFycik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiaW5pdEFyZWFzOiIgKyBlcnIpOwogICAgfQogIH0pOwp9KTsKCmV4cG9ydHMuaW5pdEFyZWFzID0gaW5pdEFyZWFzOwoKZnVuY3Rpb24gZ2V0QXJlYUxpc3QoaXNTaG93QWxsKSB7CiAgbGV0IGpzb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcmVhQXJyIik7CgogIGlmICgoMCwgX2FwaS5pc0VtcHR5KShqc29uKSkgewogICAgaW5pdEFyZWFzKCkudGhlbigpOwogIH0gZWxzZSB7CiAgICBsZXQgYXJyID0gSlNPTi5wYXJzZShqc29uKTsKICAgIHJldHVybiBzZXRPayhpc1Nob3dBbGwsIGFycik7CiAgfQp9IC8vIOW3peS8muWIl+ihqAoKCmNvbnN0IGluaXRHdWlsZHMgPSAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgY29uc3QgcmVxID0gbmV3IF91c2VydHlwZV9wYi5FbXB0eSgpOwogIGNvbnN0IG1ldGFkYXRhID0gewogICAgJ3Rva2VuJzogKDAsIF9jb29raWUuZ2V0VG9rZW4pKCkKICB9OwoKICBfc2VydmVyLmNtc1NlcnZpY2UuZ2V0R3VpbGRMaXN0KHJlcSwgbWV0YWRhdGEsIChlcnIsIHJlc3ApID0+IHsKICAgIGlmICghZXJyKSB7CiAgICAgIGNvbnN0IGFyciA9IFtdOwogICAgICBjb25zdCBsaXN0ID0gcmVzcC5nZXRHdWlsZHNMaXN0KCk7CiAgICAgIGxpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBjb25zdCBqc29uID0gewogICAgICAgICAgdmFsdWU6IGl0ZW0uZ2V0SWQoKSwKICAgICAgICAgIGxhYmVsOiBpdGVtLmdldE5hbWUoKSwKICAgICAgICAgIGFyZWFJZDogaXRlbS5nZXRBcmVhSWQoKQogICAgICAgIH07CiAgICAgICAgYXJyLnB1c2goanNvbik7CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZygi5Yid5aeL5YyW5bel5LyaOiIgKyBKU09OLnN0cmluZ2lmeShhcnIpKTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiZ3VpbGRBcnIiLCBKU09OLnN0cmluZ2lmeShhcnIpKTsKICAgICAgcmVzb2x2ZShhcnIpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coImluaXRHdWlsZHM6IiArIGVycik7CiAgICB9CiAgfSk7Cn0pOwoKZXhwb3J0cy5pbml0R3VpbGRzID0gaW5pdEd1aWxkczsKCmZ1bmN0aW9uIGdldEd1aWxkTGlzdChpc1Nob3dBbGwpIHsKICBsZXQganNvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImd1aWxkQXJyIik7CgogIGlmICgoMCwgX2FwaS5pc0VtcHR5KShqc29uKSkgewogICAgaW5pdEd1aWxkcygpLnRoZW4oKTsKICB9IGVsc2UgewogICAgbGV0IGFyciA9IEpTT04ucGFyc2UoanNvbik7CiAgICByZXR1cm4gc2V0T2soaXNTaG93QWxsLCBhcnIpOwogIH0KfQoKZnVuY3Rpb24gZ2V0R3VpbGRMaXN0QnlBcmVhSWQodmFsLCBpc1Nob3dBbGwpIHsKICBsZXQgZ3VpbGRMaXN0ID0gZ2V0R3VpbGRMaXN0KGZhbHNlKTsKICBsZXQgbmV3TGlzdCA9IFtdOwoKICBpZiAodmFsID09PSAwKSB7CiAgICBuZXdMaXN0ID0gZ3VpbGRMaXN0OwogIH0gZWxzZSB7CiAgICBndWlsZExpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGl0ZW0uYXJlYUlkID09PSB2YWwpIHsKICAgICAgICBuZXdMaXN0LnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIHNldE9rKGlzU2hvd0FsbCwgbmV3TGlzdCk7Cn0gLy8g5bqU55So5YiX6KGoCgoKY29uc3QgaW5pdEFwcHMgPSAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgY29uc3QgcmVxID0gbmV3IF9jbXNfcGIuQXBwTGlzdFJlcXVlc3QoKTsKICBjb25zdCBtZXRhZGF0YSA9IHsKICAgICd0b2tlbic6ICgwLCBfY29va2llLmdldFRva2VuKSgpCiAgfTsKCiAgX3NlcnZlci5jbXNTZXJ2aWNlLmdldEFwcExpc3QocmVxLCBtZXRhZGF0YSwgKGVyciwgcmVzcCkgPT4gewogICAgaWYgKCFlcnIpIHsKICAgICAgY29uc3QgYXJyID0gW107CiAgICAgIGNvbnN0IGxpc3QgPSByZXNwLmdldEFwcHNMaXN0KCk7CiAgICAgIGxpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBjb25zdCBqc29uID0gewogICAgICAgICAgdmFsdWU6IGl0ZW0uZ2V0SWQoKSwKICAgICAgICAgIGxhYmVsOiBpdGVtLmdldFRpdGxlKCksCiAgICAgICAgICBvczogaXRlbS5nZXRPc1R5cGUoKSwKICAgICAgICAgIGlzQW5jaG9yOiBpdGVtLmdldElzQW5jaG9yKCksCiAgICAgICAgICBhcmVhSWRzOiBpdGVtLmdldEFyZWFJZHNMaXN0KCkKICAgICAgICB9OwogICAgICAgIGFyci5wdXNoKGpzb24pOwogICAgICB9KTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXBwQXJyIiwgSlNPTi5zdHJpbmdpZnkoYXJyKSk7CiAgICAgIHJlc29sdmUoYXJyKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJpbml0QXBwczoiICsgZXJyKTsKICAgIH0KICB9KTsKfSk7CgpleHBvcnRzLmluaXRBcHBzID0gaW5pdEFwcHM7CgpmdW5jdGlvbiBnZXRBcHBMaXN0KGlzTm9BbmNob3IsIGlzU2hvd0FsbCkgewogIGxldCBqc29uID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBwQXJyIik7CiAgbGV0IGFyciA9IFtdOwoKICBpZiAoKDAsIF9hcGkuaXNFbXB0eSkoanNvbikpIHsKICAgIGluaXRBcHBzKCkudGhlbigpOwogIH0gZWxzZSB7CiAgICBhcnIgPSBKU09OLnBhcnNlKGpzb24pOwogIH0KCiAgaWYgKGlzTm9BbmNob3IpIHsKICAgIGxldCByZXN1bHQgPSBbXTsKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoIWl0ZW0uaXNBbmNob3IpIHsKICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gc2V0T2soaXNTaG93QWxsLCByZXN1bHQpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gc2V0T2soaXNTaG93QWxsLCBhcnIpOwogIH0KfQoKZnVuY3Rpb24gZ2V0QXBwTGlzdEJ5QXJlYUlkKHZhbCwgaXNGaWx0ZXIsIGlzU2hvd0FsbCkgewogIGxldCBhcHBzID0gZ2V0QXBwTGlzdChpc0ZpbHRlciwgZmFsc2UpOwogIGxldCBuZXdBcHBzID0gW107CgogIGlmICh2YWwgPT09IDApIHsKICAgIG5ld0FwcHMgPSBhcHBzOwogIH0gZWxzZSB7CiAgICBhcHBzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChpdGVtLmFyZWFJZHMuaW5kZXhPZih2YWwpID49IDApIHsKICAgICAgICBuZXdBcHBzLnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIHNldE9rKGlzU2hvd0FsbCwgbmV3QXBwcyk7Cn0gLy8g5pSv5LuY5rig6YGTCgoKY29uc3QgaW5pdFBheUNoYW5uZWwgPSAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgY29uc3QgcmVxID0gbmV3IF9jbXNfcGIuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0KCk7CiAgY29uc3QgbWV0YWRhdGEgPSB7CiAgICAndG9rZW4nOiAoMCwgX2Nvb2tpZS5nZXRUb2tlbikoKQogIH07CgogIF9zZXJ2ZXIuY21zU2VydmljZS5nZXRQYXlDaGFubmVsTGlzdChyZXEsIG1ldGFkYXRhLCAoZXJyLCByZXNwKSA9PiB7CiAgICBpZiAoIWVycikgewogICAgICBjb25zdCBhcnIgPSBbXTsKICAgICAgY29uc3QgbGlzdCA9IHJlc3AuZ2V0Q2hhbm5lbHNMaXN0KCk7CiAgICAgIGNvbnNvbGUubG9nKCJnZXRQYXlDaGFubmVsIGxpc3Q6IiArIGxpc3QpOwogICAgICBsaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgY29uc3QganNvbiA9IHsKICAgICAgICAgIHZhbHVlOiBpdGVtLmdldElkKCksCiAgICAgICAgICBsYWJlbDogaXRlbS5nZXROYW1lKCksCiAgICAgICAgICBpY29uOiBpdGVtLmdldEljb24oKSwKICAgICAgICAgIGFyZWFJZDogaXRlbS5nZXRBcmVhSWQoKQogICAgICAgIH07CiAgICAgICAgYXJyLnB1c2goanNvbik7CiAgICAgIH0pOwogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJwYXlDaGFubmVsQXJyIiwgSlNPTi5zdHJpbmdpZnkoYXJyKSk7CiAgICAgIHJlc29sdmUoYXJyKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJpbml0UGF5Q2hhbm5lbDoiICsgZXJyKTsKICAgIH0KICB9KTsKfSk7CgpleHBvcnRzLmluaXRQYXlDaGFubmVsID0gaW5pdFBheUNoYW5uZWw7CgpmdW5jdGlvbiBnZXRQYXlDaGFubmVsTGlzdChhcmVhSWQpIHsKICBsZXQgc3RyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgicGF5Q2hhbm5lbEFyciIpOwoKICBpZiAoKDAsIF9hcGkuaXNFbXB0eSkoc3RyKSkgewogICAgaW5pdFBheUNoYW5uZWwoKS50aGVuKCk7CiAgfSBlbHNlIHsKICAgIGxldCBhcnIgPSBKU09OLnBhcnNlKHN0cik7CiAgICBsZXQgcmVzdWx0ID0gW107CiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGl0ZW0uYXJlYUlkID09PSBhcmVhSWQpIHsKICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gc2V0T2soZmFsc2UsIHJlc3VsdCk7CiAgfQp9IC8vIOWVhuWTgeWIl+ihqAoKCmNvbnN0IGluaXRDb21tb2RpdHkgPSAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgY29uc3QgcmVxID0gbmV3IF9jbXNfcGIuQ29tbW9kaXR5TGlzdFJlcXVlc3QoKTsKICBjb25zdCBtZXRhZGF0YSA9IHsKICAgICd0b2tlbic6ICgwLCBfY29va2llLmdldFRva2VuKSgpCiAgfTsKCiAgX3NlcnZlci5jbXNTZXJ2aWNlLmdldENvbW1vZGl0eUxpc3QocmVxLCBtZXRhZGF0YSwgKGVyciwgcmVzcCkgPT4gewogICAgaWYgKCFlcnIpIHsKICAgICAgY29uc3QgYXJyID0gW107CiAgICAgIGNvbnN0IGxpc3QgPSByZXNwLmdldENvbW1vZGl0aWVzTGlzdCgpOwogICAgICBsaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgY29uc3QganNvbiA9IHsKICAgICAgICAgIHZhbHVlOiBpdGVtLmdldElkKCksCiAgICAgICAgICBsYWJlbDogaXRlbS5nZXRUaXRsZSgpLAogICAgICAgICAgbmFtZTogaXRlbS5nZXROYW1lKCksCiAgICAgICAgICBhcmVhSWQ6IGl0ZW0uZ2V0QXJlYUlkKCksCiAgICAgICAgICBhcHBJZDogaXRlbS5nZXRBcHBJZCgpCiAgICAgICAgfTsKICAgICAgICBhcnIucHVzaChqc29uKTsKICAgICAgfSk7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImNvbW1vZGl0eUFyciIsIEpTT04uc3RyaW5naWZ5KGFycikpOwogICAgICByZXNvbHZlKGFycik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiaW5pdENvbW1vZGl0eToiICsgZXJyKTsKICAgIH0KICB9KTsKfSk7CgpleHBvcnRzLmluaXRDb21tb2RpdHkgPSBpbml0Q29tbW9kaXR5OwoKZnVuY3Rpb24gZ2V0Q29tbW9kaXR5TGlzdCgpIHsKICBsZXQgc3RyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiY29tbW9kaXR5QXJyIik7CgogIGlmICgoMCwgX2FwaS5pc0VtcHR5KShzdHIpKSB7CiAgICBpbml0Q29tbW9kaXR5KCkudGhlbigpOwogIH0gZWxzZSB7CiAgICBsZXQgYXJyID0gSlNPTi5wYXJzZShzdHIpOwogICAgcmV0dXJuIHNldE9rKGZhbHNlLCBhcnIpOwogIH0KfSAvLyDmn6Xor6JpcOeahOWcsOWdgAoKCmZ1bmN0aW9uIGlwVG9BZGRyZXNzKGlwLCBjYWxsYmFjaykgewogIGxldCByZXEgPSBuZXcgX2Ntc19wYi5JcExvY2F0aW9uUmVxdWVzdCgpOwogIHJlcS5zZXRJcChpcCk7CiAgbGV0IG1ldGFkYXRhID0gewogICAgJ3Rva2VuJzogKDAsIF9jb29raWUuZ2V0VG9rZW4pKCkKICB9OwoKICBfc2VydmVyLmNtc1NlcnZpY2UuZ2V0SXBMb2NhdGlvbihyZXEsIG1ldGFkYXRhLCAoZXJyLCByZXNwKSA9PiB7CiAgICBpZiAoIWVycikgewogICAgICBjYWxsYmFjayhyZXNwKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJpcFRvQWRkcmVzczoiICsgZXJyKTsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gZ2V0QXJyTmFtZShhcnIsIGlkKSB7CiAgbGV0IGxhYmVsID0gIiI7CgogIGlmICgoMCwgX2FwaS5pc0VtcHR5KShpZCkgfHwgaWQgPT09IDApIHsKICAgIHJldHVybiBsYWJlbDsKICB9CgogIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgaWYgKHR5cGVvZiBpdGVtLnZhbHVlICE9PSAidW5kZWZpbmVkIikgewogICAgICBpZiAoaWQudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIGxhYmVsOwp9CgpmdW5jdGlvbiBnZXRBcHBOYW1lKGFyciwgaWQpIHsKICBsZXQgbGFiZWwgPSAiIjsKICBsZXQgb3MgPSAwOwogIGxldCBpc0FuY2hvciA9IGZhbHNlOwoKICBpZiAoKDAsIF9hcGkuaXNFbXB0eSkoaWQpIHx8IGlkID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICBsYWJlbDogbGFiZWwsCiAgICAgIG9zOiBvcywKICAgICAgaXNBbmNob3I6IGlzQW5jaG9yCiAgICB9OwogIH0KCiAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICBpZiAodHlwZW9mIGl0ZW0udmFsdWUgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGlmIChpZC50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgICAgb3MgPSBpdGVtLm9zOwogICAgICAgIGlzQW5jaG9yID0gaXRlbS5pc0FuY2hvcjsKICAgICAgfQogICAgfQogIH0pOwogIHJldHVybiB7CiAgICBsYWJlbDogbGFiZWwsCiAgICBvczogb3MsCiAgICBpc0FuY2hvcjogaXNBbmNob3IKICB9Owp9CgpmdW5jdGlvbiBzZXRPayhpc1Nob3dBbGwsIGFycikgewogIGlmIChpc1Nob3dBbGwpIHsKICAgIGFyci51bnNoaWZ0KHsKICAgICAgbGFiZWw6ICLlhajpg6giLAogICAgICB2YWx1ZTogMAogICAgfSk7CiAgfQoKICByZXR1cm4gYXJyOwp9IC8vIOaYr+WQpgoKCmZ1bmN0aW9uIGdldEJvb2woKSB7CiAgcmV0dXJuIFt7CiAgICB2YWx1ZTogdHJ1ZSwKICAgIGxhYmVsOiAn5pivJwogIH0sIHsKICAgIHZhbHVlOiBmYWxzZSwKICAgIGxhYmVsOiAn5ZCmJwogIH1dOwp9IC8vIOS4u+aSreetiee6pwoKCmZ1bmN0aW9uIGdldEFuY2hvckxldmVsKGtleSkgewogIGxldCBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn5beu5YqyJwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICfkuK3nrYknCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+iJr+WlvScKICB9LCB7CiAgICB2YWx1ZTogNCwKICAgIGxhYmVsOiAn5LyY56eAJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCkgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g5a6h5qC454q25oCBCgoKZnVuY3Rpb24gZ2V0UmV2aWV3U3RhdHVzKGtleSkgewogIGxldCBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn5pyq5a6h5qC4JwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICflt7Lmj5DkuqTlrqHmoLgnCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+WuoeaguOS4rScKICB9LCB7CiAgICB2YWx1ZTogNCwKICAgIGxhYmVsOiAn5LiN6YCa6L+HJwogIH0sIHsKICAgIHZhbHVlOiA1LAogICAgbGFiZWw6ICflrqHmoLjpgJrov4cnCiAgfSwgewogICAgdmFsdWU6IDYsCiAgICBsYWJlbDogJ+WBnOeUqCcKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIGxldCBsYWJlbCA9ICIiOwoKICAgIGlmIChrZXkgPT09IDApIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfQoKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vCgoKZnVuY3Rpb24gZ2V0UmVwb3J0ZWRUeXBlcyhrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+eUqOaItycKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5Li75pKtJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCkgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0KCmZ1bmN0aW9uIGdldFJlcG9ydGVkVGltZSgpIHsKICByZXR1cm4gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+S7iuWkqScKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5pyA6L+RM+WkqScKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn5pyA6L+RN+WkqScKICB9XTsKfSAvLyDlnKjnur/nirbmgIEKCgpmdW5jdGlvbiBnZXRPbmxpbmVTdGF0dXMoa2V5KSB7CiAgbGV0IGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfnprvnur8nCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+WcqOe6vycKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn5b+Z57q/JwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICfli7/mibAnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICBsZXQgbGFiZWwgPSAiIjsKCiAgICBpZiAoa2V5ID09PSAwKSB7CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH0KCiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDov53op4TlnLrmma8KCgpmdW5jdGlvbiBnZXRWaW9sYXRpb25TY2VuZShpc1Nob3dBbGwsIGtleSkgewogIGxldCBhcnIgPSBbewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+inhumikemAmuivnScKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn6IGK5aSpJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICfkuLvmkq3otYTmlpknCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICBsZXQgbGFiZWwgPSAiIjsKCiAgICBpZiAoa2V5ID09PSAwKSB7CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH0KCiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICBpZiAoaXNTaG93QWxsKSB7CiAgICAgIGFyci51bnNoaWZ0KHsKICAgICAgICB2YWx1ZTogMCwKICAgICAgICBsYWJlbDogJ+WFqOmDqCcKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g5bCB56aB57G75Z6LCgoKZnVuY3Rpb24gZ2V0QmxvY2tTdGF0dXMoaXNTaG93QWxsLCBrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfkuI3lsIHnpoEnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+WPkemAgeitpuWRiicKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn5bCB56aB6LSm5Y+3JwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICflsIHnpoHmiYDmnIknCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICBsZXQgbGFiZWwgPSAiIjsKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIGlmIChpc1Nob3dBbGwpIHsKICAgICAgYXJyLnVuc2hpZnQoewogICAgICAgIHZhbHVlOiAwLAogICAgICAgIGxhYmVsOiAn5YWo6YOoJwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDlsIHnpoHml7bluLgKCgpmdW5jdGlvbiBnZXRCbG9ja1RpbWUoa2V5KSB7CiAgbGV0IGFyciA9IFt7CiAgICB2YWx1ZTogNSAqIDYwLAogICAgbGFiZWw6ICc15YiG6ZKfJwogIH0sIHsKICAgIHZhbHVlOiAzMCAqIDYwLAogICAgbGFiZWw6ICczMOWIhumSnycKICB9LCB7CiAgICB2YWx1ZTogNjAgKiA2MCwKICAgIGxhYmVsOiAnMeWwj+aXticKICB9LCB7CiAgICB2YWx1ZTogMyAqIDYwICogNjAsCiAgICBsYWJlbDogJzPlsI/ml7YnCiAgfSwgewogICAgdmFsdWU6IDI0ICogNjAgKiA2MCwKICAgIGxhYmVsOiAnMeWkqScKICB9LCB7CiAgICB2YWx1ZTogNyAqIDI0ICogNjAgKiA2MCwKICAgIGxhYmVsOiAnN+WkqScKICB9LCB7CiAgICB2YWx1ZTogMzAgKiAyNCAqIDYwICogNjAsCiAgICBsYWJlbDogJzHmnIgnCiAgfSwgewogICAgdmFsdWU6IDM2NSAqIDI0ICogNjAgKiA2MCwKICAgIGxhYmVsOiAnMeW5tCcKICB9LCB7CiAgICB2YWx1ZTogMTAgKiAzNjUgKiAyNCAqIDYwICogNjAsCiAgICBsYWJlbDogJ+awuOS5heWwgeemgScKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIGxldCBsYWJlbCA9ICIiOwogICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChrZXkgPT09IGl0ZW0udmFsdWUgfHwga2V5ICogMiA9PT0gaXRlbS52YWx1ZSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOaUr+S7mOeKtuaAgQoKCmZ1bmN0aW9uIGdldFBheVN0YXR1cyhrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+W+heaUr+S7mCcKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5bey5pSv5LuYJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICflt7Llj5bmtognCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+W3sumAgOasvicKICB9LCB7CiAgICB2YWx1ZTogNSwKICAgIGxhYmVsOiAn5bey6LaF5pe2JwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDogYzkuJrnsbvlnosKCgpmdW5jdGlvbiBnZXRPY2N1cGF0aW9uVHlwZShrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICdJVC/kupLogZTnvZEv6YCa5L+hJwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICflrabnlJ8nCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+aWh+WMli/oibrmnK8nCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+W9seinhi/lqLHkuZAnCiAgfSwgewogICAgdmFsdWU6IDUsCiAgICBsYWJlbDogJ+mHkeiejScKICB9LCB7CiAgICB2YWx1ZTogNiwKICAgIGxhYmVsOiAn5Yy76I2vL+WBpeW6tycKICB9LCB7CiAgICB2YWx1ZTogNywKICAgIGxhYmVsOiAn5bel5LiaL+WItumAoOS4micKICB9LCB7CiAgICB2YWx1ZTogOCwKICAgIGxhYmVsOiAn5aqS5L2TL+WFrOWFsycKICB9LCB7CiAgICB2YWx1ZTogOSwKICAgIGxhYmVsOiAn6Zu25ZSuJwogIH0sIHsKICAgIHZhbHVlOiAxMCwKICAgIGxhYmVsOiAn5pWZ6IKyL+enkeeglCcKICB9LCB7CiAgICB2YWx1ZTogMTEsCiAgICBsYWJlbDogJ+WFtuS7licKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIGxldCBsYWJlbCA9ICIiOwoKICAgIGlmIChrZXkgPT09IDApIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfQoKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOa2iOaBr+exu+WeiwoKCmZ1bmN0aW9uIGdldE1lc3NhZ2VUeXBlKGtleSkgewogIGxldCBhcnIgPSBbewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+aWh+acrCcKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn56S854mpJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICflhYXlgLwnCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+WbvueJhycKICB9LCB7CiAgICB2YWx1ZTogNSwKICAgIGxhYmVsOiAn6KeG6aKRJwogIH0sIHsKICAgIHZhbHVlOiA2LAogICAgbGFiZWw6ICfor63pn7MnCiAgfSwgewogICAgdmFsdWU6IDcsCiAgICBsYWJlbDogJ+S9jee9ricKICB9LCB7CiAgICB2YWx1ZTogOCwKICAgIGxhYmVsOiAn6Jma5ouf6KeG6aKRJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfQoKZnVuY3Rpb24gZ2V0TWVzc2FnZVR5cGVSZWplY3Qoa2V5KSB7CiAgbGV0IGFyciA9IFt7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn5paH5pysJwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICflm77niYcnCiAgfSwgewogICAgdmFsdWU6IDUsCiAgICBsYWJlbDogJ+inhumikScKICB9LCB7CiAgICB2YWx1ZTogNiwKICAgIGxhYmVsOiAn6K+t6Z+zJwogIH0sIHsKICAgIHZhbHVlOiA4LAogICAgbGFiZWw6ICfomZrmi5/op4bpopEnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICBsZXQgbGFiZWwgPSAiIjsKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOWKqOS9nOexu+WeiwoKCmZ1bmN0aW9uIGdldEFjdGlvblR5cGUoaXNTaG93QWxsLCBrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfmi5Lnu53mjqXlkKwnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+acquaOpeWQrCcKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn6YCa6K+d57uT5p2fJwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICflhbPms6gnCiAgfSwgewogICAgdmFsdWU6IDUsCiAgICBsYWJlbDogJ+WFheWAvCcKICB9LCB7CiAgICB2YWx1ZTogNiwKICAgIGxhYmVsOiAn5Y+R6YCB56S854mpJwogIH0sIHsKICAgIHZhbHVlOiA3LAogICAgbGFiZWw6ICfkuLvmkq3miZPmi5vlkbwnCiAgfSwgewogICAgdmFsdWU6IDgsCiAgICBsYWJlbDogJ+W8leWvvOWFheWAvCcKICB9LCB7CiAgICB2YWx1ZTogOSwKICAgIGxhYmVsOiAn5byV5a+86YCB56S8JwogIH0sIHsKICAgIHZhbHVlOiAxMCwKICAgIGxhYmVsOiAn5byV5a+86YCa6K+dJwogIH0sIHsKICAgIHZhbHVlOiAxMSwKICAgIGxhYmVsOiAn5Li75pKt5ouS57ud5o6l5ZCs6K2m5ZGKJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCkgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgaWYgKGlzU2hvd0FsbCkgewogICAgICBhcnIudW5zaGlmdCh7CiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbGFiZWw6ICflhajpg6gnCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOi/neinhOexu+WeiwoKCmZ1bmN0aW9uIGdldFZpb2xhdGlvblR5cGUoaXNTaG93QWxsLCBrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfor4jpqpcnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+iJsuaDhScKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn5Y+N5YqoJwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICflhbbku5YnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICBsZXQgbGFiZWwgPSAiIjsKCiAgICBpZiAoa2V5ID09PSAwKSB7CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH0KCiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICBpZiAoaXNTaG93QWxsKSB7CiAgICAgIGFyci51bnNoaWZ0KHsKICAgICAgICB2YWx1ZTogMCwKICAgICAgICBsYWJlbDogJ+WFqOmDqCcKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g6YCa6K+d5Y+R6LW357G75Z6LCgoKZnVuY3Rpb24gZ2V0Q2FsbFR5cGUoa2V5KSB7CiAgbGV0IGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfnlKjmiLflkbzlj6snCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+S4u+aSreWRvOWPqycKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn55So5oi3QWnlkbzlj6snCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+S4u+aSrUFp5ZG85Y+rJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDnu5PmnZ/nsbvlnosKCgpmdW5jdGlvbiBnZXRIYW5nVHlwZShrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+eUqOaIt+aMguaWrScKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn5Li75pKt5oyC5patJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICfml6DkurrmjqXlkKwnCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ+WuouaIt+err+e9kee7nOS4jeWlvScKICB9LCB7CiAgICB2YWx1ZTogNSwKICAgIGxhYmVsOiAn5L2Z6aKd5LiN6LazJwogIH0sIHsKICAgIHZhbHVlOiA2LAogICAgbGFiZWw6ICfns7vnu5/plJnor68nCiAgfSwgewogICAgdmFsdWU6IDcsCiAgICBsYWJlbDogJ+WjsOe9kei2heaXticKICB9LCB7CiAgICB2YWx1ZTogOCwKICAgIGxhYmVsOiAn5aOw572R6ZSZ6K+vJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCkgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g57uT5p2f57G75Z6LCgoKZnVuY3Rpb24gZ2V0Q2FsbFN0YXR1cyhrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ+etieW+heaOpemAmicKICB9LCB7CiAgICB2YWx1ZTogMiwKICAgIGxhYmVsOiAn6YCa6K+d5LitJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICfpgJror53nu5PmnZ8nCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICBsZXQgbGFiZWwgPSAiIjsKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOWunuS9k+exu+WeiwoKCmZ1bmN0aW9uIGdldEVudGl0eVR5cGUoa2V5KSB7CiAgbGV0IGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfmma7pgJrnlKjmiLcnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+S4u+aSrScKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn566h55CG5ZGYJwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICflhazkvJonCiAgfSwgewogICAgdmFsdWU6IDUsCiAgICBsYWJlbDogJ+iuoumYheiuouWNlScKICB9LCB7CiAgICB2YWx1ZTogNiwKICAgIGxhYmVsOiAn5YWF5YC86K6i5Y2VJwogIH0sIHsKICAgIHZhbHVlOiA3LAogICAgbGFiZWw6ICfnpLznianorrDlvZUnCiAgfSwgewogICAgdmFsdWU6IDgsCiAgICBsYWJlbDogJ1ZJUOiusOW9lScKICB9LCB7CiAgICB2YWx1ZTogOSwKICAgIGxhYmVsOiAn6YCa6K+d6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMCwKICAgIGxhYmVsOiAn562+5Yiw6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMSwKICAgIGxhYmVsOiAn5Li+5oql6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMiwKICAgIGxhYmVsOiAn5Zyo57q/6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMywKICAgIGxhYmVsOiAn57uT566X6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxNCwKICAgIGxhYmVsOiAn5aWW5oOp6K6w5b2VJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDnlKjmiLfnsbvlnosKCgpmdW5jdGlvbiBnZXRUcmFkZXJUeXBlKGtleSkgewogIGxldCBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn55So5oi3JwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICfkuLvmkq0nCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+euoeeQhuWRmCcKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIGxldCBsYWJlbCA9ICIiOwogICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0gLy8g5a6e5L2T57G75Z6LCgoKZnVuY3Rpb24gZ2V0U291cmNlVHlwZShrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDUsCiAgICBsYWJlbDogJ+iuoumYheiuouWNlScKICB9LCB7CiAgICB2YWx1ZTogNiwKICAgIGxhYmVsOiAn5YWF5YC86K6i5Y2VJwogIH0sIHsKICAgIHZhbHVlOiA3LAogICAgbGFiZWw6ICfnpLznianorrDlvZUnCiAgfSwgewogICAgdmFsdWU6IDgsCiAgICBsYWJlbDogJ1ZJUOiusOW9lScKICB9LCB7CiAgICB2YWx1ZTogOSwKICAgIGxhYmVsOiAn6YCa6K+d6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMCwKICAgIGxhYmVsOiAn562+5Yiw6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMSwKICAgIGxhYmVsOiAn5Li+5oql6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMiwKICAgIGxhYmVsOiAn5Zyo57q/6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxMywKICAgIGxhYmVsOiAn57uT566X6K6w5b2VJwogIH0sIHsKICAgIHZhbHVlOiAxNCwKICAgIGxhYmVsOiAn5aWW5oOp6K6w5b2VJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CiAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGtleS50b1N0cmluZygpID09PSBpdGVtLnZhbHVlLnRvU3RyaW5nKCkpIHsKICAgICAgICBsYWJlbCA9IGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGxhYmVsOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYXJyOwogIH0KfSAvLyDnu5PnrpfnirbmgIEKCgpmdW5jdGlvbiBnZXRTZXR0bGVTdGF0dXMoa2V5KSB7CiAgbGV0IGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfpooTnu5PnrpcnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+W3suWJlOmZpCcKICB9LCB7CiAgICB2YWx1ZTogMywKICAgIGxhYmVsOiAn57uT566X5a6M5oiQJwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICfmkqTplIDnu5PnrpcnCiAgfV07CgogIGlmICh0eXBlb2Yga2V5ICE9ICJ1bmRlZmluZWQiKSB7CiAgICBsZXQgbGFiZWwgPSAiIjsKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOaUr+S7mOaWueW8jwoKCmZ1bmN0aW9uIGdldFBheVR5cGUoaXNTaG93QWxsLCBrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICdHb29nbGUnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ0FwcGxlJwogIH0sIHsKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICdYZW5kaXQnCiAgfSwgewogICAgdmFsdWU6IDQsCiAgICBsYWJlbDogJ1BheWVyTWF4JwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCkgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgaWYgKGlzU2hvd0FsbCkgewogICAgICBhcnIudW5zaGlmdCh7CiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbGFiZWw6ICflhajpg6gnCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOezu+e7n+exu+WeiwoKCmZ1bmN0aW9uIGdldE9zVHlwZShrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAwLAogICAgbGFiZWw6ICflhajpg6gnCiAgfSwgewogICAgdmFsdWU6IDEsCiAgICBsYWJlbDogJ0FuZHJvaWQnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ0lvcycKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIGxldCBsYWJlbCA9ICIiOwoKICAgIGlmIChrZXkgPT09IDApIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfQoKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOaWh+S7tuexu+WeiwoKCmZ1bmN0aW9uIGdldEZpbGVUeXBlKGtleSkgewogIGxldCBhcnIgPSBbewogICAgdmFsdWU6IDAsCiAgICBsYWJlbDogJ+WFqOmDqCcKICB9LCB7CiAgICB2YWx1ZTogMSwKICAgIGxhYmVsOiAn5Zu+54mHJwogIH0sIHsKICAgIHZhbHVlOiAyLAogICAgbGFiZWw6ICfop4bpopEnCiAgfSwgewogICAgdmFsdWU6IDMsCiAgICBsYWJlbDogJ+mfs+mikScKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIGxldCBsYWJlbCA9ICIiOwoKICAgIGlmIChrZXkgPT09IDApIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfQoKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOaAp+WIq+exu+WeiwoKCmZ1bmN0aW9uIGdldEdlbmRlclR5cGUoa2V5KSB7CiAgbGV0IGFyciA9IFt7CiAgICB2YWx1ZTogMCwKICAgIGxhYmVsOiAn5YWo6YOoJwogIH0sIHsKICAgIHZhbHVlOiAxLAogICAgbGFiZWw6ICfnlLcnCiAgfSwgewogICAgdmFsdWU6IDIsCiAgICBsYWJlbDogJ+WlsycKICB9XTsKCiAgaWYgKHR5cGVvZiBrZXkgIT0gInVuZGVmaW5lZCIpIHsKICAgIGxldCBsYWJlbCA9ICIiOwoKICAgIGlmIChrZXkgPT09IDAgfHwga2V5ID09PSAnMCcpIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfQoKICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICBpZiAoa2V5LnRvU3RyaW5nKCkgPT09IGl0ZW0udmFsdWUudG9TdHJpbmcoKSkgewogICAgICAgIGxhYmVsID0gaXRlbS5sYWJlbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbGFiZWw7CiAgfSBlbHNlIHsKICAgIHJldHVybiBhcnI7CiAgfQp9IC8vIOaXtumXtOmXtOmalAoKCmZ1bmN0aW9uIGdldFN0YXRJbnRlcnZhbChrZXkpIHsKICBsZXQgYXJyID0gW3sKICAgIHZhbHVlOiAzLAogICAgbGFiZWw6ICcx5bCP5pe2JwogIH0sIHsKICAgIHZhbHVlOiA0LAogICAgbGFiZWw6ICcx5aSpJwogIH1dOwoKICBpZiAodHlwZW9mIGtleSAhPSAidW5kZWZpbmVkIikgewogICAgbGV0IGxhYmVsID0gIiI7CgogICAgaWYgKGtleSA9PT0gMCkgewogICAgICByZXR1cm4gbGFiZWw7CiAgICB9CgogICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmIChrZXkudG9TdHJpbmcoKSA9PT0gaXRlbS52YWx1ZS50b1N0cmluZygpKSB7CiAgICAgICAgbGFiZWwgPSBpdGVtLmxhYmVsOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBsYWJlbDsKICB9IGVsc2UgewogICAgcmV0dXJuIGFycjsKICB9Cn0="},null]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/router/auth.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/router/auth.js","mtime":1633949786068},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgcm91dGVyIGZyb20gJy4vaW5kZXgnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvY29va2llJzsgLy8g55m95ZCN5Y2V5YiX6KGoCgp2YXIgd2hpdGVMaXN0ID0gWycvbG9naW4nXTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgY29uc29sZS5sb2coIiMjIyMxIik7CgogIGlmIChnZXRUb2tlbigpKSB7CiAgICAvLyDlt7LnmbvlvZXkuJTopoHot7PovaznmoTmmK/nmbvlvZXpobUKICAgIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgICBuZXh0KHsKICAgICAgICBwYXRoOiAnLycKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiIyMjIzIiKTsKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSB7CiAgICAvLyDlnKjlhY3nmbvlvZXnmb3lkI3ljZXvvIznm7TmjqXov5vlhaUKICAgIGlmICh3aGl0ZUxpc3QuaW5jbHVkZXModG8ucGF0aCkpIHsKICAgICAgbmV4dCgpOwogICAgfSBlbHNlIHsKICAgICAgLy8g5ZCm5YiZ6YeN5a6a5ZCR5Yiw55m75b2V6aG1CiAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5mdWxsUGF0aCkpOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/router/auth.js"],"names":["router","getToken","whiteList","beforeEach","to","from","next","console","log","path","includes","fullPath"],"mappings":";AAAA,OAAOA,MAAP,MAAmB,SAAnB;AACA,SAAQC,QAAR,QAAuB,gBAAvB,C,CAEA;;AACA,IAAMC,SAAS,GAAG,CAAC,QAAD,CAAlB;AAEAF,MAAM,CAACG,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClCC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;;AACA,MAAIP,QAAQ,EAAZ,EAAgB;AACZ;AACA,QAAIG,EAAE,CAACK,IAAH,KAAY,QAAhB,EAA0B;AACtBH,MAAAA,IAAI,CAAC;AAACG,QAAAA,IAAI,EAAE;AAAP,OAAD,CAAJ;AACH,KAFD,MAEO;AACHF,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAF,MAAAA,IAAI;AACP;AACJ,GARD,MAQO;AACH;AACA,QAAIJ,SAAS,CAACQ,QAAV,CAAmBN,EAAE,CAACK,IAAtB,CAAJ,EAAiC;AAC7BH,MAAAA,IAAI;AACP,KAFD,MAEO;AACH;AACAA,MAAAA,IAAI,2BAAoBF,EAAE,CAACO,QAAvB,EAAJ;AACH;AACJ;AACJ,CAnBD","sourcesContent":["import router from './index'\nimport {getToken} from '@/utils/cookie'\n\n// 白名单列表\nconst whiteList = ['/login']\n\nrouter.beforeEach((to, from, next) => {\n    console.log(\"####1\")\n    if (getToken()) {\n        // 已登录且要跳转的是登录页\n        if (to.path === '/login') {\n            next({path: '/'})\n        } else {\n            console.log(\"####2\")\n            next()\n        }\n    } else {\n        // 在免登录白名单，直接进入\n        if (whiteList.includes(to.path)) {\n            next()\n        } else {\n            // 否则重定向到登录页\n            next(`/login?redirect=${to.fullPath}`)\n        }\n    }\n})\n\n"]}]}
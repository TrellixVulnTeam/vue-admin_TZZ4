{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/gift.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/gift.js","mtime":1634956664458},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2Nvb2tpZSc7CmltcG9ydCB7IGVycm9yIH0gZnJvbSAnQC91dGlscy9lcnJvcic7Cgp2YXIgX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIF9kZWZhdWx0KGRlcHMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7CgogICAgdGhpcy5wcm90byA9IGRlcHMucHJvdG87CiAgICB0aGlzLmNsaWVudCA9IG5ldyBkZXBzLnByb3RvLkNtc0NsaWVudChwcm9jZXNzLmVudi5WVUVfQVBQX0dSUENfUFJPWFlfVVJJLCBudWxsLCBudWxsKTsKICB9CiAgLyoqCiAgICog6I635Y+W56S854mp6K6w5b2V5YiX6KGoCiAgICogQHBhcmFtIHBhcmFtCiAgICogQHBhcmFtIGNhbGxiYWNrCiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59CiAgICovCgoKICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7CiAgICBrZXk6ICJnZXRHaWZ0TGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEdpZnRMaXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHBhcmFtLCBjYWxsYmFjaykgewogICAgICAgIHZhciByZXEsIG1ldGFkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLkdpZnRMaXN0UmVxdWVzdCgpOwogICAgICAgICAgICAgICAgcmVxLnNldFBhZ2VObyhwYXJhbS5wYWdlLmN1cnJlbnRQYWdlKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRQYWdlU2l6ZShwYXJhbS5wYWdlLnBhZ2VTaXplKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcmVhSWQocGFyYW0uYXJlYUlkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRVc2VySWQocGFyYW0udXNlcklkKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRBcHBJZChwYXJhbS5hcHBJZCk7CiAgICAgICAgICAgICAgICByZXEuc2V0QW5jaG9ySWQocGFyYW0uYW5jaG9ySWQpOwogICAgICAgICAgICAgICAgcmVxLnNldENyZWF0ZWRTdGFydChwYXJhbS5jcmVhdGVkU3RhcnRVaW50KTsKICAgICAgICAgICAgICAgIHJlcS5zZXRDcmVhdGVkRW5kKHBhcmFtLmNyZWF0ZWRFbmRVaW50KTsKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAndG9rZW4nOiBnZXRUb2tlbigpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQuZ2V0R2lmdExpc3QocmVxLCBtZXRhZGF0YSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3ApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEdpZnRMaXN0KF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX2dldEdpZnRMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRHaWZ0TGlzdDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIF9kZWZhdWx0Owp9KCk7CgpleHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-admin/src/api/services/gift.js"],"names":["getToken","error","deps","proto","client","CmsClient","process","env","VUE_APP_GRPC_PROXY_URI","param","callback","req","GiftListRequest","setPageNo","page","currentPage","setPageSize","pageSize","setAreaId","areaId","setUserId","userId","setAppId","appId","setAnchorId","anchorId","setCreatedStart","createdStartUint","setCreatedEnd","createdEndUint","metadata","getGiftList","err","resp"],"mappings":";;;;AAAA,SAASA,QAAT,QAAwB,gBAAxB;AACA,SAASC,KAAT,QAAsB,eAAtB;;;AAGI,oBAAaC,IAAb,EAAmB;AAAA;;AACf,SAAKC,KAAL,GAAaD,IAAI,CAACC,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIF,IAAI,CAACC,KAAL,CAAWE,SAAf,CAAyBC,OAAO,CAACC,GAAR,CAAYC,sBAArC,EAA6D,IAA7D,EAAmE,IAAnE,CAAd;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;;;;iFACI,iBAAmBC,KAAnB,EAA0BC,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,gBAAAA,GADR,GACc,IAAI,KAAKR,KAAL,CAAWS,eAAf,EADd;AAEID,gBAAAA,GAAG,CAACE,SAAJ,CAAcJ,KAAK,CAACK,IAAN,CAAWC,WAAzB;AACAJ,gBAAAA,GAAG,CAACK,WAAJ,CAAgBP,KAAK,CAACK,IAAN,CAAWG,QAA3B;AACAN,gBAAAA,GAAG,CAACO,SAAJ,CAAcT,KAAK,CAACU,MAApB;AACAR,gBAAAA,GAAG,CAACS,SAAJ,CAAcX,KAAK,CAACY,MAApB;AACAV,gBAAAA,GAAG,CAACW,QAAJ,CAAab,KAAK,CAACc,KAAnB;AACAZ,gBAAAA,GAAG,CAACa,WAAJ,CAAgBf,KAAK,CAACgB,QAAtB;AACAd,gBAAAA,GAAG,CAACe,eAAJ,CAAoBjB,KAAK,CAACkB,gBAA1B;AACAhB,gBAAAA,GAAG,CAACiB,aAAJ,CAAkBnB,KAAK,CAACoB,cAAxB;AAEMC,gBAAAA,QAXV,GAWqB;AAAC,2BAAS9B,QAAQ;AAAlB,iBAXrB;AAYI,qBAAKI,MAAL,CAAY2B,WAAZ,CAAwBpB,GAAxB,EAA6BmB,QAA7B,EAAuC,UAACE,GAAD,EAAMC,IAAN,EAAe;AAClD,sBAAI,CAACD,GAAL,EAAU;AACNtB,oBAAAA,QAAQ,CAACuB,IAAD,CAAR;AACH,mBAFD,MAEO;AACHhC,oBAAAA,KAAK,CAAC+B,GAAD,CAAL;AACH;AACJ,iBAND;;AAZJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O","sourcesContent":["import { getToken} from '@/utils/cookie'\nimport { error } from '@/utils/error'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(process.env.VUE_APP_GRPC_PROXY_URI, null, null)\n    }\n\n    /**\n     * 获取礼物记录列表\n     * @param param\n     * @param callback\n     * @returns {Promise<void>}\n     */\n    async getGiftList (param, callback) {\n        let req = new this.proto.GiftListRequest();\n        req.setPageNo(param.page.currentPage)\n        req.setPageSize(param.page.pageSize)\n        req.setAreaId(param.areaId)\n        req.setUserId(param.userId)\n        req.setAppId(param.appId)\n        req.setAnchorId(param.anchorId)\n        req.setCreatedStart(param.createdStartUint)\n        req.setCreatedEnd(param.createdEndUint)\n\n        const metadata = {'token': getToken()};\n        this.client.getGiftList(req, metadata, (err, resp) => {\n            if (!err) {\n                callback(resp)\n            } else {\n                error(err)\n            }\n        })\n    }\n\n}\n"]}]}
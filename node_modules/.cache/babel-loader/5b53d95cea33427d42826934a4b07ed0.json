{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-admin/src/proto/js/cms_pb.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-admin/src/proto/js/cms_pb.js","mtime":1634111099589},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1634111096329},{"path":"/home/mengy/develop/iwork/kafo/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1634111095606}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gc291cmNlOiBjbXMucHJvdG8KLyoqCiAqIEBmaWxlb3ZlcnZpZXcKICogQGVuaGFuY2VhYmxlCiAqIEBzdXBwcmVzcyB7bWlzc2luZ1JlcXVpcmV9IHJlcG9ydHMgZXJyb3Igb24gaW1wbGljaXQgdHlwZSB1c2FnZXMuCiAqIEBzdXBwcmVzcyB7bWVzc2FnZUNvbnZlbnRpb25zfSBKUyBDb21waWxlciByZXBvcnRzIGFuIGVycm9yIGlmIGEgdmFyaWFibGUgb3IKICogICAgIGZpZWxkIHN0YXJ0cyB3aXRoICdNU0dfJyBhbmQgaXNuJ3QgYSB0cmFuc2xhdGFibGUgbWVzc2FnZS4KICogQHB1YmxpYwogKi8gLy8gR0VORVJBVEVEIENPREUgLS0gRE8gTk9UIEVESVQhCi8qIGVzbGludC1kaXNhYmxlICovIC8vIEB0cy1ub2NoZWNrCnZhciBqc3BiPXJlcXVpcmUoJ2dvb2dsZS1wcm90b2J1ZicpO3ZhciBnb29nPWpzcGI7dmFyIGdsb2JhbD1GdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO3ZhciB1c2VydHlwZV9wYj1yZXF1aXJlKCcuL3VzZXJ0eXBlX3BiLmpzJyk7Z29vZy5vYmplY3QuZXh0ZW5kKHByb3RvLHVzZXJ0eXBlX3BiKTt2YXIgYW5jaG9ydHlwZV9wYj1yZXF1aXJlKCcuL2FuY2hvcnR5cGVfcGIuanMnKTtnb29nLm9iamVjdC5leHRlbmQocHJvdG8sYW5jaG9ydHlwZV9wYik7dmFyIGNtc3R5cGVfcGI9cmVxdWlyZSgnLi9jbXN0eXBlX3BiLmpzJyk7Z29vZy5vYmplY3QuZXh0ZW5kKHByb3RvLGNtc3R5cGVfcGIpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVxdWVzdCcsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmsnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkFkbWluTGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkFwcExpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQXBwTGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkFwcFN0YXQnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVwbHknLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVxdWVzdCcsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQXJlYVN0YXRSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdCcsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHknLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkRlbGV0ZVVzZXJSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuSG9tZVN0YXRSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdCcsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHknLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVxdWVzdCcsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVwbHknLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHknLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHknLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVwbHknLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdCcsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuVXNlckxpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5JyxudWxsLGdsb2JhbCk7Z29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTtnb29nLmV4cG9ydFN5bWJvbCgncHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseScsbnVsbCxnbG9iYWwpO2dvb2cuZXhwb3J0U3ltYm9sKCdwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QnLG51bGwsZ2xvYmFsKTsvKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BcmVhTGlzdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLkFyZWFMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BcmVhTGlzdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdD1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5Mb2dpblJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHksanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuSG9tZVN0YXRSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkFwcFN0YXQ9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQXBwU3RhdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BcHBTdGF0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQXBwU3RhdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LnJlcGVhdGVkRmllbGRzXyxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLHByb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkFkbWluTGlzdFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHksanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXyxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuVXNlckxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHksanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5EZWxldGVVc2VyUmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdD1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuVW5ibG9ja1JlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuVW5ibG9ja1JlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuVW5ibG9ja1JlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkF1dGhvcml6ZUFuY2hvclJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkF1dGhvcml6ZUFuY2hvclJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdD1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXF1ZXN0Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHksanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdD1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLHByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuUHJvY2Vzc1Zpb2xhdGlvblJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLHByb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuUGF5TGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLlBheUxpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXyxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdD1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXF1ZXN0Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHksanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLHByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXyxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLHByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXyxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3QucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVxdWVzdD1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLHByb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQXBwTGlzdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuQXBwTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXyxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFwcExpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVxdWVzdCxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEscHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVxdWVzdD1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLG51bGwsbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXF1ZXN0Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLHByb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXyxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHksanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXBseS5yZXBlYXRlZEZpZWxkc18sbnVsbCk7fTtnb29nLmluaGVyaXRzKHByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5Jzt9LyoqCiAqIEdlbmVyYXRlZCBieSBKc1BiQ29kZUdlbmVyYXRvci4KICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYQogKiBzZXJ2ZXIgcmVzcG9uc2UsIG9yIGNvbnN0cnVjdGVkIGRpcmVjdGx5IGluIEphdmFzY3JpcHQuIFRoZSBhcnJheSBpcyB1c2VkCiAqIGluIHBsYWNlIGFuZCBiZWNvbWVzIHBhcnQgb2YgdGhlIGNvbnN0cnVjdGVkIG9iamVjdC4gSXQgaXMgbm90IGNsb25lZC4KICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGwKICogdmFsaWQuCiAqIEBleHRlbmRzIHtqc3BiLk1lc3NhZ2V9CiAqIEBjb25zdHJ1Y3RvcgogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3QsanNwYi5NZXNzYWdlKTtpZihnb29nLkRFQlVHJiYhQ09NUElMRUQpey8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3QuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseT1mdW5jdGlvbihvcHRfZGF0YSl7anNwYi5NZXNzYWdlLmluaXRpYWxpemUodGhpcyxvcHRfZGF0YSwwLC0xLHByb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseS5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0PWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcXVlc3QnO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxwcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXyxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHkuZGlzcGxheU5hbWU9J3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHknO30vKioKICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLgogKiBAcGFyYW0ge0FycmF5PX0gb3B0X2RhdGEgT3B0aW9uYWwgaW5pdGlhbCBkYXRhIGFycmF5LCB0eXBpY2FsbHkgZnJvbSBhCiAqIHNlcnZlciByZXNwb25zZSwgb3IgY29uc3RydWN0ZWQgZGlyZWN0bHkgaW4gSmF2YXNjcmlwdC4gVGhlIGFycmF5IGlzIHVzZWQKICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLgogKiBJZiBubyBkYXRhIGlzIHByb3ZpZGVkLCB0aGUgY29uc3RydWN0ZWQgb2JqZWN0IHdpbGwgYmUgZW1wdHksIGJ1dCBzdGlsbAogKiB2YWxpZC4KICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX0KICogQGNvbnN0cnVjdG9yCiAqL3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcXVlc3Q9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQWdvcmFLZXlSZXF1ZXN0LGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdC5kaXNwbGF5TmFtZT0ncHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdCc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVwbHk9ZnVuY3Rpb24ob3B0X2RhdGEpe2pzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsb3B0X2RhdGEsMCwtMSxudWxsLG51bGwpO307Z29vZy5pbmhlcml0cyhwcm90by5wYi5jbXMuQWdvcmFLZXlSZXBseSxqc3BiLk1lc3NhZ2UpO2lmKGdvb2cuREVCVUcmJiFDT01QSUxFRCl7LyoqCiAgICogQHB1YmxpYwogICAqIEBvdmVycmlkZQogICAqL3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcGx5LmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQWdvcmFLZXlSZXBseSc7fS8qKgogKiBHZW5lcmF0ZWQgYnkgSnNQYkNvZGVHZW5lcmF0b3IuCiAqIEBwYXJhbSB7QXJyYXk9fSBvcHRfZGF0YSBPcHRpb25hbCBpbml0aWFsIGRhdGEgYXJyYXksIHR5cGljYWxseSBmcm9tIGEKICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZAogKiBpbiBwbGFjZSBhbmQgYmVjb21lcyBwYXJ0IG9mIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3QuIEl0IGlzIG5vdCBjbG9uZWQuCiAqIElmIG5vIGRhdGEgaXMgcHJvdmlkZWQsIHRoZSBjb25zdHJ1Y3RlZCBvYmplY3Qgd2lsbCBiZSBlbXB0eSwgYnV0IHN0aWxsCiAqIHZhbGlkLgogKiBAZXh0ZW5kcyB7anNwYi5NZXNzYWdlfQogKiBAY29uc3RydWN0b3IKICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rPWZ1bmN0aW9uKG9wdF9kYXRhKXtqc3BiLk1lc3NhZ2UuaW5pdGlhbGl6ZSh0aGlzLG9wdF9kYXRhLDAsLTEsbnVsbCxudWxsKTt9O2dvb2cuaW5oZXJpdHMocHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLGpzcGIuTWVzc2FnZSk7aWYoZ29vZy5ERUJVRyYmIUNPTVBJTEVEKXsvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLmRpc3BsYXlOYW1lPSdwcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmsnO30vKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi9wcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5BcmVhTGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkFyZWFMaXN0UmVwbHkudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFyZWFMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2FyZWFzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRBcmVhc0xpc3QoKSx1c2VydHlwZV9wYi5BcmVhLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLkFyZWFMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFyZWFMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5BcmVhTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyB1c2VydHlwZV9wYi5BcmVhKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHVzZXJ0eXBlX3BiLkFyZWEuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkQXJlYXModmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFyZWFMaXN0UmVwbHl9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BcmVhTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFyZWFzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsdXNlcnR5cGVfcGIuQXJlYS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcik7fX07LyoqCiAqIHJlcGVhdGVkIHBiLkFyZWEgYXJlYXMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkFyZWE+fQogKi9wcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0QXJlYXNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLHVzZXJ0eXBlX3BiLkFyZWEsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkFyZWE+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFyZWFMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5BcmVhTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRBcmVhc0xpc3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5BcmVhPX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5BcmVhfQogKi9wcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseS5wcm90b3R5cGUuYWRkQXJlYXM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuQXJlYSxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFyZWFMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQXJlYUxpc3RSZXBseS5wcm90b3R5cGUuY2xlYXJBcmVhc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRBcmVhc0xpc3QoW10pO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5Mb2dpblJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Mb2dpblJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtlbWFpbDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwiIikscGFzc3dvcmQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsIiIpfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5Mb2dpblJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkU3RyaW5nKCk7bXNnLnNldEVtYWlsKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkU3RyaW5nKCk7bXNnLnNldFBhc3N3b3JkKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEVtYWlsKCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlU3RyaW5nKDEsZik7fWY9bWVzc2FnZS5nZXRQYXNzd29yZCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVN0cmluZygyLGYpO319Oy8qKgogKiBvcHRpb25hbCBzdHJpbmcgZW1haWwgPSAxOwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqL3Byb3RvLnBiLmNtcy5Mb2dpblJlcXVlc3QucHJvdG90eXBlLmdldEVtYWlsPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwiIik7fTsvKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdC5wcm90b3R5cGUuc2V0RW1haWw9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBzdHJpbmcgcGFzc3dvcmQgPSAyOwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqL3Byb3RvLnBiLmNtcy5Mb2dpblJlcXVlc3QucHJvdG90eXBlLmdldFBhc3N3b3JkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwiIik7fTsvKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTG9naW5SZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkxvZ2luUmVxdWVzdC5wcm90b3R5cGUuc2V0UGFzc3dvcmQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywyLHZhbHVlKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17YXJlYUlkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLHN0YXJ0QXQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksZW5kQXQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFN0YXJ0QXQodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0RW5kQXQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO31mPW1lc3NhZ2UuZ2V0U3RhcnRBdCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldEVuZEF0KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXJlYV9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcmVhSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgc3RhcnRfYXQgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3QucHJvdG90eXBlLmdldFN0YXJ0QXQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcXVlc3QucHJvdG90eXBlLnNldFN0YXJ0QXQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgZW5kX2F0ID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0LnByb3RvdHlwZS5nZXRFbmRBdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVxdWVzdC5wcm90b3R5cGUuc2V0RW5kQXQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywzLHZhbHVlKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2luY29tZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxwYXlDb3VudDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxuZXdVc2VyOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLGFjdGl2ZVVzZXI6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDQsMCksYnVzeUFuY2hvcjpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwwKSxvbmxpbmVBbmNob3I6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDYsMCkscmV2aWV3QW5jaG9yOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw3LDApLHJldmlld1Byb2ZpbGU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDgsMCkscmV2aWV3VmlkZW86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDksMCksbmV3QW1vdW50OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxMCwwKSxleHBlbnNlQW1vdW50OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxMSwwKSx0b3RhbEFtb3VudDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMTIsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseX0KICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEluY29tZSh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYXlDb3VudCh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXROZXdVc2VyKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFjdGl2ZVVzZXIodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QnVzeUFuY2hvcih2YWx1ZSk7YnJlYWs7Y2FzZSA2OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRPbmxpbmVBbmNob3IodmFsdWUpO2JyZWFrO2Nhc2UgNzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UmV2aWV3QW5jaG9yKHZhbHVlKTticmVhaztjYXNlIDg6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFJldmlld1Byb2ZpbGUodmFsdWUpO2JyZWFrO2Nhc2UgOTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UmV2aWV3VmlkZW8odmFsdWUpO2JyZWFrO2Nhc2UgMTA6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDY0KCk7bXNnLnNldE5ld0Ftb3VudCh2YWx1ZSk7YnJlYWs7Y2FzZSAxMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50NjQoKTttc2cuc2V0RXhwZW5zZUFtb3VudCh2YWx1ZSk7YnJlYWs7Y2FzZSAxMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50NjQoKTttc2cuc2V0VG90YWxBbW91bnQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHl9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEluY29tZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBheUNvdW50KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0TmV3VXNlcigpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMyxmKTt9Zj1tZXNzYWdlLmdldEFjdGl2ZVVzZXIoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRCdXN5QW5jaG9yKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig1LGYpO31mPW1lc3NhZ2UuZ2V0T25saW5lQW5jaG9yKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig2LGYpO31mPW1lc3NhZ2UuZ2V0UmV2aWV3QW5jaG9yKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig3LGYpO31mPW1lc3NhZ2UuZ2V0UmV2aWV3UHJvZmlsZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoOCxmKTt9Zj1tZXNzYWdlLmdldFJldmlld1ZpZGVvKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig5LGYpO31mPW1lc3NhZ2UuZ2V0TmV3QW1vdW50KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQ2NCgxMCxmKTt9Zj1tZXNzYWdlLmdldEV4cGVuc2VBbW91bnQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDY0KDExLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxBbW91bnQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDY0KDEyLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgaW5jb21lID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuZ2V0SW5jb21lPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLnNldEluY29tZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYXlfY291bnQgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LnByb3RvdHlwZS5nZXRQYXlDb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LnByb3RvdHlwZS5zZXRQYXlDb3VudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBuZXdfdXNlciA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLmdldE5ld1VzZXI9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywzLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuc2V0TmV3VXNlcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhY3RpdmVfdXNlciA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLmdldEFjdGl2ZVVzZXI9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuc2V0QWN0aXZlVXNlcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDQsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBidXN5X2FuY2hvciA9IDU7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLmdldEJ1c3lBbmNob3I9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuc2V0QnVzeUFuY2hvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDUsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBvbmxpbmVfYW5jaG9yID0gNjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuZ2V0T25saW5lQW5jaG9yPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLnNldE9ubGluZUFuY2hvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDYsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiByZXZpZXdfYW5jaG9yID0gNzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuZ2V0UmV2aWV3QW5jaG9yPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLnNldFJldmlld0FuY2hvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDcsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiByZXZpZXdfcHJvZmlsZSA9IDg7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLmdldFJldmlld1Byb2ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw4LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuc2V0UmV2aWV3UHJvZmlsZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDgsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiByZXZpZXdfdmlkZW8gPSA5OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LnByb3RvdHlwZS5nZXRSZXZpZXdWaWRlbz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDksMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LnByb3RvdHlwZS5zZXRSZXZpZXdWaWRlbz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDksdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQ2NCBuZXdfYW1vdW50ID0gMTA7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLmdldE5ld0Ftb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEwLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuc2V0TmV3QW1vdW50PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMTAsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQ2NCBleHBlbnNlX2Ftb3VudCA9IDExOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LnByb3RvdHlwZS5nZXRFeHBlbnNlQW1vdW50PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMTEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5LnByb3RvdHlwZS5zZXRFeHBlbnNlQW1vdW50PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMTEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQ2NCB0b3RhbF9hbW91bnQgPSAxMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuT3ZlcnZpZXdSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxBbW91bnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5PdmVydmlld1JlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLk92ZXJ2aWV3UmVwbHkucHJvdG90eXBlLnNldFRvdGFsQW1vdW50PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMTIsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCksc3RhcnRBdDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxlbmRBdDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuSG9tZVN0YXRSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcmVhSWQodmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0U3RhcnRBdCh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRFbmRBdCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fWY9bWVzc2FnZS5nZXRTdGFydEF0KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0RW5kQXQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuSG9tZVN0YXRSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3QucHJvdG90eXBlLnNldEFyZWFJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBzdGFydF9hdCA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdC5wcm90b3R5cGUuZ2V0U3RhcnRBdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuSG9tZVN0YXRSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVxdWVzdC5wcm90b3R5cGUuc2V0U3RhcnRBdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBlbmRfYXQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3QucHJvdG90eXBlLmdldEVuZEF0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuSG9tZVN0YXRSZXF1ZXN0LnByb3RvdHlwZS5zZXRFbmRBdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQXBwU3RhdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXBwU3RhdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BcHBTdGF0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17YXBwSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCksbmV3SW5jb21lOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLHRvdGFsSW5jb21lOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLG5ld1VzZXI6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDQsMCksZ29vZ2xlSW5jb21lOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw1LDApLGFwcGxlSW5jb21lOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw2LDApLG90aGVySW5jb21lOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw3LDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcFN0YXR9CiAqL3Byb3RvLnBiLmNtcy5BcHBTdGF0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkFwcFN0YXQoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkFwcFN0YXQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFwcFN0YXR9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcHBTdGF0fQogKi9wcm90by5wYi5jbXMuQXBwU3RhdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcHBJZCh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXROZXdJbmNvbWUodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0VG90YWxJbmNvbWUodmFsdWUpO2JyZWFrO2Nhc2UgNDp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0TmV3VXNlcih2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRHb29nbGVJbmNvbWUodmFsdWUpO2JyZWFrO2Nhc2UgNjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXBwbGVJbmNvbWUodmFsdWUpO2JyZWFrO2Nhc2UgNzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0T3RoZXJJbmNvbWUodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQXBwU3RhdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQXBwU3RhdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFwcFN0YXR9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BcHBTdGF0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFwcElkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO31mPW1lc3NhZ2UuZ2V0TmV3SW5jb21lKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxJbmNvbWUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXROZXdVc2VyKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0R29vZ2xlSW5jb21lKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig1LGYpO31mPW1lc3NhZ2UuZ2V0QXBwbGVJbmNvbWUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDYsZik7fWY9bWVzc2FnZS5nZXRPdGhlckluY29tZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNyxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFwcF9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLmdldEFwcElkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcHBTdGF0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLnNldEFwcElkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIG5ld19pbmNvbWUgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BcHBTdGF0LnByb3RvdHlwZS5nZXROZXdJbmNvbWU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcFN0YXR9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQXBwU3RhdC5wcm90b3R5cGUuc2V0TmV3SW5jb21lPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX2luY29tZSA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLmdldFRvdGFsSW5jb21lPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcHBTdGF0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLnNldFRvdGFsSW5jb21lPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIG5ld191c2VyID0gNDsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQXBwU3RhdC5wcm90b3R5cGUuZ2V0TmV3VXNlcj1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDQsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXBwU3RhdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BcHBTdGF0LnByb3RvdHlwZS5zZXROZXdVc2VyPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGdvb2dsZV9pbmNvbWUgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BcHBTdGF0LnByb3RvdHlwZS5nZXRHb29nbGVJbmNvbWU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcFN0YXR9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQXBwU3RhdC5wcm90b3R5cGUuc2V0R29vZ2xlSW5jb21lPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFwcGxlX2luY29tZSA9IDY7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLmdldEFwcGxlSW5jb21lPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcHBTdGF0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLnNldEFwcGxlSW5jb21lPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIG90aGVyX2luY29tZSA9IDc7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLmdldE90aGVySW5jb21lPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcHBTdGF0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFwcFN0YXQucHJvdG90eXBlLnNldE90aGVySW5jb21lPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNyx2YWx1ZSk7fTsvKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi9wcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseS5yZXBlYXRlZEZpZWxkc189WzEsMl07aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHkucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17c3RhdHNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFN0YXRzTGlzdCgpLHByb3RvLnBiLmNtcy5BcHBTdGF0LnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSksaG91cmx5QWN0aXZlc0xpc3Q6KGY9anNwYi5NZXNzYWdlLmdldFJlcGVhdGVkRmllbGQobXNnLDIpKT09bnVsbD91bmRlZmluZWQ6Zn07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5fQogKi9wcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseX0KICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9bmV3IHByb3RvLnBiLmNtcy5BcHBTdGF0KCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHByb3RvLnBiLmNtcy5BcHBTdGF0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZFN0YXRzKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlcz1yZWFkZXIuaXNEZWxpbWl0ZWQoKT9yZWFkZXIucmVhZFBhY2tlZFVpbnQzMigpOltyZWFkZXIucmVhZFVpbnQzMigpXTtmb3IodmFyIGk9MDtpPHZhbHVlcy5sZW5ndGg7aSsrKXttc2cuYWRkSG91cmx5QWN0aXZlcyh2YWx1ZXNbaV0pO31icmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRTdGF0c0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLHByb3RvLnBiLmNtcy5BcHBTdGF0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldEhvdXJseUFjdGl2ZXNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUGFja2VkVWludDMyKDIsZik7fX07LyoqCiAqIHJlcGVhdGVkIEFwcFN0YXQgc3RhdHMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLmNtcy5BcHBTdGF0Pn0KICovcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHkucHJvdG90eXBlLmdldFN0YXRzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxwcm90by5wYi5jbXMuQXBwU3RhdCwxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuY21zLkFwcFN0YXQ+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5LnByb3RvdHlwZS5zZXRTdGF0c0xpc3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXBwU3RhdD19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcFN0YXR9CiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5LnByb3RvdHlwZS5hZGRTdGF0cz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5jbXMuQXBwU3RhdCxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseS5wcm90b3R5cGUuY2xlYXJTdGF0c0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRTdGF0c0xpc3QoW10pO307LyoqCiAqIHJlcGVhdGVkIHVpbnQzMiBob3VybHlfYWN0aXZlcyA9IDI7CiAqIEByZXR1cm4geyFBcnJheTxudW1iZXI+fQogKi9wcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseS5wcm90b3R5cGUuZ2V0SG91cmx5QWN0aXZlc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkRmllbGQodGhpcywyKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTxudW1iZXI+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkhvbWVTdGF0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseS5wcm90b3R5cGUuc2V0SG91cmx5QWN0aXZlc0xpc3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0RmllbGQodGhpcywyLHZhbHVlfHxbXSk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5LnByb3RvdHlwZS5hZGRIb3VybHlBY3RpdmVzPWZ1bmN0aW9uKHZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkRmllbGQodGhpcywyLHZhbHVlLG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuSG9tZVN0YXRSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Ib21lU3RhdFJlcGx5LnByb3RvdHlwZS5jbGVhckhvdXJseUFjdGl2ZXNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0SG91cmx5QWN0aXZlc0xpc3QoW10pO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCksc3RhcnRBdDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxlbmRBdDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQXJlYVN0YXRSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcmVhSWQodmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0U3RhcnRBdCh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRFbmRBdCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fWY9bWVzc2FnZS5nZXRTdGFydEF0KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0RW5kQXQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QucHJvdG90eXBlLnNldEFyZWFJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBzdGFydF9hdCA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdC5wcm90b3R5cGUuZ2V0U3RhcnRBdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXJlYVN0YXRSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVxdWVzdC5wcm90b3R5cGUuc2V0U3RhcnRBdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBlbmRfYXQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3QucHJvdG90eXBlLmdldEVuZEF0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXF1ZXN0LnByb3RvdHlwZS5zZXRFbmRBdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS4KICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fQogKiBAY29uc3QKICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtzdGF0c0xpc3Q6anNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0U3RhdHNMaXN0KCksY21zdHlwZV9wYi5BcmVhU3RhdC50b09iamVjdCxpbmNsdWRlSW5zdGFuY2UpfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5fQogKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgY21zdHlwZV9wYi5BcmVhU3RhdCgpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxjbXN0eXBlX3BiLkFyZWFTdGF0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZFN0YXRzKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRTdGF0c0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLGNtc3R5cGVfcGIuQXJlYVN0YXQuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5BcmVhU3RhdCBzdGF0cyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuQXJlYVN0YXQ+fQogKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseS5wcm90b3R5cGUuZ2V0U3RhdHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLGNtc3R5cGVfcGIuQXJlYVN0YXQsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkFyZWFTdGF0Pn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5fSByZXR1cm5zIHRoaXMKKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseS5wcm90b3R5cGUuc2V0U3RhdHNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQXJlYVN0YXQ9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkFyZWFTdGF0fQogKi9wcm90by5wYi5jbXMuQXJlYVN0YXRSZXBseS5wcm90b3R5cGUuYWRkU3RhdHM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuQXJlYVN0YXQsb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhU3RhdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFyZWFTdGF0UmVwbHkucHJvdG90eXBlLmNsZWFyU3RhdHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0U3RhdHNMaXN0KFtdKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksYXJlYUlkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLGxldmVsOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLGFuY2hvcklkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw1LDApLHN0YXRBdDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNiwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VObyh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlU2l6ZSh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcmVhSWQodmFsdWUpO2JyZWFrO2Nhc2UgNDp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldExldmVsKHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFuY2hvcklkKHZhbHVlKTticmVhaztjYXNlIDY6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFN0YXRBdCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0TGV2ZWwoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDQsZik7fWY9bWVzc2FnZS5nZXRBbmNob3JJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9Zj1tZXNzYWdlLmdldFN0YXRBdCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNixmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgcGIuQW5jaG9yTGV2ZWwgbGV2ZWwgPSA0OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yTGV2ZWx9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5wcm90b3R5cGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkFuY2hvckxldmVsfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LnByb3RvdHlwZS5zZXRMZXZlbD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw0LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYW5jaG9yX2lkID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcXVlc3QucHJvdG90eXBlLmdldEFuY2hvcklkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVxdWVzdC5wcm90b3R5cGUuc2V0QW5jaG9ySWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw1LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgc3RhdF9hdCA9IDY7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LnByb3RvdHlwZS5nZXRTdGF0QXQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw2LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXF1ZXN0LnByb3RvdHlwZS5zZXRTdGF0QXQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw2LHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3N0YXRzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRTdGF0c0xpc3QoKSxjbXN0eXBlX3BiLkFuY2hvclN0YXQudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKSxwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksdG90YWxQYWdlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHRvdGFsQ291bnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5fQogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9bmV3IGNtc3R5cGVfcGIuQW5jaG9yU3RhdCgpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxjbXN0eXBlX3BiLkFuY2hvclN0YXQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkU3RhdHModmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFRvdGFsUGFnZSh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbENvdW50KHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFN0YXRzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsY21zdHlwZV9wYi5BbmNob3JTdGF0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxQYWdlKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxDb3VudCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogcmVwZWF0ZWQgcGIuQW5jaG9yU3RhdCBzdGF0cyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuQW5jaG9yU3RhdD59CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHkucHJvdG90eXBlLmdldFN0YXRzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxjbXN0eXBlX3BiLkFuY2hvclN0YXQsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkFuY2hvclN0YXQ+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseS5wcm90b3R5cGUuc2V0U3RhdHNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQW5jaG9yU3RhdD19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yU3RhdH0KICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseS5wcm90b3R5cGUuYWRkU3RhdHM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuQW5jaG9yU3RhdCxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHkucHJvdG90eXBlLmNsZWFyU3RhdHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0U3RhdHNMaXN0KFtdKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9ubyA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseS5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LnByb3RvdHlwZS5zZXRQYWdlTm89ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9zaXplID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseS5wcm90b3R5cGUuc2V0UGFnZVNpemU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywzLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdG90YWxfcGFnZSA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxQYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yU3RhdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbFBhZ2U9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw0LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdG90YWxfY291bnQgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHkucHJvdG90eXBlLmdldFRvdGFsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvclN0YXRSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JTdGF0UmVwbHkucHJvdG90eXBlLnNldFRvdGFsQ291bnQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw1LHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQWRtaW5MaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQWRtaW5MaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthZG1pbnNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldEFkbWluc0xpc3QoKSxjbXN0eXBlX3BiLkFkbWluLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWRtaW5MaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuQWRtaW5MaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFkbWluTGlzdFJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWRtaW5MaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgY21zdHlwZV9wYi5BZG1pbigpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxjbXN0eXBlX3BiLkFkbWluLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZEFkbWlucyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQWRtaW5MaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFkbWluTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFkbWluc0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLGNtc3R5cGVfcGIuQWRtaW4uc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5BZG1pbiBhZG1pbnMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkFkbWluPn0KICovcHJvdG8ucGIuY21zLkFkbWluTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRBZG1pbnNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLGNtc3R5cGVfcGIuQWRtaW4sMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkFkbWluPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BZG1pbkxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLkFkbWluTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRBZG1pbnNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQWRtaW49fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkFkbWlufQogKi9wcm90by5wYi5jbXMuQWRtaW5MaXN0UmVwbHkucHJvdG90eXBlLmFkZEFkbWlucz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5BZG1pbixvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFkbWluTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFkbWluTGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhckFkbWluc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRBZG1pbnNMaXN0KFtdKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtndWlsZHNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldEd1aWxkc0xpc3QoKSxjbXN0eXBlX3BiLkd1aWxkLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkd1aWxkTGlzdFJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgY21zdHlwZV9wYi5HdWlsZCgpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxjbXN0eXBlX3BiLkd1aWxkLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZEd1aWxkcyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkd1aWxkTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEd1aWxkc0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLGNtc3R5cGVfcGIuR3VpbGQuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5HdWlsZCBndWlsZHMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkd1aWxkPn0KICovcHJvdG8ucGIuY21zLkd1aWxkTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRHdWlsZHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLGNtc3R5cGVfcGIuR3VpbGQsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkd1aWxkPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5HdWlsZExpc3RSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLkd1aWxkTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRHdWlsZHNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuR3VpbGQ9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkd1aWxkfQogKi9wcm90by5wYi5jbXMuR3VpbGRMaXN0UmVwbHkucHJvdG90eXBlLmFkZEd1aWxkcz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5HdWlsZCxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkd1aWxkTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkd1aWxkTGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhckd1aWxkc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRHdWlsZHNMaXN0KFtdKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksYW5jaG9ySWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksYXJlYUlkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLGd1aWxkSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCksYmxvY2tTdGF0dXM6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDYsMCksb25saW5lU3RhdHVzOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw3LDApLHJldmlld1N0YXR1czpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csOCwwKSxjcmVhdGVkU3RhcnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDksMCksY3JlYXRlZEVuZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMTAsMCksbWluT2ZmbGluZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMTEsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlTm8odmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZVNpemUodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QW5jaG9ySWQodmFsdWUpO2JyZWFrO2Nhc2UgNDp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEd1aWxkSWQodmFsdWUpO2JyZWFrO2Nhc2UgNjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldEJsb2NrU3RhdHVzKHZhbHVlKTticmVhaztjYXNlIDc6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRPbmxpbmVTdGF0dXModmFsdWUpO2JyZWFrO2Nhc2UgODp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldFJldmlld1N0YXR1cyh2YWx1ZSk7YnJlYWs7Y2FzZSA5OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRDcmVhdGVkU3RhcnQodmFsdWUpO2JyZWFrO2Nhc2UgMTA6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldENyZWF0ZWRFbmQodmFsdWUpO2JyZWFrO2Nhc2UgMTE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldE1pbk9mZmxpbmUodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRQYWdlTm8oKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fWY9bWVzc2FnZS5nZXRQYWdlU2l6ZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldEFuY2hvcklkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0R3VpbGRJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9Zj1tZXNzYWdlLmdldEJsb2NrU3RhdHVzKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSg2LGYpO31mPW1lc3NhZ2UuZ2V0T25saW5lU3RhdHVzKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSg3LGYpO31mPW1lc3NhZ2UuZ2V0UmV2aWV3U3RhdHVzKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSg4LGYpO31mPW1lc3NhZ2UuZ2V0Q3JlYXRlZFN0YXJ0KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig5LGYpO31mPW1lc3NhZ2UuZ2V0Q3JlYXRlZEVuZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMTAsZik7fWY9bWVzc2FnZS5nZXRNaW5PZmZsaW5lKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxMSxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFuY2hvcl9pZCA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBbmNob3JJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFuY2hvcklkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGd1aWxkX2lkID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEd1aWxkSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRHdWlsZElkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgcGIuQmxvY2tTdGF0dXMgYmxvY2tfc3RhdHVzID0gNjsKICogQHJldHVybiB7IXByb3RvLnBiLkJsb2NrU3RhdHVzfQogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEJsb2NrU3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNiwwKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5CbG9ja1N0YXR1c30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QmxvY2tTdGF0dXM9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsNix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgcGIuT25saW5lU3RhdHVzIG9ubGluZV9zdGF0dXMgPSA3OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuT25saW5lU3RhdHVzfQogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldE9ubGluZVN0YXR1cz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDcsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuT25saW5lU3RhdHVzfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRPbmxpbmVTdGF0dXM9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsNyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgcGIuUmV2aWV3U3RhdHVzIHJldmlld19zdGF0dXMgPSA4OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuUmV2aWV3U3RhdHVzfQogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFJldmlld1N0YXR1cz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDgsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuUmV2aWV3U3RhdHVzfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRSZXZpZXdTdGF0dXM9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsOCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGNyZWF0ZWRfc3RhcnQgPSA5OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0Q3JlYXRlZFN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsOSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0Q3JlYXRlZFN0YXJ0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsOSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGNyZWF0ZWRfZW5kID0gMTA7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRDcmVhdGVkRW5kPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMTAsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldENyZWF0ZWRFbmQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxMCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIG1pbl9vZmZsaW5lID0gMTE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRNaW5PZmZsaW5lPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMTEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldE1pbk9mZmxpbmU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxMSx2YWx1ZSk7fTsvKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXz1bMV07aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthbmNob3JzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRBbmNob3JzTGlzdCgpLGFuY2hvcnR5cGVfcGIuQW5jaG9yQmFzaWMudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKSxwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksdG90YWxQYWdlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHRvdGFsQ291bnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9bmV3IGFuY2hvcnR5cGVfcGIuQW5jaG9yQmFzaWMoKTtyZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsYW5jaG9ydHlwZV9wYi5BbmNob3JCYXNpYy5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO21zZy5hZGRBbmNob3JzKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VObyh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlU2l6ZSh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbFBhZ2UodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0VG90YWxDb3VudCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRBbmNob3JzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsYW5jaG9ydHlwZV9wYi5BbmNob3JCYXNpYy5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcik7fWY9bWVzc2FnZS5nZXRQYWdlTm8oKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDIsZik7fWY9bWVzc2FnZS5nZXRQYWdlU2l6ZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMyxmKTt9Zj1tZXNzYWdlLmdldFRvdGFsUGFnZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNCxmKTt9Zj1tZXNzYWdlLmdldFRvdGFsQ291bnQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDUsZik7fX07LyoqCiAqIHJlcGVhdGVkIHBiLkFuY2hvckJhc2ljIGFuY2hvcnMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkFuY2hvckJhc2ljPn0KICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseS5wcm90b3R5cGUuZ2V0QW5jaG9yc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsYW5jaG9ydHlwZV9wYi5BbmNob3JCYXNpYywxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuQW5jaG9yQmFzaWM+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseS5wcm90b3R5cGUuc2V0QW5jaG9yc0xpc3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5BbmNob3JCYXNpYz19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yQmFzaWN9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkucHJvdG90eXBlLmFkZEFuY2hvcnM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuQW5jaG9yQmFzaWMsb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhckFuY2hvcnNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0QW5jaG9yc0xpc3QoW10pO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX25vID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkucHJvdG90eXBlLnNldFBhZ2VObz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX3NpemUgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB0b3RhbF9wYWdlID0gNDsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRUb3RhbFBhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JMaXN0UmVwbHkucHJvdG90eXBlLnNldFRvdGFsUGFnZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDQsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB0b3RhbF9jb3VudCA9IDU7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxDb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFuY2hvckxpc3RSZXBseS5wcm90b3R5cGUuc2V0VG90YWxDb3VudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDUsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksdXNlcklkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLGFyZWFJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSxuaWNrbmFtZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwiIiksdmlwT25seTpqc3BiLk1lc3NhZ2UuZ2V0Qm9vbGVhbkZpZWxkV2l0aERlZmF1bHQobXNnLDYsZmFsc2UpLGRlcG9zaXRPbmx5OmpzcGIuTWVzc2FnZS5nZXRCb29sZWFuRmllbGRXaXRoRGVmYXVsdChtc2csNyxmYWxzZSksbWluQmFsYW5jZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csOCwwKSxjcmVhdGVkU3RhcnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDksMCksY3JlYXRlZEVuZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMTAsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFVzZXJJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcmVhSWQodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRTdHJpbmcoKTttc2cuc2V0Tmlja25hbWUodmFsdWUpO2JyZWFrO2Nhc2UgNjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRCb29sKCk7bXNnLnNldFZpcE9ubHkodmFsdWUpO2JyZWFrO2Nhc2UgNzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRCb29sKCk7bXNnLnNldERlcG9zaXRPbmx5KHZhbHVlKTticmVhaztjYXNlIDg6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldE1pbkJhbGFuY2UodmFsdWUpO2JyZWFrO2Nhc2UgOTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0Q3JlYXRlZFN0YXJ0KHZhbHVlKTticmVhaztjYXNlIDEwOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRDcmVhdGVkRW5kKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0VXNlcklkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0Tmlja25hbWUoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVTdHJpbmcoNSxmKTt9Zj1tZXNzYWdlLmdldFZpcE9ubHkoKTtpZihmKXt3cml0ZXIud3JpdGVCb29sKDYsZik7fWY9bWVzc2FnZS5nZXREZXBvc2l0T25seSgpO2lmKGYpe3dyaXRlci53cml0ZUJvb2woNyxmKTt9Zj1tZXNzYWdlLmdldE1pbkJhbGFuY2UoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDgsZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkU3RhcnQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDksZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkRW5kKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxMCxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFBhZ2VObz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGFnZVNpemU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHVzZXJfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFVzZXJJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0VXNlcklkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFyZWFJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDQsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgc3RyaW5nIG5pY2tuYW1lID0gNTsKICogQHJldHVybiB7c3RyaW5nfQogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXROaWNrbmFtZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsIiIpO307LyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldE5pY2tuYW1lPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsNSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgYm9vbCB2aXBfb25seSA9IDY7CiAqIEByZXR1cm4ge2Jvb2xlYW59CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFZpcE9ubHk9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEJvb2xlYW5GaWVsZFdpdGhEZWZhdWx0KHRoaXMsNixmYWxzZSk7fTsvKioKICogQHBhcmFtIHtib29sZWFufSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFZpcE9ubHk9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zQm9vbGVhbkZpZWxkKHRoaXMsNix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgYm9vbCBkZXBvc2l0X29ubHkgPSA3OwogKiBAcmV0dXJuIHtib29sZWFufQogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXREZXBvc2l0T25seT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0Qm9vbGVhbkZpZWxkV2l0aERlZmF1bHQodGhpcyw3LGZhbHNlKTt9Oy8qKgogKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0RGVwb3NpdE9ubHk9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zQm9vbGVhbkZpZWxkKHRoaXMsNyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIG1pbl9iYWxhbmNlID0gODsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRNaW5CYWxhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsOCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRNaW5CYWxhbmNlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsOCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGNyZWF0ZWRfc3RhcnQgPSA5OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldENyZWF0ZWRTdGFydD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDksMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0Q3JlYXRlZFN0YXJ0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsOSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGNyZWF0ZWRfZW5kID0gMTA7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0Q3JlYXRlZEVuZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEwLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldENyZWF0ZWRFbmQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxMCx2YWx1ZSk7fTsvKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHkudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3VzZXJzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRVc2Vyc0xpc3QoKSx1c2VydHlwZV9wYi5Vc2VyLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSkscGFnZU5vOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLHBhZ2VTaXplOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLHRvdGFsUGFnZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSx0b3RhbENvdW50OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw1LDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgdXNlcnR5cGVfcGIuVXNlcigpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSx1c2VydHlwZV9wYi5Vc2VyLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZFVzZXJzKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VObyh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlU2l6ZSh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbFBhZ2UodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0VG90YWxDb3VudCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0VXNlcnNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEsZix1c2VydHlwZV9wYi5Vc2VyLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxQYWdlKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxDb3VudCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogcmVwZWF0ZWQgcGIuVXNlciB1c2VycyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuVXNlcj59CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRVc2Vyc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsdXNlcnR5cGVfcGIuVXNlciwxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuVXNlcj59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHkucHJvdG90eXBlLnNldFVzZXJzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLlVzZXI9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLlVzZXJ9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRVc2Vycz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5Vc2VyLG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhclVzZXJzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFVzZXJzTGlzdChbXSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXBseS5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHkucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHkucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX3BhZ2UgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRUb3RhbFBhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlVzZXJMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXBseS5wcm90b3R5cGUuc2V0VG90YWxQYWdlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX2NvdW50ID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVXNlckxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxDb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVXNlckxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Vc2VyTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbENvdW50PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17ZW50aXR5VHlwZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxlbnRpdHlJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxhbW91bnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksc2VuZE5vdGlmeTpqc3BiLk1lc3NhZ2UuZ2V0Qm9vbGVhbkZpZWxkV2l0aERlZmF1bHQobXNnLDQsZmFsc2UpLGRlc2M6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsIiIpfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldEVudGl0eVR5cGUodmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0RW50aXR5SWQodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRJbnQzMigpO21zZy5zZXRBbW91bnQodmFsdWUpO2JyZWFrO2Nhc2UgNDp2YXIgdmFsdWU9cmVhZGVyLnJlYWRCb29sKCk7bXNnLnNldFNlbmROb3RpZnkodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRTdHJpbmcoKTttc2cuc2V0RGVzYyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEVudGl0eVR5cGUoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDEsZik7fWY9bWVzc2FnZS5nZXRFbnRpdHlJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldEFtb3VudCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVJbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0U2VuZE5vdGlmeSgpO2lmKGYpe3dyaXRlci53cml0ZUJvb2woNCxmKTt9Zj1tZXNzYWdlLmdldERlc2MoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVTdHJpbmcoNSxmKTt9fTsvKioKICogb3B0aW9uYWwgcGIuRW50aXR5VHlwZSBlbnRpdHlfdHlwZSA9IDE7CiAqIEByZXR1cm4geyFwcm90by5wYi5FbnRpdHlUeXBlfQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QucHJvdG90eXBlLmdldEVudGl0eVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkVudGl0eVR5cGV9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QucHJvdG90eXBlLnNldEVudGl0eVR5cGU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGVudGl0eV9pZCA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0LnByb3RvdHlwZS5nZXRFbnRpdHlJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QucHJvdG90eXBlLnNldEVudGl0eUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgaW50MzIgYW1vdW50ID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QucHJvdG90eXBlLmdldEFtb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QucHJvdG90eXBlLnNldEFtb3VudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIGJvb2wgc2VuZF9ub3RpZnkgPSA0OwogKiBAcmV0dXJuIHtib29sZWFufQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QucHJvdG90eXBlLmdldFNlbmROb3RpZnk9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEJvb2xlYW5GaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCxmYWxzZSk7fTsvKioKICogQHBhcmFtIHtib29sZWFufSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXF1ZXN0LnByb3RvdHlwZS5zZXRTZW5kTm90aWZ5PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0Jvb2xlYW5GaWVsZCh0aGlzLDQsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHN0cmluZyBkZXNjID0gNTsKICogQHJldHVybiB7c3RyaW5nfQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcXVlc3QucHJvdG90eXBlLmdldERlc2M9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LCIiKTt9Oy8qKgogKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVxdWVzdC5wcm90b3R5cGUuc2V0RGVzYz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLDUsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHkudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtiYWxhbmNlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXBseX0KICovcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcGx5fQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEJhbGFuY2UodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQWRqdXN0QmFsYW5jZVJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHl9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0QmFsYW5jZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIGJhbGFuY2UgPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHkucHJvdG90eXBlLmdldEJhbGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFkanVzdEJhbGFuY2VSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BZGp1c3RCYWxhbmNlUmVwbHkucHJvdG90eXBlLnNldEJhbGFuY2U9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5EZWxldGVVc2VyUmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5EZWxldGVVc2VyUmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXt1c2VySWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5EZWxldGVVc2VyUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5EZWxldGVVc2VyUmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkRlbGV0ZVVzZXJSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5EZWxldGVVc2VyUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRVc2VySWQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkRlbGV0ZVVzZXJSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5EZWxldGVVc2VyUmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRVc2VySWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB1c2VyX2lkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3QucHJvdG90eXBlLmdldFVzZXJJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuRGVsZXRlVXNlclJlcXVlc3QucHJvdG90eXBlLnNldFVzZXJJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtlbnRpdHlUeXBlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLGVudGl0eUlkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLGJsb2NrU3RhdHVzOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLGR1cmF0aW9uOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHJlYXNvbjpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwiIil9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldEVudGl0eVR5cGUodmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0RW50aXR5SWQodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldEJsb2NrU3RhdHVzKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldER1cmF0aW9uKHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkU3RyaW5nKCk7bXNnLnNldFJlYXNvbih2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRFbnRpdHlUeXBlKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSgxLGYpO31mPW1lc3NhZ2UuZ2V0RW50aXR5SWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDIsZik7fWY9bWVzc2FnZS5nZXRCbG9ja1N0YXR1cygpO2lmKGYhPT0wLjApe3dyaXRlci53cml0ZUVudW0oMyxmKTt9Zj1tZXNzYWdlLmdldER1cmF0aW9uKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0UmVhc29uKCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlU3RyaW5nKDUsZik7fX07LyoqCiAqIG9wdGlvbmFsIHBiLkVudGl0eVR5cGUgZW50aXR5X3R5cGUgPSAxOwogKiBAcmV0dXJuIHshcHJvdG8ucGIuRW50aXR5VHlwZX0KICovcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdC5wcm90b3R5cGUuZ2V0RW50aXR5VHlwZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuRW50aXR5VHlwZX0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0LnByb3RvdHlwZS5zZXRFbnRpdHlUeXBlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBlbnRpdHlfaWQgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3QucHJvdG90eXBlLmdldEVudGl0eUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0LnByb3RvdHlwZS5zZXRFbnRpdHlJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHBiLkJsb2NrU3RhdHVzIGJsb2NrX3N0YXR1cyA9IDM7CiAqIEByZXR1cm4geyFwcm90by5wYi5CbG9ja1N0YXR1c30KICovcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdC5wcm90b3R5cGUuZ2V0QmxvY2tTdGF0dXM9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywzLDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkJsb2NrU3RhdHVzfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3QucHJvdG90eXBlLnNldEJsb2NrU3RhdHVzPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBkdXJhdGlvbiA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdC5wcm90b3R5cGUuZ2V0RHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5CbG9ja1JlcXVlc3QucHJvdG90eXBlLnNldER1cmF0aW9uPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgc3RyaW5nIHJlYXNvbiA9IDU7CiAqIEByZXR1cm4ge3N0cmluZ30KICovcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdC5wcm90b3R5cGUuZ2V0UmVhc29uPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNSwiIik7fTsvKioKICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQmxvY2tSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkJsb2NrUmVxdWVzdC5wcm90b3R5cGUuc2V0UmVhc29uPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsNSx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuVW5ibG9ja1JlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuVW5ibG9ja1JlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlVuYmxvY2tSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlVuYmxvY2tSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17ZW50aXR5VHlwZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxlbnRpdHlJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdH0KICovcHJvdG8ucGIuY21zLlVuYmxvY2tSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlVuYmxvY2tSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVW5ibG9ja1JlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdH0KICovcHJvdG8ucGIuY21zLlVuYmxvY2tSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRFbnRpdHlUeXBlKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEVudGl0eUlkKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlVuYmxvY2tSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlVuYmxvY2tSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuVW5ibG9ja1JlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0RW50aXR5VHlwZSgpO2lmKGYhPT0wLjApe3dyaXRlci53cml0ZUVudW0oMSxmKTt9Zj1tZXNzYWdlLmdldEVudGl0eUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO319Oy8qKgogKiBvcHRpb25hbCBwYi5FbnRpdHlUeXBlIGVudGl0eV90eXBlID0gMTsKICogQHJldHVybiB7IXByb3RvLnBiLkVudGl0eVR5cGV9CiAqL3Byb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdC5wcm90b3R5cGUuZ2V0RW50aXR5VHlwZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuRW50aXR5VHlwZX0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdC5wcm90b3R5cGUuc2V0RW50aXR5VHlwZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgZW50aXR5X2lkID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVW5ibG9ja1JlcXVlc3QucHJvdG90eXBlLmdldEVudGl0eUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5VbmJsb2NrUmVxdWVzdC5wcm90b3R5cGUuc2V0RW50aXR5SWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5NaWdyYXRlUmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5NaWdyYXRlUmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtlbnRpdHlUeXBlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLHNyY0lkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLGRzdElkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5NaWdyYXRlUmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldEVudGl0eVR5cGUodmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0U3JjSWQodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0RHN0SWQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5NaWdyYXRlUmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRFbnRpdHlUeXBlKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSgxLGYpO31mPW1lc3NhZ2UuZ2V0U3JjSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDIsZik7fWY9bWVzc2FnZS5nZXREc3RJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMyxmKTt9fTsvKioKICogb3B0aW9uYWwgcGIuRW50aXR5VHlwZSBlbnRpdHlfdHlwZSA9IDE7CiAqIEByZXR1cm4geyFwcm90by5wYi5FbnRpdHlUeXBlfQogKi9wcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QucHJvdG90eXBlLmdldEVudGl0eVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkVudGl0eVR5cGV9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QucHJvdG90eXBlLnNldEVudGl0eVR5cGU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHNyY19pZCA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0LnByb3RvdHlwZS5nZXRTcmNJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QucHJvdG90eXBlLnNldFNyY0lkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGRzdF9pZCA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLk1pZ3JhdGVSZXF1ZXN0LnByb3RvdHlwZS5nZXREc3RJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuTWlncmF0ZVJlcXVlc3QucHJvdG90eXBlLnNldERzdElkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkF1dGhvcml6ZUFuY2hvclJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthbmNob3JJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxhcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksZ3VpbGRJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkF1dGhvcml6ZUFuY2hvclJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QW5jaG9ySWQodmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEd1aWxkSWQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkF1dGhvcml6ZUFuY2hvclJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFuY2hvcklkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO31mPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0R3VpbGRJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMyxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFuY2hvcl9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkF1dGhvcml6ZUFuY2hvclJlcXVlc3QucHJvdG90eXBlLmdldEFuY2hvcklkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkF1dGhvcml6ZUFuY2hvclJlcXVlc3QucHJvdG90eXBlLnNldEFuY2hvcklkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkF1dGhvcml6ZUFuY2hvclJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGd1aWxkX2lkID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdC5wcm90b3R5cGUuZ2V0R3VpbGRJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXV0aG9yaXplQW5jaG9yUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BdXRob3JpemVBbmNob3JSZXF1ZXN0LnByb3RvdHlwZS5zZXRHdWlsZElkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17YW5jaG9ySWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBbmNob3JJZCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFuY2hvcklkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYW5jaG9yX2lkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcXVlc3QucHJvdG90eXBlLmdldEFuY2hvcklkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVxdWVzdC5wcm90b3R5cGUuc2V0QW5jaG9ySWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsyXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2Jhc2ljOihmPW1zZy5nZXRCYXNpYygpKSYmYW5jaG9ydHlwZV9wYi5BbmNob3JCYXNpYy50b09iamVjdChpbmNsdWRlSW5zdGFuY2UsZikscHJvZmlsZXNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFByb2ZpbGVzTGlzdCgpLGFuY2hvcnR5cGVfcGIuQW5jaG9yUHJvZmlsZS50b09iamVjdCxpbmNsdWRlSW5zdGFuY2UpfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseX0KICovcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5fQogKi9wcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyBhbmNob3J0eXBlX3BiLkFuY2hvckJhc2ljKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLGFuY2hvcnR5cGVfcGIuQW5jaG9yQmFzaWMuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuc2V0QmFzaWModmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9bmV3IGFuY2hvcnR5cGVfcGIuQW5jaG9yUHJvZmlsZSgpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxhbmNob3J0eXBlX3BiLkFuY2hvclByb2ZpbGUuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkUHJvZmlsZXModmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQW5jaG9yRnVsbFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHl9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0QmFzaWMoKTtpZihmIT1udWxsKXt3cml0ZXIud3JpdGVNZXNzYWdlKDEsZixhbmNob3J0eXBlX3BiLkFuY2hvckJhc2ljLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldFByb2ZpbGVzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgyLGYsYW5jaG9ydHlwZV9wYi5BbmNob3JQcm9maWxlLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9fTsvKioKICogb3B0aW9uYWwgcGIuQW5jaG9yQmFzaWMgYmFzaWMgPSAxOwogKiBAcmV0dXJuIHs/cHJvdG8ucGIuQW5jaG9yQmFzaWN9CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkucHJvdG90eXBlLmdldEJhc2ljPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRXcmFwcGVyRmllbGQodGhpcyxhbmNob3J0eXBlX3BiLkFuY2hvckJhc2ljLDEpO307LyoqCiAqIEBwYXJhbSB7P3Byb3RvLnBiLkFuY2hvckJhc2ljfHVuZGVmaW5lZH0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkucHJvdG90eXBlLnNldEJhc2ljPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIENsZWFycyB0aGUgbWVzc2FnZSBmaWVsZCBtYWtpbmcgaXQgdW5kZWZpbmVkLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkucHJvdG90eXBlLmNsZWFyQmFzaWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRCYXNpYyh1bmRlZmluZWQpO307LyoqCiAqIFJldHVybnMgd2hldGhlciB0aGlzIGZpZWxkIGlzIHNldC4KICogQHJldHVybiB7Ym9vbGVhbn0KICovcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseS5wcm90b3R5cGUuaGFzQmFzaWM9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkKHRoaXMsMSkhPW51bGw7fTsvKioKICogcmVwZWF0ZWQgcGIuQW5jaG9yUHJvZmlsZSBwcm9maWxlcyA9IDI7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuQW5jaG9yUHJvZmlsZT59CiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkucHJvdG90eXBlLmdldFByb2ZpbGVzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxhbmNob3J0eXBlX3BiLkFuY2hvclByb2ZpbGUsMik7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkFuY2hvclByb2ZpbGU+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseS5wcm90b3R5cGUuc2V0UHJvZmlsZXNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZT19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0KICovcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseS5wcm90b3R5cGUuYWRkUHJvZmlsZXM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMixvcHRfdmFsdWUscHJvdG8ucGIuQW5jaG9yUHJvZmlsZSxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFuY2hvckZ1bGxSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BbmNob3JGdWxsUmVwbHkucHJvdG90eXBlLmNsZWFyUHJvZmlsZXNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0UHJvZmlsZXNMaXN0KFtdKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17cGFnZU5vOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLHBhZ2VTaXplOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLGFuY2hvcklkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLGFyZWFJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSxzdGF0dXM6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFuY2hvcklkKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZEVudW0oKTttc2cuc2V0U3RhdHVzKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0QW5jaG9ySWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRTdGF0dXMoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDUsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX25vID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VObz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX3NpemUgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhbmNob3JfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFuY2hvcklkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBbmNob3JJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gNDsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFyZWFJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDQsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHBiLlJldmlld1N0YXR1cyBzdGF0dXMgPSA1OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuUmV2aWV3U3RhdHVzfQogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRTdGF0dXM9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLlJldmlld1N0YXR1c30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRTdGF0dXM9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsNSx2YWx1ZSk7fTsvKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHkudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3Byb2ZpbGVzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRQcm9maWxlc0xpc3QoKSxhbmNob3J0eXBlX3BiLkFuY2hvclByb2ZpbGUudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKSxwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksdG90YWxQYWdlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHRvdGFsQ291bnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyBhbmNob3J0eXBlX3BiLkFuY2hvclByb2ZpbGUoKTtyZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsYW5jaG9ydHlwZV9wYi5BbmNob3JQcm9maWxlLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZFByb2ZpbGVzKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VObyh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlU2l6ZSh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbFBhZ2UodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0VG90YWxDb3VudCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0UHJvZmlsZXNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEsZixhbmNob3J0eXBlX3BiLkFuY2hvclByb2ZpbGUuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO31mPW1lc3NhZ2UuZ2V0UGFnZU5vKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0UGFnZVNpemUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRUb3RhbFBhZ2UoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRUb3RhbENvdW50KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig1LGYpO319Oy8qKgogKiByZXBlYXRlZCBwYi5BbmNob3JQcm9maWxlIHByb2ZpbGVzID0gMTsKICogQHJldHVybiB7IUFycmF5PCFwcm90by5wYi5BbmNob3JQcm9maWxlPn0KICovcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHkucHJvdG90eXBlLmdldFByb2ZpbGVzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxhbmNob3J0eXBlX3BiLkFuY2hvclByb2ZpbGUsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkFuY2hvclByb2ZpbGU+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRQcm9maWxlc0xpc3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5BbmNob3JQcm9maWxlPX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5BbmNob3JQcm9maWxlfQogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseS5wcm90b3R5cGUuYWRkUHJvZmlsZXM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuQW5jaG9yUHJvZmlsZSxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseS5wcm90b3R5cGUuY2xlYXJQcm9maWxlc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRQcm9maWxlc0xpc3QoW10pO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX25vID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHkucHJvdG90eXBlLnNldFBhZ2VObz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX3NpemUgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB0b3RhbF9wYWdlID0gNDsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxQYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9maWxlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHkucHJvdG90eXBlLnNldFRvdGFsUGFnZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDQsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB0b3RhbF9jb3VudCA9IDU7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHkucHJvdG90eXBlLmdldFRvdGFsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2ZpbGVMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUHJvZmlsZUxpc3RSZXBseS5wcm90b3R5cGUuc2V0VG90YWxDb3VudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDUsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtwcm9maWxlSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCksc3RhdHVzOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLHJlYXNvbjpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywiIil9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UHJvZmlsZUlkKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRTdGF0dXModmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRTdHJpbmcoKTttc2cuc2V0UmVhc29uKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFByb2ZpbGVJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFN0YXR1cygpO2lmKGYhPT0wLjApe3dyaXRlci53cml0ZUVudW0oMixmKTt9Zj1tZXNzYWdlLmdldFJlYXNvbigpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVN0cmluZygzLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcHJvZmlsZV9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdC5wcm90b3R5cGUuZ2V0UHJvZmlsZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0LnByb3RvdHlwZS5zZXRQcm9maWxlSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBwYi5SZXZpZXdTdGF0dXMgc3RhdHVzID0gMjsKICogQHJldHVybiB7IXByb3RvLnBiLlJldmlld1N0YXR1c30KICovcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdC5wcm90b3R5cGUuZ2V0U3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5SZXZpZXdTdGF0dXN9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUHJvY2Vzc1Byb2ZpbGVSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdC5wcm90b3R5cGUuc2V0U3RhdHVzPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHN0cmluZyByZWFzb24gPSAzOwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3QucHJvdG90eXBlLmdldFJlYXNvbj1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsIiIpO307LyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2Nlc3NQcm9maWxlUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzUHJvZmlsZVJlcXVlc3QucHJvdG90eXBlLnNldFJlYXNvbj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS4KICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fQogKiBAY29uc3QKICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnJlcGVhdGVkRmllbGRzXz1bNF07aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3BhZ2VObzpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxwYWdlU2l6ZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxhcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksZGVhbFN0YXR1c0xpc3Q6KGY9anNwYi5NZXNzYWdlLmdldFJlcGVhdGVkRmllbGQobXNnLDQpKT09bnVsbD91bmRlZmluZWQ6ZixzY2VuZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwwKSxyZXBvcnRlclR5cGU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDYsMCkscmVwb3J0ZXJJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNywwKSxyZXBvcnRlZFR5cGU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDgsMCkscmVwb3J0ZWRJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csOSwwKSxjcmVhdGVkU3RhcnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEwLDApLGNyZWF0ZWRFbmQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDExLDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZXM9cmVhZGVyLmlzRGVsaW1pdGVkKCk/cmVhZGVyLnJlYWRQYWNrZWRFbnVtKCk6W3JlYWRlci5yZWFkRW51bSgpXTtmb3IodmFyIGk9MDtpPHZhbHVlcy5sZW5ndGg7aSsrKXttc2cuYWRkRGVhbFN0YXR1cyh2YWx1ZXNbaV0pO31icmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRTY2VuZSh2YWx1ZSk7YnJlYWs7Y2FzZSA2OnZhciB2YWx1ZT1yZWFkZXIucmVhZEVudW0oKTttc2cuc2V0UmVwb3J0ZXJUeXBlKHZhbHVlKTticmVhaztjYXNlIDc6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFJlcG9ydGVySWQodmFsdWUpO2JyZWFrO2Nhc2UgODp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldFJlcG9ydGVkVHlwZSh2YWx1ZSk7YnJlYWs7Y2FzZSA5OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRSZXBvcnRlZElkKHZhbHVlKTticmVhaztjYXNlIDEwOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRDcmVhdGVkU3RhcnQodmFsdWUpO2JyZWFrO2Nhc2UgMTE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldENyZWF0ZWRFbmQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRQYWdlTm8oKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fWY9bWVzc2FnZS5nZXRQYWdlU2l6ZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldEFyZWFJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMyxmKTt9Zj1tZXNzYWdlLmdldERlYWxTdGF0dXNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUGFja2VkRW51bSg0LGYpO31mPW1lc3NhZ2UuZ2V0U2NlbmUoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDUsZik7fWY9bWVzc2FnZS5nZXRSZXBvcnRlclR5cGUoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDYsZik7fWY9bWVzc2FnZS5nZXRSZXBvcnRlcklkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig3LGYpO31mPW1lc3NhZ2UuZ2V0UmVwb3J0ZWRUeXBlKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSg4LGYpO31mPW1lc3NhZ2UuZ2V0UmVwb3J0ZWRJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoOSxmKTt9Zj1tZXNzYWdlLmdldENyZWF0ZWRTdGFydCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMTAsZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkRW5kKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxMSxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogcmVwZWF0ZWQgcGIuQmxvY2tTdGF0dXMgZGVhbF9zdGF0dXMgPSA0OwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkJsb2NrU3RhdHVzPn0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXREZWFsU3RhdHVzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRGaWVsZCh0aGlzLDQpO307LyoqCiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5wYi5CbG9ja1N0YXR1cz59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldERlYWxTdGF0dXNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldEZpZWxkKHRoaXMsNCx2YWx1ZXx8W10pO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkJsb2NrU3RhdHVzfSB2YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5hZGREZWFsU3RhdHVzPWZ1bmN0aW9uKHZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkRmllbGQodGhpcyw0LHZhbHVlLG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLmNsZWFyRGVhbFN0YXR1c0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXREZWFsU3RhdHVzTGlzdChbXSk7fTsvKioKICogb3B0aW9uYWwgcGIuVmlvbGF0aW9uU2NlbmUgU2NlbmUgPSA1OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuVmlvbGF0aW9uU2NlbmV9CiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0U2NlbmU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLlZpb2xhdGlvblNjZW5lfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRTY2VuZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw1LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBwYi5FbnRpdHlUeXBlIHJlcG9ydGVyX3R5cGUgPSA2OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuRW50aXR5VHlwZX0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRSZXBvcnRlclR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw2LDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkVudGl0eVR5cGV9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFJlcG9ydGVyVHlwZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw2LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcmVwb3J0ZXJfaWQgPSA3OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UmVwb3J0ZXJJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDcsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFJlcG9ydGVySWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw3LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBwYi5FbnRpdHlUeXBlIHJlcG9ydGVkX3R5cGUgPSA4OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuRW50aXR5VHlwZX0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRSZXBvcnRlZFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw4LDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkVudGl0eVR5cGV9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFJlcG9ydGVkVHlwZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw4LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcmVwb3J0ZWRfaWQgPSA5OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UmVwb3J0ZWRJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDksMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFJlcG9ydGVkSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw5LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgY3JlYXRlZF9zdGFydCA9IDEwOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0Q3JlYXRlZFN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMTAsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldENyZWF0ZWRTdGFydD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEwLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgY3JlYXRlZF9lbmQgPSAxMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldENyZWF0ZWRFbmQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0Q3JlYXRlZEVuZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDExLHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3JlY29yZHNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFJlY29yZHNMaXN0KCksdXNlcnR5cGVfcGIuVmlvbGF0aW9uUmVjb3JkLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSkscGFnZU5vOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLHBhZ2VTaXplOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLHRvdGFsUGFnZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSx0b3RhbENvdW50OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw1LDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyB1c2VydHlwZV9wYi5WaW9sYXRpb25SZWNvcmQoKTtyZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsdXNlcnR5cGVfcGIuVmlvbGF0aW9uUmVjb3JkLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZFJlY29yZHModmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFRvdGFsUGFnZSh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbENvdW50KHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFJlY29yZHNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEsZix1c2VydHlwZV9wYi5WaW9sYXRpb25SZWNvcmQuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO31mPW1lc3NhZ2UuZ2V0UGFnZU5vKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0UGFnZVNpemUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRUb3RhbFBhZ2UoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRUb3RhbENvdW50KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig1LGYpO319Oy8qKgogKiByZXBlYXRlZCBwYi5WaW9sYXRpb25SZWNvcmQgcmVjb3JkcyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuVmlvbGF0aW9uUmVjb3JkPn0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuZ2V0UmVjb3Jkc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsdXNlcnR5cGVfcGIuVmlvbGF0aW9uUmVjb3JkLDEpO307LyoqCiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5wYi5WaW9sYXRpb25SZWNvcmQ+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuc2V0UmVjb3Jkc0xpc3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5WaW9sYXRpb25SZWNvcmQ9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLlZpb2xhdGlvblJlY29yZH0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuYWRkUmVjb3Jkcz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5WaW9sYXRpb25SZWNvcmQsb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhclJlY29yZHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0UmVjb3Jkc0xpc3QoW10pO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX25vID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVwbHkucHJvdG90eXBlLnNldFBhZ2VObz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX3NpemUgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVwbHkucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB0b3RhbF9wYWdlID0gNDsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRUb3RhbFBhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5WaW9sYXRpb25MaXN0UmVwbHkucHJvdG90eXBlLnNldFRvdGFsUGFnZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDQsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB0b3RhbF9jb3VudCA9IDU7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxDb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmlvbGF0aW9uTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlZpb2xhdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuc2V0VG90YWxDb3VudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDUsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3Zpb2xhdGlvbklkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLGRlYWxTdGF0dXM6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksZGVhbE1lc3NhZ2U6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsIiIpLGJsb2NrRHVyYXRpb246anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDQsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUHJvY2Vzc1Zpb2xhdGlvblJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuUHJvY2Vzc1Zpb2xhdGlvblJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUHJvY2Vzc1Zpb2xhdGlvblJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQ2NCgpO21zZy5zZXRWaW9sYXRpb25JZCh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1yZWFkZXIucmVhZEVudW0oKTttc2cuc2V0RGVhbFN0YXR1cyh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFN0cmluZygpO21zZy5zZXREZWFsTWVzc2FnZSh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRCbG9ja0R1cmF0aW9uKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUHJvY2Vzc1Zpb2xhdGlvblJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0VmlvbGF0aW9uSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDY0KDEsZik7fWY9bWVzc2FnZS5nZXREZWFsU3RhdHVzKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSgyLGYpO31mPW1lc3NhZ2UuZ2V0RGVhbE1lc3NhZ2UoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVTdHJpbmcoMyxmKTt9Zj1tZXNzYWdlLmdldEJsb2NrRHVyYXRpb24oKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQ2NCB2aW9sYXRpb25faWQgPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuZ2V0VmlvbGF0aW9uSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5zZXRWaW9sYXRpb25JZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHBiLkJsb2NrU3RhdHVzIGRlYWxfc3RhdHVzID0gMjsKICogQHJldHVybiB7IXByb3RvLnBiLkJsb2NrU3RhdHVzfQogKi9wcm90by5wYi5jbXMuUHJvY2Vzc1Zpb2xhdGlvblJlcXVlc3QucHJvdG90eXBlLmdldERlYWxTdGF0dXM9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkJsb2NrU3RhdHVzfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlByb2Nlc3NWaW9sYXRpb25SZXF1ZXN0LnByb3RvdHlwZS5zZXREZWFsU3RhdHVzPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHN0cmluZyBkZWFsX21lc3NhZ2UgPSAzOwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuZ2V0RGVhbE1lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywzLCIiKTt9Oy8qKgogKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuc2V0RGVhbE1lc3NhZ2U9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywzLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYmxvY2tfZHVyYXRpb24gPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Qcm9jZXNzVmlvbGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuZ2V0QmxvY2tEdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDQsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUHJvY2Vzc1Zpb2xhdGlvblJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUHJvY2Vzc1Zpb2xhdGlvblJlcXVlc3QucHJvdG90eXBlLnNldEJsb2NrRHVyYXRpb249ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw0LHZhbHVlKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17cGFnZU5vOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLHBhZ2VTaXplOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLGFyZWFJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKSxhbmNob3JJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSxzdGF0dXM6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCksY3JlYXRlZFN0YXJ0OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw2LDApLGNyZWF0ZWRFbmQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDcsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBbmNob3JJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZEVudW0oKTttc2cuc2V0U3RhdHVzKHZhbHVlKTticmVhaztjYXNlIDY6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldENyZWF0ZWRTdGFydCh2YWx1ZSk7YnJlYWs7Y2FzZSA3OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRDcmVhdGVkRW5kKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0QW5jaG9ySWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRTdGF0dXMoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDUsZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkU3RhcnQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDYsZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkRW5kKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig3LGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9ubyA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRQYWdlTm89ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9zaXplID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0UGFnZVNpemU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXJlYV9pZCA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcmVhSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywzLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYW5jaG9yX2lkID0gNDsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBbmNob3JJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDQsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QW5jaG9ySWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw0LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBwYi5SZXZpZXdTdGF0dXMgc3RhdHVzID0gNTsKICogQHJldHVybiB7IXByb3RvLnBiLlJldmlld1N0YXR1c30KICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0U3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNSwwKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5SZXZpZXdTdGF0dXN9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0U3RhdHVzPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDUsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBjcmVhdGVkX3N0YXJ0ID0gNjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRDcmVhdGVkU3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw2LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldENyZWF0ZWRTdGFydD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDYsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBjcmVhdGVkX2VuZCA9IDc7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0Q3JlYXRlZEVuZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDcsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0Q3JlYXRlZEVuZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDcsdmFsdWUpO307LyoqCiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS4KICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fQogKiBAY29uc3QKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtyZWNvcmRzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRSZWNvcmRzTGlzdCgpLHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKSxwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksdG90YWxQYWdlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHRvdGFsQ291bnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyB1c2VydHlwZV9wYi5GaWxlUmVjb3JkKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkUmVjb3Jkcyh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlTm8odmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZVNpemUodmFsdWUpO2JyZWFrO2Nhc2UgNDp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0VG90YWxQYWdlKHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFRvdGFsQ291bnQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHl9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFJlY29yZHNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEsZix1c2VydHlwZV9wYi5GaWxlUmVjb3JkLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxQYWdlKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxDb3VudCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogcmVwZWF0ZWQgcGIuRmlsZVJlY29yZCByZWNvcmRzID0gMTsKICogQHJldHVybiB7IUFycmF5PCFwcm90by5wYi5GaWxlUmVjb3JkPn0KICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHkucHJvdG90eXBlLmdldFJlY29yZHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLHVzZXJ0eXBlX3BiLkZpbGVSZWNvcmQsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkZpbGVSZWNvcmQ+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRSZWNvcmRzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkZpbGVSZWNvcmQ9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkZpbGVSZWNvcmR9CiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRSZWNvcmRzPWZ1bmN0aW9uKG9wdF92YWx1ZSxvcHRfaW5kZXgpe3JldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsb3B0X3ZhbHVlLHByb3RvLnBiLkZpbGVSZWNvcmQsb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHkucHJvdG90eXBlLmNsZWFyUmVjb3Jkc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRSZWNvcmRzTGlzdChbXSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseS5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHkucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHkucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX3BhZ2UgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRUb3RhbFBhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkxpdmVMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseS5wcm90b3R5cGUuc2V0VG90YWxQYWdlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX2NvdW50ID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxDb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTGl2ZUxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5MaXZlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbENvdW50PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17cGFnZU5vOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLHBhZ2VTaXplOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLGFyZWFJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKSxhcHBJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSx1c2VySWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCkscmVjb3JkSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDYsMCksc3RhdHVzOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw3LDApLGNyZWF0ZWRTdGFydDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csOCwwKSxjcmVhdGVkRW5kOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw5LDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcHBJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRVc2VySWQodmFsdWUpO2JyZWFrO2Nhc2UgNjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50NjQoKTttc2cuc2V0UmVjb3JkSWQodmFsdWUpO2JyZWFrO2Nhc2UgNzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldFN0YXR1cyh2YWx1ZSk7YnJlYWs7Y2FzZSA4OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRDcmVhdGVkU3RhcnQodmFsdWUpO2JyZWFrO2Nhc2UgOTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0Q3JlYXRlZEVuZCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0QXBwSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRVc2VySWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDUsZik7fWY9bWVzc2FnZS5nZXRSZWNvcmRJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50NjQoNixmKTt9Zj1tZXNzYWdlLmdldFN0YXR1cygpO2lmKGYhPT0wLjApe3dyaXRlci53cml0ZUVudW0oNyxmKTt9Zj1tZXNzYWdlLmdldENyZWF0ZWRTdGFydCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoOCxmKTt9Zj1tZXNzYWdlLmdldENyZWF0ZWRFbmQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDksZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX25vID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFBhZ2VObz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VObz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX3NpemUgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGFnZVNpemU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFyZWFJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFyZWFJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcHBfaWQgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXBwSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcHBJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDQsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB1c2VyX2lkID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFVzZXJJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFVzZXJJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDUsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQ2NCByZWNvcmRfaWQgPSA2OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UmVjb3JkSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw2LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRSZWNvcmRJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDYsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHBiLlBheVN0YXR1cyBzdGF0dXMgPSA3OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuUGF5U3RhdHVzfQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFN0YXR1cz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDcsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuUGF5U3RhdHVzfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRTdGF0dXM9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsNyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGNyZWF0ZWRfc3RhcnQgPSA4OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0Q3JlYXRlZFN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsOCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0Q3JlYXRlZFN0YXJ0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsOCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGNyZWF0ZWRfZW5kID0gOTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcXVlc3QucHJvdG90eXBlLmdldENyZWF0ZWRFbmQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw5LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRDcmVhdGVkRW5kPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsOSx2YWx1ZSk7fTsvKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXz1bMV07aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtyZWNvcmRzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRSZWNvcmRzTGlzdCgpLHVzZXJ0eXBlX3BiLlBheVJlY29yZC50b09iamVjdCxpbmNsdWRlSW5zdGFuY2UpLHBhZ2VObzpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxwYWdlU2l6ZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKSx0b3RhbFBhZ2U6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDQsMCksdG90YWxDb3VudDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuUGF5TGlzdFJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgdXNlcnR5cGVfcGIuUGF5UmVjb3JkKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHVzZXJ0eXBlX3BiLlBheVJlY29yZC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO21zZy5hZGRSZWNvcmRzKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VObyh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlU2l6ZSh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbFBhZ2UodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0VG90YWxDb3VudCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRSZWNvcmRzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsdXNlcnR5cGVfcGIuUGF5UmVjb3JkLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxQYWdlKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxDb3VudCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogcmVwZWF0ZWQgcGIuUGF5UmVjb3JkIHJlY29yZHMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLlBheVJlY29yZD59CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkucHJvdG90eXBlLmdldFJlY29yZHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLHVzZXJ0eXBlX3BiLlBheVJlY29yZCwxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuUGF5UmVjb3JkPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkucHJvdG90eXBlLnNldFJlY29yZHNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuUGF5UmVjb3JkPX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5QYXlSZWNvcmR9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkucHJvdG90eXBlLmFkZFJlY29yZHM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuUGF5UmVjb3JkLG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5TGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5wcm90b3R5cGUuY2xlYXJSZWNvcmRzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFJlY29yZHNMaXN0KFtdKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9ubyA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcGx5LnByb3RvdHlwZS5zZXRQYWdlTm89ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9zaXplID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5TGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5wcm90b3R5cGUuc2V0UGFnZVNpemU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywzLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdG90YWxfcGFnZSA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxQYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUGF5TGlzdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbFBhZ2U9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw0LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdG90YWxfY291bnQgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkucHJvdG90eXBlLmdldFRvdGFsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5QYXlMaXN0UmVwbHkucHJvdG90eXBlLnNldFRvdGFsQ291bnQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw1LHZhbHVlKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3BhZ2VObzpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxwYWdlU2l6ZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxhcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksZW5hYmxlOmpzcGIuTWVzc2FnZS5nZXRCb29sZWFuRmllbGRXaXRoRGVmYXVsdChtc2csNCxmYWxzZSkscm9ib3RJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZEJvb2woKTttc2cuc2V0RW5hYmxlKHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFJvYm90SWQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0RW5hYmxlKCk7aWYoZil7d3JpdGVyLndyaXRlQm9vbCg0LGYpO31mPW1lc3NhZ2UuZ2V0Um9ib3RJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywzLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgYm9vbCBlbmFibGUgPSA0OwogKiBAcmV0dXJuIHtib29sZWFufQogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0RW5hYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRCb29sZWFuRmllbGRXaXRoRGVmYXVsdCh0aGlzLDQsZmFsc2UpO307LyoqCiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEVuYWJsZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNCb29sZWFuRmllbGQodGhpcyw0LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcm9ib3RfaWQgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRSb2JvdElkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFJvYm90SWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw1LHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtyb2JvdHNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFJvYm90c0xpc3QoKSxhbmNob3J0eXBlX3BiLkFuY2hvclByb2ZpbGUudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKSxwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksdG90YWxQYWdlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHRvdGFsQ291bnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgYW5jaG9ydHlwZV9wYi5BbmNob3JQcm9maWxlKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLGFuY2hvcnR5cGVfcGIuQW5jaG9yUHJvZmlsZS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO21zZy5hZGRSb2JvdHModmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFRvdGFsUGFnZSh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbENvdW50KHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0Um9ib3RzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsYW5jaG9ydHlwZV9wYi5BbmNob3JQcm9maWxlLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxQYWdlKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxDb3VudCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogcmVwZWF0ZWQgcGIuQW5jaG9yUHJvZmlsZSByb2JvdHMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkFuY2hvclByb2ZpbGU+fQogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHkucHJvdG90eXBlLmdldFJvYm90c0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsYW5jaG9ydHlwZV9wYi5BbmNob3JQcm9maWxlLDEpO307LyoqCiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5wYi5BbmNob3JQcm9maWxlPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnByb3RvdHlwZS5zZXRSb2JvdHNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZT19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuQW5jaG9yUHJvZmlsZX0KICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnByb3RvdHlwZS5hZGRSb2JvdHM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuQW5jaG9yUHJvZmlsZSxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhclJvYm90c0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRSb2JvdHNMaXN0KFtdKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9ubyA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnByb3RvdHlwZS5zZXRQYWdlTm89ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9zaXplID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHkucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseS5wcm90b3R5cGUuc2V0UGFnZVNpemU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywzLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdG90YWxfcGFnZSA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnByb3RvdHlwZS5nZXRUb3RhbFBhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlJvYm90TGlzdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbFBhZ2U9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw0LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdG90YWxfY291bnQgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdExpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxDb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUm9ib3RMaXN0UmVwbHkucHJvdG90eXBlLnNldFRvdGFsQ291bnQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw1LHZhbHVlKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtyb2JvdElkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0Um9ib3RJZCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFJvYm90SWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiByb2JvdF9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRSb2JvdElkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0Um9ib3RJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS4KICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fQogKiBAY29uc3QKICovcHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17bWVzc2FnZXNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldE1lc3NhZ2VzTGlzdCgpLGNtc3R5cGVfcGIuUm9ib3RNZXNzYWdlLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9bmV3IGNtc3R5cGVfcGIuUm9ib3RNZXNzYWdlKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLGNtc3R5cGVfcGIuUm9ib3RNZXNzYWdlLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZE1lc3NhZ2VzKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlJvYm90TWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldE1lc3NhZ2VzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsY21zdHlwZV9wYi5Sb2JvdE1lc3NhZ2Uuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5Sb2JvdE1lc3NhZ2UgbWVzc2FnZXMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLlJvYm90TWVzc2FnZT59CiAqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLmdldE1lc3NhZ2VzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxjbXN0eXBlX3BiLlJvYm90TWVzc2FnZSwxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuUm9ib3RNZXNzYWdlPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLnNldE1lc3NhZ2VzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLlJvYm90TWVzc2FnZT19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuUm9ib3RNZXNzYWdlfQogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRNZXNzYWdlcz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5Sb2JvdE1lc3NhZ2Usb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Sb2JvdE1lc3NhZ2VMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUm9ib3RNZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhck1lc3NhZ2VzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldE1lc3NhZ2VzTGlzdChbXSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17ZW50aXR5VHlwZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxlbnRpdHlJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRFbnRpdHlUeXBlKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEVudGl0eUlkKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0RW50aXR5VHlwZSgpO2lmKGYhPT0wLjApe3dyaXRlci53cml0ZUVudW0oMSxmKTt9Zj1tZXNzYWdlLmdldEVudGl0eUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO319Oy8qKgogKiBvcHRpb25hbCBwYi5FbnRpdHlUeXBlIGVudGl0eV90eXBlID0gMTsKICogQHJldHVybiB7IXByb3RvLnBiLkVudGl0eVR5cGV9CiAqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0RW50aXR5VHlwZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuRW50aXR5VHlwZX0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0RW50aXR5VHlwZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgZW50aXR5X2lkID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEVudGl0eUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0RW50aXR5SWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e21vbWVudHNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldE1vbWVudHNMaXN0KCksdXNlcnR5cGVfcGIuTW9tZW50LnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9bmV3IHVzZXJ0eXBlX3BiLk1vbWVudCgpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSx1c2VydHlwZV9wYi5Nb21lbnQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkTW9tZW50cyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRNb21lbnRzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsdXNlcnR5cGVfcGIuTW9tZW50LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9fTsvKioKICogcmVwZWF0ZWQgcGIuTW9tZW50IG1vbWVudHMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLk1vbWVudD59CiAqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHkucHJvdG90eXBlLmdldE1vbWVudHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLHVzZXJ0eXBlX3BiLk1vbWVudCwxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuTW9tZW50Pn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHkucHJvdG90eXBlLnNldE1vbWVudHNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuTW9tZW50PX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5Nb21lbnR9CiAqL3Byb3RvLnBiLmNtcy5Nb21lbnRMaXN0UmVwbHkucHJvdG90eXBlLmFkZE1vbWVudHM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuTW9tZW50LG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuTW9tZW50TGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLk1vbWVudExpc3RSZXBseS5wcm90b3R5cGUuY2xlYXJNb21lbnRzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldE1vbWVudHNMaXN0KFtdKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3BhZ2VObzpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxwYWdlU2l6ZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxhcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDMsMCksZW5hYmxlOmpzcGIuTWVzc2FnZS5nZXRCb29sZWFuRmllbGRXaXRoRGVmYXVsdChtc2csNCxmYWxzZSksYWN0aW9uOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw1LDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlTm8odmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZVNpemUodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkQm9vbCgpO21zZy5zZXRFbmFibGUodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldEFjdGlvbih2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0UGFnZU5vKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO31mPW1lc3NhZ2UuZ2V0UGFnZVNpemUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDIsZik7fWY9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRFbmFibGUoKTtpZihmKXt3cml0ZXIud3JpdGVCb29sKDQsZik7fWY9bWVzc2FnZS5nZXRBY3Rpb24oKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDUsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX25vID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VObz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX3NpemUgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFyZWFJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIGJvb2wgZW5hYmxlID0gNDsKICogQHJldHVybiB7Ym9vbGVhbn0KICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEVuYWJsZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0Qm9vbGVhbkZpZWxkV2l0aERlZmF1bHQodGhpcyw0LGZhbHNlKTt9Oy8qKgogKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRFbmFibGU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zQm9vbGVhbkZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgcGIuQWN0aW9uVHlwZSBhY3Rpb24gPSA1OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuQWN0aW9uVHlwZX0KICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFjdGlvbj1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQWN0aW9uVHlwZX0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFjdGlvbj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw1LHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXttZXNzYWdlc0xpc3Q6anNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0TWVzc2FnZXNMaXN0KCksY21zdHlwZV9wYi5BdXRvTWVzc2FnZS50b09iamVjdCxpbmNsdWRlSW5zdGFuY2UpLHBhZ2VObzpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxwYWdlU2l6ZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKSx0b3RhbFBhZ2U6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDQsMCksdG90YWxDb3VudDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyBjbXN0eXBlX3BiLkF1dG9NZXNzYWdlKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLGNtc3R5cGVfcGIuQXV0b01lc3NhZ2UuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkTWVzc2FnZXModmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFRvdGFsUGFnZSh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbENvdW50KHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0TWVzc2FnZXNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEsZixjbXN0eXBlX3BiLkF1dG9NZXNzYWdlLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxQYWdlKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxDb3VudCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogcmVwZWF0ZWQgcGIuQXV0b01lc3NhZ2UgbWVzc2FnZXMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkF1dG9NZXNzYWdlPn0KICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRNZXNzYWdlc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsY21zdHlwZV9wYi5BdXRvTWVzc2FnZSwxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuQXV0b01lc3NhZ2U+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLnNldE1lc3NhZ2VzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkF1dG9NZXNzYWdlPX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5BdXRvTWVzc2FnZX0KICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRNZXNzYWdlcz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5BdXRvTWVzc2FnZSxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhck1lc3NhZ2VzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldE1lc3NhZ2VzTGlzdChbXSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX3BhZ2UgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxQYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BdXRvTWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUuc2V0VG90YWxQYWdlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX2NvdW50ID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQXV0b01lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLmdldFRvdGFsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkF1dG9NZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbENvdW50PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksYXJlYUlkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLGFwcElkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHVzZXJJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwwKSxhbmNob3JJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNiwwKSxkaXJlY3Rpb246anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDcsMCksdHlwZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csOCwwKSxrZXl3b3JkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw5LCIiKSxjcmVhdGVkU3RhcnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEwLDApLGNyZWF0ZWRFbmQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDExLDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlTm8odmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZVNpemUodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFwcElkKHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFVzZXJJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA2OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBbmNob3JJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA3OnZhciB2YWx1ZT1yZWFkZXIucmVhZEVudW0oKTttc2cuc2V0RGlyZWN0aW9uKHZhbHVlKTticmVhaztjYXNlIDg6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRUeXBlKHZhbHVlKTticmVhaztjYXNlIDk6dmFyIHZhbHVlPXJlYWRlci5yZWFkU3RyaW5nKCk7bXNnLnNldEtleXdvcmQodmFsdWUpO2JyZWFrO2Nhc2UgMTA6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldENyZWF0ZWRTdGFydCh2YWx1ZSk7YnJlYWs7Y2FzZSAxMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0Q3JlYXRlZEVuZCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0UGFnZU5vKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO31mPW1lc3NhZ2UuZ2V0UGFnZVNpemUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDIsZik7fWY9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRBcHBJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNCxmKTt9Zj1tZXNzYWdlLmdldFVzZXJJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9Zj1tZXNzYWdlLmdldEFuY2hvcklkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig2LGYpO31mPW1lc3NhZ2UuZ2V0RGlyZWN0aW9uKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSg3LGYpO31mPW1lc3NhZ2UuZ2V0VHlwZSgpO2lmKGYhPT0wLjApe3dyaXRlci53cml0ZUVudW0oOCxmKTt9Zj1tZXNzYWdlLmdldEtleXdvcmQoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVTdHJpbmcoOSxmKTt9Zj1tZXNzYWdlLmdldENyZWF0ZWRTdGFydCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMTAsZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkRW5kKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxMSxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAzOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywzLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFwcF9pZCA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFwcElkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFwcElkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHVzZXJfaWQgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRVc2VySWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0VXNlcklkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFuY2hvcl9pZCA9IDY7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFuY2hvcklkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFuY2hvcklkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgcGIuTWVzc2FnZURpcmVjdGlvbiBkaXJlY3Rpb24gPSA3OwogKiBAcmV0dXJuIHshcHJvdG8ucGIuTWVzc2FnZURpcmVjdGlvbn0KICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldERpcmVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDcsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuTWVzc2FnZURpcmVjdGlvbn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldERpcmVjdGlvbj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw3LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBwYi5NZXNzYWdlVHlwZSB0eXBlID0gODsKICogQHJldHVybiB7IXByb3RvLnBiLk1lc3NhZ2VUeXBlfQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDgsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuTWVzc2FnZVR5cGV9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRUeXBlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDgsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHN0cmluZyBrZXl3b3JkID0gOTsKICogQHJldHVybiB7c3RyaW5nfQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0S2V5d29yZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDksIiIpO307LyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0S2V5d29yZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNTdHJpbmdGaWVsZCh0aGlzLDksdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBjcmVhdGVkX3N0YXJ0ID0gMTA7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldENyZWF0ZWRTdGFydD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEwLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0Q3JlYXRlZFN0YXJ0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMTAsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBjcmVhdGVkX2VuZCA9IDExOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRDcmVhdGVkRW5kPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMTEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRDcmVhdGVkRW5kPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMTEsdmFsdWUpO307LyoqCiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS4KICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fQogKiBAY29uc3QKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXz1bMV07aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e21lc3NhZ2VzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRNZXNzYWdlc0xpc3QoKSxjbXN0eXBlX3BiLkNoYXRNZXNzYWdlLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSkscGFnZU5vOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLHBhZ2VTaXplOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLHRvdGFsUGFnZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSx0b3RhbENvdW50OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw1LDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9bmV3IGNtc3R5cGVfcGIuQ2hhdE1lc3NhZ2UoKTtyZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsY21zdHlwZV9wYi5DaGF0TWVzc2FnZS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO21zZy5hZGRNZXNzYWdlcyh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlTm8odmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZVNpemUodmFsdWUpO2JyZWFrO2Nhc2UgNDp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0VG90YWxQYWdlKHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFRvdGFsQ291bnQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHl9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRNZXNzYWdlc0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLGNtc3R5cGVfcGIuQ2hhdE1lc3NhZ2Uuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO31mPW1lc3NhZ2UuZ2V0UGFnZU5vKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0UGFnZVNpemUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRUb3RhbFBhZ2UoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRUb3RhbENvdW50KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig1LGYpO319Oy8qKgogKiByZXBlYXRlZCBwYi5DaGF0TWVzc2FnZSBtZXNzYWdlcyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuQ2hhdE1lc3NhZ2U+fQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLmdldE1lc3NhZ2VzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxjbXN0eXBlX3BiLkNoYXRNZXNzYWdlLDEpO307LyoqCiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5wYi5DaGF0TWVzc2FnZT59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUuc2V0TWVzc2FnZXNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQ2hhdE1lc3NhZ2U9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkNoYXRNZXNzYWdlfQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLmFkZE1lc3NhZ2VzPWZ1bmN0aW9uKG9wdF92YWx1ZSxvcHRfaW5kZXgpe3JldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsb3B0X3ZhbHVlLHByb3RvLnBiLkNoYXRNZXNzYWdlLG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLmNsZWFyTWVzc2FnZXNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0TWVzc2FnZXNMaXN0KFtdKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9ubyA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRQYWdlTm89ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9zaXplID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUuc2V0UGFnZVNpemU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywzLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdG90YWxfcGFnZSA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRUb3RhbFBhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNoYXRNZXNzYWdlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbFBhZ2U9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw0LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdG90YWxfY291bnQgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DaGF0TWVzc2FnZUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxDb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2hhdE1lc3NhZ2VMaXN0UmVwbHkucHJvdG90eXBlLnNldFRvdGFsQ291bnQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw1LHZhbHVlKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17cGFnZU5vOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLHBhZ2VTaXplOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLGFyZWFJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKSxhcHBJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSx1c2VySWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCksYW5jaG9ySWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDYsMCksY2FsbFR5cGU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDcsMCksaGFuZ1R5cGU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDgsMCksc3RhdHVzOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw5LDApLG1pbkR1cmF0aW9uOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxMCwwKSxtYXhEdXJhdGlvbjpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMTEsMCksY3JlYXRlZFN0YXJ0OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxMiwwKSxjcmVhdGVkRW5kOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxMywwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlTm8odmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZVNpemUodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFwcElkKHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFVzZXJJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA2OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBbmNob3JJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA3OnZhciB2YWx1ZT1yZWFkZXIucmVhZEVudW0oKTttc2cuc2V0Q2FsbFR5cGUodmFsdWUpO2JyZWFrO2Nhc2UgODp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldEhhbmdUeXBlKHZhbHVlKTticmVhaztjYXNlIDk6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRTdGF0dXModmFsdWUpO2JyZWFrO2Nhc2UgMTA6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldE1pbkR1cmF0aW9uKHZhbHVlKTticmVhaztjYXNlIDExOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRNYXhEdXJhdGlvbih2YWx1ZSk7YnJlYWs7Y2FzZSAxMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0Q3JlYXRlZFN0YXJ0KHZhbHVlKTticmVhaztjYXNlIDEzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRDcmVhdGVkRW5kKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0QXBwSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRVc2VySWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDUsZik7fWY9bWVzc2FnZS5nZXRBbmNob3JJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNixmKTt9Zj1tZXNzYWdlLmdldENhbGxUeXBlKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSg3LGYpO31mPW1lc3NhZ2UuZ2V0SGFuZ1R5cGUoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDgsZik7fWY9bWVzc2FnZS5nZXRTdGF0dXMoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDksZik7fWY9bWVzc2FnZS5nZXRNaW5EdXJhdGlvbigpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMTAsZik7fWY9bWVzc2FnZS5nZXRNYXhEdXJhdGlvbigpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMTEsZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkU3RhcnQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEyLGYpO31mPW1lc3NhZ2UuZ2V0Q3JlYXRlZEVuZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMTMsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX25vID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFBhZ2VObz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBwYWdlX3NpemUgPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywzLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFyZWFJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcHBfaWQgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFwcElkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcHBJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDQsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB1c2VyX2lkID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRVc2VySWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFVzZXJJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDUsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhbmNob3JfaWQgPSA2OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFuY2hvcklkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBbmNob3JJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDYsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHBiLkNhbGxUeXBlIGNhbGxfdHlwZSA9IDc7CiAqIEByZXR1cm4geyFwcm90by5wYi5DYWxsVHlwZX0KICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0Q2FsbFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw3LDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkNhbGxUeXBlfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldENhbGxUeXBlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDcsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHBiLkhhbmdUeXBlIGhhbmdfdHlwZSA9IDg7CiAqIEByZXR1cm4geyFwcm90by5wYi5IYW5nVHlwZX0KICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0SGFuZ1R5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw4LDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkhhbmdUeXBlfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEhhbmdUeXBlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDgsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHBiLkNhbGxTdGF0dXMgc3RhdHVzID0gOTsKICogQHJldHVybiB7IXByb3RvLnBiLkNhbGxTdGF0dXN9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFN0YXR1cz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDksMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQ2FsbFN0YXR1c30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRTdGF0dXM9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zRW51bUZpZWxkKHRoaXMsOSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIG1pbl9kdXJhdGlvbiA9IDEwOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldE1pbkR1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMTAsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0TWluRHVyYXRpb249ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxMCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIG1heF9kdXJhdGlvbiA9IDExOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldE1heER1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMTEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0TWF4RHVyYXRpb249ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGNyZWF0ZWRfc3RhcnQgPSAxMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRDcmVhdGVkU3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRDcmVhdGVkU3RhcnQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGNyZWF0ZWRfZW5kID0gMTM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0Q3JlYXRlZEVuZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEzLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldENyZWF0ZWRFbmQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxMyx2YWx1ZSk7fTsvKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHkudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2NhbGxzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRDYWxsc0xpc3QoKSx1c2VydHlwZV9wYi5DYWxsUmVjb3JkLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSkscGFnZU5vOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLHBhZ2VTaXplOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLHRvdGFsUGFnZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNCwwKSx0b3RhbENvdW50OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw1LDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgdXNlcnR5cGVfcGIuQ2FsbFJlY29yZCgpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSx1c2VydHlwZV9wYi5DYWxsUmVjb3JkLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZENhbGxzKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VObyh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRQYWdlU2l6ZSh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbFBhZ2UodmFsdWUpO2JyZWFrO2Nhc2UgNTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0VG90YWxDb3VudCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0Q2FsbHNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEsZix1c2VydHlwZV9wYi5DYWxsUmVjb3JkLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9Zj1tZXNzYWdlLmdldFBhZ2VObygpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldFBhZ2VTaXplKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigzLGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxQYWdlKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig0LGYpO31mPW1lc3NhZ2UuZ2V0VG90YWxDb3VudCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogcmVwZWF0ZWQgcGIuQ2FsbFJlY29yZCBjYWxscyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuQ2FsbFJlY29yZD59CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRDYWxsc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsdXNlcnR5cGVfcGIuQ2FsbFJlY29yZCwxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuQ2FsbFJlY29yZD59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHkucHJvdG90eXBlLnNldENhbGxzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkNhbGxSZWNvcmQ9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkNhbGxSZWNvcmR9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRDYWxscz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5DYWxsUmVjb3JkLG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhckNhbGxzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldENhbGxzTGlzdChbXSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlTm89ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseS5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHkucHJvdG90eXBlLmdldFBhZ2VTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMywwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHkucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX3BhZ2UgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRUb3RhbFBhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNhbGxMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseS5wcm90b3R5cGUuc2V0VG90YWxQYWdlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX2NvdW50ID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxDb3VudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDUsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ2FsbExpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DYWxsTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbENvdW50PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtwYWdlTm86anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCkscGFnZVNpemU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksYXJlYUlkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLGFwcElkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHRyYWRlclR5cGU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCksdHJhZGVySWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDYsMCksc291cmNlVHlwZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNywwKSxjcmVhdGVkU3RhcnQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDgsMCksY3JlYXRlZEVuZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csOSwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA0OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcHBJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZEVudW0oKTttc2cuc2V0VHJhZGVyVHlwZSh2YWx1ZSk7YnJlYWs7Y2FzZSA2OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUcmFkZXJJZCh2YWx1ZSk7YnJlYWs7Y2FzZSA3OnZhciB2YWx1ZT1yZWFkZXIucmVhZEVudW0oKTttc2cuc2V0U291cmNlVHlwZSh2YWx1ZSk7YnJlYWs7Y2FzZSA4OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRDcmVhdGVkU3RhcnQodmFsdWUpO2JyZWFrO2Nhc2UgOTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0Q3JlYXRlZEVuZCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0UGFnZU5vKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO31mPW1lc3NhZ2UuZ2V0UGFnZVNpemUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDIsZik7fWY9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRBcHBJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNCxmKTt9Zj1tZXNzYWdlLmdldFRyYWRlclR5cGUoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDUsZik7fWY9bWVzc2FnZS5nZXRUcmFkZXJJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNixmKTt9Zj1tZXNzYWdlLmdldFNvdXJjZVR5cGUoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDcsZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkU3RhcnQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDgsZik7fWY9bWVzc2FnZS5nZXRDcmVhdGVkRW5kKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig5LGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9ubyA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldFBhZ2VObz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRQYWdlTm89ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcGFnZV9zaXplID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGFnZVNpemU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0UGFnZVNpemU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXJlYV9pZCA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFyZWFJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcmVhSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywzLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXBwX2lkID0gNDsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXBwSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw0LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXBwSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw0LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBwYi5FbnRpdHlUeXBlIHRyYWRlcl90eXBlID0gNTsKICogQHJldHVybiB7IXByb3RvLnBiLkVudGl0eVR5cGV9CiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRUcmFkZXJUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNSwwKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5FbnRpdHlUeXBlfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0VHJhZGVyVHlwZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw1LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgdHJhZGVyX2lkID0gNjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0VHJhZGVySWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw2LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0VHJhZGVySWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw2LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBwYi5FbnRpdHlUeXBlIHNvdXJjZV90eXBlID0gNzsKICogQHJldHVybiB7IXByb3RvLnBiLkVudGl0eVR5cGV9CiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRTb3VyY2VUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNywwKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5FbnRpdHlUeXBlfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0U291cmNlVHlwZT1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw3LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgY3JlYXRlZF9zdGFydCA9IDg7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldENyZWF0ZWRTdGFydD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDgsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRDcmVhdGVkU3RhcnQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw4LHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgY3JlYXRlZF9lbmQgPSA5OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRDcmVhdGVkRW5kPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsOSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldENyZWF0ZWRFbmQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcyw5LHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXt0cmFuc2FjdGlvbnNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFRyYW5zYWN0aW9uc0xpc3QoKSx1c2VydHlwZV9wYi5UcmFuc2FjdGlvbi50b09iamVjdCxpbmNsdWRlSW5zdGFuY2UpLHBhZ2VObzpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMiwwKSxwYWdlU2l6ZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKSx0b3RhbFBhZ2U6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDQsMCksdG90YWxDb3VudDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyB1c2VydHlwZV9wYi5UcmFuc2FjdGlvbigpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSx1c2VydHlwZV9wYi5UcmFuc2FjdGlvbi5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO21zZy5hZGRUcmFuc2FjdGlvbnModmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UGFnZU5vKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFBhZ2VTaXplKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFRvdGFsUGFnZSh2YWx1ZSk7YnJlYWs7Y2FzZSA1OnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRUb3RhbENvdW50KHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0VHJhbnNhY3Rpb25zTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsdXNlcnR5cGVfcGIuVHJhbnNhY3Rpb24uc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO31mPW1lc3NhZ2UuZ2V0UGFnZU5vKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0UGFnZVNpemUoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRUb3RhbFBhZ2UoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDQsZik7fWY9bWVzc2FnZS5nZXRUb3RhbENvdW50KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMig1LGYpO319Oy8qKgogKiByZXBlYXRlZCBwYi5UcmFuc2FjdGlvbiB0cmFuc2FjdGlvbnMgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLlRyYW5zYWN0aW9uPn0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRUcmFuc2FjdGlvbnNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLHVzZXJ0eXBlX3BiLlRyYW5zYWN0aW9uLDEpO307LyoqCiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5wYi5UcmFuc2FjdGlvbj59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuc2V0VHJhbnNhY3Rpb25zTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLlRyYW5zYWN0aW9uPX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5UcmFuc2FjdGlvbn0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRUcmFuc2FjdGlvbnM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuVHJhbnNhY3Rpb24sb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuY2xlYXJUcmFuc2FjdGlvbnNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0VHJhbnNhY3Rpb25zTGlzdChbXSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfbm8gPSAyOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuZ2V0UGFnZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuc2V0UGFnZU5vPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHBhZ2Vfc2l6ZSA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRQYWdlU2l6ZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHkucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX3BhZ2UgPSA0OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuZ2V0VG90YWxQYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNCwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5UcmFuc2FjdGlvbkxpc3RSZXBseS5wcm90b3R5cGUuc2V0VG90YWxQYWdlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHRvdGFsX2NvdW50ID0gNTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVHJhbnNhY3Rpb25MaXN0UmVwbHkucHJvdG90eXBlLmdldFRvdGFsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcyw1LDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlRyYW5zYWN0aW9uTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRUb3RhbENvdW50PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCksc2V0dGxlQXQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksbWluQmFsYW5jZTpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMywwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFNldHRsZUF0KHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldE1pbkJhbGFuY2UodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFyZWFJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFNldHRsZUF0KCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0TWluQmFsYW5jZSgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMyxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHNldHRsZV9hdCA9IDI7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3QucHJvdG90eXBlLmdldFNldHRsZUF0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNyZWF0ZVNldHRsZVJlcXVlc3QucHJvdG90eXBlLnNldFNldHRsZUF0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIG1pbl9iYWxhbmNlID0gMzsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdC5wcm90b3R5cGUuZ2V0TWluQmFsYW5jZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ3JlYXRlU2V0dGxlUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5DcmVhdGVTZXR0bGVSZXF1ZXN0LnByb3RvdHlwZS5zZXRNaW5CYWxhbmNlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogTGlzdCBvZiByZXBlYXRlZCBmaWVsZHMgd2l0aGluIHRoaXMgbWVzc2FnZSB0eXBlLgogKiBAcHJpdmF0ZSB7IUFycmF5PG51bWJlcj59CiAqIEBjb25zdAogKi9wcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdC5yZXBlYXRlZEZpZWxkc189WzJdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2FyZWFJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxyZWNvcmRzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRSZWNvcmRzTGlzdCgpLGFuY2hvcnR5cGVfcGIuU2V0dGxlUmVjb3JkLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdH0KICovcHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1uZXcgYW5jaG9ydHlwZV9wYi5TZXR0bGVSZWNvcmQoKTtyZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsYW5jaG9ydHlwZV9wYi5TZXR0bGVSZWNvcmQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkUmVjb3Jkcyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO31mPW1lc3NhZ2UuZ2V0UmVjb3Jkc0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMixmLGFuY2hvcnR5cGVfcGIuU2V0dGxlUmVjb3JkLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogcmVwZWF0ZWQgcGIuU2V0dGxlUmVjb3JkIHJlY29yZHMgPSAyOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLlNldHRsZVJlY29yZD59CiAqL3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0LnByb3RvdHlwZS5nZXRSZWNvcmRzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxhbmNob3J0eXBlX3BiLlNldHRsZVJlY29yZCwyKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuU2V0dGxlUmVjb3JkPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0fSByZXR1cm5zIHRoaXMKKi9wcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdC5wcm90b3R5cGUuc2V0UmVjb3Jkc0xpc3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5TZXR0bGVSZWNvcmQ9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLlNldHRsZVJlY29yZH0KICovcHJvdG8ucGIuY21zLlN1Ym1pdFNldHRsZVJlcXVlc3QucHJvdG90eXBlLmFkZFJlY29yZHM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMixvcHRfdmFsdWUscHJvdG8ucGIuU2V0dGxlUmVjb3JkLG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU3VibWl0U2V0dGxlUmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5TdWJtaXRTZXR0bGVSZXF1ZXN0LnByb3RvdHlwZS5jbGVhclJlY29yZHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0UmVjb3Jkc0xpc3QoW10pO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFyZWFJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcXVlc3QucHJvdG90eXBlLmdldEFyZWFJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtwcm9ncmVzczpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5fQogKi9wcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXBseX0KICovcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0UHJvZ3Jlc3ModmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlNldHRsZVByb2dyZXNzUmVwbHl9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldFByb2dyZXNzKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgcHJvZ3Jlc3MgPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5LnByb3RvdHlwZS5nZXRQcm9ncmVzcz1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU2V0dGxlUHJvZ3Jlc3NSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVQcm9ncmVzc1JlcGx5LnByb3RvdHlwZS5zZXRQcm9ncmVzcz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2FyZWFJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSxndWlsZElkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLDApLGFuY2hvcklkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLHNldHRsZUF0OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZyw0LDApLHN0YXR1czpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csNSwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRHdWlsZElkKHZhbHVlKTticmVhaztjYXNlIDM6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFuY2hvcklkKHZhbHVlKTticmVhaztjYXNlIDQ6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFNldHRsZUF0KHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRTdGF0dXModmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fWY9bWVzc2FnZS5nZXRHdWlsZElkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO31mPW1lc3NhZ2UuZ2V0QW5jaG9ySWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDMsZik7fWY9bWVzc2FnZS5nZXRTZXR0bGVBdCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNCxmKTt9Zj1tZXNzYWdlLmdldFN0YXR1cygpO2lmKGYhPT0wLjApe3dyaXRlci53cml0ZUVudW0oNSxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSAxOwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGd1aWxkX2lkID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEd1aWxkSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRHdWlsZElkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMix2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFuY2hvcl9pZCA9IDM7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBbmNob3JJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDMsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFuY2hvcklkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsMyx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIHNldHRsZV9hdCA9IDQ7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRTZXR0bGVBdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDQsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFNldHRsZUF0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgcGIuU2V0dGxlU3RhdHVzIHN0YXR1cyA9IDU7CiAqIEByZXR1cm4geyFwcm90by5wYi5TZXR0bGVTdGF0dXN9CiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0U3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNSwwKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5TZXR0bGVTdGF0dXN9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldFN0YXR1cz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNFbnVtRmllbGQodGhpcyw1LHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e3JlY29yZHNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFJlY29yZHNMaXN0KCksYW5jaG9ydHlwZV9wYi5TZXR0bGVSZWNvcmQudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgYW5jaG9ydHlwZV9wYi5TZXR0bGVSZWNvcmQoKTtyZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsYW5jaG9ydHlwZV9wYi5TZXR0bGVSZWNvcmQuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkUmVjb3Jkcyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRSZWNvcmRzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsYW5jaG9ydHlwZV9wYi5TZXR0bGVSZWNvcmQuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5TZXR0bGVSZWNvcmQgcmVjb3JkcyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuU2V0dGxlUmVjb3JkPn0KICovcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0UmVjb3Jkc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsYW5jaG9ydHlwZV9wYi5TZXR0bGVSZWNvcmQsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLlNldHRsZVJlY29yZD59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRSZWNvcmRzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLlNldHRsZVJlY29yZD19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuU2V0dGxlUmVjb3JkfQogKi9wcm90by5wYi5jbXMuU2V0dGxlTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRSZWNvcmRzPWZ1bmN0aW9uKG9wdF92YWx1ZSxvcHRfaW5kZXgpe3JldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsb3B0X3ZhbHVlLHByb3RvLnBiLlNldHRsZVJlY29yZCxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlNldHRsZUxpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5TZXR0bGVMaXN0UmVwbHkucHJvdG90eXBlLmNsZWFyUmVjb3Jkc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRSZWNvcmRzTGlzdChbXSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQXBwTGlzdFJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQXBwTGlzdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17YXJlYUlkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQXBwTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQXBwTGlzdFJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BcHBMaXN0UmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQXBwTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5BcHBMaXN0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQXBwTGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXJlYV9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcmVhSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQXBwTGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXBwTGlzdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2FwcHNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldEFwcHNMaXN0KCksY21zdHlwZV9wYi5BcHAudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQXBwTGlzdFJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgY21zdHlwZV9wYi5BcHAoKTtyZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsY21zdHlwZV9wYi5BcHAuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkQXBwcyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkFwcExpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRBcHBzTGlzdCgpO2lmKGYubGVuZ3RoPjApe3dyaXRlci53cml0ZVJlcGVhdGVkTWVzc2FnZSgxLGYsY21zdHlwZV9wYi5BcHAuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5BcHAgYXBwcyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuQXBwPn0KICovcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseS5wcm90b3R5cGUuZ2V0QXBwc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsY21zdHlwZV9wYi5BcHAsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkFwcD59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXBwTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKKi9wcm90by5wYi5jbXMuQXBwTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRBcHBzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkFwcD19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuQXBwfQogKi9wcm90by5wYi5jbXMuQXBwTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRBcHBzPWZ1bmN0aW9uKG9wdF92YWx1ZSxvcHRfaW5kZXgpe3JldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsb3B0X3ZhbHVlLHByb3RvLnBiLkFwcCxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFwcExpc3RSZXBseX0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BcHBMaXN0UmVwbHkucHJvdG90eXBlLmNsZWFyQXBwc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRBcHBzTGlzdChbXSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2FwcElkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcXVlc3QoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFwcElkKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFwcElkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXBwX2lkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcHBJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXBwSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXz1bMV07aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHkucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17dmVyc2lvbnNMaXN0OmpzcGIuTWVzc2FnZS50b09iamVjdExpc3QobXNnLmdldFZlcnNpb25zTGlzdCgpLGNtc3R5cGVfcGIuVmVyc2lvbi50b09iamVjdCxpbmNsdWRlSW5zdGFuY2UpfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgY21zdHlwZV9wYi5WZXJzaW9uKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLGNtc3R5cGVfcGIuVmVyc2lvbi5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO21zZy5hZGRWZXJzaW9ucyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0VmVyc2lvbnNMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEsZixjbXN0eXBlX3BiLlZlcnNpb24uc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5WZXJzaW9uIHZlcnNpb25zID0gMTsKICogQHJldHVybiB7IUFycmF5PCFwcm90by5wYi5WZXJzaW9uPn0KICovcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHkucHJvdG90eXBlLmdldFZlcnNpb25zTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxjbXN0eXBlX3BiLlZlcnNpb24sMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLlZlcnNpb24+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5WZXJzaW9uTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRWZXJzaW9uc0xpc3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBAcGFyYW0geyFwcm90by5wYi5WZXJzaW9uPX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5WZXJzaW9ufQogKi9wcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXBseS5wcm90b3R5cGUuYWRkVmVyc2lvbnM9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuVmVyc2lvbixvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlZlcnNpb25MaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuVmVyc2lvbkxpc3RSZXBseS5wcm90b3R5cGUuY2xlYXJWZXJzaW9uc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRWZXJzaW9uc0xpc3QoW10pO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcXVlc3QudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVxdWVzdH0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCksYXBwSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFwcElkKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFyZWFJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldEFwcElkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigyLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXJlYV9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcmVhSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXBwX2lkID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcHBJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXBwSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXz1bMV07aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVwbHkucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17Y29uZmlnc0xpc3Q6anNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0Q29uZmlnc0xpc3QoKSxjbXN0eXBlX3BiLkFyZWFDb25maWcudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9bmV3IGNtc3R5cGVfcGIuQXJlYUNvbmZpZygpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxjbXN0eXBlX3BiLkFyZWFDb25maWcuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkQ29uZmlncyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQXJlYUNvbmZpZ0xpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0Q29uZmlnc0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLGNtc3R5cGVfcGIuQXJlYUNvbmZpZy5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcik7fX07LyoqCiAqIHJlcGVhdGVkIHBiLkFyZWFDb25maWcgY29uZmlncyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuQXJlYUNvbmZpZz59CiAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRDb25maWdzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxjbXN0eXBlX3BiLkFyZWFDb25maWcsMSk7fTsvKioKICogQHBhcmFtIHshQXJyYXk8IXByb3RvLnBiLkFyZWFDb25maWc+fSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LnByb3RvdHlwZS5zZXRDb25maWdzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkFyZWFDb25maWc9fSBvcHRfdmFsdWUKICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXgKICogQHJldHVybiB7IXByb3RvLnBiLkFyZWFDb25maWd9CiAqL3Byb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5LnByb3RvdHlwZS5hZGRDb25maWdzPWZ1bmN0aW9uKG9wdF92YWx1ZSxvcHRfaW5kZXgpe3JldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsb3B0X3ZhbHVlLHByb3RvLnBiLkFyZWFDb25maWcsb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BcmVhQ29uZmlnTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFyZWFDb25maWdMaXN0UmVwbHkucHJvdG90eXBlLmNsZWFyQ29uZmlnc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRDb25maWdzTGlzdChbXSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2FyZWFJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVxdWVzdH0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcmVhSWQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3Quc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0QXJlYUlkKCk7aWYoZiE9PTApe3dyaXRlci53cml0ZVVpbnQzMigxLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXJlYV9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcmVhSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcGx5LnJlcGVhdGVkRmllbGRzXz1bMV07aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHkucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcGx5LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17Y29uZmlnc0xpc3Q6anNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0Q29uZmlnc0xpc3QoKSx1c2VydHlwZV9wYi5Db3VudHJ5Q29uZmlnLnRvT2JqZWN0LGluY2x1ZGVJbnN0YW5jZSl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseSgpO3JldHVybiBwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyB1c2VydHlwZV9wYi5Db3VudHJ5Q29uZmlnKCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHVzZXJ0eXBlX3BiLkNvdW50cnlDb25maWcuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKTttc2cuYWRkQ29uZmlncyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcGx5LnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oKXt2YXIgd3JpdGVyPW5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO3Byb3RvLnBiLmNtcy5Db3VudHJ5Q29uZmlnTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXI9ZnVuY3Rpb24obWVzc2FnZSx3cml0ZXIpe3ZhciBmPXVuZGVmaW5lZDtmPW1lc3NhZ2UuZ2V0Q29uZmlnc0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLHVzZXJ0eXBlX3BiLkNvdW50cnlDb25maWcuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5Db3VudHJ5Q29uZmlnIGNvbmZpZ3MgPSAxOwogKiBAcmV0dXJuIHshQXJyYXk8IXByb3RvLnBiLkNvdW50cnlDb25maWc+fQogKi9wcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseS5wcm90b3R5cGUuZ2V0Q29uZmlnc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsdXNlcnR5cGVfcGIuQ291bnRyeUNvbmZpZywxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuQ291bnRyeUNvbmZpZz59IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseX0gcmV0dXJucyB0aGlzCiovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHkucHJvdG90eXBlLnNldENvbmZpZ3NMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuQ291bnRyeUNvbmZpZz19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuQ291bnRyeUNvbmZpZ30KICovcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHkucHJvdG90eXBlLmFkZENvbmZpZ3M9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuQ291bnRyeUNvbmZpZyxvcHRfaW5kZXgpO307LyoqCiAqIENsZWFycyB0aGUgbGlzdCBtYWtpbmcgaXQgZW1wdHkgYnV0IG5vbi1udWxsLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNvdW50cnlDb25maWdMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ291bnRyeUNvbmZpZ0xpc3RSZXBseS5wcm90b3R5cGUuY2xlYXJDb25maWdzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldENvbmZpZ3NMaXN0KFtdKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcXVlc3QucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17YXJlYUlkOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLHBheVR5cGU6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50MzIoKTttc2cuc2V0QXJlYUlkKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkRW51bSgpO21zZy5zZXRQYXlUeXBlKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldEFyZWFJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldFBheVR5cGUoKTtpZihmIT09MC4wKXt3cml0ZXIud3JpdGVFbnVtKDIsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFyZWFJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHBiLlBheVR5cGUgcGF5X3R5cGUgPSAyOwogKiBAcmV0dXJuIHshcHJvdG8ucGIuUGF5VHlwZX0KICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0UGF5VHlwZT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDIsMCk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuUGF5VHlwZX0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRQYXlUeXBlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDIsdmFsdWUpO307LyoqCiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS4KICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fQogKiBAY29uc3QKICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXBseS5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXtjaGFubmVsc0xpc3Q6anNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0Q2hhbm5lbHNMaXN0KCksdXNlcnR5cGVfcGIuUGF5Q2hhbm5lbC50b09iamVjdCxpbmNsdWRlSW5zdGFuY2UpfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHl9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgdXNlcnR5cGVfcGIuUGF5Q2hhbm5lbCgpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSx1c2VydHlwZV9wYi5QYXlDaGFubmVsLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7bXNnLmFkZENoYW5uZWxzKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRDaGFubmVsc0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLHVzZXJ0eXBlX3BiLlBheUNoYW5uZWwuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIpO319Oy8qKgogKiByZXBlYXRlZCBwYi5QYXlDaGFubmVsIGNoYW5uZWxzID0gMTsKICogQHJldHVybiB7IUFycmF5PCFwcm90by5wYi5QYXlDaGFubmVsPn0KICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkucHJvdG90eXBlLmdldENoYW5uZWxzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyx1c2VydHlwZV9wYi5QYXlDaGFubmVsLDEpO307LyoqCiAqIEBwYXJhbSB7IUFycmF5PCFwcm90by5wYi5QYXlDaGFubmVsPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKKi9wcm90by5wYi5jbXMuUGF5Q2hhbm5lbExpc3RSZXBseS5wcm90b3R5cGUuc2V0Q2hhbm5lbHNMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuUGF5Q2hhbm5lbD19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuUGF5Q2hhbm5lbH0KICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkucHJvdG90eXBlLmFkZENoYW5uZWxzPWZ1bmN0aW9uKG9wdF92YWx1ZSxvcHRfaW5kZXgpe3JldHVybiBqc3BiLk1lc3NhZ2UuYWRkVG9SZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsb3B0X3ZhbHVlLHByb3RvLnBiLlBheUNoYW5uZWwsb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlDaGFubmVsTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUNoYW5uZWxMaXN0UmVwbHkucHJvdG90eXBlLmNsZWFyQ2hhbm5lbHNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0Q2hhbm5lbHNMaXN0KFtdKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXF1ZXN0fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcmVhSWQodmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiBhcmVhX2lkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFyZWFJZD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsMCk7fTsvKioKICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3R9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcXVlc3QucHJvdG90eXBlLnNldEFyZWFJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS4KICogQHByaXZhdGUgeyFBcnJheTxudW1iZXI+fQogKiBAY29uc3QKICovcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseS5yZXBlYXRlZEZpZWxkc189WzFdO2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVwbHkucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5LnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsdGhpcyk7fTsvKioKICogU3RhdGljIHZlcnNpb24gb2YgdGhlIHtAc2VlIHRvT2JqZWN0fSBtZXRob2QuCiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IGluY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiBXaGV0aGVyIHRvIGluY2x1ZGUKICogICAgIHRoZSBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVwbHl9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17Y29uZmlnc0xpc3Q6anNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0Q29uZmlnc0xpc3QoKSxjbXN0eXBlX3BiLlBheUNvbmZpZy50b09iamVjdCxpbmNsdWRlSW5zdGFuY2UpfTtpZihpbmNsdWRlSW5zdGFuY2Upe29iai4kanNwYk1lc3NhZ2VJbnN0YW5jZT1tc2c7fXJldHVybiBvYmo7fTt9LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVwbHkoKTtyZXR1cm4gcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5fQogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPW5ldyBjbXN0eXBlX3BiLlBheUNvbmZpZygpO3JlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxjbXN0eXBlX3BiLlBheUNvbmZpZy5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO21zZy5hZGRDb25maWdzKHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseS5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldENvbmZpZ3NMaXN0KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlUmVwZWF0ZWRNZXNzYWdlKDEsZixjbXN0eXBlX3BiLlBheUNvbmZpZy5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcik7fX07LyoqCiAqIHJlcGVhdGVkIHBiLlBheUNvbmZpZyBjb25maWdzID0gMTsKICogQHJldHVybiB7IUFycmF5PCFwcm90by5wYi5QYXlDb25maWc+fQogKi9wcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5LnByb3RvdHlwZS5nZXRDb25maWdzTGlzdD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0UmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcyxjbXN0eXBlX3BiLlBheUNvbmZpZywxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuUGF5Q29uZmlnPn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVwbHkucHJvdG90eXBlLnNldENvbmZpZ3NMaXN0PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFJlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSx2YWx1ZSk7fTsvKioKICogQHBhcmFtIHshcHJvdG8ucGIuUGF5Q29uZmlnPX0gb3B0X3ZhbHVlCiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2luZGV4CiAqIEByZXR1cm4geyFwcm90by5wYi5QYXlDb25maWd9CiAqL3Byb3RvLnBiLmNtcy5QYXlDb25maWdMaXN0UmVwbHkucHJvdG90eXBlLmFkZENvbmZpZ3M9ZnVuY3Rpb24ob3B0X3ZhbHVlLG9wdF9pbmRleCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsMSxvcHRfdmFsdWUscHJvdG8ucGIuUGF5Q29uZmlnLG9wdF9pbmRleCk7fTsvKioKICogQ2xlYXJzIHRoZSBsaXN0IG1ha2luZyBpdCBlbXB0eSBidXQgbm9uLW51bGwuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuUGF5Q29uZmlnTGlzdFJlcGx5fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLlBheUNvbmZpZ0xpc3RSZXBseS5wcm90b3R5cGUuY2xlYXJDb25maWdzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldENvbmZpZ3NMaXN0KFtdKTt9O2lmKGpzcGIuTWVzc2FnZS5HRU5FUkFURV9UT19PQkpFQ1Qpey8qKgogKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvLgogKiBGaWVsZCBuYW1lcyB0aGF0IGFyZSByZXNlcnZlZCBpbiBKYXZhU2NyaXB0IGFuZCB3aWxsIGJlIHJlbmFtZWQgdG8gcGJfbmFtZS4KICogT3B0aW9uYWwgZmllbGRzIHRoYXQgYXJlIG5vdCBzZXQgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLgogKiBUbyBhY2Nlc3MgYSByZXNlcnZlZCBmaWVsZCB1c2UsIGZvby5wYl88bmFtZT4sIGVnLCBmb28ucGJfZGVmYXVsdC4KICogRm9yIHRoZSBsaXN0IG9mIHJlc2VydmVkIG5hbWVzIHBsZWFzZSBzZWU6CiAqICAgICBuZXQvcHJvdG8yL2NvbXBpbGVyL2pzL2ludGVybmFsL2dlbmVyYXRvci5jYyNrS2V5d29yZC4KICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luY2x1ZGVJbnN0YW5jZSBEZXByZWNhdGVkLiB3aGV0aGVyIHRvIGluY2x1ZGUgdGhlCiAqICAgICBKU1BCIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6CiAqICAgICBodHRwOi8vZ290by9zb3ktcGFyYW0tbWlncmF0aW9uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdC5wcm90b3R5cGUudG9PYmplY3Q9ZnVuY3Rpb24ob3B0X2luY2x1ZGVJbnN0YW5jZSl7cmV0dXJuIHByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcXVlc3R9IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS4KICogQHJldHVybiB7IU9iamVjdH0KICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcXVlc3QudG9PYmplY3Q9ZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLG1zZyl7dmFyIGYsb2JqPXthcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDEsMCksYXBwSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCksaXNTdWJzY3JpcHRpb246anNwYi5NZXNzYWdlLmdldEJvb2xlYW5GaWVsZFdpdGhEZWZhdWx0KG1zZywzLGZhbHNlKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIobXNnLHJlYWRlcik7fTsvKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkgZnJvbSB0aGUKICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdH0KICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcj1mdW5jdGlvbihtc2cscmVhZGVyKXt3aGlsZShyZWFkZXIubmV4dEZpZWxkKCkpe2lmKHJlYWRlci5pc0VuZEdyb3VwKCkpe2JyZWFrO312YXIgZmllbGQ9cmVhZGVyLmdldEZpZWxkTnVtYmVyKCk7c3dpdGNoKGZpZWxkKXtjYXNlIDE6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7Y2FzZSAyOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRBcHBJZCh2YWx1ZSk7YnJlYWs7Y2FzZSAzOnZhciB2YWx1ZT1yZWFkZXIucmVhZEJvb2woKTttc2cuc2V0SXNTdWJzY3JpcHRpb24odmFsdWUpO2JyZWFrO2RlZmF1bHQ6cmVhZGVyLnNraXBGaWVsZCgpO2JyZWFrO319cmV0dXJuIG1zZzt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEByZXR1cm4geyFVaW50OEFycmF5fQogKi9wcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0LnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyKHRoaXMsd3JpdGVyKTtyZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUKICogZm9ybWF0KSwgd3JpdGluZyB0byB0aGUgZ2l2ZW4gQmluYXJ5V3JpdGVyLgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcXVlc3R9IG1lc3NhZ2UKICogQHBhcmFtIHshanNwYi5CaW5hcnlXcml0ZXJ9IHdyaXRlcgogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRBcmVhSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDEsZik7fWY9bWVzc2FnZS5nZXRBcHBJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMixmKTt9Zj1tZXNzYWdlLmdldElzU3Vic2NyaXB0aW9uKCk7aWYoZil7d3JpdGVyLndyaXRlQm9vbCgzLGYpO319Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXJlYV9pZCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5nZXRBcmVhSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRBcmVhSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCB1aW50MzIgYXBwX2lkID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcXVlc3QucHJvdG90eXBlLmdldEFwcElkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsMiwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdC5wcm90b3R5cGUuc2V0QXBwSWQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBib29sIGlzX3N1YnNjcmlwdGlvbiA9IDM7CiAqIEByZXR1cm4ge2Jvb2xlYW59CiAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVxdWVzdC5wcm90b3R5cGUuZ2V0SXNTdWJzY3JpcHRpb249ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEJvb2xlYW5GaWVsZFdpdGhEZWZhdWx0KHRoaXMsMyxmYWxzZSk7fTsvKioKICogQHBhcmFtIHtib29sZWFufSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0fSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXF1ZXN0LnByb3RvdHlwZS5zZXRJc1N1YnNjcmlwdGlvbj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNCb29sZWFuRmllbGQodGhpcywzLHZhbHVlKTt9Oy8qKgogKiBMaXN0IG9mIHJlcGVhdGVkIGZpZWxkcyB3aXRoaW4gdGhpcyBtZXNzYWdlIHR5cGUuCiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn0KICogQGNvbnN0CiAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHkucmVwZWF0ZWRGaWVsZHNfPVsxXTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcGx5LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcGx5fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseS50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2NvbW1vZGl0aWVzTGlzdDpqc3BiLk1lc3NhZ2UudG9PYmplY3RMaXN0KG1zZy5nZXRDb21tb2RpdGllc0xpc3QoKSx1c2VydHlwZV9wYi5Db21tb2RpdHkudG9PYmplY3QsaW5jbHVkZUluc3RhbmNlKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHl9CiAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnk9ZnVuY3Rpb24oYnl0ZXMpe3ZhciByZWFkZXI9bmV3IGpzcGIuQmluYXJ5UmVhZGVyKGJ5dGVzKTt2YXIgbXNnPW5ldyBwcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseX0gbXNnIFRoZSBtZXNzYWdlIG9iamVjdCB0byBkZXNlcmlhbGl6ZSBpbnRvLgogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVJlYWRlcn0gcmVhZGVyIFRoZSBCaW5hcnlSZWFkZXIgdG8gdXNlLgogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseX0KICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1uZXcgdXNlcnR5cGVfcGIuQ29tbW9kaXR5KCk7cmVhZGVyLnJlYWRNZXNzYWdlKHZhbHVlLHVzZXJ0eXBlX3BiLkNvbW1vZGl0eS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO21zZy5hZGRDb21tb2RpdGllcyh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseX0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRDb21tb2RpdGllc0xpc3QoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoMSxmLHVzZXJ0eXBlX3BiLkNvbW1vZGl0eS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcik7fX07LyoqCiAqIHJlcGVhdGVkIHBiLkNvbW1vZGl0eSBjb21tb2RpdGllcyA9IDE7CiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8ucGIuQ29tbW9kaXR5Pn0KICovcHJvdG8ucGIuY21zLkNvbW1vZGl0eUxpc3RSZXBseS5wcm90b3R5cGUuZ2V0Q29tbW9kaXRpZXNMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLHVzZXJ0eXBlX3BiLkNvbW1vZGl0eSwxKTt9Oy8qKgogKiBAcGFyYW0geyFBcnJheTwhcHJvdG8ucGIuQ29tbW9kaXR5Pn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHl9IHJldHVybnMgdGhpcwoqL3Byb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHkucHJvdG90eXBlLnNldENvbW1vZGl0aWVzTGlzdD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkNvbW1vZGl0eT19IG9wdF92YWx1ZQogKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleAogKiBAcmV0dXJuIHshcHJvdG8ucGIuQ29tbW9kaXR5fQogKi9wcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcGx5LnByb3RvdHlwZS5hZGRDb21tb2RpdGllcz1mdW5jdGlvbihvcHRfdmFsdWUsb3B0X2luZGV4KXtyZXR1cm4ganNwYi5NZXNzYWdlLmFkZFRvUmVwZWF0ZWRXcmFwcGVyRmllbGQodGhpcywxLG9wdF92YWx1ZSxwcm90by5wYi5Db21tb2RpdHksb3B0X2luZGV4KTt9Oy8qKgogKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5Db21tb2RpdHlMaXN0UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQ29tbW9kaXR5TGlzdFJlcGx5LnByb3RvdHlwZS5jbGVhckNvbW1vZGl0aWVzTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldENvbW1vZGl0aWVzTGlzdChbXSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQWdvcmFLZXlSZXF1ZXN0LnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihvcHRfaW5jbHVkZUluc3RhbmNlKXtyZXR1cm4gcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdC50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQWdvcmFLZXlSZXF1ZXN0fSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdC50b09iamVjdD1mdW5jdGlvbihpbmNsdWRlSW5zdGFuY2UsbXNnKXt2YXIgZixvYmo9e2NhbGxJZDpqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdChtc2csMSwwKSx1c2VySWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDIsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWdvcmFLZXlSZXF1ZXN0fQogKi9wcm90by5wYi5jbXMuQWdvcmFLZXlSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKGJ5dGVzKXt2YXIgcmVhZGVyPW5ldyBqc3BiLkJpbmFyeVJlYWRlcihieXRlcyk7dmFyIG1zZz1uZXcgcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdCgpO3JldHVybiBwcm90by5wYi5jbXMuQWdvcmFLZXlSZXF1ZXN0LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BZ29yYUtleVJlcXVlc3R9IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by4KICogQHBhcmFtIHshanNwYi5CaW5hcnlSZWFkZXJ9IHJlYWRlciBUaGUgQmluYXJ5UmVhZGVyIHRvIHVzZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BZ29yYUtleVJlcXVlc3R9CiAqL3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcXVlc3QuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRVaW50NjQoKTttc2cuc2V0Q2FsbElkKHZhbHVlKTticmVhaztjYXNlIDI6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldFVzZXJJZCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcXVlc3QucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLHdyaXRlcik7cmV0dXJuIHdyaXRlci5nZXRSZXN1bHRCdWZmZXIoKTt9Oy8qKgogKiBTZXJpYWxpemVzIHRoZSBnaXZlbiBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlCiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdH0gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdC5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRDYWxsSWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDY0KDEsZik7fWY9bWVzc2FnZS5nZXRVc2VySWQoKTtpZihmIT09MCl7d3JpdGVyLndyaXRlVWludDMyKDIsZik7fX07LyoqCiAqIG9wdGlvbmFsIHVpbnQ2NCBjYWxsX2lkID0gMTsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQWdvcmFLZXlSZXF1ZXN0LnByb3RvdHlwZS5nZXRDYWxsSWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcXVlc3QucHJvdG90eXBlLnNldENhbGxJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDEsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIHVpbnQzMiB1c2VyX2lkID0gMjsKICogQHJldHVybiB7bnVtYmVyfQogKi9wcm90by5wYi5jbXMuQWdvcmFLZXlSZXF1ZXN0LnByb3RvdHlwZS5nZXRVc2VySWQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVxdWVzdH0gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcXVlc3QucHJvdG90eXBlLnNldFVzZXJJZD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLDIsdmFsdWUpO307aWYoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCl7LyoqCiAqIENyZWF0ZXMgYW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcHJvdG8uCiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLgogKiBPcHRpb25hbCBmaWVsZHMgdGhhdCBhcmUgbm90IHNldCB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuCiAqIFRvIGFjY2VzcyBhIHJlc2VydmVkIGZpZWxkIHVzZSwgZm9vLnBiXzxuYW1lPiwgZWcsIGZvby5wYl9kZWZhdWx0LgogKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZToKICogICAgIG5ldC9wcm90bzIvY29tcGlsZXIvanMvaW50ZXJuYWwvZ2VuZXJhdG9yLmNjI2tLZXl3b3JkLgogKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUKICogICAgIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHJldHVybiB7IU9iamVjdH0KICovcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVwbHkucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQWdvcmFLZXlSZXBseS50b09iamVjdChvcHRfaW5jbHVkZUluc3RhbmNlLHRoaXMpO307LyoqCiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLgogKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSBpbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gV2hldGhlciB0byBpbmNsdWRlCiAqICAgICB0aGUgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcGFyYW0geyFwcm90by5wYi5jbXMuQWdvcmFLZXlSZXBseX0gbXNnIFRoZSBtc2cgaW5zdGFuY2UgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHshT2JqZWN0fQogKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzCiAqL3Byb3RvLnBiLmNtcy5BZ29yYUtleVJlcGx5LnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17a2V5OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLCIiKX07aWYoaW5jbHVkZUluc3RhbmNlKXtvYmouJGpzcGJNZXNzYWdlSW5zdGFuY2U9bXNnO31yZXR1cm4gb2JqO307fS8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHBhcmFtIHtqc3BiLkJ5dGVTb3VyY2V9IGJ5dGVzIFRoZSBieXRlcyB0byBkZXNlcmlhbGl6ZS4KICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BZ29yYUtleVJlcGx5fQogKi9wcm90by5wYi5jbXMuQWdvcmFLZXlSZXBseS5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BZ29yYUtleVJlcGx5KCk7cmV0dXJuIHByb3RvLnBiLmNtcy5BZ29yYUtleVJlcGx5LmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcihtc2cscmVhZGVyKTt9Oy8qKgogKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZQogKiBnaXZlbiByZWFkZXIgaW50byB0aGUgZ2l2ZW4gbWVzc2FnZSBvYmplY3QuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BZ29yYUtleVJlcGx5fSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWdvcmFLZXlSZXBseX0KICovcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVwbHkuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyPWZ1bmN0aW9uKG1zZyxyZWFkZXIpe3doaWxlKHJlYWRlci5uZXh0RmllbGQoKSl7aWYocmVhZGVyLmlzRW5kR3JvdXAoKSl7YnJlYWs7fXZhciBmaWVsZD1yZWFkZXIuZ2V0RmllbGROdW1iZXIoKTtzd2l0Y2goZmllbGQpe2Nhc2UgMTp2YXIgdmFsdWU9cmVhZGVyLnJlYWRTdHJpbmcoKTttc2cuc2V0S2V5KHZhbHVlKTticmVhaztkZWZhdWx0OnJlYWRlci5za2lwRmllbGQoKTticmVhazt9fXJldHVybiBtc2c7fTsvKioKICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLgogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVwbHkucHJvdG90eXBlLnNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbigpe3ZhciB3cml0ZXI9bmV3IGpzcGIuQmluYXJ5V3JpdGVyKCk7cHJvdG8ucGIuY21zLkFnb3JhS2V5UmVwbHkuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BZ29yYUtleVJlcGx5fSBtZXNzYWdlCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5V3JpdGVyfSB3cml0ZXIKICogQHN1cHByZXNzIHt1bnVzZWRMb2NhbFZhcmlhYmxlc30gZiBpcyBvbmx5IHVzZWQgZm9yIG5lc3RlZCBtZXNzYWdlcwogKi9wcm90by5wYi5jbXMuQWdvcmFLZXlSZXBseS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcj1mdW5jdGlvbihtZXNzYWdlLHdyaXRlcil7dmFyIGY9dW5kZWZpbmVkO2Y9bWVzc2FnZS5nZXRLZXkoKTtpZihmLmxlbmd0aD4wKXt3cml0ZXIud3JpdGVTdHJpbmcoMSxmKTt9fTsvKioKICogb3B0aW9uYWwgc3RyaW5nIGtleSA9IDE7CiAqIEByZXR1cm4ge3N0cmluZ30KICovcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVwbHkucHJvdG90eXBlLmdldEtleT1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDEsIiIpO307LyoqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFnb3JhS2V5UmVwbHl9IHJldHVybnMgdGhpcwogKi9wcm90by5wYi5jbXMuQWdvcmFLZXlSZXBseS5wcm90b3R5cGUuc2V0S2V5PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM1N0cmluZ0ZpZWxkKHRoaXMsMSx2YWx1ZSk7fTtpZihqc3BiLk1lc3NhZ2UuR0VORVJBVEVfVE9fT0JKRUNUKXsvKioKICogQ3JlYXRlcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwcm90by4KICogRmllbGQgbmFtZXMgdGhhdCBhcmUgcmVzZXJ2ZWQgaW4gSmF2YVNjcmlwdCBhbmQgd2lsbCBiZSByZW5hbWVkIHRvIHBiX25hbWUuCiAqIE9wdGlvbmFsIGZpZWxkcyB0aGF0IGFyZSBub3Qgc2V0IHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC4KICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuCiAqIEZvciB0aGUgbGlzdCBvZiByZXNlcnZlZCBuYW1lcyBwbGVhc2Ugc2VlOgogKiAgICAgbmV0L3Byb3RvMi9jb21waWxlci9qcy9pbnRlcm5hbC9nZW5lcmF0b3IuY2Mja0tleXdvcmQuCiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRlSW5zdGFuY2UgRGVwcmVjYXRlZC4gd2hldGhlciB0byBpbmNsdWRlIHRoZQogKiAgICAgSlNQQiBpbnN0YW5jZSBmb3IgdHJhbnNpdGlvbmFsIHNveSBwcm90byBzdXBwb3J0OgogKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvbgogKiBAcmV0dXJuIHshT2JqZWN0fQogKi9wcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmsucHJvdG90eXBlLnRvT2JqZWN0PWZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2Upe3JldHVybiBwcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmsudG9PYmplY3Qob3B0X2luY2x1ZGVJbnN0YW5jZSx0aGlzKTt9Oy8qKgogKiBTdGF0aWMgdmVyc2lvbiBvZiB0aGUge0BzZWUgdG9PYmplY3R9IG1ldGhvZC4KICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIERlcHJlY2F0ZWQuIFdoZXRoZXIgdG8gaW5jbHVkZQogKiAgICAgdGhlIEpTUEIgaW5zdGFuY2UgZm9yIHRyYW5zaXRpb25hbCBzb3kgcHJvdG8gc3VwcG9ydDoKICogICAgIGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb24KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rfSBtc2cgVGhlIG1zZyBpbnN0YW5jZSB0byB0cmFuc2Zvcm0uCiAqIEByZXR1cm4geyFPYmplY3R9CiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLnRvT2JqZWN0PWZ1bmN0aW9uKGluY2x1ZGVJbnN0YW5jZSxtc2cpe3ZhciBmLG9iaj17b2Zmc2V0OmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywxLDApLGZpbGVuYW1lOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywyLCIiKSx0eXBlOmpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywzLDApLGNvbnRlbnQ6bXNnLmdldENvbnRlbnRfYXNCNjQoKSxhcmVhSWQ6anNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQobXNnLDUsMCl9O2lmKGluY2x1ZGVJbnN0YW5jZSl7b2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlPW1zZzt9cmV0dXJuIG9iajt9O30vKioKICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuCiAqIEBwYXJhbSB7anNwYi5CeXRlU291cmNlfSBieXRlcyBUaGUgYnl0ZXMgdG8gZGVzZXJpYWxpemUuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmt9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5kZXNlcmlhbGl6ZUJpbmFyeT1mdW5jdGlvbihieXRlcyl7dmFyIHJlYWRlcj1uZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO3ZhciBtc2c9bmV3IHByb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuaygpO3JldHVybiBwcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmsuZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZyxyZWFkZXIpO307LyoqCiAqIERlc2VyaWFsaXplcyBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpIGZyb20gdGhlCiAqIGdpdmVuIHJlYWRlciBpbnRvIHRoZSBnaXZlbiBtZXNzYWdlIG9iamVjdC4KICogQHBhcmFtIHshcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rfSBtc2cgVGhlIG1lc3NhZ2Ugb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8uCiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuCiAqIEByZXR1cm4geyFwcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmt9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXI9ZnVuY3Rpb24obXNnLHJlYWRlcil7d2hpbGUocmVhZGVyLm5leHRGaWVsZCgpKXtpZihyZWFkZXIuaXNFbmRHcm91cCgpKXticmVhazt9dmFyIGZpZWxkPXJlYWRlci5nZXRGaWVsZE51bWJlcigpO3N3aXRjaChmaWVsZCl7Y2FzZSAxOnZhciB2YWx1ZT1yZWFkZXIucmVhZFVpbnQzMigpO21zZy5zZXRPZmZzZXQodmFsdWUpO2JyZWFrO2Nhc2UgMjp2YXIgdmFsdWU9cmVhZGVyLnJlYWRTdHJpbmcoKTttc2cuc2V0RmlsZW5hbWUodmFsdWUpO2JyZWFrO2Nhc2UgMzp2YXIgdmFsdWU9cmVhZGVyLnJlYWRFbnVtKCk7bXNnLnNldFR5cGUodmFsdWUpO2JyZWFrO2Nhc2UgNDp2YXIgdmFsdWU9cmVhZGVyLnJlYWRCeXRlcygpO21zZy5zZXRDb250ZW50KHZhbHVlKTticmVhaztjYXNlIDU6dmFyIHZhbHVlPXJlYWRlci5yZWFkVWludDMyKCk7bXNnLnNldEFyZWFJZCh2YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyZWFkZXIuc2tpcEZpZWxkKCk7YnJlYWs7fX1yZXR1cm4gbXNnO307LyoqCiAqIFNlcmlhbGl6ZXMgdGhlIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KS4KICogQHJldHVybiB7IVVpbnQ4QXJyYXl9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5wcm90b3R5cGUuc2VyaWFsaXplQmluYXJ5PWZ1bmN0aW9uKCl7dmFyIHdyaXRlcj1uZXcganNwYi5CaW5hcnlXcml0ZXIoKTtwcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmsuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXIodGhpcyx3cml0ZXIpO3JldHVybiB3cml0ZXIuZ2V0UmVzdWx0QnVmZmVyKCk7fTsvKioKICogU2VyaWFsaXplcyB0aGUgZ2l2ZW4gbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZQogKiBmb3JtYXQpLCB3cml0aW5nIHRvIHRoZSBnaXZlbiBCaW5hcnlXcml0ZXIuCiAqIEBwYXJhbSB7IXByb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVua30gbWVzc2FnZQogKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyCiAqIEBzdXBwcmVzcyB7dW51c2VkTG9jYWxWYXJpYWJsZXN9IGYgaXMgb25seSB1c2VkIGZvciBuZXN0ZWQgbWVzc2FnZXMKICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyPWZ1bmN0aW9uKG1lc3NhZ2Usd3JpdGVyKXt2YXIgZj11bmRlZmluZWQ7Zj1tZXNzYWdlLmdldE9mZnNldCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoMSxmKTt9Zj1tZXNzYWdlLmdldEZpbGVuYW1lKCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlU3RyaW5nKDIsZik7fWY9bWVzc2FnZS5nZXRUeXBlKCk7aWYoZiE9PTAuMCl7d3JpdGVyLndyaXRlRW51bSgzLGYpO31mPW1lc3NhZ2UuZ2V0Q29udGVudF9hc1U4KCk7aWYoZi5sZW5ndGg+MCl7d3JpdGVyLndyaXRlQnl0ZXMoNCxmKTt9Zj1tZXNzYWdlLmdldEFyZWFJZCgpO2lmKGYhPT0wKXt3cml0ZXIud3JpdGVVaW50MzIoNSxmKTt9fTsvKioKICogb3B0aW9uYWwgdWludDMyIG9mZnNldCA9IDE7CiAqIEByZXR1cm4ge251bWJlcn0KICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLnByb3RvdHlwZS5nZXRPZmZzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywxLDApO307LyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rfSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLnByb3RvdHlwZS5zZXRPZmZzZXQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywxLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBzdHJpbmcgZmlsZW5hbWUgPSAyOwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5wcm90b3R5cGUuZ2V0RmlsZW5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywyLCIiKTt9Oy8qKgogKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVua30gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5wcm90b3R5cGUuc2V0RmlsZW5hbWU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zU3RyaW5nRmllbGQodGhpcywyLHZhbHVlKTt9Oy8qKgogKiBvcHRpb25hbCBwYi5GaWxlVHlwZSB0eXBlID0gMzsKICogQHJldHVybiB7IXByb3RvLnBiLkZpbGVUeXBlfQogKi9wcm90by5wYi5jbXMuQWRtaW5GaWxlQ2h1bmsucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywzLDApO307LyoqCiAqIEBwYXJhbSB7IXByb3RvLnBiLkZpbGVUeXBlfSB2YWx1ZQogKiBAcmV0dXJuIHshcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rfSByZXR1cm5zIHRoaXMKICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLnByb3RvdHlwZS5zZXRUeXBlPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0VudW1GaWVsZCh0aGlzLDMsdmFsdWUpO307LyoqCiAqIG9wdGlvbmFsIGJ5dGVzIGNvbnRlbnQgPSA0OwogKiBAcmV0dXJuIHtzdHJpbmd9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3JldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGRXaXRoRGVmYXVsdCh0aGlzLDQsIiIpO307LyoqCiAqIG9wdGlvbmFsIGJ5dGVzIGNvbnRlbnQgPSA0OwogKiBUaGlzIGlzIGEgdHlwZS1jb252ZXJzaW9uIHdyYXBwZXIgYXJvdW5kIGBnZXRDb250ZW50KClgCiAqIEByZXR1cm4ge3N0cmluZ30KICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLnByb3RvdHlwZS5nZXRDb250ZW50X2FzQjY0PWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5ieXRlc0FzQjY0KHRoaXMuZ2V0Q29udGVudCgpKTt9Oy8qKgogKiBvcHRpb25hbCBieXRlcyBjb250ZW50ID0gNDsKICogTm90ZSB0aGF0IFVpbnQ4QXJyYXkgaXMgbm90IHN1cHBvcnRlZCBvbiBhbGwgYnJvd3NlcnMuCiAqIEBzZWUgaHR0cDovL2Nhbml1c2UuY29tL1VpbnQ4QXJyYXkKICogVGhpcyBpcyBhIHR5cGUtY29udmVyc2lvbiB3cmFwcGVyIGFyb3VuZCBgZ2V0Q29udGVudCgpYAogKiBAcmV0dXJuIHshVWludDhBcnJheX0KICovcHJvdG8ucGIuY21zLkFkbWluRmlsZUNodW5rLnByb3RvdHlwZS5nZXRDb250ZW50X2FzVTg9ZnVuY3Rpb24oKXtyZXR1cm4ganNwYi5NZXNzYWdlLmJ5dGVzQXNVOCh0aGlzLmdldENvbnRlbnQoKSk7fTsvKioKICogQHBhcmFtIHshKHN0cmluZ3xVaW50OEFycmF5KX0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVua30gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNCeXRlc0ZpZWxkKHRoaXMsNCx2YWx1ZSk7fTsvKioKICogb3B0aW9uYWwgdWludDMyIGFyZWFfaWQgPSA1OwogKiBAcmV0dXJuIHtudW1iZXJ9CiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5wcm90b3R5cGUuZ2V0QXJlYUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsNSwwKTt9Oy8qKgogKiBAcGFyYW0ge251bWJlcn0gdmFsdWUKICogQHJldHVybiB7IXByb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVua30gcmV0dXJucyB0aGlzCiAqL3Byb3RvLnBiLmNtcy5BZG1pbkZpbGVDaHVuay5wcm90b3R5cGUuc2V0QXJlYUlkPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ganNwYi5NZXNzYWdlLnNldFByb3RvM0ludEZpZWxkKHRoaXMsNSx2YWx1ZSk7fTtnb29nLm9iamVjdC5leHRlbmQoZXhwb3J0cyxwcm90by5wYi5jbXMpOw=="},null]}
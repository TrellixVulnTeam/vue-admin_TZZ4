{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-manage/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-manage/src/services/cmsService.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-manage/src/services/cmsService.js","mtime":1629448957060},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLW1hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiKTsKCnZhciBfYXN5bmNUb0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IiKSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1tYW5hZ2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSk7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1tYW5hZ2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSk7Cgp2YXIgX2Nvb2tpZSA9IHJlcXVpcmUoIi4uL3V0aWxzL2Nvb2tpZSIpOwoKdmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBfZGVmYXVsdChkZXBzKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBfZGVmYXVsdCk7CiAgICB0aGlzLnRva2VuS2V5ID0gZGVwcy50b2tlbktleTsKICAgIHRoaXMucHJvdG8gPSBkZXBzLnByb3RvOwogICAgdGhpcy5jbGllbnQgPSBuZXcgZGVwcy5wcm90by5DbXNDbGllbnQoImh0dHA6Ly9sb2NhbGhvc3Q6MTAwMDAiLCBudWxsLCBudWxsKTsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MyLmRlZmF1bHQpKF9kZWZhdWx0LCBbewogICAga2V5OiAibG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2dpbiA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVzZXIpIHsKICAgICAgICB2YXIgcmVxOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcSA9IG5ldyB0aGlzLnByb3RvLlVzZXIoKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRFbWFpbCh1c2VyLmVtYWlsLnRyaW0oKS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRQYXNzd29yZCh1c2VyLnBhc3N3b3JkLnRyaW0oKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWVudC5sb2dpbihyZXEsIHt9LCBmdW5jdGlvbiAoZXJyLCByZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgKDAsIF9jb29raWUuc2V0VG9rZW4pKHJlc3AuZ2V0QWNjZXNzVG9rZW4oKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3AuZ2V0RW1haWwoKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwLmdldEVtYWlsKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9naW4oX3gpIHsKICAgICAgICByZXR1cm4gX2xvZ2luLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2dpbjsKICAgIH0oKSAvLyBhc3luYyBhdXRoZW50aWNhdGVCeUVtYWlsQW5kUGFzc3dvcmQgKHVzZXIpIHsKICAgIC8vICAgY29uc3QgcmVxID0gbmV3IHRoaXMucHJvdG8uVXNlcigpCiAgICAvLyAgIHJlcS5zZXRFbWFpbCh1c2VyLmVtYWlsLnRyaW0oKS50b0xvd2VyQ2FzZSgpKQogICAgLy8gICByZXEuc2V0UGFzc3dvcmQodXNlci5wYXNzd29yZC50cmltKCkpCiAgICAvLyAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmF1dGhlbnRpY2F0ZUJ5RW1haWxBbmRQYXNzd29yZChyZXEsIHt9KQogICAgLy8gICBjb25zdCB0b2tlbiA9IHJlcy5nZXRUb2tlbigpCiAgICAvLyAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMudG9rZW5LZXksIHRva2VuKQogICAgLy8gICByZXR1cm4gdG9rZW4KICAgIC8vIH0KICAgIC8vCiAgICAvLyBhc3luYyBjaGFuZ2VQYXNzd29yZCAodXNlcikgewogICAgLy8gICBjb25zdCByZXEgPSBuZXcgdGhpcy5wcm90by5Vc2VyKCkKICAgIC8vICAgcmVxLnNldEVtYWlsKHVzZXIuZW1haWwudHJpbSgpLnRvTG93ZXJDYXNlKCkpCiAgICAvLyAgIHJlcS5zZXRQYXNzd29yZCh1c2VyLnBhc3N3b3JkLnRyaW0oKSkKICAgIC8vICAgYXdhaXQgdGhpcy5jbGllbnQuY3JlYXRlKHJlcSwge30pCiAgICAvLyB9CiAgICAvLyBsb2dvdXQgKCkgewogICAgLy8gICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLnRva2VuS2V5KQogICAgLy8gfQoKICB9XSk7CiAgcmV0dXJuIF9kZWZhdWx0Owp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-manage/src/services/cmsService.js"],"names":["deps","tokenKey","proto","client","CmsClient","user","req","User","setEmail","email","trim","toLowerCase","setPassword","password","login","err","resp","getAccessToken","getEmail","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;AAEE,oBAAaA,IAAb,EAAmB;AAAA;AACjB,SAAKC,QAAL,GAAgBD,IAAI,CAACC,QAArB;AACA,SAAKC,KAAL,GAAaF,IAAI,CAACE,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIH,IAAI,CAACE,KAAL,CAAWE,SAAf,CAAyB,wBAAzB,EAAmD,IAAnD,EAAyD,IAAzD,CAAd;AACD;;;;;0GAEcC,I;;;;;;AACHC,gBAAAA,G,GAAM,IAAI,KAAKJ,KAAL,CAAWK,IAAf,E;AACZD,gBAAAA,GAAG,CAACE,QAAJ,CAAaH,IAAI,CAACI,KAAL,CAAWC,IAAX,GAAkBC,WAAlB,EAAb;AACAL,gBAAAA,GAAG,CAACM,WAAJ,CAAgBP,IAAI,CAACQ,QAAL,CAAcH,IAAd,EAAhB;;uBACM,KAAKP,MAAL,CAAYW,KAAZ,CAAkBR,GAAlB,EAAuB,EAAvB,EAA2B,UAACS,GAAD,EAAMC,IAAN,EAAe;AAC5C,sBAAI,CAACD,GAAL,EAAU;AACN,0CAASC,IAAI,CAACC,cAAL,EAAT;AACA,2BAAOD,IAAI,CAACE,QAAL,EAAP;AACH,mBAHD,MAGO;AACHC,oBAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACA,2BAAOC,IAAI,CAACE,QAAL,EAAP;AACH;AACJ,iBARK,C;;;;;;;;;;;;;;;QAWZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA","sourcesContent":["import {setToken} from '../utils/cookie'\nexport default class {\n  constructor (deps) {\n    this.tokenKey = deps.tokenKey\n    this.proto = deps.proto\n    this.client = new deps.proto.CmsClient(\"http://localhost:10000\", null, null)\n  }\n\n    async login (user) {\n        const req = new this.proto.User()\n        req.setEmail(user.email.trim().toLowerCase())\n        req.setPassword(user.password.trim())\n        await this.client.login(req, {}, (err, resp) => {\n            if (!err) {\n                setToken(resp.getAccessToken())\n                return resp.getEmail()\n            } else {\n                console.log(err)\n                return resp.getEmail()\n            }\n        })\n    }\n\n  // async authenticateByEmailAndPassword (user) {\n  //   const req = new this.proto.User()\n  //   req.setEmail(user.email.trim().toLowerCase())\n  //   req.setPassword(user.password.trim())\n  //   const res = await this.client.authenticateByEmailAndPassword(req, {})\n  //   const token = res.getToken()\n  //   localStorage.setItem(this.tokenKey, token)\n  //   return token\n  // }\n  //\n  // async changePassword (user) {\n  //   const req = new this.proto.User()\n  //   req.setEmail(user.email.trim().toLowerCase())\n  //   req.setPassword(user.password.trim())\n  //   await this.client.create(req, {})\n  // }\n\n  // logout () {\n  //   localStorage.removeItem(this.tokenKey)\n  // }\n}\n"]}]}
{"remainingRequest":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/babel-loader/lib/index.js!/home/mengy/develop/iwork/kafo/vue-manage/node_modules/eslint-loader/index.js??ref--13-0!/home/mengy/develop/iwork/kafo/vue-manage/src/api/services/login.js","dependencies":[{"path":"/home/mengy/develop/iwork/kafo/vue-manage/src/api/services/login.js","mtime":1630047542579},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mengy/develop/iwork/kafo/vue-manage/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9tZW5neS9kZXZlbG9wL2l3b3JrL2thZm8vdnVlLW1hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiKTsKCnZhciBfYXN5bmNUb0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9ob21lL21lbmd5L2RldmVsb3AvaXdvcmsva2Fmby92dWUtbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IiKSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1tYW5hZ2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSk7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL2hvbWUvbWVuZ3kvZGV2ZWxvcC9pd29yay9rYWZvL3Z1ZS1tYW5hZ2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSk7Cgp2YXIgX2Nvb2tpZSA9IHJlcXVpcmUoIkAvdXRpbHMvY29va2llIik7Cgp2YXIgX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIF9kZWZhdWx0KGRlcHMpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIF9kZWZhdWx0KTsKICAgIHRoaXMucHJvdG8gPSBkZXBzLnByb3RvOwogICAgdGhpcy5jbGllbnQgPSBuZXcgZGVwcy5wcm90by5DbXNDbGllbnQoImh0dHA6Ly9sb2NhbGhvc3Q6MTAwMDAiLCBudWxsLCBudWxsKTsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MyLmRlZmF1bHQpKF9kZWZhdWx0LCBbewogICAga2V5OiAibG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2dpbiA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVzZXIsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHJlcTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXEgPSBuZXcgdGhpcy5wcm90by5Mb2dpblJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRFbWFpbCh1c2VyLmVtYWlsLnRyaW0oKSk7CiAgICAgICAgICAgICAgICByZXEuc2V0UGFzc3dvcmQodXNlci5wYXNzd29yZC50cmltKCkpOwogICAgICAgICAgICAgICAgdGhpcy5jbGllbnQubG9naW4ocmVxLCB7fSwgZnVuY3Rpb24gKGVyciwgcmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgICgwLCBfY29va2llLnNldFRva2VuKShyZXNwLmdldEFjY2Vzc1Rva2VuKCkpOwogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3AuZ2V0QWNjZXNzVG9rZW4oKSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2dpbihfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9sb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbG9naW47CiAgICB9KCkKICB9XSk7CiAgcmV0dXJuIF9kZWZhdWx0Owp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/home/mengy/develop/iwork/kafo/vue-manage/src/api/services/login.js"],"names":["deps","proto","client","CmsClient","user","callback","req","LoginRequest","setEmail","email","trim","setPassword","password","login","err","resp","getAccessToken","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;AAGI,oBAAaA,IAAb,EAAmB;AAAA;AACf,SAAKC,KAAL,GAAaD,IAAI,CAACC,KAAlB;AACA,SAAKC,MAAL,GAAc,IAAIF,IAAI,CAACC,KAAL,CAAWE,SAAf,CAAyB,wBAAzB,EAAmD,IAAnD,EAAyD,IAAzD,CAAd;AACH;;;;;0GAEYC,I,EAAMC,Q;;;;;;AACTC,gBAAAA,G,GAAM,IAAI,KAAKL,KAAL,CAAWM,YAAf,E;AACZD,gBAAAA,GAAG,CAACE,QAAJ,CAAaJ,IAAI,CAACK,KAAL,CAAWC,IAAX,EAAb;AACAJ,gBAAAA,GAAG,CAACK,WAAJ,CAAgBP,IAAI,CAACQ,QAAL,CAAcF,IAAd,EAAhB;AACA,qBAAKR,MAAL,CAAYW,KAAZ,CAAkBP,GAAlB,EAAuB,EAAvB,EAA2B,UAACQ,GAAD,EAAMC,IAAN,EAAe;AACtC,sBAAI,CAACD,GAAL,EAAU;AACN,0CAASC,IAAI,CAACC,cAAL,EAAT;AACAX,oBAAAA,QAAQ,CAACU,IAAI,CAACC,cAAL,EAAD,CAAR;AACH,mBAHD,MAGO;AACHC,oBAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACH;AACJ,iBAPD","sourcesContent":["import {setToken, getToken} from '@/utils/cookie'\n\nexport default class {\n    constructor (deps) {\n        this.proto = deps.proto\n        this.client = new deps.proto.CmsClient(\"http://localhost:10000\", null, null)\n    }\n\n    async login (user, callback) {\n        const req = new this.proto.LoginRequest()\n        req.setEmail(user.email.trim())\n        req.setPassword(user.password.trim())\n        this.client.login(req, {}, (err, resp) => {\n            if (!err) {\n                setToken(resp.getAccessToken())\n                callback(resp.getAccessToken())\n            } else {\n                console.log(err)\n            }\n        })\n    }\n\n\n}\n"]}]}